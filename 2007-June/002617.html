<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r21351 - in haiku/trunk:	headers/private/opengl/GL/internal	src/add-ons/opengl/mesa_software_renderer	src/kits/opengl/mesa src/kits/opengl/mesa/array_cache	src/kits/opengl/mesa/drivers/common	src/kits/opengl/mesa/glapi src/kits/opengl/mesa/main	src/kits/opengl/mesa/shader src/kits/opengl/mesa/shader/grammar	src/kits/opengl/mesa/shader/slang	src/kits/opengl/mesa/shader/slang/library	src/kits/opengl/mesa/sparc src/kits/opengl/mesa/swrast	src/kits/opengl/mesa/swrast_setup src/kits/opengl/mesa/tnl	src/kits/opengl/mesa/tnl_dd src/kits/opengl/mesa/vbo	src/kits/opengl/mesa/x86 src/kits/opengl/mesa/x86-64
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-June/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r21351%20-%20in%20haiku/trunk%3A%0A%09headers/private/opengl/GL/internal%0A%09src/add-ons/opengl/mesa_software_renderer%0A%09src/kits/opengl/mesa%20src/kits/opengl/mesa/array_cache%0A%09src/kits/opengl/mesa/drivers/common%0A%09src/kits/opengl/mesa/glapi%20src/kits/opengl/mesa/main%0A%09src/kits/opengl/mesa/shader%20src/kits/opengl/mesa/shader/grammar%0A%09src/kits/opengl/mesa/shader/slang%0A%09src/kits/opengl/mesa/shader/slang/library%0A%09src/kits/opengl/mesa/sparc%20src/kits/opengl/mesa/swrast%0A%09src/kits/opengl/mesa/swrast_setup%20src/kits/opengl/mesa/tnl%0A%09src/kits/opengl/mesa/tnl_dd%20src/kits/opengl/mesa/vbo%0A%09src/kits/opengl/mesa/x86%20src/kits/opengl/mesa/x86-64&In-Reply-To=%3C200706082301.l58N1HrH004050%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002616.html">
   <LINK REL="Next"  HREF="002618.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r21351 - in haiku/trunk:	headers/private/opengl/GL/internal	src/add-ons/opengl/mesa_software_renderer	src/kits/opengl/mesa src/kits/opengl/mesa/array_cache	src/kits/opengl/mesa/drivers/common	src/kits/opengl/mesa/glapi src/kits/opengl/mesa/main	src/kits/opengl/mesa/shader src/kits/opengl/mesa/shader/grammar	src/kits/opengl/mesa/shader/slang	src/kits/opengl/mesa/shader/slang/library	src/kits/opengl/mesa/sparc src/kits/opengl/mesa/swrast	src/kits/opengl/mesa/swrast_setup src/kits/opengl/mesa/tnl	src/kits/opengl/mesa/tnl_dd src/kits/opengl/mesa/vbo	src/kits/opengl/mesa/x86 src/kits/opengl/mesa/x86-64</H1>
    <B>korli at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r21351%20-%20in%20haiku/trunk%3A%0A%09headers/private/opengl/GL/internal%0A%09src/add-ons/opengl/mesa_software_renderer%0A%09src/kits/opengl/mesa%20src/kits/opengl/mesa/array_cache%0A%09src/kits/opengl/mesa/drivers/common%0A%09src/kits/opengl/mesa/glapi%20src/kits/opengl/mesa/main%0A%09src/kits/opengl/mesa/shader%20src/kits/opengl/mesa/shader/grammar%0A%09src/kits/opengl/mesa/shader/slang%0A%09src/kits/opengl/mesa/shader/slang/library%0A%09src/kits/opengl/mesa/sparc%20src/kits/opengl/mesa/swrast%0A%09src/kits/opengl/mesa/swrast_setup%20src/kits/opengl/mesa/tnl%0A%09src/kits/opengl/mesa/tnl_dd%20src/kits/opengl/mesa/vbo%0A%09src/kits/opengl/mesa/x86%20src/kits/opengl/mesa/x86-64&In-Reply-To=%3C200706082301.l58N1HrH004050%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r21351 - in haiku/trunk:	headers/private/opengl/GL/internal	src/add-ons/opengl/mesa_software_renderer	src/kits/opengl/mesa src/kits/opengl/mesa/array_cache	src/kits/opengl/mesa/drivers/common	src/kits/opengl/mesa/glapi src/kits/opengl/mesa/main	src/kits/opengl/mesa/shader src/kits/opengl/mesa/shader/grammar	src/kits/opengl/mesa/shader/slang	src/kits/opengl/mesa/shader/slang/library	src/kits/opengl/mesa/sparc src/kits/opengl/mesa/swrast	src/kits/opengl/mesa/swrast_setup src/kits/opengl/mesa/tnl	src/kits/opengl/mesa/tnl_dd src/kits/opengl/mesa/vbo	src/kits/opengl/mesa/x86 src/kits/opengl/mesa/x86-64">korli at mail.berlios.de
       </A><BR>
    <I>Sat Jun  9 01:01:17 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002616.html">[Haiku-commits] r21350 - in	haiku/trunk/src/system/libroot/posix/glibc/arch: generic ppc x86
</A></li>
        <LI>Next message: <A HREF="002618.html">[Haiku-commits] r21352 - haiku/trunk/headers/os/opengl/GL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2617">[ date ]</a>
              <a href="thread.html#2617">[ thread ]</a>
              <a href="subject.html#2617">[ subject ]</a>
              <a href="author.html#2617">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: korli
Date: 2007-06-09 01:00:44 +0200 (Sat, 09 Jun 2007)
New Revision: 21351
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=21351&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=21351&amp;view=rev</A>

Added:
   haiku/trunk/src/kits/opengl/mesa/main/queryobj.c
   haiku/trunk/src/kits/opengl/mesa/main/queryobj.h
   haiku/trunk/src/kits/opengl/mesa/main/shaders.c
   haiku/trunk/src/kits/opengl/mesa/main/shaders.h
   haiku/trunk/src/kits/opengl/mesa/shader/prog_debug.c
   haiku/trunk/src/kits/opengl/mesa/shader/prog_debug.h
   haiku/trunk/src/kits/opengl/mesa/shader/prog_execute.c
   haiku/trunk/src/kits/opengl/mesa/shader/prog_execute.h
   haiku/trunk/src/kits/opengl/mesa/shader/prog_instruction.c
   haiku/trunk/src/kits/opengl/mesa/shader/prog_instruction.h
   haiku/trunk/src/kits/opengl/mesa/shader/prog_parameter.c
   haiku/trunk/src/kits/opengl/mesa/shader/prog_parameter.h
   haiku/trunk/src/kits/opengl/mesa/shader/prog_print.c
   haiku/trunk/src/kits/opengl/mesa/shader/prog_print.h
   haiku/trunk/src/kits/opengl/mesa/shader/prog_statevars.c
   haiku/trunk/src/kits/opengl/mesa/shader/prog_statevars.h
   haiku/trunk/src/kits/opengl/mesa/shader/shader_api.c
   haiku/trunk/src/kits/opengl/mesa/shader/shader_api.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/library/slang_120_core_gc.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/library/slang_builtin_120_common_gc.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/library/slang_builtin_120_fragment_gc.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/library/slang_version_syn.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_builtin.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_builtin.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_codegen.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_codegen.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_emit.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_emit.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_ir.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_ir.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_label.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_label.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_log.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_log.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_mem.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_mem.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_print.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_print.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_simplify.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_simplify.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_typeinfo.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_typeinfo.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_vartable.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_vartable.h
   haiku/trunk/src/kits/opengl/mesa/swrast/s_fragprog.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_fragprog.h
   haiku/trunk/src/kits/opengl/mesa/tnl/t_draw.c
   haiku/trunk/src/kits/opengl/mesa/vbo/
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo.h
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_attrib.h
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_attrib_tmp.h
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_context.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_context.h
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_exec.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_exec.h
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_exec_api.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_exec_array.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_exec_draw.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_exec_eval.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_rebase.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_save.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_save.h
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_save_api.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_save_draw.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_save_loopback.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_split.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_split.h
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_split_copy.c
   haiku/trunk/src/kits/opengl/mesa/vbo/vbo_split_inplace.c
Removed:
   haiku/trunk/src/kits/opengl/mesa/array_cache/ac_context.c
   haiku/trunk/src/kits/opengl/mesa/array_cache/ac_context.h
   haiku/trunk/src/kits/opengl/mesa/array_cache/ac_import.c
   haiku/trunk/src/kits/opengl/mesa/array_cache/acache.h
   haiku/trunk/src/kits/opengl/mesa/main/occlude.c
   haiku/trunk/src/kits/opengl/mesa/main/occlude.h
   haiku/trunk/src/kits/opengl/mesa/shader/grammar/descrip.mms
   haiku/trunk/src/kits/opengl/mesa/shader/grammar/sources
   haiku/trunk/src/kits/opengl/mesa/shader/nvvertexec.c
   haiku/trunk/src/kits/opengl/mesa/shader/nvvertexec.h
   haiku/trunk/src/kits/opengl/mesa/shader/program_instruction.h
   haiku/trunk/src/kits/opengl/mesa/shader/shaderobjects.c
   haiku/trunk/src/kits/opengl/mesa/shader/shaderobjects.h
   haiku/trunk/src/kits/opengl/mesa/shader/shaderobjects_3dlabs.c
   haiku/trunk/src/kits/opengl/mesa/shader/shaderobjects_3dlabs.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/descrip.mms
   haiku/trunk/src/kits/opengl/mesa/shader/slang/library/slang_builtin_vec4_gc.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_analyse.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_analyse.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_assemble.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_assemble.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_assemble_assignment.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_assemble_assignment.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_assemble_conditional.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_assemble_conditional.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_assemble_constructor.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_assemble_constructor.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_assemble_typeinfo.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_assemble_typeinfo.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_execute.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_execute.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_execute_x86.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_export.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_export.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_library_texsample.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_library_texsample.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_mesa.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/sources
   haiku/trunk/src/kits/opengl/mesa/shader/slang/traverse_wrap.h
   haiku/trunk/src/kits/opengl/mesa/swrast/s_arbshader.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_arbshader.h
   haiku/trunk/src/kits/opengl/mesa/swrast/s_nvfragprog.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_nvfragprog.h
   haiku/trunk/src/kits/opengl/mesa/tnl/t_array_api.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_array_api.h
   haiku/trunk/src/kits/opengl/mesa/tnl/t_array_import.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_array_import.h
   haiku/trunk/src/kits/opengl/mesa/tnl/t_save_api.h
   haiku/trunk/src/kits/opengl/mesa/tnl/t_save_loopback.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_save_playback.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_arbprogram.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_arbprogram.h
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_arbprogram_sse.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_arbshader.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vtx_api.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vtx_api.h
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vtx_eval.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vtx_exec.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vtx_generic.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vtx_x86.c
Modified:
   haiku/trunk/headers/private/opengl/GL/internal/glcore.h
   haiku/trunk/src/add-ons/opengl/mesa_software_renderer/MesaSoftwareRenderer.cpp
   haiku/trunk/src/kits/opengl/mesa/Jamfile
   haiku/trunk/src/kits/opengl/mesa/drivers/common/driverfuncs.c
   haiku/trunk/src/kits/opengl/mesa/drivers/common/driverfuncs.h
   haiku/trunk/src/kits/opengl/mesa/glapi/glapi.c
   haiku/trunk/src/kits/opengl/mesa/glapi/glapitable.h
   haiku/trunk/src/kits/opengl/mesa/glapi/glapitemp.h
   haiku/trunk/src/kits/opengl/mesa/glapi/glprocs.h
   haiku/trunk/src/kits/opengl/mesa/main/api_loopback.c
   haiku/trunk/src/kits/opengl/mesa/main/api_noop.c
   haiku/trunk/src/kits/opengl/mesa/main/arrayobj.c
   haiku/trunk/src/kits/opengl/mesa/main/attrib.c
   haiku/trunk/src/kits/opengl/mesa/main/bufferobj.c
   haiku/trunk/src/kits/opengl/mesa/main/buffers.c
   haiku/trunk/src/kits/opengl/mesa/main/colortab.c
   haiku/trunk/src/kits/opengl/mesa/main/config.h
   haiku/trunk/src/kits/opengl/mesa/main/context.c
   haiku/trunk/src/kits/opengl/mesa/main/context.h
   haiku/trunk/src/kits/opengl/mesa/main/dd.h
   haiku/trunk/src/kits/opengl/mesa/main/dlist.c
   haiku/trunk/src/kits/opengl/mesa/main/enable.c
   haiku/trunk/src/kits/opengl/mesa/main/enums.c
   haiku/trunk/src/kits/opengl/mesa/main/execmem.c
   haiku/trunk/src/kits/opengl/mesa/main/extensions.c
   haiku/trunk/src/kits/opengl/mesa/main/fbobject.c
   haiku/trunk/src/kits/opengl/mesa/main/framebuffer.c
   haiku/trunk/src/kits/opengl/mesa/main/framebuffer.h
   haiku/trunk/src/kits/opengl/mesa/main/get.c
   haiku/trunk/src/kits/opengl/mesa/main/getstring.c
   haiku/trunk/src/kits/opengl/mesa/main/glheader.h
   haiku/trunk/src/kits/opengl/mesa/main/image.c
   haiku/trunk/src/kits/opengl/mesa/main/imports.c
   haiku/trunk/src/kits/opengl/mesa/main/imports.h
   haiku/trunk/src/kits/opengl/mesa/main/light.c
   haiku/trunk/src/kits/opengl/mesa/main/light.h
   haiku/trunk/src/kits/opengl/mesa/main/lines.c
   haiku/trunk/src/kits/opengl/mesa/main/matrix.c
   haiku/trunk/src/kits/opengl/mesa/main/mipmap.c
   haiku/trunk/src/kits/opengl/mesa/main/mtypes.h
   haiku/trunk/src/kits/opengl/mesa/main/pixel.c
   haiku/trunk/src/kits/opengl/mesa/main/points.c
   haiku/trunk/src/kits/opengl/mesa/main/points.h
   haiku/trunk/src/kits/opengl/mesa/main/polygon.c
   haiku/trunk/src/kits/opengl/mesa/main/polygon.h
   haiku/trunk/src/kits/opengl/mesa/main/rastpos.c
   haiku/trunk/src/kits/opengl/mesa/main/rbadaptors.c
   haiku/trunk/src/kits/opengl/mesa/main/renderbuffer.c
   haiku/trunk/src/kits/opengl/mesa/main/renderbuffer.h
   haiku/trunk/src/kits/opengl/mesa/main/state.c
   haiku/trunk/src/kits/opengl/mesa/main/stencil.c
   haiku/trunk/src/kits/opengl/mesa/main/texcompress_fxt1.c
   haiku/trunk/src/kits/opengl/mesa/main/texcompress_s3tc.c
   haiku/trunk/src/kits/opengl/mesa/main/texenvprogram.c
   haiku/trunk/src/kits/opengl/mesa/main/teximage.c
   haiku/trunk/src/kits/opengl/mesa/main/texobj.c
   haiku/trunk/src/kits/opengl/mesa/main/texrender.c
   haiku/trunk/src/kits/opengl/mesa/main/texstate.c
   haiku/trunk/src/kits/opengl/mesa/main/texstore.c
   haiku/trunk/src/kits/opengl/mesa/main/texstore.h
   haiku/trunk/src/kits/opengl/mesa/main/varray.c
   haiku/trunk/src/kits/opengl/mesa/main/version.h
   haiku/trunk/src/kits/opengl/mesa/shader/arbprogparse.c
   haiku/trunk/src/kits/opengl/mesa/shader/arbprogram.c
   haiku/trunk/src/kits/opengl/mesa/shader/grammar/grammar.c
   haiku/trunk/src/kits/opengl/mesa/shader/nvfragparse.c
   haiku/trunk/src/kits/opengl/mesa/shader/nvprogram.c
   haiku/trunk/src/kits/opengl/mesa/shader/nvvertparse.c
   haiku/trunk/src/kits/opengl/mesa/shader/program.c
   haiku/trunk/src/kits/opengl/mesa/shader/program.h
   haiku/trunk/src/kits/opengl/mesa/shader/programopt.c
   haiku/trunk/src/kits/opengl/mesa/shader/programopt.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/library/gc_to_bin.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/library/slang_common_builtin_gc.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/library/slang_core_gc.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/library/slang_fragment_builtin_gc.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/library/slang_shader_syn.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/library/slang_vertex_builtin_gc.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_compile.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_compile.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_compile_function.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_compile_function.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_compile_operation.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_compile_operation.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_compile_struct.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_compile_variable.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_compile_variable.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_library_noise.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_link.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_link.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_preprocess.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_preprocess.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_storage.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_storage.h
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_utility.c
   haiku/trunk/src/kits/opengl/mesa/shader/slang/slang_utility.h
   haiku/trunk/src/kits/opengl/mesa/sparc/glapi_sparc.S
   haiku/trunk/src/kits/opengl/mesa/swrast/s_aaline.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_aalinetemp.h
   haiku/trunk/src/kits/opengl/mesa/swrast/s_aatriangle.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_aatritemp.h
   haiku/trunk/src/kits/opengl/mesa/swrast/s_accum.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_alpha.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_atifragshader.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_bitmap.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_buffers.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_context.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_context.h
   haiku/trunk/src/kits/opengl/mesa/swrast/s_copypix.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_depth.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_drawpix.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_feedback.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_fog.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_lines.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_linetemp.h
   haiku/trunk/src/kits/opengl/mesa/swrast/s_logic.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_masking.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_points.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_pointtemp.h
   haiku/trunk/src/kits/opengl/mesa/swrast/s_readpix.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_span.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_span.h
   haiku/trunk/src/kits/opengl/mesa/swrast/s_stencil.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_texcombine.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_texfilter.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_triangle.c
   haiku/trunk/src/kits/opengl/mesa/swrast/s_tritemp.h
   haiku/trunk/src/kits/opengl/mesa/swrast/s_zoom.c
   haiku/trunk/src/kits/opengl/mesa/swrast/swrast.h
   haiku/trunk/src/kits/opengl/mesa/swrast_setup/ss_context.c
   haiku/trunk/src/kits/opengl/mesa/swrast_setup/ss_triangle.c
   haiku/trunk/src/kits/opengl/mesa/swrast_setup/ss_tritmp.h
   haiku/trunk/src/kits/opengl/mesa/tnl/t_context.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_context.h
   haiku/trunk/src/kits/opengl/mesa/tnl/t_pipeline.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_pipeline.h
   haiku/trunk/src/kits/opengl/mesa/tnl/t_save_api.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_cull.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_fog.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_light.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_normals.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_points.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_program.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_render.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_rendertmp.h
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_texgen.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_texmat.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vb_vertex.c
   haiku/trunk/src/kits/opengl/mesa/tnl/t_vp_build.c
   haiku/trunk/src/kits/opengl/mesa/tnl/tnl.h
   haiku/trunk/src/kits/opengl/mesa/tnl_dd/t_dd_vb.c
   haiku/trunk/src/kits/opengl/mesa/x86-64/glapi_x86-64.S
   haiku/trunk/src/kits/opengl/mesa/x86-64/matypes.h
   haiku/trunk/src/kits/opengl/mesa/x86/common_x86.c
   haiku/trunk/src/kits/opengl/mesa/x86/glapi_x86.S
   haiku/trunk/src/kits/opengl/mesa/x86/matypes.h
   haiku/trunk/src/kits/opengl/mesa/x86/mmx_blend.S
   haiku/trunk/src/kits/opengl/mesa/x86/read_rgba_span_x86.S
Log:
updated mesa to 6.5.3


Modified: haiku/trunk/headers/private/opengl/GL/internal/glcore.h
===================================================================
--- haiku/trunk/headers/private/opengl/GL/internal/glcore.h	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/headers/private/opengl/GL/internal/glcore.h	2007-06-08 23:00:44 UTC (rev 21351)
@@ -38,17 +38,11 @@
 
 #include &lt;sys/types.h&gt;
 
-#ifdef CAPI
-#undef CAPI
-#endif
-#define CAPI
-
 #define GL_CORE_SGI  1
 #define GL_CORE_MESA 2
 #define GL_CORE_APPLE 4
 
 typedef struct __GLcontextRec __GLcontext;
-typedef struct __GLinterfaceRec __GLinterface;
 
 /*
 ** This file defines the interface between the GL core and the surrounding
@@ -186,334 +180,4 @@
 #define GLX_TEXTURE_2D_BIT_EXT             0x00000002
 #define GLX_TEXTURE_RECTANGLE_BIT_EXT      0x00000004
 
-
-/************************************************************************/
-
-/*
-** Structure used for allocating and freeing drawable private memory.
-** (like software buffers, for example).
-**
-** The memory allocation routines are provided by the surrounding
-** &quot;operating system&quot; code, and they are to be used for allocating
-** software buffers and things which are associated with the drawable,
-** and used by any context which draws to that drawable.  There are
-** separate memory allocation functions for drawables and contexts
-** since drawables and contexts can be created and destroyed independently
-** of one another, and the &quot;operating system&quot; may want to use separate
-** allocation arenas for each.
-**
-** The freePrivate function is filled in by the core routines when they
-** allocates software buffers, and stick them in &quot;private&quot;.  The freePrivate
-** function will destroy anything allocated to this drawable (to be called
-** when the drawable is destroyed).
-*/
-typedef struct __GLdrawableRegionRec __GLdrawableRegion;
-typedef struct __GLdrawableBufferRec __GLdrawableBuffer;
-typedef struct __GLdrawablePrivateRec __GLdrawablePrivate;
-
-typedef struct __GLregionRectRec {
-    /* lower left (inside the rectangle) */
-    GLint x0, y0;
-    /* upper right (outside the rectangle) */
-    GLint x1, y1;
-} __GLregionRect;
-
-struct __GLdrawableRegionRec {
-    GLint numRects;
-    __GLregionRect *rects;
-    __GLregionRect boundingRect;
-};
-
-/************************************************************************/
-
-/* masks for the buffers */
-#define __GL_FRONT_BUFFER_MASK		0x00000001
-#define	__GL_FRONT_LEFT_BUFFER_MASK	0x00000001
-#define	__GL_FRONT_RIGHT_BUFFER_MASK	0x00000002
-#define	__GL_BACK_BUFFER_MASK		0x00000004
-#define __GL_BACK_LEFT_BUFFER_MASK	0x00000004
-#define __GL_BACK_RIGHT_BUFFER_MASK	0x00000008
-#define	__GL_ACCUM_BUFFER_MASK		0x00000010
-#define	__GL_DEPTH_BUFFER_MASK		0x00000020
-#define	__GL_STENCIL_BUFFER_MASK	0x00000040
-#define	__GL_AUX_BUFFER_MASK(i)		(0x0000080 &lt;&lt; (i))
-
-#define __GL_ALL_BUFFER_MASK		0xffffffff
-
-/* what Resize routines return if resize resorted to fallback case */
-#define __GL_BUFFER_FALLBACK	0x10
-
-typedef void (*__GLbufFallbackInitFn)(__GLdrawableBuffer *buf, 
-				      __GLdrawablePrivate *glPriv, GLint bits);
-typedef void (*__GLbufMainInitFn)(__GLdrawableBuffer *buf, 
-				  __GLdrawablePrivate *glPriv, GLint bits,
-				  __GLbufFallbackInitFn back);
-
-/*
-** A drawable buffer
-**
-** This data structure describes the context side of a drawable.  
-**
-** According to the spec there could be multiple contexts bound to the same
-** drawable at the same time (from different threads).  In order to avoid
-** multiple-access conflicts, locks are used to serialize access.  When a
-** thread needs to access (read or write) a member of the drawable, it takes
-** a lock first.  Some of the entries in the drawable are treated &quot;mostly
-** constant&quot;, so we take the freedom of allowing access to them without
-** taking a lock (for optimization reasons).
-**
-** For more details regarding locking, see buffers.h in the GL core
-*/
-struct __GLdrawableBufferRec {
-    /*
-    ** Buffer dimensions
-    */
-    GLint width, height, depth;
-
-    /*
-    ** Framebuffer base address
-    */
-    void *base;
-
-    /*
-    ** Framebuffer size (in bytes)
-    */
-    GLuint size;
-
-    /*
-    ** Size (in bytes) of each element in the framebuffer
-    */
-    GLuint elementSize;
-    GLuint elementSizeLog2;
-
-    /*
-    ** Element skip from one scanline to the next.
-    ** If the buffer is part of another buffer (for example, fullscreen
-    ** front buffer), outerWidth is the width of that buffer.
-    */
-    GLint outerWidth;
-
-    /*
-    ** outerWidth * elementSize
-    */
-    GLint byteWidth;
-
-    /*
-    ** Allocation/deallocation is done based on this handle.  A handle
-    ** is conceptually different from the framebuffer 'base'.
-    */
-    void *handle;
-
-    /* imported */
-    GLboolean (*resize)(__GLdrawableBuffer *buf,
-			GLint x, GLint y, GLuint width, GLuint height, 
-			__GLdrawablePrivate *glPriv, GLuint bufferMask);
-    void (*lock)(__GLdrawableBuffer *buf, __GLdrawablePrivate *glPriv);
-    void (*unlock)(__GLdrawableBuffer *buf, __GLdrawablePrivate *glPriv);
-    void (*fill)(__GLdrawableBuffer *buf, __GLdrawablePrivate *glPriv,
-    		GLuint val, GLint x, GLint y, GLint w, GLint h);
-    void (*free)(__GLdrawableBuffer *buf, __GLdrawablePrivate *glPriv);
-
-    /* exported */
-    void (*freePrivate)(__GLdrawableBuffer *buf, __GLdrawablePrivate *glPriv);
-#ifdef __cplusplus
-    void *privatePtr;
-#else
-    void *private;
-#endif
-
-    /* private */
-    void *other;	/* implementation private data */
-    __GLbufMainInitFn mainInit;
-    __GLbufFallbackInitFn fallbackInit;
-};
-
-/*
-** The context side of the drawable private
-*/
-struct __GLdrawablePrivateRec {
-    /*
-    ** Drawable Modes
-    */
-    __GLcontextModes *modes;
-
-    /*
-    ** Drawable size
-    */
-    GLuint width, height;
-
-    /*
-    ** Origin in screen coordinates of the drawable
-    */
-    GLint xOrigin, yOrigin;
-#ifdef __GL_ALIGNED_BUFFERS
-    /*
-    ** Drawable offset from screen origin
-    */
-    GLint xOffset, yOffset;
-
-    /*
-    ** Alignment restriction
-    */
-    GLint xAlignment, yAlignment;
-#endif
-    /*
-    ** Should we invert the y axis?
-    */
-    GLint yInverted;
-
-    /*
-    ** Mask specifying which buffers are renderable by the hw
-    */
-    GLuint accelBufferMask;
-
-    /*
-    ** the buffers themselves
-    */
-    __GLdrawableBuffer frontBuffer;
-    __GLdrawableBuffer backBuffer;
-    __GLdrawableBuffer accumBuffer;
-    __GLdrawableBuffer depthBuffer;
-    __GLdrawableBuffer stencilBuffer;
-#if defined(__GL_NUMBER_OF_AUX_BUFFERS) &amp;&amp; (__GL_NUMBER_OF_AUX_BUFFERS &gt; 0)
-    __GLdrawableBuffer *auxBuffer;
-#endif
-
-    __GLdrawableRegion ownershipRegion;
-
-    /*
-    ** Lock for the drawable private structure
-    */
-    void *lock;
-#ifdef DEBUG
-    /* lock debugging info */
-    int lockRefCount;
-    int lockLine[10];
-    char *lockFile[10];
-#endif
-
-    /* imported */
-    void *(*malloc)(size_t size);
-    void *(*calloc)(size_t numElem, size_t elemSize);
-    void *(*realloc)(void *oldAddr, size_t newSize);
-    void (*free)(void *addr);
-
-    GLboolean (*addSwapRect)(__GLdrawablePrivate *glPriv, 
-			     GLint x, GLint y, GLsizei width, GLsizei height);
-    void (*setClipRect)(__GLdrawablePrivate *glPriv, 
-			GLint x, GLint y, GLsizei width, GLsizei height);
-    void (*updateClipRegion)(__GLdrawablePrivate *glPriv);
-    GLboolean (*resize)(__GLdrawablePrivate *glPriv);
-    void (*getDrawableSize)(__GLdrawablePrivate *glPriv, 
-			    GLint *x, GLint *y, GLuint *width, GLuint *height);
-
-    void (*lockDP)(__GLdrawablePrivate *glPriv, __GLcontext *gc);
-    void (*unlockDP)(__GLdrawablePrivate *glPriv);
-
-    /* exported */
-#ifdef __cplusplus
-    void *privatePtr;
-#else
-    void *private;
-#endif
-    void (*freePrivate)(__GLdrawablePrivate *);
-
-    /* client data */
-    void *other;
-};
-
-/*
-** Macros to lock/unlock the drawable private
-*/
-#if defined(DEBUG)
-#define __GL_LOCK_DP(glPriv,gc) \
-    (*(glPriv)-&gt;lockDP)(glPriv,gc); \
-    (glPriv)-&gt;lockLine[(glPriv)-&gt;lockRefCount] = __LINE__; \
-    (glPriv)-&gt;lockFile[(glPriv)-&gt;lockRefCount] = __FILE__; \
-    (glPriv)-&gt;lockRefCount++
-#define __GL_UNLOCK_DP(glPriv) \
-    (glPriv)-&gt;lockRefCount--; \
-    (glPriv)-&gt;lockLine[(glPriv)-&gt;lockRefCount] = 0; \
-    (glPriv)-&gt;lockFile[(glPriv)-&gt;lockRefCount] = NULL; \
-    (*(glPriv)-&gt;unlockDP)(glPriv)
-#else /* DEBUG */
-#define __GL_LOCK_DP(glPriv,gc)		(*(glPriv)-&gt;lockDP)(glPriv,gc)
-#define	__GL_UNLOCK_DP(glPriv)		(*(glPriv)-&gt;unlockDP)(glPriv)
-#endif /* DEBUG */
-
-
-/*
-** Procedures which are imported by the GL from the surrounding
-** &quot;operating system&quot;.  Math functions are not considered part of the
-** &quot;operating system&quot;.
-*/
-typedef struct __GLimportsRec {
-    /* Memory management */
-    void * (*malloc)(__GLcontext *gc, size_t size);
-    void *(*calloc)(__GLcontext *gc, size_t numElem, size_t elemSize);
-    void *(*realloc)(__GLcontext *gc, void *oldAddr, size_t newSize);
-    void (*free)(__GLcontext *gc, void *addr);
-
-    /* Error handling */
-    void (*warning)(__GLcontext *gc, char *fmt);
-    void (*fatal)(__GLcontext *gc, char *fmt);
-
-    /* other system calls */
-    char *(CAPI *getenv)(__GLcontext *gc, const char *var);
-    int (CAPI *atoi)(__GLcontext *gc, const char *str);
-    int (CAPI *sprintf)(__GLcontext *gc, char *str, const char *fmt, ...);
-    void *(CAPI *fopen)(__GLcontext *gc, const char *path, const char *mode);
-    int (CAPI *fclose)(__GLcontext *gc, void *stream);
-    int (CAPI *fprintf)(__GLcontext *gc, void *stream, const char *fmt, ...);
-
-    /* Drawing surface management */
-    __GLdrawablePrivate *(*getDrawablePrivate)(__GLcontext *gc);
-    __GLdrawablePrivate *(*getReadablePrivate)(__GLcontext *gc);
-
-    /* Operating system dependent data goes here */
-    void *other;
-} __GLimports;
-
-/************************************************************************/
-
-/*
-** Procedures which are exported by the GL to the surrounding &quot;operating
-** system&quot; so that it can manage multiple GL context's.
-*/
-typedef struct __GLexportsRec {
-    /* Context management (return GL_FALSE on failure) */
-    GLboolean (*destroyContext)(__GLcontext *gc);
-    GLboolean (*loseCurrent)(__GLcontext *gc);
-    /* oldglPriv isn't used anymore, kept for backwards compatibility */
-    GLboolean (*makeCurrent)(__GLcontext *gc);
-    GLboolean (*shareContext)(__GLcontext *gc, __GLcontext *gcShare);
-    GLboolean (*copyContext)(__GLcontext *dst, const __GLcontext *src, GLuint mask);
-    GLboolean (*forceCurrent)(__GLcontext *gc);
-
-    /* Drawing surface notification callbacks */
-    GLboolean (*notifyResize)(__GLcontext *gc);
-    void (*notifyDestroy)(__GLcontext *gc);
-    void (*notifySwapBuffers)(__GLcontext *gc);
-
-    /* Dispatch table override control for external agents like libGLS */
-    struct __GLdispatchStateRec* (*dispatchExec)(__GLcontext *gc);
-    void (*beginDispatchOverride)(__GLcontext *gc);
-    void (*endDispatchOverride)(__GLcontext *gc);
-} __GLexports;
-
-/************************************************************************/
-
-/*
-** This must be the first member of a __GLcontext structure.  This is the
-** only part of a context that is exposed to the outside world; everything
-** else is opaque.
-*/
-struct __GLinterfaceRec {
-    __GLimports imports;
-    __GLexports exports;
-};
-
-extern __GLcontext *__glCoreCreateContext(__GLimports *, __GLcontextModes *);
-extern void __glCoreNopDispatch(void);
-
 #endif /* __gl_core_h_ */

Modified: haiku/trunk/src/add-ons/opengl/mesa_software_renderer/MesaSoftwareRenderer.cpp
===================================================================
--- haiku/trunk/src/add-ons/opengl/mesa_software_renderer/MesaSoftwareRenderer.cpp	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/add-ons/opengl/mesa_software_renderer/MesaSoftwareRenderer.cpp	2007-06-08 23:00:44 UTC (rev 21351)
@@ -21,7 +21,6 @@
 #include &lt;Screen.h&gt;
 
 extern &quot;C&quot; {
-#include &quot;array_cache/acache.h&quot;
 #include &quot;extensions.h&quot;
 #include &quot;drivers/common/driverfuncs.h&quot;
 #include &quot;main/colormac.h&quot;
@@ -35,6 +34,7 @@
 #include &quot;tnl/tnl.h&quot;
 #include &quot;tnl/t_context.h&quot;
 #include &quot;tnl/t_pipeline.h&quot;
+#include &quot;vbo/vbo.h&quot;
 
 
 #if defined(USE_X86_ASM)
@@ -55,11 +55,6 @@
 #define BE_BCOMP 0
 #define BE_ACOMP 3
 
-#define PACK_B_RGBA32(color) (color[BCOMP] | (color[GCOMP] &lt;&lt; 8) | \
-							(color[RCOMP] &lt;&lt; 16) | (color[ACOMP] &lt;&lt; 24))
-
-#define PACK_B_RGB32(color) (color[BCOMP] | (color[GCOMP] &lt;&lt; 8) | \
-  							(color[RCOMP] &lt;&lt; 16) | 0xFF000000)
 #else
 // Big Endian B_RGBA32 bitmap format
 #define BE_RCOMP 1
@@ -67,11 +62,6 @@
 #define BE_BCOMP 3
 #define BE_ACOMP 0
 
-#define PACK_B_RGBA32(color) (color[ACOMP] | (color[RCOMP] &lt;&lt; 8) | \
-							(color[GCOMP] &lt;&lt; 16) | (color[BCOMP] &lt;&lt; 24))
-
-#define PACK_B_RGB32(color) ((color[RCOMP] &lt;&lt; 8) | (color[GCOMP] &lt;&lt; 16) | \
-  							(color[BCOMP] &lt;&lt; 24) | 0xFF000000)
 #endif
 
 /**********************************************************************/
@@ -213,7 +203,7 @@
 
 	/* Initialize the software rasterizer and helper modules. */
 	_swrast_CreateContext(fContext);
-	_ac_CreateContext(fContext);
+	_vbo_CreateContext(fContext);
 	_tnl_CreateContext(fContext);
 	_swsetup_CreateContext(fContext);
 	_swsetup_Wakeup(fContext);
@@ -310,7 +300,7 @@
 					fRenderBuffer-&gt;PutMonoValues = put_mono_values_RGB16;
 					break;
 				default:
-					fprintf(stderr, &quot;unsupported screen color space %ld\n&quot;, cs);
+					fprintf(stderr, &quot;unsupported screen color space %d\n&quot;, cs);
 					debugger(&quot;unsupported OpenGL color space&quot;);
 					break;
 			}
@@ -347,9 +337,12 @@
 MesaSoftwareRenderer::SwapBuffers(bool VSync)
 {
 	CALLED();
-	_mesa_notifySwapBuffers(fContext);
-
+	
+	
 	if (fBitmap) {
+		if (fVisual-&gt;doubleBufferMode)
+			_mesa_notifySwapBuffers(fContext);
+
 		if (!fDirectModeEnabled || fInfo == NULL) {
 			GLView()-&gt;LockLooper();
 			GLView()-&gt;DrawBitmap(fBitmap);
@@ -627,7 +620,7 @@
 	CALLED();
 	_swrast_InvalidateState(ctx, new_state);
 	_swsetup_InvalidateState(ctx, new_state);
-	_ac_InvalidateState(ctx, new_state);
+	_vbo_InvalidateState(ctx, new_state);
 	_tnl_InvalidateState(ctx, new_state);
 }
 
@@ -636,6 +629,8 @@
 MesaSoftwareRenderer::RenderbufferStorage(GLcontext *ctx, struct gl_renderbuffer *render,
 	GLenum internalFormat, GLuint width, GLuint height)
 {
+	render-&gt;Width = width;
+	render-&gt;Height = height;
 	return GL_TRUE;
 }
 
@@ -652,3 +647,4 @@
 {
 	fInfo = info;
 }
+

Modified: haiku/trunk/src/kits/opengl/mesa/Jamfile
===================================================================
--- haiku/trunk/src/kits/opengl/mesa/Jamfile	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/kits/opengl/mesa/Jamfile	2007-06-08 23:00:44 UTC (rev 21351)
@@ -21,8 +21,8 @@
 UseHeaders [ FDirName $(SUBDIR) shader slang ] ;
 UseHeaders [ FDirName $(SUBDIR) swrast ] ;
 UseHeaders [ FDirName $(SUBDIR) swrast_setup ] ;
+UseHeaders [ FDirName $(SUBDIR) vbo ] ;
 
-SEARCH_SOURCE += [ FDirName $(SUBDIR) array_cache ] ;
 SEARCH_SOURCE += [ FDirName $(SUBDIR) drivers common ] ;
 SEARCH_SOURCE += [ FDirName $(SUBDIR) glapi ] ;
 SEARCH_SOURCE += [ FDirName $(SUBDIR) main ] ;
@@ -33,6 +33,7 @@
 SEARCH_SOURCE += [ FDirName $(SUBDIR) swrast ] ;
 SEARCH_SOURCE += [ FDirName $(SUBDIR) swrast_setup ] ;
 SEARCH_SOURCE += [ FDirName $(SUBDIR) tnl ] ;
+SEARCH_SOURCE += [ FDirName $(SUBDIR) vbo ] ;
 
 {
 	local defines ;
@@ -83,12 +84,7 @@
 		read_rgba_span_x86.S
 
 		t_vertex_sse.c
-		t_vb_arbprogram_sse.c
-		t_vtx_x86.c
-		t_vtx_x86_gcc.S
 
-		slang_execute_x86.c
-
 		x86sse.c
 		;
 
@@ -158,12 +154,13 @@
 	lines.c
 	matrix.c
 	mipmap.c
-	occlude.c
 	pixel.c
 	points.c
 	polygon.c
+	queryobj.c
 	rastpos.c
 	renderbuffer.c
+	shaders.c
 	state.c
 	stencil.c
 	texcompress.c
@@ -189,20 +186,10 @@
 	m_vector.c
 	m_xform.c
 
-	# array_cache
-	ac_context.c
-	ac_import.c
-
 	# tnl
-	t_array_api.c
-	t_array_import.c
 	t_context.c
+	t_draw.c
 	t_pipeline.c
-	t_save_api.c
-	t_save_loopback.c
-	t_save_playback.c
-	t_vb_arbprogram.c
-	t_vb_arbshader.c
 	t_vb_cull.c
 	t_vb_fog.c
 	t_vb_light.c
@@ -216,17 +203,12 @@
 	t_vp_build.c
 	t_vertex.c
 	t_vertex_generic.c
-	t_vtx_api.c
-	t_vtx_generic.c
-	t_vtx_eval.c
-	t_vtx_exec.c 
 
 	# swrast
 	s_aaline.c
 	s_aatriangle.c
 	s_accum.c
 	s_alpha.c
-	s_arbshader.c
 	s_atifragshader.c
 	s_bitmap.c
 	s_blend.c
@@ -238,11 +220,11 @@
 	s_drawpix.c
 	s_feedback.c
 	s_fog.c
+	s_fragprog.c
 	s_imaging.c
 	s_lines.c
 	s_logic.c
 	s_masking.c
-	s_nvfragprog.c
 	s_points.c
 	s_readpix.c
 	s_span.c
@@ -263,36 +245,57 @@
 	atifragshader.c
 	nvfragparse.c
 	nvprogram.c
-	nvvertexec.c
 	nvvertparse.c
+	prog_execute.c
+	prog_instruction.c
+	prog_parameter.c
+	prog_print.c
+	prog_statevars.c
 	program.c
-	shaderobjects.c
-	shaderobjects_3dlabs.c
+	shader_api.c
 
 	# shader/grammar
 	grammar_mesa.c
 
 	# shader/slang
-	slang_analyse.c
-	slang_assemble.c
-	slang_assemble_assignment.c
-	slang_assemble_conditional.c
-	slang_assemble_constructor.c
-	slang_assemble_typeinfo.c
+	slang_builtin.c
+	slang_codegen.c
 	slang_compile.c
 	slang_compile_function.c
 	slang_compile_operation.c
 	slang_compile_struct.c
 	slang_compile_variable.c
-	slang_execute.c
-	slang_export.c
+	slang_emit.c
+	slang_ir.c
+	slang_label.c
 	slang_library_noise.c
-	slang_library_texsample.c
 	slang_link.c
+	slang_log.c
+	slang_mem.c
 	slang_preprocess.c
+	slang_print.c
+	slang_simplify.c
 	slang_storage.c
+	slang_typeinfo.c
 	slang_utility.c
+	slang_vartable.c
 
+	# vbo
+	vbo_context.c
+	vbo_exec.c
+	vbo_exec_api.c
+	vbo_exec_array.c
+	vbo_exec_draw.c
+	vbo_exec_eval.c
+	vbo_rebase.c
+	vbo_save.c
+	vbo_save_api.c
+	vbo_save_draw.c
+	vbo_save_loopback.c
+	vbo_split.c
+	vbo_split_copy.c
+	vbo_split_inplace.c
+
 	$(arch_sources)
 
 	# glapi

Deleted: haiku/trunk/src/kits/opengl/mesa/array_cache/ac_context.c

Deleted: haiku/trunk/src/kits/opengl/mesa/array_cache/ac_context.h

Deleted: haiku/trunk/src/kits/opengl/mesa/array_cache/ac_import.c

Deleted: haiku/trunk/src/kits/opengl/mesa/array_cache/acache.h

Modified: haiku/trunk/src/kits/opengl/mesa/drivers/common/driverfuncs.c
===================================================================
--- haiku/trunk/src/kits/opengl/mesa/drivers/common/driverfuncs.c	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/kits/opengl/mesa/drivers/common/driverfuncs.c	2007-06-08 23:00:44 UTC (rev 21351)
@@ -1,8 +1,8 @@
 /*
  * Mesa 3-D graphics library
- * Version:  6.5
+ * Version:  6.5.3
  *
- * Copyright (C) 1999-2005  Brian Paul   All Rights Reserved.
+ * Copyright (C) 1999-2007  Brian Paul   All Rights Reserved.
  *
  * Permission is hereby granted, free of charge, to any person obtaining a
  * copy of this software and associated documentation files (the &quot;Software&quot;),
@@ -28,8 +28,9 @@
 #include &quot;buffers.h&quot;
 #include &quot;context.h&quot;
 #include &quot;framebuffer.h&quot;
-#include &quot;occlude.h&quot;
 #include &quot;program.h&quot;
+#include &quot;prog_execute.h&quot;
+#include &quot;queryobj.h&quot;
 #include &quot;renderbuffer.h&quot;
 #include &quot;texcompress.h&quot;
 #include &quot;texformat.h&quot;
@@ -43,6 +44,7 @@
 #include &quot;fbobject.h&quot;
 #include &quot;texrender.h&quot;
 #endif
+#include &quot;shader_api.h&quot;
 #include &quot;arrayobj.h&quot;
 
 #include &quot;driverfuncs.h&quot;
@@ -127,7 +129,7 @@
    driver-&gt;NewProgram = _mesa_new_program;
    driver-&gt;DeleteProgram = _mesa_delete_program;
 #if FEATURE_MESA_program_debug
-   driver-&gt;GetFragmentProgramRegister = _swrast_get_program_register;
+   driver-&gt;GetProgramRegister = _mesa_get_program_register;
 #endif /* FEATURE_MESA_program_debug */
 
    /* simple state commands */
@@ -248,4 +250,45 @@
    driver-&gt;EndList = NULL;
    driver-&gt;BeginCallList = NULL;
    driver-&gt;EndCallList = NULL;
+
+
+   /* XXX temporary here */
+   _mesa_init_glsl_driver_functions(driver);
 }
+
+
+/**
+ * Plug in Mesa's GLSL functions.
+ */
+void
+_mesa_init_glsl_driver_functions(struct dd_function_table *driver)
+{
+   driver-&gt;AttachShader = _mesa_attach_shader;
+   driver-&gt;BindAttribLocation = _mesa_bind_attrib_location;
+   driver-&gt;CompileShader = _mesa_compile_shader;
+   driver-&gt;CreateProgram = _mesa_create_program;
+   driver-&gt;CreateShader = _mesa_create_shader;
+   driver-&gt;DeleteProgram2 = _mesa_delete_program2;
+   driver-&gt;DeleteShader = _mesa_delete_shader;
+   driver-&gt;DetachShader = _mesa_detach_shader;
+   driver-&gt;GetActiveAttrib = _mesa_get_active_attrib;
+   driver-&gt;GetActiveUniform = _mesa_get_active_uniform;
+   driver-&gt;GetAttachedShaders = _mesa_get_attached_shaders;
+   driver-&gt;GetAttribLocation = _mesa_get_attrib_location;
+   driver-&gt;GetHandle = _mesa_get_handle;
+   driver-&gt;GetProgramiv = _mesa_get_programiv;
+   driver-&gt;GetProgramInfoLog = _mesa_get_program_info_log;
+   driver-&gt;GetShaderiv = _mesa_get_shaderiv;
+   driver-&gt;GetShaderInfoLog = _mesa_get_shader_info_log;
+   driver-&gt;GetShaderSource = _mesa_get_shader_source;
+   driver-&gt;GetUniformfv = _mesa_get_uniformfv;
+   driver-&gt;GetUniformLocation = _mesa_get_uniform_location;
+   driver-&gt;IsProgram = _mesa_is_program;
+   driver-&gt;IsShader = _mesa_is_shader;
+   driver-&gt;LinkProgram = _mesa_link_program;
+   driver-&gt;ShaderSource = _mesa_shader_source;
+   driver-&gt;Uniform = _mesa_uniform;
+   driver-&gt;UniformMatrix = _mesa_uniform_matrix;
+   driver-&gt;UseProgram = _mesa_use_program;
+   driver-&gt;ValidateProgram = _mesa_validate_program;
+}

Modified: haiku/trunk/src/kits/opengl/mesa/drivers/common/driverfuncs.h
===================================================================
--- haiku/trunk/src/kits/opengl/mesa/drivers/common/driverfuncs.h	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/kits/opengl/mesa/drivers/common/driverfuncs.h	2007-06-08 23:00:44 UTC (rev 21351)
@@ -1,8 +1,8 @@
 /*
  * Mesa 3-D graphics library
- * Version:  6.1
+ * Version:  6.5.3
  *
- * Copyright (C) 1999-2004  Brian Paul   All Rights Reserved.
+ * Copyright (C) 1999-2007  Brian Paul   All Rights Reserved.
  *
  * Permission is hereby granted, free of charge, to any person obtaining a
  * copy of this software and associated documentation files (the &quot;Software&quot;),
@@ -29,4 +29,8 @@
 extern void
 _mesa_init_driver_functions(struct dd_function_table *driver);
 
+
+extern void
+_mesa_init_glsl_driver_functions(struct dd_function_table *driver);
+
 #endif

Modified: haiku/trunk/src/kits/opengl/mesa/glapi/glapi.c
===================================================================
--- haiku/trunk/src/kits/opengl/mesa/glapi/glapi.c	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/kits/opengl/mesa/glapi/glapi.c	2007-06-08 23:00:44 UTC (rev 21351)
@@ -240,6 +240,7 @@
       else if (knownID != _glthread_GetID()) {
          ThreadSafe = GL_TRUE;
          _glapi_set_dispatch(NULL);
+         _glapi_set_context(NULL);
       }
    }
    else if (!_glapi_get_dispatch()) {
@@ -1003,7 +1004,6 @@
       GLuint offset = (secondaryColor3fFunc - (char *) table) / sizeof(void *);
       assert(secondaryColor3fOffset == _gloffset_SecondaryColor3fEXT);
       assert(secondaryColor3fOffset == offset);
-      assert(_glapi_get_proc_address(&quot;glSecondaryColor3fEXT&quot;) == (_glapi_proc) &amp;glSecondaryColor3fEXT);
    }
    {
       GLuint pointParameterivOffset = _glapi_get_proc_offset(&quot;glPointParameterivNV&quot;);
@@ -1011,7 +1011,6 @@
       GLuint offset = (pointParameterivFunc - (char *) table) / sizeof(void *);
       assert(pointParameterivOffset == _gloffset_PointParameterivNV);
       assert(pointParameterivOffset == offset);
-      assert(_glapi_get_proc_address(&quot;glPointParameterivNV&quot;) == (_glapi_proc) &amp;glPointParameterivNV);
    }
    {
       GLuint setFenceOffset = _glapi_get_proc_offset(&quot;glSetFenceNV&quot;);

Modified: haiku/trunk/src/kits/opengl/mesa/glapi/glapitable.h
===================================================================
--- haiku/trunk/src/kits/opengl/mesa/glapi/glapitable.h	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/kits/opengl/mesa/glapi/glapitable.h	2007-06-08 23:00:44 UTC (rev 21351)
@@ -30,7 +30,11 @@
 #  define _GLAPI_TABLE_H_
 
 #ifndef GLAPIENTRYP
-#define GLAPIENTRYP
+# ifndef GLAPIENTRY
+#  define GLAPIENTRY
+# endif
+
+# define GLAPIENTRYP GLAPIENTRY *
 #endif
 
 typedef void (*_glapi_proc)(void); /* generic function pointer */
@@ -704,7 +708,7 @@
    void (GLAPIENTRYP GetProgramStringNV)(GLuint id, GLenum pname, GLubyte * program); /* 664 */
    void (GLAPIENTRYP GetProgramivNV)(GLuint id, GLenum pname, GLint * params); /* 665 */
    void (GLAPIENTRYP GetTrackMatrixivNV)(GLenum target, GLuint address, GLenum pname, GLint * params); /* 666 */
-   void (GLAPIENTRYP GetVertexAttribPointervNV)(GLuint index, GLenum pname, GLvoid ** params); /* 667 */
+   void (GLAPIENTRYP GetVertexAttribPointervNV)(GLuint index, GLenum pname, GLvoid ** pointer); /* 667 */
    void (GLAPIENTRYP GetVertexAttribdvNV)(GLuint index, GLenum pname, GLdouble * params); /* 668 */
    void (GLAPIENTRYP GetVertexAttribfvNV)(GLuint index, GLenum pname, GLfloat * params); /* 669 */
    void (GLAPIENTRYP GetVertexAttribivNV)(GLuint index, GLenum pname, GLint * params); /* 670 */

Modified: haiku/trunk/src/kits/opengl/mesa/glapi/glapitemp.h
===================================================================
--- haiku/trunk/src/kits/opengl/mesa/glapi/glapitemp.h	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/kits/opengl/mesa/glapi/glapitemp.h	2007-06-08 23:00:44 UTC (rev 21351)
@@ -4865,16 +4865,21 @@
    DISPATCH(GetTrackMatrixivNV, (target, address, pname, params), (F, &quot;glGetTrackMatrixivNV(0x%x, %d, 0x%x, %p);\n&quot;, target, address, pname, (const void *) params));
 }
 
-KEYWORD1 void KEYWORD2 NAME(GetVertexAttribPointervARB)(GLuint index, GLenum pname, GLvoid ** params)
+KEYWORD1 void KEYWORD2 NAME(GetVertexAttribPointerv)(GLuint index, GLenum pname, GLvoid ** pointer)
 {
-   DISPATCH(GetVertexAttribPointervNV, (index, pname, params), (F, &quot;glGetVertexAttribPointervARB(%d, 0x%x, %p);\n&quot;, index, pname, (const void *) params));
+   DISPATCH(GetVertexAttribPointervNV, (index, pname, pointer), (F, &quot;glGetVertexAttribPointerv(%d, 0x%x, %p);\n&quot;, index, pname, (const void *) pointer));
 }
 
-KEYWORD1 void KEYWORD2 NAME(GetVertexAttribPointervNV)(GLuint index, GLenum pname, GLvoid ** params)
+KEYWORD1 void KEYWORD2 NAME(GetVertexAttribPointervARB)(GLuint index, GLenum pname, GLvoid ** pointer)
 {
-   DISPATCH(GetVertexAttribPointervNV, (index, pname, params), (F, &quot;glGetVertexAttribPointervNV(%d, 0x%x, %p);\n&quot;, index, pname, (const void *) params));
+   DISPATCH(GetVertexAttribPointervNV, (index, pname, pointer), (F, &quot;glGetVertexAttribPointervARB(%d, 0x%x, %p);\n&quot;, index, pname, (const void *) pointer));
 }
 
+KEYWORD1 void KEYWORD2 NAME(GetVertexAttribPointervNV)(GLuint index, GLenum pname, GLvoid ** pointer)
+{
+   DISPATCH(GetVertexAttribPointervNV, (index, pname, pointer), (F, &quot;glGetVertexAttribPointervNV(%d, 0x%x, %p);\n&quot;, index, pname, (const void *) pointer));
+}
+
 KEYWORD1 void KEYWORD2 NAME(GetVertexAttribdvNV)(GLuint index, GLenum pname, GLdouble * params)
 {
    DISPATCH(GetVertexAttribdvNV, (index, pname, params), (F, &quot;glGetVertexAttribdvNV(%d, 0x%x, %p);\n&quot;, index, pname, (const void *) params));
@@ -6577,6 +6582,7 @@
    TABLE_ENTRY(BindProgramARB),
    TABLE_ENTRY(DeleteProgramsARB),
    TABLE_ENTRY(GenProgramsARB),
+   TABLE_ENTRY(GetVertexAttribPointerv),
    TABLE_ENTRY(GetVertexAttribPointervARB),
    TABLE_ENTRY(IsProgramARB),
    TABLE_ENTRY(PointParameteri),

Modified: haiku/trunk/src/kits/opengl/mesa/glapi/glprocs.h
===================================================================
--- haiku/trunk/src/kits/opengl/mesa/glapi/glprocs.h	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/kits/opengl/mesa/glapi/glprocs.h	2007-06-08 23:00:44 UTC (rev 21351)
@@ -1086,6 +1086,7 @@
     &quot;glBindProgramARB\0&quot;
     &quot;glDeleteProgramsARB\0&quot;
     &quot;glGenProgramsARB\0&quot;
+    &quot;glGetVertexAttribPointerv\0&quot;
     &quot;glGetVertexAttribPointervARB\0&quot;
     &quot;glIsProgramARB\0&quot;
     &quot;glPointParameteri\0&quot;
@@ -2229,11 +2230,12 @@
     NAME_FUNC_OFFSET(18432, glDeleteProgramsNV, glDeleteProgramsNV, NULL, _gloffset_DeleteProgramsNV),
     NAME_FUNC_OFFSET(18452, glGenProgramsNV, glGenProgramsNV, NULL, _gloffset_GenProgramsNV),
     NAME_FUNC_OFFSET(18469, glGetVertexAttribPointervNV, glGetVertexAttribPointervNV, NULL, _gloffset_GetVertexAttribPointervNV),
-    NAME_FUNC_OFFSET(18498, glIsProgramNV, glIsProgramNV, NULL, _gloffset_IsProgramNV),
-    NAME_FUNC_OFFSET(18513, glPointParameteriNV, glPointParameteriNV, NULL, _gloffset_PointParameteriNV),
-    NAME_FUNC_OFFSET(18531, glPointParameterivNV, glPointParameterivNV, NULL, _gloffset_PointParameterivNV),
-    NAME_FUNC_OFFSET(18550, gl_dispatch_stub_749, gl_dispatch_stub_749, NULL, _gloffset_BlendEquationSeparateEXT),
-    NAME_FUNC_OFFSET(18574, gl_dispatch_stub_749, gl_dispatch_stub_749, NULL, _gloffset_BlendEquationSeparateEXT),
+    NAME_FUNC_OFFSET(18495, glGetVertexAttribPointervNV, glGetVertexAttribPointervNV, NULL, _gloffset_GetVertexAttribPointervNV),
+    NAME_FUNC_OFFSET(18524, glIsProgramNV, glIsProgramNV, NULL, _gloffset_IsProgramNV),
+    NAME_FUNC_OFFSET(18539, glPointParameteriNV, glPointParameteriNV, NULL, _gloffset_PointParameteriNV),
+    NAME_FUNC_OFFSET(18557, glPointParameterivNV, glPointParameterivNV, NULL, _gloffset_PointParameterivNV),
+    NAME_FUNC_OFFSET(18576, gl_dispatch_stub_749, gl_dispatch_stub_749, NULL, _gloffset_BlendEquationSeparateEXT),
+    NAME_FUNC_OFFSET(18600, gl_dispatch_stub_749, gl_dispatch_stub_749, NULL, _gloffset_BlendEquationSeparateEXT),
     NAME_FUNC_OFFSET(-1, NULL, NULL, NULL, 0)
 };
 

Modified: haiku/trunk/src/kits/opengl/mesa/main/api_loopback.c
===================================================================
--- haiku/trunk/src/kits/opengl/mesa/main/api_loopback.c	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/kits/opengl/mesa/main/api_loopback.c	2007-06-08 23:00:44 UTC (rev 21351)
@@ -146,7 +146,7 @@
 loopback_Color3iv_f( const GLint *v )
 {
    COLORF( INT_TO_FLOAT(v[0]), INT_TO_FLOAT(v[1]),
-	   INT_TO_FLOAT(v[2]), INT_TO_FLOAT(v[3]) );
+	   INT_TO_FLOAT(v[2]), 1.0 );
 }
 
 static void GLAPIENTRY

Modified: haiku/trunk/src/kits/opengl/mesa/main/api_noop.c
===================================================================
--- haiku/trunk/src/kits/opengl/mesa/main/api_noop.c	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/kits/opengl/mesa/main/api_noop.c	2007-06-08 23:00:44 UTC (rev 21351)
@@ -45,7 +45,7 @@
 static void GLAPIENTRY _mesa_noop_EdgeFlag( GLboolean b )
 {
    GET_CURRENT_CONTEXT(ctx);
-   ctx-&gt;Current.EdgeFlag = b;
+   ctx-&gt;Current.Attrib[VERT_ATTRIB_EDGEFLAG][0] = (GLfloat)b;
 }
 
 static void GLAPIENTRY _mesa_noop_Indexf( GLfloat f )

Modified: haiku/trunk/src/kits/opengl/mesa/main/arrayobj.c
===================================================================
--- haiku/trunk/src/kits/opengl/mesa/main/arrayobj.c	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/kits/opengl/mesa/main/arrayobj.c	2007-06-08 23:00:44 UTC (rev 21351)
@@ -114,40 +114,34 @@
    obj-&gt;Vertex.StrideB = 0;
    obj-&gt;Vertex.Ptr = NULL;
    obj-&gt;Vertex.Enabled = GL_FALSE;
-   obj-&gt;Vertex.Flags = CA_CLIENT_DATA;
    obj-&gt;Normal.Type = GL_FLOAT;
    obj-&gt;Normal.Stride = 0;
    obj-&gt;Normal.StrideB = 0;
    obj-&gt;Normal.Ptr = NULL;
    obj-&gt;Normal.Enabled = GL_FALSE;
-   obj-&gt;Normal.Flags = CA_CLIENT_DATA;
    obj-&gt;Color.Size = 4;
    obj-&gt;Color.Type = GL_FLOAT;
    obj-&gt;Color.Stride = 0;
    obj-&gt;Color.StrideB = 0;
    obj-&gt;Color.Ptr = NULL;
    obj-&gt;Color.Enabled = GL_FALSE;
-   obj-&gt;Color.Flags = CA_CLIENT_DATA;
    obj-&gt;SecondaryColor.Size = 4;
    obj-&gt;SecondaryColor.Type = GL_FLOAT;
    obj-&gt;SecondaryColor.Stride = 0;
    obj-&gt;SecondaryColor.StrideB = 0;
    obj-&gt;SecondaryColor.Ptr = NULL;
    obj-&gt;SecondaryColor.Enabled = GL_FALSE;
-   obj-&gt;SecondaryColor.Flags = CA_CLIENT_DATA;
    obj-&gt;FogCoord.Size = 1;
    obj-&gt;FogCoord.Type = GL_FLOAT;
    obj-&gt;FogCoord.Stride = 0;
    obj-&gt;FogCoord.StrideB = 0;
    obj-&gt;FogCoord.Ptr = NULL;
    obj-&gt;FogCoord.Enabled = GL_FALSE;
-   obj-&gt;FogCoord.Flags = CA_CLIENT_DATA;
    obj-&gt;Index.Type = GL_FLOAT;
    obj-&gt;Index.Stride = 0;
    obj-&gt;Index.StrideB = 0;
    obj-&gt;Index.Ptr = NULL;
    obj-&gt;Index.Enabled = GL_FALSE;
-   obj-&gt;Index.Flags = CA_CLIENT_DATA;
    for (i = 0; i &lt; MAX_TEXTURE_UNITS; i++) {
       obj-&gt;TexCoord[i].Size = 4;
       obj-&gt;TexCoord[i].Type = GL_FLOAT;
@@ -155,13 +149,11 @@
       obj-&gt;TexCoord[i].StrideB = 0;
       obj-&gt;TexCoord[i].Ptr = NULL;
       obj-&gt;TexCoord[i].Enabled = GL_FALSE;
-      obj-&gt;TexCoord[i].Flags = CA_CLIENT_DATA;
    }
    obj-&gt;EdgeFlag.Stride = 0;
    obj-&gt;EdgeFlag.StrideB = 0;
    obj-&gt;EdgeFlag.Ptr = NULL;
    obj-&gt;EdgeFlag.Enabled = GL_FALSE;
-   obj-&gt;EdgeFlag.Flags = CA_CLIENT_DATA;
    for (i = 0; i &lt; VERT_ATTRIB_MAX; i++) {
       obj-&gt;VertexAttrib[i].Size = 4;
       obj-&gt;VertexAttrib[i].Type = GL_FLOAT;
@@ -170,7 +162,6 @@
       obj-&gt;VertexAttrib[i].Ptr = NULL;
       obj-&gt;VertexAttrib[i].Enabled = GL_FALSE;
       obj-&gt;VertexAttrib[i].Normalized = GL_FALSE;
-      obj-&gt;VertexAttrib[i].Flags = CA_CLIENT_DATA;
    }
 
 #if FEATURE_ARB_vertex_buffer_object

Modified: haiku/trunk/src/kits/opengl/mesa/main/attrib.c
===================================================================
--- haiku/trunk/src/kits/opengl/mesa/main/attrib.c	2007-06-08 18:33:02 UTC (rev 21350)
+++ haiku/trunk/src/kits/opengl/mesa/main/attrib.c	2007-06-08 23:00:44 UTC (rev 21351)
@@ -1,8 +1,8 @@
 /*
  * Mesa 3-D graphics library
- * Version:  6.5.2
+ * Version:  6.5.3
  *
- * Copyright (C) 1999-2006  Brian Paul   All Rights Reserved.
+ * Copyright (C) 1999-2007  Brian Paul   All Rights Reserved.
  *
  * Permission is hereby granted, free of charge, to any person obtaining a
  * copy of this software and associated documentation files (the &quot;Software&quot;),
@@ -138,9 +138,9 @@
       attr-&gt;Blend = ctx-&gt;Color.BlendEnabled;
       attr-&gt;ClipPlanes = ctx-&gt;Transform.ClipPlanesEnabled;
       attr-&gt;ColorMaterial = ctx-&gt;Light.ColorMaterialEnabled;
-      attr-&gt;ColorTable = ctx-&gt;Pixel.ColorTableEnabled;
-      attr-&gt;PostColorMatrixColorTable = ctx-&gt;Pixel.PostColorMatrixColorTableEnabled;
-      attr-&gt;PostConvolutionColorTable = ctx-&gt;Pixel.PostConvolutionColorTableEnabled;

[... truncated: 54888 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002616.html">[Haiku-commits] r21350 - in	haiku/trunk/src/system/libroot/posix/glibc/arch: generic ppc x86
</A></li>
	<LI>Next message: <A HREF="002618.html">[Haiku-commits] r21352 - haiku/trunk/headers/os/opengl/GL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2617">[ date ]</a>
              <a href="thread.html#2617">[ thread ]</a>
              <a href="subject.html#2617">[ subject ]</a>
              <a href="author.html#2617">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
