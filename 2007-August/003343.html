<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r21802 - in haiku/trunk: . build/jam	src/add-ons/kernel/drivers/graphics/vmware	src/add-ons/kernel/drivers/input/usb_hid	src/add-ons/kernel/drivers/network/stack	src/add-ons/media/media-add-ons/esound_sink	src/add-ons/media/media-add-ons/multi_audio	src/add-ons/media/media-add-ons/usb_webcam	src/apps/networkstatus src/apps/pulse src/apps/resedit	src/apps/stylededit src/bin/bash/lib/glob	src/bin/bash/lib/readline src/bin/bash/lib/sh	src/bin/desklink src/bin/network/arp src/bin/network/ftp	src/bin/network/ifconfig src/bin/network/nc	src/bin/network/ping src/bin/network/ppp_up	src/bin/network/pppconfig src/bin/network/route	src/bin/network/traceroute src/bin/pcmcia-cs src/kits/support	src/kits/textencoding src/kits/textencoding/libiconv	src/kits/tracker src/preferences/keyboard	src/preferences/media src/preferences/sounds	src/preferences/virtualmemory src/tools/bfs_shell
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r21802%20-%20in%20haiku/trunk%3A%20.%20build/jam%0A%09src/add-ons/kernel/drivers/graphics/vmware%0A%09src/add-ons/kernel/drivers/input/usb_hid%0A%09src/add-ons/kernel/drivers/network/stack%0A%09src/add-ons/media/media-add-ons/esound_sink%0A%09src/add-ons/media/media-add-ons/multi_audio%0A%09src/add-ons/media/media-add-ons/usb_webcam%0A%09src/apps/networkstatus%20src/apps/pulse%20src/apps/resedit%0A%09src/apps/stylededit%20src/bin/bash/lib/glob%0A%09src/bin/bash/lib/readline%20src/bin/bash/lib/sh%0A%09src/bin/desklink%20src/bin/network/arp%20src/bin/network/ftp%0A%09src/bin/network/ifconfig%20src/bin/network/nc%0A%09src/bin/network/ping%20src/bin/network/ppp_up%0A%09src/bin/network/pppconfig%20src/bin/network/route%0A%09src/bin/network/traceroute%20src/bin/pcmcia-cs%20src/kits/support%0A%09src/kits/textencoding%20src/kits/textencoding/libiconv%0A%09src/kits/tracker%20src/preferences/keyboard%0A%09src/preferences/media%20src/preferences/sounds%0A%09src/preferences/virtualmemory%20src/tools/bfs_shell&In-Reply-To=%3C200708022114.l72LE1RE022898%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003342.html">
   <LINK REL="Next"  HREF="003344.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r21802 - in haiku/trunk: . build/jam	src/add-ons/kernel/drivers/graphics/vmware	src/add-ons/kernel/drivers/input/usb_hid	src/add-ons/kernel/drivers/network/stack	src/add-ons/media/media-add-ons/esound_sink	src/add-ons/media/media-add-ons/multi_audio	src/add-ons/media/media-add-ons/usb_webcam	src/apps/networkstatus src/apps/pulse src/apps/resedit	src/apps/stylededit src/bin/bash/lib/glob	src/bin/bash/lib/readline src/bin/bash/lib/sh	src/bin/desklink src/bin/network/arp src/bin/network/ftp	src/bin/network/ifconfig src/bin/network/nc	src/bin/network/ping src/bin/network/ppp_up	src/bin/network/pppconfig src/bin/network/route	src/bin/network/traceroute src/bin/pcmcia-cs src/kits/support	src/kits/textencoding src/kits/textencoding/libiconv	src/kits/tracker src/preferences/keyboard	src/preferences/media src/preferences/sounds	src/preferences/virtualmemory src/tools/bfs_shell</H1>
    <B>bonefish at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r21802%20-%20in%20haiku/trunk%3A%20.%20build/jam%0A%09src/add-ons/kernel/drivers/graphics/vmware%0A%09src/add-ons/kernel/drivers/input/usb_hid%0A%09src/add-ons/kernel/drivers/network/stack%0A%09src/add-ons/media/media-add-ons/esound_sink%0A%09src/add-ons/media/media-add-ons/multi_audio%0A%09src/add-ons/media/media-add-ons/usb_webcam%0A%09src/apps/networkstatus%20src/apps/pulse%20src/apps/resedit%0A%09src/apps/stylededit%20src/bin/bash/lib/glob%0A%09src/bin/bash/lib/readline%20src/bin/bash/lib/sh%0A%09src/bin/desklink%20src/bin/network/arp%20src/bin/network/ftp%0A%09src/bin/network/ifconfig%20src/bin/network/nc%0A%09src/bin/network/ping%20src/bin/network/ppp_up%0A%09src/bin/network/pppconfig%20src/bin/network/route%0A%09src/bin/network/traceroute%20src/bin/pcmcia-cs%20src/kits/support%0A%09src/kits/textencoding%20src/kits/textencoding/libiconv%0A%09src/kits/tracker%20src/preferences/keyboard%0A%09src/preferences/media%20src/preferences/sounds%0A%09src/preferences/virtualmemory%20src/tools/bfs_shell&In-Reply-To=%3C200708022114.l72LE1RE022898%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r21802 - in haiku/trunk: . build/jam	src/add-ons/kernel/drivers/graphics/vmware	src/add-ons/kernel/drivers/input/usb_hid	src/add-ons/kernel/drivers/network/stack	src/add-ons/media/media-add-ons/esound_sink	src/add-ons/media/media-add-ons/multi_audio	src/add-ons/media/media-add-ons/usb_webcam	src/apps/networkstatus src/apps/pulse src/apps/resedit	src/apps/stylededit src/bin/bash/lib/glob	src/bin/bash/lib/readline src/bin/bash/lib/sh	src/bin/desklink src/bin/network/arp src/bin/network/ftp	src/bin/network/ifconfig src/bin/network/nc	src/bin/network/ping src/bin/network/ppp_up	src/bin/network/pppconfig src/bin/network/route	src/bin/network/traceroute src/bin/pcmcia-cs src/kits/support	src/kits/textencoding src/kits/textencoding/libiconv	src/kits/tracker src/preferences/keyboard	src/preferences/media src/preferences/sounds	src/preferences/virtualmemory src/tools/bfs_shell">bonefish at mail.berlios.de
       </A><BR>
    <I>Thu Aug  2 23:14:01 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003342.html">[Haiku-commits] r21801 - haiku/trunk/src/servers/app/drawing/Painter
</A></li>
        <LI>Next message: <A HREF="003344.html">[Haiku-commits] r21803 - haiku/trunk/src/system/kernel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3343">[ date ]</a>
              <a href="thread.html#3343">[ thread ]</a>
              <a href="subject.html#3343">[ subject ]</a>
              <a href="author.html#3343">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: bonefish
Date: 2007-08-02 23:13:56 +0200 (Thu, 02 Aug 2007)
New Revision: 21802
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=21802&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=21802&amp;view=rev</A>

Modified:
   haiku/trunk/build/jam/BuildSetup
   haiku/trunk/build/jam/HelperRules
   haiku/trunk/build/jam/KernelRules
   haiku/trunk/configure
   haiku/trunk/src/add-ons/kernel/drivers/graphics/vmware/Jamfile
   haiku/trunk/src/add-ons/kernel/drivers/input/usb_hid/Jamfile
   haiku/trunk/src/add-ons/kernel/drivers/network/stack/Jamfile
   haiku/trunk/src/add-ons/media/media-add-ons/esound_sink/Jamfile
   haiku/trunk/src/add-ons/media/media-add-ons/multi_audio/Jamfile
   haiku/trunk/src/add-ons/media/media-add-ons/usb_webcam/Jamfile
   haiku/trunk/src/apps/networkstatus/Jamfile
   haiku/trunk/src/apps/pulse/Jamfile
   haiku/trunk/src/apps/resedit/Jamfile
   haiku/trunk/src/apps/stylededit/Jamfile
   haiku/trunk/src/bin/bash/lib/glob/Jamfile
   haiku/trunk/src/bin/bash/lib/readline/Jamfile
   haiku/trunk/src/bin/bash/lib/sh/Jamfile
   haiku/trunk/src/bin/desklink/Jamfile
   haiku/trunk/src/bin/network/arp/Jamfile
   haiku/trunk/src/bin/network/ftp/Jamfile
   haiku/trunk/src/bin/network/ifconfig/Jamfile
   haiku/trunk/src/bin/network/nc/Jamfile
   haiku/trunk/src/bin/network/ping/Jamfile
   haiku/trunk/src/bin/network/ppp_up/Jamfile
   haiku/trunk/src/bin/network/pppconfig/Jamfile
   haiku/trunk/src/bin/network/route/Jamfile
   haiku/trunk/src/bin/network/traceroute/Jamfile
   haiku/trunk/src/bin/pcmcia-cs/Jamfile
   haiku/trunk/src/kits/support/Jamfile
   haiku/trunk/src/kits/textencoding/Jamfile
   haiku/trunk/src/kits/textencoding/libiconv/Jamfile
   haiku/trunk/src/kits/tracker/Jamfile
   haiku/trunk/src/preferences/keyboard/Jamfile
   haiku/trunk/src/preferences/media/Jamfile
   haiku/trunk/src/preferences/sounds/Jamfile
   haiku/trunk/src/preferences/virtualmemory/Jamfile
   haiku/trunk/src/tools/bfs_shell/Jamfile
Log:
Added Haiku as host platform supported by the build system (&quot;haiku_host&quot;). 
Completely untested yet.


Modified: haiku/trunk/build/jam/BuildSetup
===================================================================
--- haiku/trunk/build/jam/BuildSetup	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/build/jam/BuildSetup	2007-08-02 21:13:56 UTC (rev 21802)
@@ -95,9 +95,10 @@
 HAIKU_DEBUG_LEVELS = 0 1 2 3 4 5 ;
 
 # BeOS, BONE, Dan0 compatible platforms
-HAIKU_BEOS_COMPATIBLE_PLATFORMS = haiku r5 bone dano ;
-HAIKU_BONE_COMPATIBLE_PLATFORMS = haiku bone dano ;
-HAIKU_DANO_COMPATIBLE_PLATFORMS = haiku dano ;
+HAIKU_BEOS_COMPATIBLE_PLATFORMS = haiku r5 bone dano haiku_host ;
+HAIKU_BONE_COMPATIBLE_PLATFORMS = haiku bone dano haiku_host ;
+HAIKU_DANO_COMPATIBLE_PLATFORMS = haiku dano haiku_host ;
+HAIKU_HAIKU_COMPATIBLE_PLATFORMS = haiku haiku_host ;
 
 
 #pragma mark -
@@ -436,6 +437,7 @@
 # debug flags
 switch $(HOST_PLATFORM) {
 	case haiku	: HOST_DEBUG_FLAGS ?= -ggdb ;
+	case haiku_host	: HOST_DEBUG_FLAGS ?= -ggdb ;
 	case linux	: HOST_DEBUG_FLAGS ?= -ggdb ;
 	case freebsd    : HOST_DEBUG_FLAGS ?= -ggdb ;
 	case darwin : HOST_DEBUG_FLAGS ?= -ggdb ;
@@ -582,7 +584,7 @@
 }
 
 # TODO: Fix the naming!
-if $(TARGET_PLATFORM) = haiku {
+if $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	NETWORK_LIBS = network ;
 	SELECT_UNAME_ETC_LIB = root ;
 	NETAPI_LIB = network ;
@@ -674,6 +676,7 @@
 	case r5			: TARGET_DEFINES	+= HAIKU_TARGET_PLATFORM_BEOS ;
 	case bone		: TARGET_DEFINES	+= HAIKU_TARGET_PLATFORM_BONE ;
 	case dano		: TARGET_DEFINES	+= HAIKU_TARGET_PLATFORM_DANO ;
+	case haiku_host	: TARGET_DEFINES	+= HAIKU_TARGET_PLATFORM_HAIKU ;
 	case haiku		: TARGET_DEFINES	+= HAIKU_TARGET_PLATFORM_HAIKU ;
 	case linux		: TARGET_DEFINES	+= HAIKU_TARGET_PLATFORM_LINUX ;
 	case freebsd	: TARGET_DEFINES	+= HAIKU_TARGET_PLATFORM_FREEBSD ;
@@ -686,7 +689,7 @@
 	case r5			: HOST_DEFINES	+= HAIKU_HOST_PLATFORM_BEOS ;
 	case bone		: HOST_DEFINES	+= HAIKU_HOST_PLATFORM_BONE ;
 	case dano		: HOST_DEFINES	+= HAIKU_HOST_PLATFORM_DANO ;
-	case haiku		: HOST_DEFINES	+= HAIKU_HOST_PLATFORM_HAIKU ;
+	case haiku_host	: HOST_DEFINES	+= HAIKU_HOST_PLATFORM_HAIKU ;
 	case linux		: HOST_DEFINES	+= HAIKU_HOST_PLATFORM_LINUX ;
 	case freebsd	: HOST_DEFINES	+= HAIKU_HOST_PLATFORM_FREEBSD ;
 	case darwin		: HOST_DEFINES	+= HAIKU_HOST_PLATFORM_DARWIN ;
@@ -699,7 +702,7 @@
 # include the HaikuBuildCompatibility.h header and link against
 # libhaikucompat.a.
 
-if $(TARGET_PLATFORM) != haiku &amp;&amp;  $(TARGET_PLATFORM_BEOS_COMPATIBLE) {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) &amp;&amp; $(TARGET_PLATFORM_BEOS_COMPATIBLE) {
 	# headers and flags
 	local compatibilityHeader = -include [ FDirName $(HAIKU_TOP) headers build
 		HaikuBuildCompatibility.h ] ;

Modified: haiku/trunk/build/jam/HelperRules
===================================================================
--- haiku/trunk/build/jam/HelperRules	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/build/jam/HelperRules	2007-08-02 21:13:56 UTC (rev 21802)
@@ -156,22 +156,27 @@
 		{
 			$(varPrefix)_PLATFORM_BEOS_COMPATIBLE = true ;
 		}
-		
+	
 		case bone : 
 		{
 			$(varPrefix)_PLATFORM_BONE_COMPATIBLE = true ;
 		}
-		
+	
 		case dano :
 		{
 			$(varPrefix)_PLATFORM_DANO_COMPATIBLE = true ;
 		}
-		
+	
+		case haiku_host :
+		{
+			$(varPrefix)_PLATFORM_HAIKU_COMPATIBLE = true ;
+		}
+
 		case haiku :
 		{
 			$(varPrefix)_PLATFORM_HAIKU_COMPATIBLE = true ;
 		}
-	
+
 		case * :
 		{
 			if ! ( $(platform) in $(otherPlatforms) ) {
@@ -181,6 +186,8 @@
 	}
 
 	# set lesser flags, e.g. &quot;DANO&quot; for &quot;HAIKU&quot; and &quot;BEOS&quot; for &quot;BONE&quot;
+	$(varPrefix)_PLATFORM_HAIKU_COMPATIBLE
+		?= $($(varPrefix)_PLATFORM_HAIKU_COMPATIBLE) ;
 	$(varPrefix)_PLATFORM_DANO_COMPATIBLE
 		?= $($(varPrefix)_PLATFORM_HAIKU_COMPATIBLE) ;
 	$(varPrefix)_PLATFORM_BONE_COMPATIBLE
@@ -191,6 +198,8 @@
 	# set the machine friendly flags
 	$(varPrefix)_PLATFORM_(haiku)_COMPATIBLE
 		?= $($(varPrefix)_PLATFORM_HAIKU_COMPATIBLE) ;
+	$(varPrefix)_PLATFORM_(haiku_host)_COMPATIBLE
+		?= $($(varPrefix)_PLATFORM_HAIKU_COMPATIBLE) ;
 	$(varPrefix)_PLATFORM_(dano)_COMPATIBLE
 		?= $($(varPrefix)_PLATFORM_DANO_COMPATIBLE) ;
 	$(varPrefix)_PLATFORM_(bone)_COMPATIBLE

Modified: haiku/trunk/build/jam/KernelRules
===================================================================
--- haiku/trunk/build/jam/KernelRules	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/build/jam/KernelRules	2007-08-02 21:13:56 UTC (rev 21802)
@@ -93,6 +93,10 @@
 			kernel = &lt;nogrist&gt;kernel.so ;
 			beginGlue = $(HAIKU_KERNEL_ADDON_BEGIN_GLUE_CODE) ;
 			endGlue = $(HAIKU_KERNEL_ADDON_END_GLUE_CODE) ;
+		} else if $(PLATFORM) = haiku_host {
+			kernel = /boot/develop/lib/x86/kernel.so ;
+			beginGlue = $(HAIKU_KERNEL_ADDON_BEGIN_GLUE_CODE) ;
+			endGlue = $(HAIKU_KERNEL_ADDON_END_GLUE_CODE) ;
 		} else {
 			kernel = /boot/develop/lib/x86/_KERNEL_ ;
 		}

Modified: haiku/trunk/configure
===================================================================
--- haiku/trunk/configure	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/configure	2007-08-02 21:13:56 UTC (rev 21802)
@@ -290,9 +290,10 @@
 						exit 1 ;;
 			esac
 			;;
+	Darwin)	buildPlatform=darwin ;;
+	FreeBSD) buildPlatform=freebsd ;;
+	Haiku)	buildPlatform=haiku_host ;;
 	Linux)	buildPlatform=linux ;;
-	FreeBSD) buildPlatform=freebsd ;;
-	Darwin)	buildPlatform=darwin ;;
 	*)		echo Unsupported platform: ${platform}
 			exit 1 ;;
 esac

Modified: haiku/trunk/src/add-ons/kernel/drivers/graphics/vmware/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/drivers/graphics/vmware/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/add-ons/kernel/drivers/graphics/vmware/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -11,7 +11,7 @@
 	device.c
 ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	LinkAgainst vmware : $(TARGET_HAIKU_COMPATIBILITY_LIBS) ;
 }
 

Modified: haiku/trunk/src/add-ons/kernel/drivers/input/usb_hid/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/drivers/input/usb_hid/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/add-ons/kernel/drivers/input/usb_hid/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -6,7 +6,7 @@
 UsePrivateHeaders [ FDirName kernel util ] input ;
 
 local buffer_impl = ;
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	buffer_impl = ring_buffer.cpp ;
 }
 

Modified: haiku/trunk/src/add-ons/kernel/drivers/network/stack/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/drivers/network/stack/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/add-ons/kernel/drivers/network/stack/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
-if ( $(TARGET_PLATFORM) != haiku ) {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FStandardOSHeaders ] : true ;
 		# Needed for &lt;drivers/Select.h&gt; and maybe other stuff.
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;

Modified: haiku/trunk/src/add-ons/media/media-add-ons/esound_sink/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/media/media-add-ons/esound_sink/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/add-ons/media/media-add-ons/esound_sink/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	SubDirC++Flags -fmultiple-symbol-spaces ;
 }
 

Modified: haiku/trunk/src/add-ons/media/media-add-ons/multi_audio/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/media/media-add-ons/multi_audio/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/add-ons/media/media-add-ons/multi_audio/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -4,7 +4,7 @@
 
 UsePrivateHeaders media ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	SubDirC++Flags -fmultiple-symbol-spaces ;
 }
 

Modified: haiku/trunk/src/add-ons/media/media-add-ons/usb_webcam/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/media/media-add-ons/usb_webcam/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/add-ons/media/media-add-ons/usb_webcam/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -6,7 +6,7 @@
 UseLibraryHeaders usb ;
 
 # Zeta has a libusb.so, we have a USBKit.a
-if $(TARGET_PLATFORM) = haiku {
+if $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	usbKitLibraryName = USBKit.a ;
 } else {
 	usbKitLibraryName = usb ;

Modified: haiku/trunk/src/apps/networkstatus/Jamfile
===================================================================
--- haiku/trunk/src/apps/networkstatus/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/apps/networkstatus/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -6,7 +6,7 @@
 UseLibraryHeaders agg icon ;
 
 local icon_libs ;
-if $(TARGET) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	icon_libs = libicon.a libagg.a ;
 }
 

Modified: haiku/trunk/src/apps/pulse/Jamfile
===================================================================
--- haiku/trunk/src/apps/pulse/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/apps/pulse/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -3,7 +3,7 @@
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
 UsePrivateHeaders shared ;
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers os kernel ] : true ;
 }
 

Modified: haiku/trunk/src/apps/resedit/Jamfile
===================================================================
--- haiku/trunk/src/apps/resedit/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/apps/resedit/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -6,7 +6,7 @@
 
 local columnViewSources ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	columnViewSources = ColumnListView.cpp ColumnTypes.cpp ColorTools.cpp ;
 }
 

Modified: haiku/trunk/src/apps/stylededit/Jamfile
===================================================================
--- haiku/trunk/src/apps/stylededit/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/apps/stylededit/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -3,7 +3,7 @@
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
 UsePrivateHeaders textencoding ;
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers os support ] : true ;
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 }

Modified: haiku/trunk/src/bin/bash/lib/glob/Jamfile
===================================================================
--- haiku/trunk/src/bin/bash/lib/glob/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/bash/lib/glob/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 }
 

Modified: haiku/trunk/src/bin/bash/lib/readline/Jamfile
===================================================================
--- haiku/trunk/src/bin/bash/lib/readline/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/bash/lib/readline/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 }
 

Modified: haiku/trunk/src/bin/bash/lib/sh/Jamfile
===================================================================
--- haiku/trunk/src/bin/bash/lib/sh/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/bash/lib/sh/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 }
 

Modified: haiku/trunk/src/bin/desklink/Jamfile
===================================================================
--- haiku/trunk/src/bin/desklink/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/desklink/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers os interface ] : true ;
 		# We need the public interface headers also when not compiling for Haiku.
 	UseHeaders [ FDirName $(HAIKU_TOP) headers os ] : true ;

Modified: haiku/trunk/src/bin/network/arp/Jamfile
===================================================================
--- haiku/trunk/src/bin/network/arp/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/network/arp/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatforms $(HAIKU_BONE_COMPATIBLE_PLATFORMS) ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 		# We need the public network headers also when not compiling for Haiku.
 		# Unfortunately we get more than we want, namely all POSIX headers.

Modified: haiku/trunk/src/bin/network/ftp/Jamfile
===================================================================
--- haiku/trunk/src/bin/network/ftp/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/network/ftp/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatforms $(HAIKU_BONE_COMPATIBLE_PLATFORMS) ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 		# We need the public network headers also when not compiling for Haiku.
 		# Unfortunately we get more than we want, namely all POSIX headers.

Modified: haiku/trunk/src/bin/network/ifconfig/Jamfile
===================================================================
--- haiku/trunk/src/bin/network/ifconfig/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/network/ifconfig/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -1,6 +1,6 @@
 SubDir HAIKU_TOP src bin network ifconfig ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 		# We need the public network headers also when not compiling for Haiku.
 		# Unfortunately we get more than we want, namely all POSIX headers.

Modified: haiku/trunk/src/bin/network/nc/Jamfile
===================================================================
--- haiku/trunk/src/bin/network/nc/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/network/nc/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatforms $(HAIKU_BONE_COMPATIBLE_PLATFORMS) ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 		# We need the public network headers also when not compiling for Haiku.
 		# Unfortunately we get more than we want, namely all POSIX headers.

Modified: haiku/trunk/src/bin/network/ping/Jamfile
===================================================================
--- haiku/trunk/src/bin/network/ping/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/network/ping/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatforms $(HAIKU_BONE_COMPATIBLE_PLATFORMS) ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 		# We need the public network headers also when not compiling for Haiku.
 		# Unfortunately we get more than we want, namely all POSIX headers.

Modified: haiku/trunk/src/bin/network/ppp_up/Jamfile
===================================================================
--- haiku/trunk/src/bin/network/ppp_up/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/network/ppp_up/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatforms $(HAIKU_BONE_COMPATIBLE_PLATFORMS) ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 		# We need the public network headers also when not compiling for Haiku.
 		# Unfortunately we get more than we want, namely all POSIX headers.

Modified: haiku/trunk/src/bin/network/pppconfig/Jamfile
===================================================================
--- haiku/trunk/src/bin/network/pppconfig/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/network/pppconfig/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatforms $(HAIKU_BONE_COMPATIBLE_PLATFORMS) ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 		# We need the public network headers also when not compiling for Haiku.
 		# Unfortunately we get more than we want, namely all POSIX headers.

Modified: haiku/trunk/src/bin/network/route/Jamfile
===================================================================
--- haiku/trunk/src/bin/network/route/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/network/route/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -1,6 +1,6 @@
 SubDir HAIKU_TOP src bin network route ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 		# We need the public network headers also when not compiling for Haiku.
 		# Unfortunately we get more than we want, namely all POSIX headers.

Modified: haiku/trunk/src/bin/network/traceroute/Jamfile
===================================================================
--- haiku/trunk/src/bin/network/traceroute/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/network/traceroute/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatforms $(HAIKU_BONE_COMPATIBLE_PLATFORMS) ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 		# We need the public network headers also when not compiling for Haiku.
 		# Unfortunately we get more than we want, namely all POSIX headers.

Modified: haiku/trunk/src/bin/pcmcia-cs/Jamfile
===================================================================
--- haiku/trunk/src/bin/pcmcia-cs/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/bin/pcmcia-cs/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,11 +2,11 @@
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
-if $(TARGET_PLATFORM) != haiku {
-        UseHeaders [ FDirName $(HAIKU_TOP) headers os drivers ] : true ;
-                # We need the public pcmcia headers also when not compiling for Haiku.
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
+	UseHeaders [ FDirName $(HAIKU_TOP) headers os drivers ] : true ;
+		# We need the public pcmcia headers also when not compiling for Haiku.
 	UseHeaders [ FDirName $(HAIKU_TOP) headers os support ] : true ;
-                # We need Errors.h also when not compiling for Haiku.
+		# We need Errors.h also when not compiling for Haiku.
 }
 
 StdBinCommands 

Modified: haiku/trunk/src/kits/support/Jamfile
===================================================================
--- haiku/trunk/src/kits/support/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/kits/support/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -1,12 +1,6 @@
 SubDir HAIKU_TOP src kits support ;
 
 SetSubDirSupportedPlatforms haiku libbe_test ;
-#if $(TARGET_PLATFORM) != haiku {
-#	UseHeaders [ FStandardOSHeaders ] : true ;
-#	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
-#		# TODO: POSIX headers shouldn't be used. Needed for strlcpy() and
-#		# addr_t.
-#}
 
 UsePrivateHeaders shared app media ;
 

Modified: haiku/trunk/src/kits/textencoding/Jamfile
===================================================================
--- haiku/trunk/src/kits/textencoding/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/kits/textencoding/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -6,7 +6,7 @@
 UsePrivateHeaders textencoding ;
 SubDirSysHdrs [ FDirName $(SUBDIR) libiconv ] ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	# Argh! Just for &lt;posix/iconv.h&gt;.
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 }

Modified: haiku/trunk/src/kits/textencoding/libiconv/Jamfile
===================================================================
--- haiku/trunk/src/kits/textencoding/libiconv/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/kits/textencoding/libiconv/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -20,7 +20,7 @@
 
 SubDirSysHdrs $(SUBDIR) ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	# Argh! Just for &lt;posix/iconv.h&gt;.
 	UseHeaders [ FDirName $(HAIKU_TOP) headers posix ] : true ;
 }

Modified: haiku/trunk/src/kits/tracker/Jamfile
===================================================================
--- haiku/trunk/src/kits/tracker/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/kits/tracker/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -18,7 +18,7 @@
 	;
 
 local vector_icon_libs ;
-if $(TARGET_PLATFORM) = haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	vector_icon_libs = libicon.a libagg.a ;
 }
 

Modified: haiku/trunk/src/preferences/keyboard/Jamfile
===================================================================
--- haiku/trunk/src/preferences/keyboard/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/preferences/keyboard/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
         SubDirC++Flags -DCOMPILE_FOR_R5 ;
 #        SubDirC++Flags -fmultiple-symbol-spaces ;
 }

Modified: haiku/trunk/src/preferences/media/Jamfile
===================================================================
--- haiku/trunk/src/preferences/media/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/preferences/media/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
-if $(TARGET_PLATFORM) != haiku {
+if $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	SubDirC++Flags -fmultiple-symbol-spaces ;
 }
 

Modified: haiku/trunk/src/preferences/sounds/Jamfile
===================================================================
--- haiku/trunk/src/preferences/sounds/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/preferences/sounds/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
         SubDirC++Flags -fmultiple-symbol-spaces ;
 }
 

Modified: haiku/trunk/src/preferences/virtualmemory/Jamfile
===================================================================
--- haiku/trunk/src/preferences/virtualmemory/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/preferences/virtualmemory/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -2,7 +2,7 @@
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	DRIVER_SETTINGS = driver_settings.c ;
 }
 
@@ -16,7 +16,7 @@
 	: VirtualMemory.rdef
 	;
 
-if $(TARGET_PLATFORM) != haiku {
+if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
 	SEARCH on [ FGristFiles driver_settings.c ] += 
 		[ FDirName $(HAIKU_TOP) src system libroot os ] ;
 }

Modified: haiku/trunk/src/tools/bfs_shell/Jamfile
===================================================================
--- haiku/trunk/src/tools/bfs_shell/Jamfile	2007-08-02 21:05:34 UTC (rev 21801)
+++ haiku/trunk/src/tools/bfs_shell/Jamfile	2007-08-02 21:13:56 UTC (rev 21802)
@@ -20,7 +20,7 @@
 }
 
 local libHaikuCompat ;
-if $(HOST_PLATFORM_BEOS_COMPATIBLE) &amp;&amp; $(HOST_PLATFORM) != haiku {
+if $(HOST_PLATFORM_BEOS_COMPATIBLE) &amp;&amp; ! $(HOST_PLATFORM_HAIKU_COMPATIBLE) {
 	libHaikuCompat = libhaikucompat_build.a ;
 }
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003342.html">[Haiku-commits] r21801 - haiku/trunk/src/servers/app/drawing/Painter
</A></li>
	<LI>Next message: <A HREF="003344.html">[Haiku-commits] r21803 - haiku/trunk/src/system/kernel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3343">[ date ]</a>
              <a href="thread.html#3343">[ thread ]</a>
              <a href="subject.html#3343">[ subject ]</a>
              <a href="author.html#3343">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
