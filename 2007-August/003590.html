<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r21986 - haiku/trunk/headers/posix
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r21986%20-%20haiku/trunk/headers/posix&In-Reply-To=%3C200708161705.l7GH5FDx016277%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003587.html">
   <LINK REL="Next"  HREF="003591.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r21986 - haiku/trunk/headers/posix</H1>
    <B>axeld at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r21986%20-%20haiku/trunk/headers/posix&In-Reply-To=%3C200708161705.l7GH5FDx016277%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r21986 - haiku/trunk/headers/posix">axeld at mail.berlios.de
       </A><BR>
    <I>Thu Aug 16 19:05:15 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003587.html">[Haiku-commits] r21985 - haiku/trunk/src/apps/terminal
</A></li>
        <LI>Next message: <A HREF="003591.html">[Haiku-commits] r21987 - haiku/trunk/src/kits/app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3590">[ date ]</a>
              <a href="thread.html#3590">[ thread ]</a>
              <a href="subject.html#3590">[ subject ]</a>
              <a href="author.html#3590">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: axeld
Date: 2007-08-16 19:05:14 +0200 (Thu, 16 Aug 2007)
New Revision: 21986
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=21986&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=21986&amp;view=rev</A>

Modified:
   haiku/trunk/headers/posix/signal.h
Log:
Cleanup.


Modified: haiku/trunk/headers/posix/signal.h
===================================================================
--- haiku/trunk/headers/posix/signal.h	2007-08-16 15:36:42 UTC (rev 21985)
+++ haiku/trunk/headers/posix/signal.h	2007-08-16 17:05:14 UTC (rev 21986)
@@ -1,8 +1,9 @@
+/*
+ * Copyright 2002-2007, Haiku, Inc. All Rights Reserved.
+ * Distributed under the terms of the MIT License.
+ */
 #ifndef _SIGNAL_H_
 #define _SIGNAL_H_
-/* 
-** Distributed under the terms of the OpenBeOS License.
-*/
 
 
 #include &lt;sys/types.h&gt;
@@ -16,7 +17,7 @@
 
 
 typedef union sigval {
-	int	sival_int;
+	int		sival_int;
 	void	*sival_ptr;
 } sigval_t;
 
@@ -31,7 +32,7 @@
 	void	*si_addr;	/* address of faulting instruction */
 	int		si_status;	/* exit value or signal */
 	long	si_band;	/* band event for SIGPOLL */
-	union sigval  	si_value;	/* signal value */
+	union sigval si_value;	/* signal value */
 } siginfo_t;
 
 
@@ -59,28 +60,24 @@
 };
 
 
-/*
- * values for sa_flags
- */
-#define SA_NOCLDSTOP  0x01
-#define SA_ONESHOT    0x02
-#define SA_NOMASK     0x04
-#define SA_NODEFER    SA_NOMASK
-#define SA_RESTART    0x08
-#define SA_STACK	0x10
-#define SA_ONSTACK      SA_STACK
+/* values for sa_flags */
+#define SA_NOCLDSTOP	0x01
+#define SA_ONESHOT		0x02
+#define SA_NOMASK		0x04
+#define SA_NODEFER		SA_NOMASK
+#define SA_RESTART		0x08
+#define SA_STACK		0x10
+#define SA_ONSTACK		SA_STACK
 #define SA_RESETHAND	0x20
-#define SA_SIGINFO	0x40
+#define SA_SIGINFO		0x40
 #define SA_NOCLDWAIT	0x80
 
-/*
- * values for ss_flags
- */
-#define SS_ONSTACK	0x1
-#define SS_DISABLE	0x2
+/* values for ss_flags */
+#define SS_ONSTACK		0x1
+#define SS_DISABLE		0x2
 
-#define MINSIGSTKSZ	4096
-#define SIGSTKSZ	16384
+#define MINSIGSTKSZ		4096
+#define SIGSTKSZ		16384
 
 /*
  * for signals using an alternate stack
@@ -88,7 +85,7 @@
 typedef struct stack_t {
 	void	*ss_sp;
 	size_t	ss_size;
-	int	ss_flags;
+	int		ss_flags;
 } stack_t;
 
 typedef struct sigstack {
@@ -96,14 +93,11 @@
 	void	*ss_sp;
 } sigstack;
 
-/*
- * for the 'how' arg of sigprocmask()
- */
+/* for the 'how' arg of sigprocmask() */
 #define SIG_BLOCK    1
 #define SIG_UNBLOCK  2
 #define SIG_SETMASK  3
 
-
 /*
  * The list of all defined signals:
  *
@@ -141,9 +135,8 @@
 #define SIGXCPU		28	/* CPU time limit exceeded */
 #define SIGXFSZ		29	/* File size limit exceeded */
 
-#define SIGBUS     SIGSEGV /* for old style code */
+#define SIGBUS		SIGSEGV /* for old style code */
 
-
 /*
  * Signal numbers 30-32 are currently free but may be used in future
  * releases.  Use them at your own peril (if you do use them, at least
@@ -181,13 +174,11 @@
 
 const char *strsignal(int sig);
 
-void        set_signal_stack(void *ptr, size_t size);
-int         sigaltstack(const stack_t *ss, stack_t *oss);         /* XXXdbg */
+void	set_signal_stack(void *ptr, size_t size);
+int		sigaltstack(const stack_t *ss, stack_t *oss);
 
-/* 
- * pthread extension : equivalent of sigprocmask() 
- */
-extern int pthread_sigmask(int how, const sigset_t *set, sigset_t *oset); 
+/* pthread extension : equivalent of sigprocmask()  */
+int		pthread_sigmask(int how, const sigset_t *set, sigset_t *oset); 
 
 extern inline int
 sigismember(const sigset_t *set, int sig)
@@ -253,7 +244,7 @@
  *
  * The two additional arguments available to the signal handler are extensions
  * to the Posix standard. This feature was introduced by the BeOS and retained
- * by OpenBeOS. However, to remain compatible with Posix and ANSI C, the type
+ * by Haiku. However, to remain compatible with Posix and ANSI C, the type
  * of the sa_handler field is defined as 'sig_func_t'. This requires the handler
  * to be cast when assigned to the sa_handler field, as in the example above.
  *
@@ -261,7 +252,7 @@
  * This is because they expect a &quot;this&quot; pointer as the first argument.
  *
  *
- * The 3 arguments that OpenBeOS provides to signal handlers are as follows:
+ * The 3 arguments that Haiku provides to signal handlers are as follows:
  *
  *  - The first argument is the (usual) signal number.
  *
@@ -287,6 +278,7 @@
 
 typedef struct vregs vregs;
 
+// TODO: move those into an architecture specific header
 #if __POWERPC__
 struct vregs
 {


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003587.html">[Haiku-commits] r21985 - haiku/trunk/src/apps/terminal
</A></li>
	<LI>Next message: <A HREF="003591.html">[Haiku-commits] r21987 - haiku/trunk/src/kits/app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3590">[ date ]</a>
              <a href="thread.html#3590">[ thread ]</a>
              <a href="subject.html#3590">[ subject ]</a>
              <a href="author.html#3590">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
