<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r31127 - in haiku/trunk: headers/private/shared	src/apps/debuganalyzer src/apps/debuganalyzer/gui/main_window	src/apps/debuganalyzer/gui/table	src/apps/debuganalyzer/gui/thread_window	src/apps/debuganalyzer/util src/apps/debugger	src/apps/debugger/arch src/apps/debugger/arch/x86	src/apps/debugger/gui/team_window src/kits/shared
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31127%20-%20in%20haiku/trunk%3A%20headers/private/shared%0A%09src/apps/debuganalyzer%20src/apps/debuganalyzer/gui/main_window%0A%09src/apps/debuganalyzer/gui/table%0A%09src/apps/debuganalyzer/gui/thread_window%0A%09src/apps/debuganalyzer/util%20src/apps/debugger%0A%09src/apps/debugger/arch%20src/apps/debugger/arch/x86%0A%09src/apps/debugger/gui/team_window%20src/kits/shared&In-Reply-To=%3C200906192300.n5JN0SDY016088%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017325.html">
   <LINK REL="Next"  HREF="017327.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r31127 - in haiku/trunk: headers/private/shared	src/apps/debuganalyzer src/apps/debuganalyzer/gui/main_window	src/apps/debuganalyzer/gui/table	src/apps/debuganalyzer/gui/thread_window	src/apps/debuganalyzer/util src/apps/debugger	src/apps/debugger/arch src/apps/debugger/arch/x86	src/apps/debugger/gui/team_window src/kits/shared</H1>
    <B>bonefish at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31127%20-%20in%20haiku/trunk%3A%20headers/private/shared%0A%09src/apps/debuganalyzer%20src/apps/debuganalyzer/gui/main_window%0A%09src/apps/debuganalyzer/gui/table%0A%09src/apps/debuganalyzer/gui/thread_window%0A%09src/apps/debuganalyzer/util%20src/apps/debugger%0A%09src/apps/debugger/arch%20src/apps/debugger/arch/x86%0A%09src/apps/debugger/gui/team_window%20src/kits/shared&In-Reply-To=%3C200906192300.n5JN0SDY016088%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r31127 - in haiku/trunk: headers/private/shared	src/apps/debuganalyzer src/apps/debuganalyzer/gui/main_window	src/apps/debuganalyzer/gui/table	src/apps/debuganalyzer/gui/thread_window	src/apps/debuganalyzer/util src/apps/debugger	src/apps/debugger/arch src/apps/debugger/arch/x86	src/apps/debugger/gui/team_window src/kits/shared">bonefish at mail.berlios.de
       </A><BR>
    <I>Sat Jun 20 01:00:28 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="017325.html">[Haiku-commits] r31126 - in haiku/trunk/src/apps/debugger: . arch	arch/x86 gui/team_window
</A></li>
        <LI>Next message: <A HREF="017327.html">[Haiku-commits] r31128 - haiku/trunk/build/jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17326">[ date ]</a>
              <a href="thread.html#17326">[ thread ]</a>
              <a href="subject.html#17326">[ subject ]</a>
              <a href="author.html#17326">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: bonefish
Date: 2009-06-20 01:00:25 +0200 (Sat, 20 Jun 2009)
New Revision: 31127
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=31127&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=31127&amp;view=rev</A>

Added:
   haiku/trunk/headers/private/shared/Variant.h
   haiku/trunk/src/kits/shared/Variant.cpp
Removed:
   haiku/trunk/src/apps/debuganalyzer/util/Variant.cpp
   haiku/trunk/src/apps/debuganalyzer/util/Variant.h
Modified:
   haiku/trunk/src/apps/debuganalyzer/Jamfile
   haiku/trunk/src/apps/debuganalyzer/gui/main_window/TeamsPage.cpp
   haiku/trunk/src/apps/debuganalyzer/gui/main_window/ThreadsPage.cpp
   haiku/trunk/src/apps/debuganalyzer/gui/table/Table.cpp
   haiku/trunk/src/apps/debuganalyzer/gui/table/Table.h
   haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumn.cpp
   haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumn.h
   haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumns.cpp
   haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumns.h
   haiku/trunk/src/apps/debuganalyzer/gui/table/TreeTable.cpp
   haiku/trunk/src/apps/debuganalyzer/gui/table/TreeTable.h
   haiku/trunk/src/apps/debuganalyzer/gui/thread_window/WaitObjectsPage.cpp
   haiku/trunk/src/apps/debuganalyzer/util/Jamfile
   haiku/trunk/src/apps/debugger/Jamfile
   haiku/trunk/src/apps/debugger/arch/CpuState.h
   haiku/trunk/src/apps/debugger/arch/x86/CpuStateX86.cpp
   haiku/trunk/src/apps/debugger/arch/x86/CpuStateX86.h
   haiku/trunk/src/apps/debugger/gui/team_window/ImageListView.cpp
   haiku/trunk/src/apps/debugger/gui/team_window/RegisterView.cpp
   haiku/trunk/src/apps/debugger/gui/team_window/StackTraceView.cpp
   haiku/trunk/src/apps/debugger/gui/team_window/ThreadListView.cpp
   haiku/trunk/src/kits/shared/Jamfile
Log:
Renamed Variant to BVariant and moved it to libshared.a.


Copied: haiku/trunk/headers/private/shared/Variant.h (from rev 31119, haiku/trunk/src/apps/debuganalyzer/util/Variant.h)
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/util/Variant.h	2009-06-19 17:26:59 UTC (rev 31119)
+++ haiku/trunk/headers/private/shared/Variant.h	2009-06-19 23:00:25 UTC (rev 31127)
@@ -0,0 +1,314 @@
+/*
+ * Copyright 2009, Ingo Weinhold, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">ingo_weinhold at gmx.de.</A>
+ * Distributed under the terms of the MIT License.
+ */
+#ifndef _VARIANT_H
+#define _VARIANT_H
+
+
+#include &lt;SupportDefs.h&gt;
+#include &lt;TypeConstants.h&gt;
+
+
+enum {
+	B_VARIANT_DONT_COPY_DATA	= 0x01,
+	B_VARIANT_OWNS_DATA			= 0x02
+};
+
+
+class BVariant {
+public:
+	inline						BVariant();
+	inline						BVariant(int8 value);
+	inline						BVariant(uint8 value);
+	inline						BVariant(int16 value);
+	inline						BVariant(uint16 value);
+	inline						BVariant(int32 value);
+	inline						BVariant(uint32 value);
+	inline						BVariant(int64 value);
+	inline						BVariant(uint64 value);
+	inline						BVariant(float value);
+	inline						BVariant(double value);
+	inline						BVariant(const void* value);
+	inline						BVariant(const char* value,
+									uint32 flags = 0);
+	inline						BVariant(const BVariant&amp; other);
+								~BVariant();
+
+	inline	void				SetTo(const BVariant&amp; other);
+	inline	void				SetTo(int8 value);
+	inline	void				SetTo(uint8 value);
+	inline	void				SetTo(int16 value);
+	inline	void				SetTo(uint16 value);
+	inline	void				SetTo(int32 value);
+	inline	void				SetTo(uint32 value);
+	inline	void				SetTo(int64 value);
+	inline	void				SetTo(uint64 value);
+	inline	void				SetTo(float value);
+	inline	void				SetTo(double value);
+	inline	void				SetTo(const void* value);
+	inline	void				SetTo(const char* value,
+									uint32 flags = 0);
+			void				Unset();
+
+	inline	BVariant&amp;			operator=(const BVariant&amp; other);
+
+			type_code			Type() const		{ return fType; }
+
+			bool				IsNumber() const;
+			bool				IsInteger() const;
+			bool				IsFloat() const;
+									// floating point, not just float
+
+			int8				ToInt8() const;
+			uint8				ToUInt8() const;
+			int16				ToInt16() const;
+			uint16				ToUInt16() const;
+			int32				ToInt32() const;
+			uint32				ToUInt32() const;
+			int64				ToInt64() const;
+			uint64				ToUInt64() const;
+			float				ToFloat() const;
+			double				ToDouble() const;
+			void*				ToPointer() const;
+			const char*			ToString() const;
+
+private:
+			void				_SetTo(const BVariant&amp; other);
+			void				_SetTo(int8 value);
+			void				_SetTo(uint8 value);
+			void				_SetTo(int16 value);
+			void				_SetTo(uint16 value);
+			void				_SetTo(int32 value);
+			void				_SetTo(uint32 value);
+			void				_SetTo(int64 value);
+			void				_SetTo(uint64 value);
+			void				_SetTo(float value);
+			void				_SetTo(double value);
+			void				_SetTo(const void* value);
+			void				_SetTo(const char* value,
+									uint32 flags);
+
+	template&lt;typename NumberType&gt;
+	inline	NumberType			_ToNumber() const;
+
+private:
+			type_code			fType;
+			uint32				fFlags;
+			union {
+				int8			fInt8;
+				uint8			fUInt8;
+				int16			fInt16;
+				uint16			fUInt16;
+				int32			fInt32;
+				uint32			fUInt32;
+				int64			fInt64;
+				uint64			fUInt64;
+				float			fFloat;
+				double			fDouble;
+				void*			fPointer;
+				char*			fString;
+			};
+};
+
+
+BVariant::BVariant()
+	:
+	fType(0),
+	fFlags(0)
+{
+}
+
+
+BVariant::BVariant(int8 value)
+{
+	_SetTo(value);
+}
+
+
+BVariant::BVariant(uint8 value)
+{
+	_SetTo(value);
+}
+
+
+BVariant::BVariant(int16 value)
+{
+	_SetTo(value);
+}
+
+
+BVariant::BVariant(uint16 value)
+{
+	_SetTo(value);
+}
+
+
+BVariant::BVariant(int32 value)
+{
+	_SetTo(value);
+}
+
+
+BVariant::BVariant(uint32 value)
+{
+	_SetTo(value);
+}
+
+
+BVariant::BVariant(int64 value)
+{
+	_SetTo(value);
+}
+
+
+BVariant::BVariant(uint64 value)
+{
+	_SetTo(value);
+}
+
+
+BVariant::BVariant(float value)
+{
+	_SetTo(value);
+}
+
+
+BVariant::BVariant(double value)
+{
+	_SetTo(value);
+}
+
+
+BVariant::BVariant(const void* value)
+{
+	_SetTo(value);
+}
+
+
+BVariant::BVariant(const char* value, uint32 flags)
+{
+	_SetTo(value, flags);
+}
+
+
+BVariant::BVariant(const BVariant&amp; other)
+{
+	_SetTo(other);
+}
+
+
+BVariant&amp;
+BVariant::operator=(const BVariant&amp; other)
+{
+	Unset();
+	_SetTo(other);
+	return *this;
+}
+
+
+void
+BVariant::SetTo(const BVariant&amp; other)
+{
+	Unset();
+	_SetTo(other);
+}
+
+
+void
+BVariant::SetTo(int8 value)
+{
+	Unset();
+	_SetTo(value);
+}
+
+
+void
+BVariant::SetTo(uint8 value)
+{
+	Unset();
+	_SetTo(value);
+}
+
+
+void
+BVariant::SetTo(int16 value)
+{
+	Unset();
+	_SetTo(value);
+}
+
+
+void
+BVariant::SetTo(uint16 value)
+{
+	Unset();
+	_SetTo(value);
+}
+
+
+void
+BVariant::SetTo(int32 value)
+{
+	Unset();
+	_SetTo(value);
+}
+
+
+void
+BVariant::SetTo(uint32 value)
+{
+	Unset();
+	_SetTo(value);
+}
+
+
+void
+BVariant::SetTo(int64 value)
+{
+	Unset();
+	_SetTo(value);
+}
+
+
+void
+BVariant::SetTo(uint64 value)
+{
+	Unset();
+	_SetTo(value);
+}
+
+
+void
+BVariant::SetTo(float value)
+{
+	Unset();
+	_SetTo(value);
+}
+
+
+void
+BVariant::SetTo(double value)
+{
+	Unset();
+	_SetTo(value);
+}
+
+
+void
+BVariant::SetTo(const void* value)
+{
+	Unset();
+	_SetTo(value);
+}
+
+
+void
+BVariant::SetTo(const char* value, uint32 flags)
+{
+	Unset();
+	_SetTo(value, flags);
+}
+
+
+#endif	// _VARIANT_H

Modified: haiku/trunk/src/apps/debuganalyzer/Jamfile
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/Jamfile	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/Jamfile	2009-06-19 23:00:25 UTC (rev 31127)
@@ -3,7 +3,7 @@
 UsePrivateHeaders debug interface kernel shared ;
 UsePrivateSystemHeaders ;
 
-HAIKU_DEBUG_ANALYZER_HEADERS = 
+HAIKU_DEBUG_ANALYZER_HEADERS =
 	$(SUBDIR)
 	[ FDirName $(SUBDIR) gui ]
 	[ FDirName $(SUBDIR) model ]
@@ -24,7 +24,7 @@
 	&lt;nogrist&gt;DebugAnalyzer_model_loader.o
 	&lt;nogrist&gt;DebugAnalyzer_util.o
 
-	libcolumnlistview.a libdebug.so be
+	libcolumnlistview.a libshared.a libdebug.so be
 	:
 	DebugAnalyzer.rdef
 ;

Modified: haiku/trunk/src/apps/debuganalyzer/gui/main_window/TeamsPage.cpp
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/gui/main_window/TeamsPage.cpp	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/gui/main_window/TeamsPage.cpp	2009-06-19 23:00:25 UTC (rev 31127)
@@ -33,7 +33,7 @@
 		return fModel-&gt;CountTeams();
 	}
 
-	virtual bool GetValueAt(int32 rowIndex, int32 columnIndex, Variant&amp; value)
+	virtual bool GetValueAt(int32 rowIndex, int32 columnIndex, BVariant&amp; value)
 	{
 		Model::Team* team = fModel-&gt;TeamAt(rowIndex);
 		if (team == NULL)
@@ -44,7 +44,7 @@
 				value.SetTo(team-&gt;ID());
 				return true;
 			case 1:
-				value.SetTo(team-&gt;Name(), VARIANT_DONT_COPY_DATA);
+				value.SetTo(team-&gt;Name(), B_VARIANT_DONT_COPY_DATA);
 				return true;
 			case 2:
 				value.SetTo(team-&gt;CreationTime());

Modified: haiku/trunk/src/apps/debuganalyzer/gui/main_window/ThreadsPage.cpp
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/gui/main_window/ThreadsPage.cpp	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/gui/main_window/ThreadsPage.cpp	2009-06-19 23:00:25 UTC (rev 31127)
@@ -33,7 +33,7 @@
 		return fModel-&gt;CountThreads();
 	}
 
-	virtual bool GetValueAt(int32 rowIndex, int32 columnIndex, Variant&amp; value)
+	virtual bool GetValueAt(int32 rowIndex, int32 columnIndex, BVariant&amp; value)
 	{
 		Model::Thread* thread = fModel-&gt;ThreadAt(rowIndex);
 		if (thread == NULL)
@@ -44,7 +44,7 @@
 				value.SetTo(thread-&gt;ID());
 				return true;
 			case 1:
-				value.SetTo(thread-&gt;Name(), VARIANT_DONT_COPY_DATA);
+				value.SetTo(thread-&gt;Name(), B_VARIANT_DONT_COPY_DATA);
 				return true;
 			case 2:
 			{

Modified: haiku/trunk/src/apps/debuganalyzer/gui/table/Table.cpp
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/gui/table/Table.cpp	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/gui/table/Table.cpp	2009-06-19 23:00:25 UTC (rev 31127)
@@ -271,7 +271,7 @@
 		return;
 
 	int32 modelIndex = fTableColumn-&gt;ModelIndex();
-	Variant value;
+	BVariant value;
 	if (!fModel-&gt;GetValueAt(field-&gt;RowIndex(), modelIndex, value))
 		return;
 	fTableColumn-&gt;DrawValue(value, rect, targetView);
@@ -293,9 +293,9 @@
 		return 1;
 
 	int32 modelIndex = fTableColumn-&gt;ModelIndex();
-	Variant value1;
+	BVariant value1;
 	bool valid1 = fModel-&gt;GetValueAt(field1-&gt;RowIndex(), modelIndex, value1);
-	Variant value2;
+	BVariant value2;
 	bool valid2 = fModel-&gt;GetValueAt(field2-&gt;RowIndex(), modelIndex, value2);
 
 	if (!valid1)
@@ -322,7 +322,7 @@
 		return Width();
 
 	int32 modelIndex = fTableColumn-&gt;ModelIndex();
-	Variant value;
+	BVariant value;
 	if (!fModel-&gt;GetValueAt(field-&gt;RowIndex(), modelIndex, value))
 		return Width();
 	return fTableColumn-&gt;GetPreferredWidth(value, parent);

Modified: haiku/trunk/src/apps/debuganalyzer/gui/table/Table.h
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/gui/table/Table.h	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/gui/table/Table.h	2009-06-19 23:00:25 UTC (rev 31127)
@@ -9,13 +9,12 @@
 
 #include &lt;ObjectList.h&gt;
 #include &lt;util/DoublyLinkedList.h&gt;
+#include &lt;Variant.h&gt;
 
 #include &quot;table/AbstractTable.h&quot;
 #include &quot;table/TableColumn.h&quot;
 
-#include &quot;Variant.h&quot;
 
-
 class Table;
 class TableModel;
 
@@ -40,7 +39,7 @@
 	virtual	int32				CountRows() const = 0;
 
 	virtual	bool				GetValueAt(int32 rowIndex, int32 columnIndex,
-									Variant&amp; value) = 0;
+									BVariant&amp; value) = 0;
 
 	virtual	bool				AddListener(TableModelListener* listener);
 	virtual	void				RemoveListener(TableModelListener* listener);

Modified: haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumn.cpp
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumn.cpp	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumn.cpp	2009-06-19 23:00:25 UTC (rev 31127)
@@ -39,20 +39,20 @@
 
 
 void
-TableColumn::DrawValue(const Variant&amp; value, BRect rect, BView* targetView)
+TableColumn::DrawValue(const BVariant&amp; value, BRect rect, BView* targetView)
 {
 }
 
 
 int
-TableColumn::CompareValues(const Variant&amp; a, const Variant&amp; b)
+TableColumn::CompareValues(const BVariant&amp; a, const BVariant&amp; b)
 {
 	return 0;
 }
 
 
 float
-TableColumn::GetPreferredWidth(const Variant&amp; value, BView* parent) const
+TableColumn::GetPreferredWidth(const BVariant&amp; value, BView* parent) const
 {
 	return Width();
 }

Modified: haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumn.h
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumn.h	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumn.h	2009-06-19 23:00:25 UTC (rev 31127)
@@ -8,7 +8,7 @@
 #include &lt;InterfaceDefs.h&gt;
 #include &lt;Rect.h&gt;
 
-#include &quot;Variant.h&quot;
+#include &lt;Variant.h&gt;
 
 
 class BString;
@@ -33,13 +33,13 @@
 	virtual	void				GetColumnName(BString* into) const;
 
 	virtual	void				DrawTitle(BRect rect, BView* targetView);
-	virtual	void				DrawValue(const Variant&amp; value, BRect rect,
+	virtual	void				DrawValue(const BVariant&amp; value, BRect rect,
 									BView* targetView);
-	virtual	int					CompareValues(const Variant&amp; a,
-									const Variant&amp; b);
-	virtual	float				GetPreferredWidth(const Variant&amp; value,
+	virtual	int					CompareValues(const BVariant&amp; a,
+									const BVariant&amp; b);
+	virtual	float				GetPreferredWidth(const BVariant&amp; value,
 									BView* parent) const;
-			
+
 private:
 			int32				fModelIndex;
 			float				fWidth;

Modified: haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumns.cpp
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumns.cpp	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumns.cpp	2009-06-19 23:00:25 UTC (rev 31127)
@@ -41,7 +41,7 @@
 
 
 void
-DelagateBasedTableColumn::DrawValue(const Variant&amp; value, BRect rect,
+DelagateBasedTableColumn::DrawValue(const BVariant&amp; value, BRect rect,
 	BView* targetView)
 {
 	fColumnDelegate-&gt;DrawField(PrepareField(value), rect, targetView);
@@ -49,7 +49,7 @@
 
 
 float
-DelagateBasedTableColumn::GetPreferredWidth(const Variant&amp; value,
+DelagateBasedTableColumn::GetPreferredWidth(const BVariant&amp; value,
 	BView* parent) const
 {
 	return fColumnDelegate-&gt;GetPreferredWidth(PrepareField(value), parent);
@@ -77,7 +77,7 @@
 
 
 BField*
-StringTableColumn::PrepareField(const Variant&amp; value) const
+StringTableColumn::PrepareField(const BVariant&amp; value) const
 {
 	fField.SetString(value.ToString());
 	fField.SetWidth(Width());
@@ -86,7 +86,7 @@
 
 
 int
-StringTableColumn::CompareValues(const Variant&amp; a, const Variant&amp; b)
+StringTableColumn::CompareValues(const BVariant&amp; a, const BVariant&amp; b)
 {
 	return strcasecmp(a.ToString(), b.ToString());
 }
@@ -106,17 +106,17 @@
 
 
 BField*
-Int32TableColumn::PrepareField(const Variant&amp; value) const
+Int32TableColumn::PrepareField(const BVariant&amp; value) const
 {
 	char buffer[16];
 	snprintf(buffer, sizeof(buffer), &quot;%ld&quot;, value.ToInt32());
 	return StringTableColumn::PrepareField(
-		Variant(buffer, VARIANT_DONT_COPY_DATA));
+		BVariant(buffer, B_VARIANT_DONT_COPY_DATA));
 }
 
 
 int
-Int32TableColumn::CompareValues(const Variant&amp; a, const Variant&amp; b)
+Int32TableColumn::CompareValues(const BVariant&amp; a, const BVariant&amp; b)
 {
 	return a.ToInt32() - b.ToInt32();
 }
@@ -136,17 +136,17 @@
 
 
 BField*
-Int64TableColumn::PrepareField(const Variant&amp; value) const
+Int64TableColumn::PrepareField(const BVariant&amp; value) const
 {
 	char buffer[32];
 	snprintf(buffer, sizeof(buffer), &quot;%lld&quot;, value.ToInt64());
 	return StringTableColumn::PrepareField(
-		Variant(buffer, VARIANT_DONT_COPY_DATA));
+		BVariant(buffer, B_VARIANT_DONT_COPY_DATA));
 }
 
 
 int
-Int64TableColumn::CompareValues(const Variant&amp; a, const Variant&amp; b)
+Int64TableColumn::CompareValues(const BVariant&amp; a, const BVariant&amp; b)
 {
 	int64 diff = a.ToInt64() - b.ToInt64();
 	if (diff == 0)
@@ -170,12 +170,12 @@
 
 
 BField*
-BigtimeTableColumn::PrepareField(const Variant&amp; value) const
+BigtimeTableColumn::PrepareField(const BVariant&amp; value) const
 {
 	bigtime_t time = value.ToInt64();
 	if (time &lt; 0) {
 		return StringTableColumn::PrepareField(
-			Variant(&quot;-&quot;, VARIANT_DONT_COPY_DATA));
+			BVariant(&quot;-&quot;, B_VARIANT_DONT_COPY_DATA));
 	}
 
 	int micros = int(time % 1000000);
@@ -189,19 +189,19 @@
 	snprintf(buffer, sizeof(buffer), &quot;%02lld:%02d:%02d:%06d&quot;, time, minutes,
 		seconds, micros);
 	return StringTableColumn::PrepareField(
-		Variant(buffer, VARIANT_DONT_COPY_DATA));
+		BVariant(buffer, B_VARIANT_DONT_COPY_DATA));
 }
 
 
 int
-BigtimeTableColumn::CompareValues(const Variant&amp; _a, const Variant&amp; _b)
+BigtimeTableColumn::CompareValues(const BVariant&amp; _a, const BVariant&amp; _b)
 {
 	bigtime_t a = _a.ToInt64();
 	bigtime_t b = _b.ToInt64();
 
 	if (a == b)
 		return 0;
-	
+
 	if (a &lt; 0)
 		return fInvalidFirst ? -1 : 1;
 	if (b &lt; 0)

Modified: haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumns.h
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumns.h	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/gui/table/TableColumns.h	2009-06-19 23:00:25 UTC (rev 31127)
@@ -23,12 +23,12 @@
 	virtual	void				DrawTitle(BRect rect, BView* targetView);
 	virtual	void				GetColumnName(BString* into) const;
 
-	virtual	void				DrawValue(const Variant&amp; value, BRect rect,
+	virtual	void				DrawValue(const BVariant&amp; value, BRect rect,
 									BView* targetView);
-	virtual	float				GetPreferredWidth(const Variant&amp; value,
+	virtual	float				GetPreferredWidth(const BVariant&amp; value,
 									BView* parent) const;
 
-	virtual	BField*				PrepareField(const Variant&amp; value) const = 0;
+	virtual	BField*				PrepareField(const BVariant&amp; value) const = 0;
 
 protected:
 			BColumn*			fColumnDelegate;
@@ -45,10 +45,10 @@
 	virtual						~StringTableColumn();
 
 protected:
-	virtual	BField*				PrepareField(const Variant&amp; value) const;
+	virtual	BField*				PrepareField(const BVariant&amp; value) const;
 
-	virtual	int					CompareValues(const Variant&amp; a,
-									const Variant&amp; b);
+	virtual	int					CompareValues(const BVariant&amp; a,
+									const BVariant&amp; b);
 
 private:
 			BStringColumn		fColumn;
@@ -65,10 +65,10 @@
 									alignment align = B_ALIGN_RIGHT);
 
 protected:
-	virtual	BField*				PrepareField(const Variant&amp; value) const;
+	virtual	BField*				PrepareField(const BVariant&amp; value) const;
 
-	virtual	int					CompareValues(const Variant&amp; a,
-									const Variant&amp; b);
+	virtual	int					CompareValues(const BVariant&amp; a,
+									const BVariant&amp; b);
 };
 
 
@@ -81,10 +81,10 @@
 									alignment align = B_ALIGN_RIGHT);
 
 protected:
-	virtual	BField*				PrepareField(const Variant&amp; value) const;
+	virtual	BField*				PrepareField(const BVariant&amp; value) const;
 
-	virtual	int					CompareValues(const Variant&amp; a,
-									const Variant&amp; b);
+	virtual	int					CompareValues(const BVariant&amp; a,
+									const BVariant&amp; b);
 };
 
 
@@ -98,10 +98,10 @@
 									alignment align = B_ALIGN_RIGHT);
 
 protected:
-	virtual	BField*				PrepareField(const Variant&amp; value) const;
+	virtual	BField*				PrepareField(const BVariant&amp; value) const;
 
-	virtual	int					CompareValues(const Variant&amp; a,
-									const Variant&amp; b);
+	virtual	int					CompareValues(const BVariant&amp; a,
+									const BVariant&amp; b);
 
 private:
 			bool				fInvalidFirst;

Modified: haiku/trunk/src/apps/debuganalyzer/gui/table/TreeTable.cpp
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/gui/table/TreeTable.cpp	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/gui/table/TreeTable.cpp	2009-06-19 23:00:25 UTC (rev 31127)
@@ -112,7 +112,7 @@
 		return;
 
 	int32 modelIndex = fTableColumn-&gt;ModelIndex();
-	Variant value;
+	BVariant value;
 	if (!fModel-&gt;GetValueAt(field-&gt;Object(), modelIndex, value))
 		return;
 	fTableColumn-&gt;DrawValue(value, rect, targetView);
@@ -134,9 +134,9 @@
 		return 1;
 
 	int32 modelIndex = fTableColumn-&gt;ModelIndex();
-	Variant value1;
+	BVariant value1;
 	bool valid1 = fModel-&gt;GetValueAt(field1-&gt;Object(), modelIndex, value1);
-	Variant value2;
+	BVariant value2;
 	bool valid2 = fModel-&gt;GetValueAt(field2-&gt;Object(), modelIndex, value2);
 
 	if (!valid1)
@@ -163,7 +163,7 @@
 		return Width();
 
 	int32 modelIndex = fTableColumn-&gt;ModelIndex();
-	Variant value;
+	BVariant value;
 	if (!fModel-&gt;GetValueAt(field-&gt;Object(), modelIndex, value))
 		return Width();
 	return fTableColumn-&gt;GetPreferredWidth(value, parent);

Modified: haiku/trunk/src/apps/debuganalyzer/gui/table/TreeTable.h
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/gui/table/TreeTable.h	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/gui/table/TreeTable.h	2009-06-19 23:00:25 UTC (rev 31127)
@@ -6,13 +6,12 @@
 #define TREE_TABLE_H
 
 #include &lt;ColumnTypes.h&gt;
+#include &lt;Variant.h&gt;
 
 #include &quot;table/AbstractTable.h&quot;
 #include &quot;table/TableColumn.h&quot;
 
-#include &quot;Variant.h&quot;
 
-
 class TreeTable;
 
 
@@ -27,7 +26,7 @@
 	virtual	void*				ChildAt(void* parent, int32 index) const = 0;
 
 	virtual	bool				GetValueAt(void* object, int32 columnIndex,
-									Variant&amp; value) = 0;
+									BVariant&amp; value) = 0;
 };
 
 

Modified: haiku/trunk/src/apps/debuganalyzer/gui/thread_window/WaitObjectsPage.cpp
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/gui/thread_window/WaitObjectsPage.cpp	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/gui/thread_window/WaitObjectsPage.cpp	2009-06-19 23:00:25 UTC (rev 31127)
@@ -55,7 +55,7 @@
 		return 6;
 	}
 
-	virtual bool GetValueAt(void* object, int32 columnIndex, Variant&amp; value)
+	virtual bool GetValueAt(void* object, int32 columnIndex, BVariant&amp; value)
 	{
 		return ((Node*)object)-&gt;GetValueAt(columnIndex, value);
 	}
@@ -66,7 +66,7 @@
 
 		virtual int32 CountChildren() const = 0;
 		virtual void* ChildAt(int32 index) const = 0;
-		virtual bool GetValueAt(int32 columnIndex, Variant&amp; value) = 0;
+		virtual bool GetValueAt(int32 columnIndex, BVariant&amp; value) = 0;
 	};
 
 	struct ObjectNode : Node {
@@ -88,7 +88,7 @@
 			return NULL;
 		}
 
-		virtual bool GetValueAt(int32 columnIndex, Variant&amp; value)
+		virtual bool GetValueAt(int32 columnIndex, BVariant&amp; value)
 		{
 			return _GetWaitObjectValueAt(object, columnIndex, value);
 		}
@@ -123,7 +123,7 @@
 			return objectNodes.ItemAt(index);
 		}
 
-		virtual bool GetValueAt(int32 columnIndex, Variant&amp; value)
+		virtual bool GetValueAt(int32 columnIndex, BVariant&amp; value)
 		{
 			if (columnIndex &lt;= 2) {
 				return _GetWaitObjectValueAt(group-&gt;WaitObjectAt(0),
@@ -174,7 +174,7 @@
 			return groupNodes.ItemAt(index);
 		}
 
-		virtual bool GetValueAt(int32 columnIndex, Variant&amp; value)
+		virtual bool GetValueAt(int32 columnIndex, BVariant&amp; value)
 		{
 			return false;
 		}
@@ -215,15 +215,15 @@
 	}
 
 	static bool _GetWaitObjectValueAt(Model::ThreadWaitObject* waitObject,
-		int32 columnIndex, Variant&amp; value)
+		int32 columnIndex, BVariant&amp; value)
 	{
 		switch (columnIndex) {
 			case 0:
 				value.SetTo(_TypeToString(waitObject-&gt;Type()),
-					VARIANT_DONT_COPY_DATA);
+					B_VARIANT_DONT_COPY_DATA);
 				return true;
 			case 1:
-				value.SetTo(waitObject-&gt;Name(), VARIANT_DONT_COPY_DATA);
+				value.SetTo(waitObject-&gt;Name(), B_VARIANT_DONT_COPY_DATA);
 				return true;
 			case 2:
 			{

Modified: haiku/trunk/src/apps/debuganalyzer/util/Jamfile
===================================================================
--- haiku/trunk/src/apps/debuganalyzer/util/Jamfile	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debuganalyzer/util/Jamfile	2009-06-19 23:00:25 UTC (rev 31127)
@@ -9,5 +9,4 @@
 MergeObject DebugAnalyzer_util.o
 	:
 	DataSource.cpp
-	Variant.cpp
 ;

Deleted: haiku/trunk/src/apps/debuganalyzer/util/Variant.cpp

Deleted: haiku/trunk/src/apps/debuganalyzer/util/Variant.h

Modified: haiku/trunk/src/apps/debugger/Jamfile
===================================================================
--- haiku/trunk/src/apps/debugger/Jamfile	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debugger/Jamfile	2009-06-19 23:00:25 UTC (rev 31127)
@@ -16,7 +16,6 @@
 
 SubDirHdrs [ FDirName $(HAIKU_TOP) src bin debug ] ;
 SubDirHdrs [ FDirName $(debugAnalyzerSources) gui ] ;
-SubDirHdrs [ FDirName $(debugAnalyzerSources) util ] ;
 
 Application Debugger :
 	Debugger.cpp
@@ -54,9 +53,6 @@
 	TeamWindow.cpp
 	ThreadListView.cpp
 
-	# DebugAnalyzer:util
-	Variant.cpp
-
 # DWARF
 #	attribute_classes.cpp
 #	AttributeValue.cpp
@@ -71,6 +67,7 @@
 
 	&lt;bin&gt;debug_utils.a
 	libcolumnlistview.a
+	libshared.a
 
 	$(TARGET_LIBSTDC++)
 	be debug
@@ -78,7 +75,4 @@
 	: Debugger.rdef
 ;
 
-SEARCH on [ FGristFiles Variant.cpp ]
-	= [ FDirName $(debugAnalyzerSources) util ] ;
-
 HaikuSubInclude gui running_teams_window ;

Modified: haiku/trunk/src/apps/debugger/arch/CpuState.h
===================================================================
--- haiku/trunk/src/apps/debugger/arch/CpuState.h	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debugger/arch/CpuState.h	2009-06-19 23:00:25 UTC (rev 31127)
@@ -8,10 +8,9 @@
 #include &lt;OS.h&gt;
 
 #include &lt;Referenceable.h&gt;
+#include &lt;Variant.h&gt;
 
-#include &quot;Variant.h&quot;
 
-
 class Register;
 
 
@@ -20,7 +19,7 @@
 	virtual						~CpuState();
 
 	virtual	bool				GetRegisterValue(const Register* reg,
-									Variant&amp; _value) = 0;
+									BVariant&amp; _value) = 0;
 };
 
 

Modified: haiku/trunk/src/apps/debugger/arch/x86/CpuStateX86.cpp
===================================================================
--- haiku/trunk/src/apps/debugger/arch/x86/CpuStateX86.cpp	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debugger/arch/x86/CpuStateX86.cpp	2009-06-19 23:00:25 UTC (rev 31127)
@@ -43,7 +43,7 @@
 
 
 bool
-CpuStateX86::GetRegisterValue(const Register* reg, Variant&amp; _value)
+CpuStateX86::GetRegisterValue(const Register* reg, BVariant&amp; _value)
 {
 	int32 index = reg-&gt;Index();
 	if (!IsRegisterSet(index))

Modified: haiku/trunk/src/apps/debugger/arch/x86/CpuStateX86.h
===================================================================
--- haiku/trunk/src/apps/debugger/arch/x86/CpuStateX86.h	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debugger/arch/x86/CpuStateX86.h	2009-06-19 23:00:25 UTC (rev 31127)
@@ -47,7 +47,7 @@
 	virtual						~CpuStateX86();
 
 	virtual	bool				GetRegisterValue(const Register* reg,
-									Variant&amp; _value);
+									BVariant&amp; _value);
 
 			bool				IsRegisterSet(int32 index) const;
 			uint32				IntRegisterValue(int32 index) const;

Modified: haiku/trunk/src/apps/debugger/gui/team_window/ImageListView.cpp
===================================================================
--- haiku/trunk/src/apps/debugger/gui/team_window/ImageListView.cpp	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debugger/gui/team_window/ImageListView.cpp	2009-06-19 23:00:25 UTC (rev 31127)
@@ -97,7 +97,7 @@
 		return fImages.CountItems();
 	}
 
-	virtual bool GetValueAt(int32 rowIndex, int32 columnIndex, Variant&amp; value)
+	virtual bool GetValueAt(int32 rowIndex, int32 columnIndex, BVariant&amp; value)
 	{
 		Image* image = fImages.ItemAt(rowIndex);
 		if (image == NULL)
@@ -108,7 +108,7 @@
 				value.SetTo(image-&gt;ID());
 				return true;
 			case 1:
-				value.SetTo(image-&gt;Name(), VARIANT_DONT_COPY_DATA);
+				value.SetTo(image-&gt;Name(), B_VARIANT_DONT_COPY_DATA);
 				return true;
 			default:
 				return false;
@@ -233,12 +233,12 @@
 {
 	fImagesTable = new Table(&quot;images list&quot;, 0);
 	AddChild(fImagesTable-&gt;ToView());
-	
+
 	// columns
 	fImagesTable-&gt;AddColumn(new Int32TableColumn(0, &quot;ID&quot;, 40, 20, 1000,
 		B_TRUNCATE_MIDDLE, B_ALIGN_RIGHT));
 	fImagesTable-&gt;AddColumn(new StringTableColumn(1, &quot;Name&quot;, 80, 40, 1000,
 		B_TRUNCATE_END, B_ALIGN_LEFT));
-	
+
 	fImagesTable-&gt;AddTableListener(this);
 }

Modified: haiku/trunk/src/apps/debugger/gui/team_window/RegisterView.cpp
===================================================================
--- haiku/trunk/src/apps/debugger/gui/team_window/RegisterView.cpp	2009-06-19 22:13:32 UTC (rev 31126)
+++ haiku/trunk/src/apps/debugger/gui/team_window/RegisterView.cpp	2009-06-19 23:00:25 UTC (rev 31127)
@@ -31,15 +31,15 @@
 	}
 
 protected:

[... truncated: 479 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="017325.html">[Haiku-commits] r31126 - in haiku/trunk/src/apps/debugger: . arch	arch/x86 gui/team_window
</A></li>
	<LI>Next message: <A HREF="017327.html">[Haiku-commits] r31128 - haiku/trunk/build/jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17326">[ date ]</a>
              <a href="thread.html#17326">[ thread ]</a>
              <a href="subject.html#17326">[ subject ]</a>
              <a href="author.html#17326">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
