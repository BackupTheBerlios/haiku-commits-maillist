<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r20046 - buildtools/trunk/legacy/gcc/gcc/fixinc
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-February/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r20046%20-%20buildtools/trunk/legacy/gcc/gcc/fixinc&In-Reply-To=%3C200702021353.l12DrCjP006802%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000597.html">
   <LINK REL="Next"  HREF="000601.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r20046 - buildtools/trunk/legacy/gcc/gcc/fixinc</H1>
    <B>bonefish at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r20046%20-%20buildtools/trunk/legacy/gcc/gcc/fixinc&In-Reply-To=%3C200702021353.l12DrCjP006802%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r20046 - buildtools/trunk/legacy/gcc/gcc/fixinc">bonefish at mail.berlios.de
       </A><BR>
    <I>Fri Feb  2 14:53:12 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000597.html">[Haiku-commits] r20045 - haiku/trunk/src/kits/interface
</A></li>
        <LI>Next message: <A HREF="000601.html">[Haiku-commits] r20047 - haiku/trunk/src/bin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#598">[ date ]</a>
              <a href="thread.html#598">[ thread ]</a>
              <a href="subject.html#598">[ subject ]</a>
              <a href="author.html#598">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: bonefish
Date: 2007-02-02 14:53:11 +0100 (Fri, 02 Feb 2007)
New Revision: 20046
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=20046&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=20046&amp;view=rev</A>

Modified:
   buildtools/trunk/legacy/gcc/gcc/fixinc/fixincl.x
   buildtools/trunk/legacy/gcc/gcc/fixinc/inclhack.def
Log:
Patch by Samuel Rodriguez Perez to fix building this gcc version for FreeBSD.
The removed header fixes don't apply to the Haiku headers anyway, so
this shouldn't be much of a problem.


Modified: buildtools/trunk/legacy/gcc/gcc/fixinc/fixincl.x
===================================================================
--- buildtools/trunk/legacy/gcc/gcc/fixinc/fixincl.x	2007-02-02 12:44:51 UTC (rev 20045)
+++ buildtools/trunk/legacy/gcc/gcc/fixinc/fixincl.x	2007-02-02 13:53:11 UTC (rev 20046)
@@ -2,11 +2,11 @@
  * 
  * DO NOT EDIT THIS FILE   (fixincl.x)
  * 
- * It has been AutoGen-ed  Monday May  3, 2004 at 05:12:43 PM MEST
+ * It has been AutoGen-ed  Friday February  2, 2007 at 12:24:45 PM CET
  * From the definitions    inclhack.def
  * and the template file   fixincl
  */
-/* DO NOT CVS-MERGE THIS FILE, EITHER Mon May  3 17:12:43 MEST 2004
+/* DO NOT CVS-MERGE THIS FILE, EITHER Fri Feb  2 12:24:45 CET 2007
  *
  * You must regenerate it.  Use the ./genfixes script.
  *
@@ -15,18 +15,19 @@
  * certain ANSI-incompatible system header files which are fixed to work
  * correctly with ANSI C and placed in a directory that GNU C will search.
  *
- * This file contains 174 fixup descriptions.
+ * This file contains 172 fixup descriptions.
  *
  * See README for more information.
  *
  *  inclhack copyright (c) 1998, 1999, 2000, 2001
  *  The Free Software Foundation, Inc.
  *
- *  inclhack is free software.
+  *  inclhack is free software.
  *  
  *  You may redistribute it and/or modify it under the terms of the
  *  GNU General Public License, as published by the Free Software
- *  Foundation; either version 2, or (at your option) any later version.
+ *  Foundation; either version 2 of the License, or (at your option)
+ *  any later version.
  *  
  *  inclhack is distributed in the hope that it will be useful,
  *  but WITHOUT ANY WARRANTY; without even the implied warranty of
@@ -34,10 +35,10 @@
  *  See the GNU General Public License for more details.
  *  
  *  You should have received a copy of the GNU General Public License
- *  along with inclhack.  See the file &quot;COPYING&quot;.  If not,
- *  write to:  The Free Software Foundation, Inc.,
- *             59 Temple Place - Suite 330,
- *             Boston,  MA  02111-1307, USA.
+ *  along with inclhack.  If not, write to:
+ *  	The Free Software Foundation, Inc.,
+ *  	51 Franklin Street, Fifth Floor
+ *  	Boston, MA  02110-1301, USA.
  */
 
 /* * * * * * * * * * * * * * * * * * * * * * * * * *
@@ -2312,41 +2313,6 @@
 
 /* * * * * * * * * * * * * * * * * * * * * * * * * *
  *
- *  Description of Hpux11_Snprintf fix
- */
-tSCC zHpux11_SnprintfName[] =
-     &quot;hpux11_snprintf&quot;;
-
-/*
- *  File name selection pattern
- */
-tSCC zHpux11_SnprintfList[] =
-  &quot;|stdio.h|&quot;;
-/*
- *  Machine/OS name selection pattern
- */
-#define apzHpux11_SnprintfMachs (const char**)NULL
-
-/*
- *  content selection pattern - do fix if pattern found
- */
-tSCC zHpux11_SnprintfSelect0[] =
-       &quot;(extern int snprintf *\\(char *\\*, *(|__|_hpux_)size_t,) *(char *\\*, *\\.\\.\\.\\);)&quot;;
-
-#define    HPUX11_SNPRINTF_TEST_CT  1
-static tTestDesc aHpux11_SnprintfTests[] = {
-  { TT_EGREP,    zHpux11_SnprintfSelect0, (regex_t*)NULL }, };
-
-/*
- *  Fix Command Arguments for Hpux11_Snprintf
- */
-static const char* apzHpux11_SnprintfPatch[] = {
-    &quot;format&quot;,
-    &quot;%1 const %3&quot;,
-    (char*)NULL };
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * *
- *
  *  Description of Hpux11_Uint32_C fix
  */
 tSCC zHpux11_Uint32_CName[] =
@@ -4766,47 +4732,6 @@
 
 /* * * * * * * * * * * * * * * * * * * * * * * * * *
  *
- *  Description of Strict_Ansi_Not_Ctd fix
- */
-tSCC zStrict_Ansi_Not_CtdName[] =
-     &quot;strict_ansi_not_ctd&quot;;
-
-/*
- *  File name selection pattern
- */
-tSCC zStrict_Ansi_Not_CtdList[] =
-  &quot;|math.h|limits.h|stdio.h|signal.h|stdlib.h|sys/signal.h|time.h|&quot;;
-/*
- *  Machine/OS name selection pattern
- */
-#define apzStrict_Ansi_Not_CtdMachs (const char**)NULL
-
-/*
- *  content selection pattern - do fix if pattern found
- */
-tSCC zStrict_Ansi_Not_CtdSelect0[] =
-       &quot;^([ \t]*(\\(|&amp;&amp;|\\|\\|)([ \t(]*!*[ \t]*defined\\([a-zA-Z_0-9]+\\)[ \t]*[|&amp;][|&amp;])*[ \t(]*)(__STDC__[ \t]*(|-[ \t]*0[ \t]*)==[ \t]*0)&quot;;
-
-/*
- *  perform the C function call test
- */
-tSCC zStrict_Ansi_Not_CtdFTst0[] = &quot;stdc_0_in_system_headers&quot;;
-
-#define    STRICT_ANSI_NOT_CTD_TEST_CT  2
-static tTestDesc aStrict_Ansi_Not_CtdTests[] = {
-  { TT_FUNCTION, zStrict_Ansi_Not_CtdFTst0,   0 /* unused */ },
-  { TT_EGREP,    zStrict_Ansi_Not_CtdSelect0, (regex_t*)NULL }, };
-
-/*
- *  Fix Command Arguments for Strict_Ansi_Not_Ctd
- */
-static const char* apzStrict_Ansi_Not_CtdPatch[] = {
-    &quot;format&quot;,
-    &quot;%1 !defined(__STRICT_ANSI__)&quot;,
-    (char*)NULL };
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * *
- *
  *  Description of Strict_Ansi_Only fix
  */
 tSCC zStrict_Ansi_OnlyName[] =
@@ -6413,7 +6338,7 @@
 
 #define    VA_I960_MACRO_TEST_CT  1
 static tTestDesc aVa_I960_MacroTests[] = {
-  { TT_EGREP,  zVa_I960_MacroSelect0,   (regex_t*)NULL }, };
+  { TT_EGREP,    zVa_I960_MacroSelect0, (regex_t*)NULL }, };
 
 /*
  *  Fix Command Arguments for Va_I960_Macro
@@ -6448,7 +6373,7 @@
 
 #define    VOID_NULL_TEST_CT  1
 static tTestDesc aVoid_NullTests[] = {
-  { TT_EGREP,  zVoid_NullSelect0,   (regex_t*)NULL }, };
+  { TT_EGREP,    zVoid_NullSelect0, (regex_t*)NULL }, };
 
 /*
  *  Fix Command Arguments for Void_Null
@@ -6483,7 +6408,7 @@
 
 #define    VXWORKS_GCC_PROBLEM_TEST_CT  1
 static tTestDesc aVxworks_Gcc_ProblemTests[] = {
-  { TT_EGREP,  zVxworks_Gcc_ProblemSelect0,   (regex_t*)NULL }, };
+  { TT_EGREP,    zVxworks_Gcc_ProblemSelect0, (regex_t*)NULL }, };
 
 /*
  *  Fix Command Arguments for Vxworks_Gcc_Problem
@@ -6532,7 +6457,7 @@
 
 #define    VXWORKS_NEEDS_VXTYPES_TEST_CT  1
 static tTestDesc aVxworks_Needs_VxtypesTests[] = {
-  { TT_EGREP,  zVxworks_Needs_VxtypesSelect0,   (regex_t*)NULL }, };
+  { TT_EGREP,    zVxworks_Needs_VxtypesSelect0, (regex_t*)NULL }, };
 
 /*
  *  Fix Command Arguments for Vxworks_Needs_Vxtypes
@@ -6577,10 +6502,10 @@
 
 #define    VXWORKS_NEEDS_VXWORKS_TEST_CT  4
 static tTestDesc aVxworks_Needs_VxworksTests[] = {
-  { TT_TEST,   zVxworks_Needs_VxworksTest0,     0 /* unused */ },
-  { TT_TEST,   zVxworks_Needs_VxworksTest1,     0 /* unused */ },
-  { TT_TEST,   zVxworks_Needs_VxworksTest2,     0 /* unused */ },
-  { TT_EGREP,  zVxworks_Needs_VxworksSelect0,   (regex_t*)NULL }, };
+  { TT_TEST,     zVxworks_Needs_VxworksTest0,   0 /* unused */ },
+  { TT_TEST,     zVxworks_Needs_VxworksTest1,   0 /* unused */ },
+  { TT_TEST,     zVxworks_Needs_VxworksTest2,   0 /* unused */ },
+  { TT_EGREP,    zVxworks_Needs_VxworksSelect0, (regex_t*)NULL }, };
 
 /*
  *  Fix Command Arguments for Vxworks_Needs_Vxworks
@@ -6621,8 +6546,8 @@
 
 #define    VXWORKS_TIME_TEST_CT  2
 static tTestDesc aVxworks_TimeTests[] = {
-  { TT_TEST,   zVxworks_TimeTest0,     0 /* unused */ },
-  { TT_EGREP,  zVxworks_TimeSelect0,   (regex_t*)NULL }, };
+  { TT_TEST,     zVxworks_TimeTest0,   0 /* unused */ },
+  { TT_EGREP,    zVxworks_TimeSelect0, (regex_t*)NULL }, };
 
 /*
  *  Fix Command Arguments for Vxworks_Time
@@ -6901,9 +6826,9 @@
  *
  *  List of all fixes
  */
-#define REGEX_COUNT          196
+#define REGEX_COUNT          194
 #define MACH_LIST_SIZE_LIMIT 261
-#define FIX_COUNT            174
+#define FIX_COUNT            172
 
 /*
  *  Enumerate the fixes
@@ -6963,7 +6888,6 @@
     HPUX11_ABS_FIXIDX,
     HPUX11_FABSF_FIXIDX,
     HPUX11_SIZE_T_FIXIDX,
-    HPUX11_SNPRINTF_FIXIDX,
     HPUX11_UINT32_C_FIXIDX,
     HPUX11_VSNPRINTF_FIXIDX,
     HPUX8_BOGUS_INLINES_FIXIDX,
@@ -7027,7 +6951,6 @@
     STDIO_STDARG_H_FIXIDX,
     STDIO_VA_LIST_FIXIDX,
     STRICT_ANSI_NOT_FIXIDX,
-    STRICT_ANSI_NOT_CTD_FIXIDX,
     STRICT_ANSI_ONLY_FIXIDX,
     STRUCT_FILE_FIXIDX,
     STRUCT_SOCKADDR_FIXIDX,
@@ -7356,11 +7279,6 @@
      HPUX11_SIZE_T_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,
      aHpux11_Size_TTests,   apzHpux11_Size_TPatch, 0 },
 
-  {  zHpux11_SnprintfName,    zHpux11_SnprintfList,
-     apzHpux11_SnprintfMachs,
-     HPUX11_SNPRINTF_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,
-     aHpux11_SnprintfTests,   apzHpux11_SnprintfPatch, 0 },
-
   {  zHpux11_Uint32_CName,    zHpux11_Uint32_CList,
      apzHpux11_Uint32_CMachs,
      HPUX11_UINT32_C_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,
@@ -7676,11 +7594,6 @@
      STRICT_ANSI_NOT_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,
      aStrict_Ansi_NotTests,   apzStrict_Ansi_NotPatch, 0 },
 
-  {  zStrict_Ansi_Not_CtdName,    zStrict_Ansi_Not_CtdList,
-     apzStrict_Ansi_Not_CtdMachs,
-     STRICT_ANSI_NOT_CTD_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,
-     aStrict_Ansi_Not_CtdTests,   apzStrict_Ansi_Not_CtdPatch, 0 },
-
   {  zStrict_Ansi_OnlyName,    zStrict_Ansi_OnlyList,
      apzStrict_Ansi_OnlyMachs,
      STRICT_ANSI_ONLY_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,

Modified: buildtools/trunk/legacy/gcc/gcc/fixinc/inclhack.def
===================================================================
--- buildtools/trunk/legacy/gcc/gcc/fixinc/inclhack.def	2007-02-02 12:44:51 UTC (rev 20045)
+++ buildtools/trunk/legacy/gcc/gcc/fixinc/inclhack.def	2007-02-02 13:53:11 UTC (rev 20046)
@@ -1316,25 +1316,6 @@
 
 
 /*
- *  Fix hpux 11.00 broken snprintf declaration
- *  (third argument is char *, needs to be const char * to prevent
- *  spurious warnings with -Wwrite-strings or in C++).
- */
-fix = {
-    hackname = hpux11_snprintf;
-    files    = stdio.h;
-    select   = '(extern int snprintf *\(char *\*, *(|__|_hpux_)size_t,)'
-                                    ' *(char *\*, *\.\.\.\);)';
-    c_fix     = format;
-    c_fix_arg = '%1 const %3';
-
-    test_text = &quot;extern int snprintf(char *, size_t, char *, ...);\n&quot;
-                &quot;extern int snprintf(char *, __size_t, char *, ...);\n&quot;
-                &quot;extern int snprintf(char *, _hpux_size_t, char *, ...);&quot;;
-};
-
-
-/*
  * In inttypes.h on HPUX 11, the use of __CONCAT__ in the definition
  * of UINT32_C has undefined behavior according to ISO/ANSI:
  * the arguments to __CONCAT__ are not macro expanded before the
@@ -2653,40 +2634,6 @@
 };
 
 /*
- *  &quot;__STDC__-0==0&quot;
- *  is &quot;!defined( __STRICT_ANSI__ )&quot; on continued #if-s
- */
-fix = {
-    hackname = strict_ansi_not_ctd;
-    files    = math.h, limits.h, stdio.h, signal.h,
-               stdlib.h, sys/signal.h, time.h;
-    /*
-     * Starting at the beginning of a line, skip white space and
-     * a leading &quot;(&quot; or &quot;&amp;&amp;&quot; or &quot;||&quot;.  One of those must be found.
-     * Then, zero, one or more copies of a &quot;defined(_FOO_BAR_) &amp;&amp;&quot;
-     * expression.  If these are nested, then they must accumulate
-     * because we won't match any closing parentheses.  Finally,
-     * after skipping over all that, we must then match our suspect
-     * phrase:  &quot;__STDC__-0==0&quot; with or without white space.
-     */
-    select   = &quot;^([ \t]*&quot; '(\(|&amp;&amp;|\|\|)'
-               &quot;([ \t(]*!*[ \t]*defined\\([a-zA-Z_0-9]+\\)[ \t]*[|&amp;][|&amp;])*&quot;
-               &quot;[ \t(]*)&quot;
-               &quot;(__STDC__[ \t]*(|-[ \t]*0[ \t]*)==[ \t]*0)&quot;;
-    c_test   = stdc_0_in_system_headers;
-
-    c_fix     = format;
-    c_fix_arg = &quot;%1 !defined(__STRICT_ANSI__)&quot;;
-
-    test_text = &quot;#if 1 &amp;&amp; \\\\\n&quot;
-               &quot;&amp;&amp; defined(mumbling) |&amp; (__STDC__ - 0 == 0) \\\\\n&quot;
-               &quot;( __STDC__ == 0 &amp;&amp; !defined(_XOPEN_SOURCE) \\\\\n&quot;
-               &quot;|| __STDC__ - 0 == 0 ) /* not std C */\n&quot;
-               &quot;int foo;\n#endif&quot;;
-};
-
-
-/*
  *  &quot;__STDC__!=0&quot; or &quot;__STDC__==1&quot; or &quot;__STDC__-0==1&quot;
  *  is &quot;defined( __STRICT_ANSI__ )&quot;
  */


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000597.html">[Haiku-commits] r20045 - haiku/trunk/src/kits/interface
</A></li>
	<LI>Next message: <A HREF="000601.html">[Haiku-commits] r20047 - haiku/trunk/src/bin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#598">[ date ]</a>
              <a href="thread.html#598">[ thread ]</a>
              <a href="subject.html#598">[ subject ]</a>
              <a href="author.html#598">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
