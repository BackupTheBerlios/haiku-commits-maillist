<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r29410 - in haiku/trunk: build/jam	headers/private/userlandfs/shared	src/add-ons/kernel/file_systems/ramfs	src/add-ons/kernel/file_systems/reiserfs	src/add-ons/kernel/file_systems/userlandfs/kernel_add_on	src/add-ons/kernel/file_systems/userlandfs/server	src/add-ons/kernel/file_systems/userlandfs/server/haiku	src/add-ons/kernel/file_systems/userlandfs/shared	src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs	src/tests/add-ons/kernel/file_systems/userlandfs/ramfs/beos_interface	src/tests/add-ons/kernel/file_systems/userlandfs/reiserfs
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-March/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r29410%20-%20in%20haiku/trunk%3A%20build/jam%0A%09headers/private/userlandfs/shared%0A%09src/add-ons/kernel/file_systems/ramfs%0A%09src/add-ons/kernel/file_systems/reiserfs%0A%09src/add-ons/kernel/file_systems/userlandfs/kernel_add_on%0A%09src/add-ons/kernel/file_systems/userlandfs/server%0A%09src/add-ons/kernel/file_systems/userlandfs/server/haiku%0A%09src/add-ons/kernel/file_systems/userlandfs/shared%0A%09src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs%0A%09src/tests/add-ons/kernel/file_systems/userlandfs/ramfs/beos_interface%0A%09src/tests/add-ons/kernel/file_systems/userlandfs/reiserfs&In-Reply-To=%3C200903052327.n25NRdBx027225%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014690.html">
   <LINK REL="Next"  HREF="014692.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r29410 - in haiku/trunk: build/jam	headers/private/userlandfs/shared	src/add-ons/kernel/file_systems/ramfs	src/add-ons/kernel/file_systems/reiserfs	src/add-ons/kernel/file_systems/userlandfs/kernel_add_on	src/add-ons/kernel/file_systems/userlandfs/server	src/add-ons/kernel/file_systems/userlandfs/server/haiku	src/add-ons/kernel/file_systems/userlandfs/shared	src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs	src/tests/add-ons/kernel/file_systems/userlandfs/ramfs/beos_interface	src/tests/add-ons/kernel/file_systems/userlandfs/reiserfs</H1>
    <B>bonefish at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r29410%20-%20in%20haiku/trunk%3A%20build/jam%0A%09headers/private/userlandfs/shared%0A%09src/add-ons/kernel/file_systems/ramfs%0A%09src/add-ons/kernel/file_systems/reiserfs%0A%09src/add-ons/kernel/file_systems/userlandfs/kernel_add_on%0A%09src/add-ons/kernel/file_systems/userlandfs/server%0A%09src/add-ons/kernel/file_systems/userlandfs/server/haiku%0A%09src/add-ons/kernel/file_systems/userlandfs/shared%0A%09src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs%0A%09src/tests/add-ons/kernel/file_systems/userlandfs/ramfs/beos_interface%0A%09src/tests/add-ons/kernel/file_systems/userlandfs/reiserfs&In-Reply-To=%3C200903052327.n25NRdBx027225%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r29410 - in haiku/trunk: build/jam	headers/private/userlandfs/shared	src/add-ons/kernel/file_systems/ramfs	src/add-ons/kernel/file_systems/reiserfs	src/add-ons/kernel/file_systems/userlandfs/kernel_add_on	src/add-ons/kernel/file_systems/userlandfs/server	src/add-ons/kernel/file_systems/userlandfs/server/haiku	src/add-ons/kernel/file_systems/userlandfs/shared	src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs	src/tests/add-ons/kernel/file_systems/userlandfs/ramfs/beos_interface	src/tests/add-ons/kernel/file_systems/userlandfs/reiserfs">bonefish at mail.berlios.de
       </A><BR>
    <I>Fri Mar  6 00:27:39 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="014690.html">[Haiku-commits] r29409 -	haiku/trunk/headers/private/userlandfs/shared
</A></li>
        <LI>Next message: <A HREF="014692.html">[Haiku-commits] r29411 - haiku/trunk/src/system/kernel/messaging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14691">[ date ]</a>
              <a href="thread.html#14691">[ thread ]</a>
              <a href="subject.html#14691">[ subject ]</a>
              <a href="author.html#14691">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: bonefish
Date: 2009-03-06 00:27:35 +0100 (Fri, 06 Mar 2009)
New Revision: 29410
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=29410&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=29410&amp;view=rev</A>

Removed:
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/Locker.cpp
Modified:
   haiku/trunk/build/jam/HaikuImage
   haiku/trunk/headers/private/userlandfs/shared/Locker.h
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Attribute.h
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/AttributeIndexImpl.cpp
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/AttributeIterator.h
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocator.cpp
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorArea.h
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorAreaBucket.cpp
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorAreaBucket.h
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Directory.cpp
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Directory.h
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Entry.h
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/EntryIterator.h
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Jamfile
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/LastModifiedIndex.cpp
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Node.cpp
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Node.h
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Query.h
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/SizeIndex.cpp
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Volume.cpp
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Volume.h
   haiku/trunk/src/add-ons/kernel/file_systems/ramfs/kernel_interface.cpp
   haiku/trunk/src/add-ons/kernel/file_systems/reiserfs/Jamfile
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Jamfile
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/Jamfile
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/haiku/Jamfile
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Attribute.h
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/AttributeIndexImpl.cpp
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/AttributeIterator.h
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/BlockAllocator.cpp
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/BlockAllocatorArea.h
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/BlockAllocatorAreaBucket.cpp
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/BlockAllocatorAreaBucket.h
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Directory.cpp
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Directory.h
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Entry.h
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/EntryIterator.h
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Jamfile
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/LastModifiedIndex.cpp
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Locking.h
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Node.cpp
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Node.h
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Query.h
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/SizeIndex.cpp
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Volume.cpp
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Volume.h
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/kernel_interface.cpp
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/ramfs/beos_interface/Jamfile
   haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/reiserfs/Jamfile
Log:
* Removed UserlandFS shared Locker class. Instead use BLocker in userland and
  RecursiveLock in the kernel.
* Several adjustments according to UserlandFS header changes.
* Re-added reiserfs to image.


Modified: haiku/trunk/build/jam/HaikuImage
===================================================================
--- haiku/trunk/build/jam/HaikuImage	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/build/jam/HaikuImage	2009-03-05 23:27:35 UTC (rev 29410)
@@ -139,7 +139,7 @@
 	config_manager agp_gart usb firewire $(X86_ONLY)acpi
 ;
 BEOS_ADD_ONS_FILE_SYSTEMS = bfs cdda ext2 fat iso9660 nfs attribute_overlay
-	write_overlay ;
+	write_overlay $(GPL_ONLY)reiserfs ;
 #googlefs $(GPL_ONLY)ntfs ;
 
 

Modified: haiku/trunk/headers/private/userlandfs/shared/Locker.h
===================================================================
--- haiku/trunk/headers/private/userlandfs/shared/Locker.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/headers/private/userlandfs/shared/Locker.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -1,59 +1,33 @@
-//
-//	$Id: Locker.h,v 1.1 2002/07/09 12:24:33 ejakowatz Exp $
-//
-//	This is the Locker interface for OpenBeOS.  It has been created to
-//	be source and binary compatible with the BeOS version of Locker.
-//
-// bonefish:
-// * Removed `virtual' from destructor and FBC reserved space.
-// * Renamed to Locker.
+/*
+ * Copyright 2009, Ingo Weinhold, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">ingo_weinhold at gmx.de.</A>
+ * Distributed under the terms of the MIT License.
+ */
+#ifndef	_USERLAND_FS_LOCKER_H
+#define	_USERLAND_FS_LOCKER_H
 
+#ifdef _KERNEL_MODE
+	// kernel: use the RecursiveLock class
 
-#ifndef	_OPENBEOS_LOCKER_H
-#define	_OPENBEOS_LOCKER_H
 
+#include &quot;RecursiveLock.h&quot;
 
-#include &lt;OS.h&gt;
-#include &lt;SupportDefs.h&gt;
 
 namespace UserlandFSUtil {
+	typedef RecursiveLock Locker;
+};
 
-class Locker {
-public:
-	Locker();
-	Locker(const char *name);
-	Locker(bool benaphore_style);
-	Locker(const char *name, bool benaphore_style);
-	
-	// The following constructor is not documented in the BeBook
-	// and is only listed here to ensure binary compatibility.
-	// DO NOT USE THIS CONSTRUCTOR!
-	Locker(const char *name, bool benaphore_style, bool);
 
-	~Locker();
+#else
+	// userland: use the BLocker class
 
-	bool Lock(void);
-	status_t LockWithTimeout(bigtime_t timeout);
-	void Unlock(void);
+#include &lt;Locker.h&gt;
 
-	thread_id LockingThread(void) const;
-	bool IsLocked(void) const;
-	int32 CountLocks(void) const;
-	int32 CountLockRequests(void) const;
-	sem_id Sem(void) const;
-
-private:
-	void InitLocker(const char *name, bool benaphore_style);
-	bool AcquireLock(bigtime_t timeout, status_t *error);
-
-	int32 fBenaphoreCount;
-	sem_id fSemaphoreID;
-	thread_id fLockOwner;
-	int32 fRecursiveCount;
+namespace UserlandFSUtil {
+	typedef BLocker Locker;
 };
 
-} // namespace UserlandFSUtil
+#endif	// kernel/userland
 
 using UserlandFSUtil::Locker;
 
-#endif // _OPENBEOS_LOCKER_H
+#endif	// _USERLAND_FS_LOCKER_H

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Attribute.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Attribute.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Attribute.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -3,17 +3,19 @@
 #ifndef ATTRIBUTE_H
 #define ATTRIBUTE_H
 
+#include &lt;util/DoublyLinkedList.h&gt;
+
 #include &quot;AttributeIndex.h&quot;
 #include &quot;AttributeIterator.h&quot;
 #include &quot;DataContainer.h&quot;
-#include &quot;DLList.h&quot;
 #include &quot;String.h&quot;
 
 class AllocationInfo;
 class Node;
 class Volume;
 
-class Attribute : public DataContainer, public DLListLinkImpl&lt;Attribute&gt; {
+class Attribute : public DataContainer,
+	public DoublyLinkedListLinkImpl&lt;Attribute&gt; {
 public:
 	Attribute(Volume *volume, Node *node, const char *name, uint32 type = 0);
 	~Attribute();
@@ -44,7 +46,7 @@
 	// iterator management
 	void AttachAttributeIterator(AttributeIterator *iterator);
 	void DetachAttributeIterator(AttributeIterator *iterator);
-	inline DLList&lt;AttributeIterator&gt; *GetAttributeIteratorList()
+	inline DoublyLinkedList&lt;AttributeIterator&gt; *GetAttributeIteratorList()
 		{ return &fIterators; }
 
 	// debugging
@@ -58,7 +60,7 @@
 	bool						fInIndex;
 
 	// iterator management
-	DLList&lt;AttributeIterator&gt;	fIterators;
+	DoublyLinkedList&lt;AttributeIterator&gt;	fIterators;
 };
 
 #endif	// ATTRIBUTE_H

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/AttributeIndexImpl.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/AttributeIndexImpl.cpp	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/AttributeIndexImpl.cpp	2009-03-05 23:27:35 UTC (rev 29410)
@@ -153,7 +153,7 @@
 class AttributeIndexImpl::Iterator
 	: public NodeEntryIterator&lt;
 		AttributeNodeIterator&lt;AttributeTree::Iterator&gt; &gt;,
-	  public DLListLinkImpl&lt;Iterator&gt;, public EntryListener,
+	  public DoublyLinkedListLinkImpl&lt;Iterator&gt;, public EntryListener,
 	  public NodeListener {
 public:
 	Iterator();
@@ -182,7 +182,7 @@
 
 
 // IteratorList
-class AttributeIndexImpl::IteratorList : public DLList&lt;Iterator&gt; {};
+class AttributeIndexImpl::IteratorList : public DoublyLinkedList&lt;Iterator&gt; {};
 
 
 // AttributeIndexImpl
@@ -203,7 +203,7 @@
 {
 	if (fIterators) {
 		// unset the iterators
-		for (Iterator *iterator = fIterators-&gt;GetFirst();
+		for (Iterator *iterator = fIterators-&gt;First();
 			 iterator;
 			 iterator = fIterators-&gt;GetNext(iterator)) {
 			iterator-&gt;SetTo(NULL, NULL, 0);
@@ -243,7 +243,7 @@
 			if (foundAttribute &amp;&amp; *foundAttribute == attribute) {
 				Node *node = attribute-&gt;GetNode();
 				// update the iterators
-				for (Iterator *iterator = fIterators-&gt;GetFirst();
+				for (Iterator *iterator = fIterators-&gt;First();
 					 iterator;
 					 iterator = fIterators-&gt;GetNext(iterator)) {
 					if (iterator-&gt;GetCurrentNode() == node)

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/AttributeIterator.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/AttributeIterator.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/AttributeIterator.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -5,12 +5,13 @@
 
 #include &lt;SupportDefs.h&gt;
 
-#include &quot;DLList.h&quot;
+#include &lt;util/DoublyLinkedList.h&gt;
 
+
 class Attribute;
 class Node;
 
-class AttributeIterator : public DLListLinkImpl&lt;AttributeIterator&gt; {
+class AttributeIterator : public DoublyLinkedListLinkImpl&lt;AttributeIterator&gt; {
 public:
 	AttributeIterator(Node *node = NULL);
 	~AttributeIterator();

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocator.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocator.cpp	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocator.cpp	2009-03-05 23:27:35 UTC (rev 29410)
@@ -8,8 +8,8 @@
 #include &quot;BlockAllocatorArea.h&quot;
 #include &quot;BlockAllocatorAreaBucket.h&quot;
 #include &quot;Debug.h&quot;
-#include &quot;DLList.h&quot;
 
+
 // BlockAllocator
 
 // constructor

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorArea.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorArea.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorArea.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -3,11 +3,13 @@
 #ifndef BLOCK_ALLOCATOR_AREA_H
 #define BLOCK_ALLOCATOR_AREA_H
 
+#include &lt;util/DoublyLinkedList.h&gt;
+
 #include &quot;BlockAllocator.h&quot;
 #include &quot;BlockAllocatorMisc.h&quot;
-#include &quot;DLList.h&quot;
 
-class BlockAllocator::Area : public DLListLinkImpl&lt;Area&gt; {
+
+class BlockAllocator::Area : public DoublyLinkedListLinkImpl&lt;Area&gt; {
 public:
 	static Area *Create(size_t size);
 	void Delete();

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorAreaBucket.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorAreaBucket.cpp	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorAreaBucket.cpp	2009-03-05 23:27:35 UTC (rev 29410)
@@ -14,7 +14,7 @@
 // destructor
 BlockAllocator::AreaBucket::~AreaBucket()
 {
-	while (Area *area = fAreas.GetFirst()) {
+	while (Area *area = fAreas.First()) {
 		RemoveArea(area);
 		area-&gt;Delete();
 	}

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorAreaBucket.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorAreaBucket.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/BlockAllocatorAreaBucket.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -3,11 +3,13 @@
 #ifndef BLOCK_ALLOCATOR_AREA_BUCKET_H
 #define BLOCK_ALLOCATOR_AREA_BUCKET_H
 
+#include &lt;util/DoublyLinkedList.h&gt;
+
 #include &quot;BlockAllocator.h&quot;
 #include &quot;BlockAllocatorArea.h&quot;
 #include &quot;Debug.h&quot;
-#include &quot;DLList.h&quot;
 
+
 class BlockAllocator::AreaBucket {
 public:
 	AreaBucket();
@@ -23,8 +25,8 @@
 	inline void AddArea(Area *area);
 	inline void RemoveArea(Area *area);
 
-	inline Area *GetFirstArea() const	{ return fAreas.GetFirst(); }
-	inline Area *GetLastArea() const	{ return fAreas.GetLast(); }
+	inline Area *GetFirstArea() const	{ return fAreas.First(); }
+	inline Area *GetLastArea() const	{ return fAreas.Last(); }
 	inline Area *GetNextArea(Area* area) const;
 
 	inline bool IsEmpty() const			{ return fAreas.IsEmpty(); }
@@ -33,7 +35,7 @@
 	bool SanityCheck(bool deep = false) const;
 
 private:
-	DLList&lt;Area&gt;	fAreas;
+	DoublyLinkedList&lt;Area&gt;	fAreas;
 	int32			fIndex;
 	size_t			fMinSize;
 	size_t			fMaxSize;

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Directory.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Directory.cpp	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Directory.cpp	2009-03-05 23:27:35 UTC (rev 29410)
@@ -20,7 +20,7 @@
 Directory::~Directory()
 {
 	// delete all entries
-	while (Entry *entry = fEntries.GetFirst()) {
+	while (Entry *entry = fEntries.First()) {
 		if (DeleteEntry(entry) != B_OK) {
 			FATAL((&quot;Could not delete all entries in directory.\n&quot;));
 			break;
@@ -41,7 +41,7 @@
 status_t
 Directory::Unlink(Entry *entry)
 {
-	if (entry == fReferrers.GetFirst())
+	if (entry == fReferrers.First())
 		return Node::Unlink(entry);
 	return B_BAD_VALUE;
 }
@@ -64,7 +64,7 @@
 Directory *
 Directory::GetParent() const
 {
-	Entry *entry = fReferrers.GetFirst();
+	Entry *entry = fReferrers.First();
 	return (entry ? entry-&gt;GetParent() : NULL);
 }
 
@@ -190,8 +190,9 @@
 		if (GetVolume()-&gt;IteratorLock()) {
 			// set the iterators' current entry
 			Entry *nextEntry = fEntries.GetNext(entry);
-			DLList&lt;EntryIterator&gt; *iterators = entry-&gt;GetEntryIteratorList();
-			for (EntryIterator *iterator = iterators-&gt;GetFirst();
+			DoublyLinkedList&lt;EntryIterator&gt; *iterators
+				= entry-&gt;GetEntryIteratorList();
+			for (EntryIterator *iterator = iterators-&gt;First();
 				 iterator;
 				 iterator = iterators-&gt;GetNext(iterator)) {
 				iterator-&gt;SetCurrent(nextEntry, true);
@@ -199,7 +200,7 @@
 			// Move the iterators from one list to the other, or just remove
 			// them, if there is no next entry.
 			if (nextEntry) {
-				DLList&lt;EntryIterator&gt; *nextIterators
+				DoublyLinkedList&lt;EntryIterator&gt; *nextIterators
 					= nextEntry-&gt;GetEntryIteratorList();
 				nextIterators-&gt;MoveFrom(iterators);
 			} else
@@ -292,7 +293,7 @@
 	status_t error = (entry ? B_OK : B_BAD_VALUE);
 	if (error == B_OK) {
 		if (!*entry)
-			*entry = fEntries.GetLast();
+			*entry = fEntries.Last();
 		else if ((*entry)-&gt;GetParent() == this)
 			*entry = fEntries.GetPrevious(*entry);
 		else
@@ -310,7 +311,7 @@
 	status_t error = (entry ? B_OK : B_BAD_VALUE);
 	if (error == B_OK) {
 		if (!*entry)
-			*entry = fEntries.GetFirst();
+			*entry = fEntries.First();
 		else if ((*entry)-&gt;GetParent() == this)
 			*entry = fEntries.GetNext(*entry);
 		else

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Directory.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Directory.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Directory.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -3,9 +3,11 @@
 #ifndef DIRECTORY_H
 #define DIRECTORY_H
 
-#include &quot;DLList.h&quot;
+#include &lt;util/DoublyLinkedList.h&gt;
+
 #include &quot;Node.h&quot;
 
+
 class Entry;
 class File;
 class SymLink;
@@ -50,7 +52,7 @@
 	status_t _CreateCommon(Node *node, const char *name);
 
 private:
-	DLList&lt;Entry&gt;	fEntries;
+	DoublyLinkedList&lt;Entry&gt;	fEntries;
 };
 
 #endif	// DIRECTORY_H

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Entry.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Entry.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Entry.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -6,7 +6,8 @@
 #include &lt;fs_interface.h&gt;
 #include &lt;SupportDefs.h&gt;
 
-#include &quot;DLList.h&quot;
+#include &lt;util/DoublyLinkedList.h&gt;
+
 #include &quot;String.h&quot;
 
 class AllocationInfo;
@@ -14,7 +15,7 @@
 class EntryIterator;
 class Node;
 
-class Entry : public DLListLinkImpl&lt;Entry&gt; {
+class Entry : public DoublyLinkedListLinkImpl&lt;Entry&gt; {
 public:
 	Entry(const char *name, Node *node = NULL, Directory *parent = NULL);
 	~Entry();
@@ -33,13 +34,14 @@
 	inline const char *GetName() const			{ return fName.GetString(); }
 
 //	inline Volume *GetVolume() const			{ return fVolume; }
-	
-	inline DLListLink&lt;Entry&gt; *GetReferrerLink()	{ return &fReferrerLink; }
 
+	inline DoublyLinkedListLink&lt;Entry&gt; *GetReferrerLink()
+		{ return &fReferrerLink; }
+
 	// entry iterator management
 	void AttachEntryIterator(EntryIterator *iterator);
 	void DetachEntryIterator(EntryIterator *iterator);
-	inline DLList&lt;EntryIterator&gt; *GetEntryIteratorList()
+	inline DoublyLinkedList&lt;EntryIterator&gt; *GetEntryIteratorList()
 		{ return &fIterators; }
 
 	// debugging
@@ -49,15 +51,15 @@
 	Directory				*fParent;
 	Node					*fNode;
 	String					fName;
-	DLListLink&lt;Entry&gt;		fReferrerLink;
+	DoublyLinkedListLink&lt;Entry&gt;		fReferrerLink;
 	// iterator management
-	DLList&lt;EntryIterator&gt;	fIterators;
+	DoublyLinkedList&lt;EntryIterator&gt;	fIterators;
 };
 
 // GetNodeReferrerLink
 class GetNodeReferrerLink {
 private:
-	typedef DLListLink&lt;Entry&gt; Link;
+	typedef DoublyLinkedListLink&lt;Entry&gt; Link;
 
 public:
 	inline Link *operator()(Entry *entry) const

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/EntryIterator.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/EntryIterator.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/EntryIterator.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -5,12 +5,12 @@
 
 #include &lt;SupportDefs.h&gt;
 
-#include &quot;DLList.h&quot;
+#include &lt;util/DoublyLinkedList.h&gt;
 
 class Directory;
 class Entry;
 
-class EntryIterator : public DLListLinkImpl&lt;EntryIterator&gt; {
+class EntryIterator : public DoublyLinkedListLinkImpl&lt;EntryIterator&gt; {
 public:
 	EntryIterator(Directory *directory = NULL);
 	~EntryIterator();

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Jamfile	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Jamfile	2009-03-05 23:27:35 UTC (rev 29410)
@@ -4,7 +4,7 @@
 	file_systems userlandfs ] ;
 local userlandFSIncludes = [ PrivateHeaders userlandfs ] ;
 
-UsePrivateHeaders kernel ;	# for &lt;util/*&gt;
+UsePrivateHeaders kernel shared ;
 
 SubDirHdrs [ FDirName $(userlandFSIncludes) shared ] ;
 
@@ -14,7 +14,6 @@
 
 KernelAddon ramfs
 	: Debug.cpp
-	  Locker.cpp
 	  String.cpp
 
 	  AllocationInfo.cpp

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/LastModifiedIndex.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/LastModifiedIndex.cpp	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/LastModifiedIndex.cpp	2009-03-05 23:27:35 UTC (rev 29410)
@@ -66,13 +66,13 @@
 
 
 // IteratorList
-class LastModifiedIndex::IteratorList : public DLList&lt;Iterator&gt; {};
+class LastModifiedIndex::IteratorList : public DoublyLinkedList&lt;Iterator&gt; {};
 
 
 // Iterator
 class LastModifiedIndex::Iterator
 	: public NodeEntryIterator&lt;LastModifiedIndex::NodeTree::Iterator&gt;,
-	  public DLListLinkImpl&lt;Iterator&gt;, public EntryListener,
+	  public DoublyLinkedListLinkImpl&lt;Iterator&gt;, public EntryListener,
 	  public NodeListener {
 public:
 	Iterator();
@@ -122,7 +122,7 @@
 		fVolume-&gt;RemoveNodeListener(this, NULL);
 	if (fIterators) {
 		// unset the iterators
-		for (Iterator *iterator = fIterators-&gt;GetFirst();
+		for (Iterator *iterator = fIterators-&gt;First();
 			 iterator;
 			 iterator = fIterators-&gt;GetNext(iterator)) {
 			iterator-&gt;SetTo(NULL, 0);
@@ -151,7 +151,7 @@
 			oldModified), node, &amp;it);
 		if (foundNode &amp;&amp; *foundNode == node) {
 			// update the iterators
-			for (Iterator *iterator = fIterators-&gt;GetFirst();
+			for (Iterator *iterator = fIterators-&gt;First();
 				 iterator;
 				 iterator = fIterators-&gt;GetNext(iterator)) {
 				if (iterator-&gt;GetCurrentNode() == node)

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Node.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Node.cpp	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Node.cpp	2009-03-05 23:27:35 UTC (rev 29410)
@@ -64,7 +64,7 @@
 Node::~Node()
 {
 	// delete all attributes
-	while (Attribute *attribute = fAttributes.GetFirst()) {
+	while (Attribute *attribute = fAttributes.First()) {
 		status_t error = DeleteAttribute(attribute);
 		if (error != B_OK) {
 			FATAL((&quot;Node::~Node(): Failed to delete attribute!\n&quot;));
@@ -96,7 +96,7 @@
 
 	return B_OK;
 }
-	
+
 // RemoveReference
 void
 Node::RemoveReference()
@@ -234,9 +234,9 @@
 		if (GetVolume()-&gt;IteratorLock()) {
 			// set the iterators' current entry
 			Attribute *nextAttr = fAttributes.GetNext(attribute);
-			DLList&lt;AttributeIterator&gt; *iterators
+			DoublyLinkedList&lt;AttributeIterator&gt; *iterators
 				= attribute-&gt;GetAttributeIteratorList();
-			for (AttributeIterator *iterator = iterators-&gt;GetFirst();
+			for (AttributeIterator *iterator = iterators-&gt;First();
 				 iterator;
 				 iterator = iterators-&gt;GetNext(iterator)) {
 				iterator-&gt;SetCurrent(nextAttr, true);
@@ -244,7 +244,7 @@
 			// Move the iterators from one list to the other, or just remove
 			// them, if there is no next attribute.
 			if (nextAttr) {
-				DLList&lt;AttributeIterator&gt; *nextIterators
+				DoublyLinkedList&lt;AttributeIterator&gt; *nextIterators
 					= nextAttr-&gt;GetAttributeIteratorList();
 				nextIterators-&gt;MoveFrom(iterators);
 			} else
@@ -293,7 +293,7 @@
 	status_t error = (attribute ? B_OK : B_BAD_VALUE);
 	if (error == B_OK) {
 		if (!*attribute)
-			*attribute = fAttributes.GetLast();
+			*attribute = fAttributes.Last();
 		else if ((*attribute)-&gt;GetNode() == this)
 			*attribute = fAttributes.GetPrevious(*attribute);
 		else
@@ -311,7 +311,7 @@
 	status_t error = (attribute ? B_OK : B_BAD_VALUE);
 	if (error == B_OK) {
 		if (!*attribute)
-			*attribute = fAttributes.GetFirst();
+			*attribute = fAttributes.First();
 		else if ((*attribute)-&gt;GetNode() == this)
 			*attribute = fAttributes.GetNext(*attribute);
 		else
@@ -326,14 +326,14 @@
 Entry *
 Node::GetFirstReferrer() const
 {
-	return fReferrers.GetHead();
+	return fReferrers.First();
 }
 
 // GetLastReferrer
 Entry *
 Node::GetLastReferrer() const
 {
-	return fReferrers.GetTail();
+	return fReferrers.Last();
 }
 
 // GetPreviousReferrer

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Node.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Node.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Node.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -29,7 +29,7 @@
 	ACCESS_X	= S_IXOTH,
 };
 
-class Node : public DLListLinkImpl&lt;Node&gt; {
+class Node : public DoublyLinkedListLinkImpl&lt;Node&gt; {
 public:
 	Node(Volume *volume, uint8 type);
 	virtual ~Node();
@@ -121,11 +121,11 @@
 	bool					fIsKnownToVFS;
 
 	// attribute management
-	DLList&lt;Attribute&gt;		fAttributes;
+	DoublyLinkedList&lt;Attribute&gt;		fAttributes;
 
 protected:
 	// entries referring to this node
-	DLList&lt;Entry, GetNodeReferrerLink&gt;	fReferrers;
+	DoublyLinkedList&lt;Entry, GetNodeReferrerLink&gt;	fReferrers;
 };
 
 // MarkUnmodified

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Query.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Query.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Query.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -12,7 +12,8 @@
 #include &lt;OS.h&gt;
 #include &lt;SupportDefs.h&gt;
 
-#include &quot;DLList.h&quot;
+#include &lt;util/DoublyLinkedList.h&gt;
+
 #include &quot;Index.h&quot;
 #include &quot;Stack.h&quot;
 #include &quot;ramfs.h&quot;
@@ -93,7 +94,7 @@
 		Term *fTerm;
 };
 
-class Query : public DLListLinkImpl&lt;Query&gt; {
+class Query : public DoublyLinkedListLinkImpl&lt;Query&gt; {
 	public:
 		Query(Volume *volume, Expression *expression, uint32 flags);
 		~Query();

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/SizeIndex.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/SizeIndex.cpp	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/SizeIndex.cpp	2009-03-05 23:27:35 UTC (rev 29410)
@@ -65,13 +65,13 @@
 
 
 // IteratorList
-class SizeIndex::IteratorList : public DLList&lt;Iterator&gt; {};
+class SizeIndex::IteratorList : public DoublyLinkedList&lt;Iterator&gt; {};
 
 
 // Iterator
 class SizeIndex::Iterator
 	: public NodeEntryIterator&lt;SizeIndex::NodeTree::Iterator&gt;,
-	  public DLListLinkImpl&lt;Iterator&gt;, public EntryListener,
+	  public DoublyLinkedListLinkImpl&lt;Iterator&gt;, public EntryListener,
 	  public NodeListener {
 public:
 	Iterator();
@@ -120,7 +120,7 @@
 		fVolume-&gt;RemoveNodeListener(this, NULL);
 	if (fIterators) {
 		// unset the iterators
-		for (Iterator *iterator = fIterators-&gt;GetFirst();
+		for (Iterator *iterator = fIterators-&gt;First();
 			 iterator;
 			 iterator = fIterators-&gt;GetNext(iterator)) {
 			iterator-&gt;SetTo(NULL, 0);
@@ -149,7 +149,7 @@
 										node, &amp;it);
 		if (foundNode &amp;&amp; *foundNode == node) {
 			// update the iterators
-			for (Iterator *iterator = fIterators-&gt;GetFirst();
+			for (Iterator *iterator = fIterators-&gt;First();
 				 iterator;
 				 iterator = fIterators-&gt;GetNext(iterator)) {
 				if (iterator-&gt;GetCurrentNode() == node)

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Volume.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Volume.cpp	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Volume.cpp	2009-03-05 23:27:35 UTC (rev 29410)
@@ -6,12 +6,12 @@
 // it under the terms of the GNU General Public License as published by
 // the Free Software Foundation; either version 2 of the License, or
 // (at your option) any later version.
-// 
+//
 // This program is distributed in the hope that it will be useful,
 // but WITHOUT ANY WARRANTY; without even the implied warranty of
 // MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 // GNU General Public License for more details.
-// 
+//
 // You should have received a copy of the GNU General Public License
 // along with this program; if not, write to the Free Software
 // Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
@@ -774,7 +774,7 @@
 {
 	AutoLocker&lt;Locker&gt; _(fQueryLocker);
 
-	for (Query* query = fQueries.GetFirst();
+	for (Query* query = fQueries.First();
 		 query;
 		 query = fQueries.GetNext(query)) {
 		query-&gt;LiveUpdate(entry, node, attribute, type, oldKey, oldLength,

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Volume.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Volume.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/Volume.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -6,12 +6,12 @@
 // it under the terms of the GNU General Public License as published by
 // the Free Software Foundation; either version 2 of the License, or
 // (at your option) any later version.
-// 
+//
 // This program is distributed in the hope that it will be useful,
 // but WITHOUT ANY WARRANTY; without even the implied warranty of
 // MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 // GNU General Public License for more details.
-// 
+//
 // You should have received a copy of the GNU General Public License
 // along with this program; if not, write to the Free Software
 // Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
@@ -25,7 +25,8 @@
 #include &lt;fs_interface.h&gt;
 #include &lt;SupportDefs.h&gt;
 
-#include &quot;DLList.h&quot;
+#include &lt;util/DoublyLinkedList.h&gt;
+
 #include &quot;Entry.h&quot;
 #include &quot;List.h&quot;
 #include &quot;Locker.h&quot;
@@ -176,7 +177,7 @@
 	void IteratorUnlock();
 
 private:
-	typedef DLList&lt;Query&gt;	QueryList;
+	typedef DoublyLinkedList&lt;Query&gt;	QueryList;
 
 	dev_t					fID;
 	ino_t					fNextNodeID;

Modified: haiku/trunk/src/add-ons/kernel/file_systems/ramfs/kernel_interface.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/ramfs/kernel_interface.cpp	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/ramfs/kernel_interface.cpp	2009-03-05 23:27:35 UTC (rev 29410)
@@ -40,10 +40,11 @@
 #include &lt;NodeMonitor.h&gt;
 #include &lt;TypeConstants.h&gt;
 
+#include &lt;AutoDeleter.h&gt;
+
 #include &quot;AllocationInfo.h&quot;
 #include &quot;AttributeIndex.h&quot;
 #include &quot;AttributeIterator.h&quot;
-#include &quot;AutoDeleter.h&quot;
 #include &quot;Debug.h&quot;
 #include &quot;Directory.h&quot;
 #include &quot;Entry.h&quot;

Modified: haiku/trunk/src/add-ons/kernel/file_systems/reiserfs/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/reiserfs/Jamfile	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/reiserfs/Jamfile	2009-03-05 23:27:35 UTC (rev 29410)
@@ -4,6 +4,7 @@
 	userlandfs ] ;
 local userlandFSIncludes = [ PrivateHeaders userlandfs ] ;
 
+UsePrivateHeaders kernel ;
 SubDirHdrs [ FDirName $(userlandFSIncludes) shared ] ;
 
 SEARCH_SOURCE += [ FDirName $(userlandFSTop) shared ] ;
@@ -11,9 +12,8 @@
 DEFINES += DEBUG_APP=&quot;\\\&quot;reiserfs\\\&quot;&quot; ;
 
 KernelAddon reiserfs
-	: 
+	:
 	Debug.cpp
-	Locker.cpp
 	String.cpp
 
 	Block.cpp
@@ -26,7 +26,7 @@
 	SuperBlock.cpp
 	Tree.cpp
 	VNode.cpp
-	Volume.cpp 
+	Volume.cpp
 
 	: $(HAIKU_LIBSUPC++)
 ;

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Jamfile	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Jamfile	2009-03-05 23:27:35 UTC (rev 29410)
@@ -18,7 +18,6 @@
 	: AreaSupport.cpp
 	  Debug.cpp
 	  LazyInitializable.cpp
-	  Locker.cpp
 	  ObjectTracker.cpp
 	  Port.cpp
 	  Request.cpp

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/Jamfile	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/Jamfile	2009-03-05 23:27:35 UTC (rev 29410)
@@ -22,7 +22,6 @@
 	Debug.cpp
 	driver_settings.c
 	LazyInitializable.cpp
-	Locker.cpp
 	ObjectTracker.cpp
 	Port.cpp
 	Request.cpp

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/haiku/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/haiku/Jamfile	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/haiku/Jamfile	2009-03-05 23:27:35 UTC (rev 29410)
@@ -35,4 +35,5 @@
 
 	:
 	&lt;nogrist&gt;userlandfs_server
+	be	# for BLocker only
 ;

Deleted: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/Locker.cpp

Modified: haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Attribute.h
===================================================================
--- haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Attribute.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/Attribute.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -3,17 +3,19 @@
 #ifndef ATTRIBUTE_H
 #define ATTRIBUTE_H
 
+#include &lt;util/DoublyLinkedList.h&gt;
+
 #include &quot;AttributeIndex.h&quot;
 #include &quot;AttributeIterator.h&quot;
 #include &quot;DataContainer.h&quot;
-#include &quot;DLList.h&quot;
 #include &quot;String.h&quot;
 
 class AllocationInfo;
 class Node;
 class Volume;
 
-class Attribute : public DataContainer, public DLListLinkImpl&lt;Attribute&gt; {
+class Attribute : public DataContainer,
+	public DoublyLinkedListLinkImpl&lt;Attribute&gt; {
 public:
 	Attribute(Volume *volume, Node *node, const char *name, uint32 type = 0);
 	~Attribute();
@@ -41,7 +43,7 @@
 	// iterator management
 	void AttachAttributeIterator(AttributeIterator *iterator);
 	void DetachAttributeIterator(AttributeIterator *iterator);
-	inline DLList&lt;AttributeIterator&gt; *GetAttributeIteratorList()
+	inline DoublyLinkedList&lt;AttributeIterator&gt; *GetAttributeIteratorList()
 		{ return &fIterators; }
 
 	// debugging
@@ -55,7 +57,7 @@
 	bool						fInIndex;
 
 	// iterator management
-	DLList&lt;AttributeIterator&gt;	fIterators;
+	DoublyLinkedList&lt;AttributeIterator&gt;	fIterators;
 };
 
 #endif	// ATTRIBUTE_H

Modified: haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/AttributeIndexImpl.cpp
===================================================================
--- haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/AttributeIndexImpl.cpp	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/AttributeIndexImpl.cpp	2009-03-05 23:27:35 UTC (rev 29410)
@@ -157,7 +157,7 @@
 class AttributeIndexImpl::Iterator
 	: public NodeEntryIterator&lt;
 		AttributeNodeIterator&lt;AttributeTree::Iterator&gt; &gt;,
-	  public DLListLinkImpl&lt;Iterator&gt;, public EntryListener,
+	  public DoublyLinkedListLinkImpl&lt;Iterator&gt;, public EntryListener,
 	  public NodeListener {
 public:
 	Iterator();
@@ -186,7 +186,7 @@
 
 
 // IteratorList
-class AttributeIndexImpl::IteratorList : public DLList&lt;Iterator&gt; {};
+class AttributeIndexImpl::IteratorList : public DoublyLinkedList&lt;Iterator&gt; {};
 
 
 // AttributeIndexImpl
@@ -207,7 +207,7 @@
 {
 	if (fIterators) {
 		// unset the iterators
-		for (Iterator *iterator = fIterators-&gt;GetFirst();
+		for (Iterator *iterator = fIterators-&gt;First();
 			 iterator;
 			 iterator = fIterators-&gt;GetNext(iterator)) {
 			iterator-&gt;SetTo(NULL, NULL, 0);
@@ -247,7 +247,7 @@
 			if (foundAttribute &amp;&amp; *foundAttribute == attribute) {
 				Node *node = attribute-&gt;GetNode();
 				// update the iterators
-				for (Iterator *iterator = fIterators-&gt;GetFirst();
+				for (Iterator *iterator = fIterators-&gt;First();
 					 iterator;
 					 iterator = fIterators-&gt;GetNext(iterator)) {
 					if (iterator-&gt;GetCurrentNode() == node)

Modified: haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/AttributeIterator.h
===================================================================
--- haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/AttributeIterator.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/AttributeIterator.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -5,12 +5,13 @@
 
 #include &lt;SupportDefs.h&gt;
 
-#include &quot;DLList.h&quot;
+#include &lt;util/DoublyLinkedList.h&gt;
 
+
 class Attribute;
 class Node;
 
-class AttributeIterator : public DLListLinkImpl&lt;AttributeIterator&gt; {
+class AttributeIterator : public DoublyLinkedListLinkImpl&lt;AttributeIterator&gt; {
 public:
 	AttributeIterator(Node *node = NULL);
 	~AttributeIterator();

Modified: haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/BlockAllocator.cpp
===================================================================
--- haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/BlockAllocator.cpp	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/BlockAllocator.cpp	2009-03-05 23:27:35 UTC (rev 29410)
@@ -8,8 +8,8 @@
 #include &quot;BlockAllocatorArea.h&quot;
 #include &quot;BlockAllocatorAreaBucket.h&quot;
 #include &quot;Debug.h&quot;
-#include &quot;DLList.h&quot;
 
+
 // BlockAllocator
 
 // constructor

Modified: haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/BlockAllocatorArea.h
===================================================================
--- haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/BlockAllocatorArea.h	2009-03-05 23:23:01 UTC (rev 29409)
+++ haiku/trunk/src/tests/add-ons/kernel/file_systems/userlandfs/r5/src/test/ramfs/BlockAllocatorArea.h	2009-03-05 23:27:35 UTC (rev 29410)
@@ -3,11 +3,13 @@
 #ifndef BLOCK_ALLOCATOR_AREA_H
 #define BLOCK_ALLOCATOR_AREA_H
 
+#include &lt;util/DoublyLinkedList.h&gt;
+
 #include &quot;BlockAllocator.h&quot;
 #include &quot;BlockAllocatorMisc.h&quot;
-#include &quot;DLList.h&quot;
 
-class BlockAllocator::Area : public DLListLinkImpl&lt;Area&gt; {
+

[... truncated: 618 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014690.html">[Haiku-commits] r29409 -	haiku/trunk/headers/private/userlandfs/shared
</A></li>
	<LI>Next message: <A HREF="014692.html">[Haiku-commits] r29411 - haiku/trunk/src/system/kernel/messaging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14691">[ date ]</a>
              <a href="thread.html#14691">[ thread ]</a>
              <a href="subject.html#14691">[ subject ]</a>
              <a href="author.html#14691">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
