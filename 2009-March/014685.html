<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r29404 - in haiku/trunk:	headers/private/userlandfs/shared	src/add-ons/kernel/file_systems/userlandfs/kernel_add_on	src/add-ons/kernel/file_systems/userlandfs/server	src/add-ons/kernel/file_systems/userlandfs/server/haiku	src/add-ons/kernel/file_systems/userlandfs/shared
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-March/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r29404%20-%20in%20haiku/trunk%3A%0A%09headers/private/userlandfs/shared%0A%09src/add-ons/kernel/file_systems/userlandfs/kernel_add_on%0A%09src/add-ons/kernel/file_systems/userlandfs/server%0A%09src/add-ons/kernel/file_systems/userlandfs/server/haiku%0A%09src/add-ons/kernel/file_systems/userlandfs/shared&In-Reply-To=%3C200903052203.n25M3495019591%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014684.html">
   <LINK REL="Next"  HREF="014686.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r29404 - in haiku/trunk:	headers/private/userlandfs/shared	src/add-ons/kernel/file_systems/userlandfs/kernel_add_on	src/add-ons/kernel/file_systems/userlandfs/server	src/add-ons/kernel/file_systems/userlandfs/server/haiku	src/add-ons/kernel/file_systems/userlandfs/shared</H1>
    <B>bonefish at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r29404%20-%20in%20haiku/trunk%3A%0A%09headers/private/userlandfs/shared%0A%09src/add-ons/kernel/file_systems/userlandfs/kernel_add_on%0A%09src/add-ons/kernel/file_systems/userlandfs/server%0A%09src/add-ons/kernel/file_systems/userlandfs/server/haiku%0A%09src/add-ons/kernel/file_systems/userlandfs/shared&In-Reply-To=%3C200903052203.n25M3495019591%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r29404 - in haiku/trunk:	headers/private/userlandfs/shared	src/add-ons/kernel/file_systems/userlandfs/kernel_add_on	src/add-ons/kernel/file_systems/userlandfs/server	src/add-ons/kernel/file_systems/userlandfs/server/haiku	src/add-ons/kernel/file_systems/userlandfs/shared">bonefish at mail.berlios.de
       </A><BR>
    <I>Thu Mar  5 23:03:04 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="014684.html">[Haiku-commits] r29403 - haiku/trunk/src/preferences/bluetooth
</A></li>
        <LI>Next message: <A HREF="014686.html">[Haiku-commits] r29405 - haiku/trunk/build/jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14685">[ date ]</a>
              <a href="thread.html#14685">[ thread ]</a>
              <a href="subject.html#14685">[ subject ]</a>
              <a href="author.html#14685">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: bonefish
Date: 2009-03-05 23:02:59 +0100 (Thu, 05 Mar 2009)
New Revision: 29404
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=29404&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=29404&amp;view=rev</A>

Removed:
   haiku/trunk/headers/private/userlandfs/shared/AutoDeleter.h
   haiku/trunk/headers/private/userlandfs/shared/AutoLocker.h
   haiku/trunk/headers/private/userlandfs/shared/DLList.h
   haiku/trunk/headers/private/userlandfs/shared/Referencable.h
   haiku/trunk/headers/private/userlandfs/shared/SLList.h
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/Referencable.cpp
Modified:
   haiku/trunk/headers/private/userlandfs/shared/ObjectTracker.h
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/FileSystem.h
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/FileSystemInitializer.h
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Jamfile
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Volume.cpp
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Volume.h
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/Jamfile
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/haiku/Jamfile
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/DriverSettings.cpp
   haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/ObjectTracker.cpp
Log:
Removed several shared userlandfs classes that exist as Haiku shared or kernel
util classes as well.


Deleted: haiku/trunk/headers/private/userlandfs/shared/AutoDeleter.h

Deleted: haiku/trunk/headers/private/userlandfs/shared/AutoLocker.h

Deleted: haiku/trunk/headers/private/userlandfs/shared/DLList.h

Modified: haiku/trunk/headers/private/userlandfs/shared/ObjectTracker.h
===================================================================
--- haiku/trunk/headers/private/userlandfs/shared/ObjectTracker.h	2009-03-05 21:36:17 UTC (rev 29403)
+++ haiku/trunk/headers/private/userlandfs/shared/ObjectTracker.h	2009-03-05 22:02:59 UTC (rev 29404)
@@ -1,9 +1,12 @@
-// ObjectTracker.h
-
+/*
+ * Copyright 2001-2009, Ingo Weinhold, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">ingo_weinhold at gmx.de.</A>
+ * Distributed under the terms of the MIT License.
+ */
 #ifndef USERLAND_FS_OBJECT_TRACKER_H
 #define USERLAND_FS_OBJECT_TRACKER_H
 
-#include &quot;DLList.h&quot;
+#include &lt;util/DoublyLinkedList.h&gt;
+
 #include &quot;Locker.h&quot;
 
 namespace UserlandFSUtil {
@@ -21,18 +24,18 @@
 	friend class ObjectTracker;
 	friend class GetObjectTrackableLink;
 
-			DLListLink&lt;ObjectTrackable&gt; fLink;
+			DoublyLinkedListLink&lt;ObjectTrackable&gt; fLink;
 };
 
 // GetObjectTrackableLink
 struct GetObjectTrackableLink {
-	inline DLListLink&lt;ObjectTrackable&gt; *operator()(
+	inline DoublyLinkedListLink&lt;ObjectTrackable&gt; *operator()(
 		ObjectTrackable* trackable) const
 	{
 		return &amp;trackable-&gt;fLink;
 	}
 
-	inline const DLListLink&lt;ObjectTrackable&gt; *operator()(
+	inline const DoublyLinkedListLink&lt;ObjectTrackable&gt; *operator()(
 		const ObjectTrackable* trackable) const
 	{
 		return &amp;trackable-&gt;fLink;
@@ -59,7 +62,8 @@
 
 private:
 			Locker				fLock;
-			DLList&lt;ObjectTrackable, GetObjectTrackableLink&gt; fTrackables;
+			DoublyLinkedList&lt;ObjectTrackable, GetObjectTrackableLink&gt;
+				fTrackables;
 
 	static	ObjectTracker*		sTracker;
 };

Deleted: haiku/trunk/headers/private/userlandfs/shared/Referencable.h

Deleted: haiku/trunk/headers/private/userlandfs/shared/SLList.h

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/FileSystem.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/FileSystem.h	2009-03-05 21:36:17 UTC (rev 29403)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/FileSystem.h	2009-03-05 22:02:59 UTC (rev 29404)
@@ -10,7 +10,6 @@
 #include &quot;FSCapabilities.h&quot;
 #include &quot;LazyInitializable.h&quot;
 #include &quot;Locker.h&quot;
-#include &quot;Referencable.h&quot;
 #include &quot;RequestPort.h&quot;
 #include &quot;RequestPortPool.h&quot;
 #include &quot;String.h&quot;

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/FileSystemInitializer.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/FileSystemInitializer.h	2009-03-05 21:36:17 UTC (rev 29403)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/FileSystemInitializer.h	2009-03-05 22:02:59 UTC (rev 29404)
@@ -5,8 +5,9 @@
 #ifndef USERLAND_FS_FILE_SYSTEM_INITIALIZER_H
 #define USERLAND_FS_FILE_SYSTEM_INITIALIZER_H
 
+#include &lt;Referenceable.h&gt;
+
 #include &quot;LazyInitializable.h&quot;
-#include &quot;Referencable.h&quot;
 
 
 namespace UserlandFSUtil {
@@ -19,7 +20,7 @@
 
 class FileSystem;
 
-class FileSystemInitializer : public LazyInitializable, public Referencable {
+class FileSystemInitializer : public LazyInitializable, public Referenceable {
 public:
 								FileSystemInitializer(const char* name);
 								~FileSystemInitializer();

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Jamfile	2009-03-05 21:36:17 UTC (rev 29403)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Jamfile	2009-03-05 22:02:59 UTC (rev 29404)
@@ -4,6 +4,7 @@
 	userlandfs  ] ;
 local userlandFSIncludes = [ PrivateHeaders userlandfs ] ;
 
+UsePrivateHeaders shared ;
 UsePrivateKernelHeaders ;
 SubDirHdrs [ FDirName $(userlandFSIncludes) private ] ;
 SubDirHdrs [ FDirName $(userlandFSIncludes) shared ] ;
@@ -20,7 +21,6 @@
 	  Locker.cpp
 	  ObjectTracker.cpp
 	  Port.cpp
-	  Referencable.cpp
 	  Request.cpp
 	  RequestAllocator.cpp
 	  RequestHandler.cpp

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Volume.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Volume.cpp	2009-03-05 21:36:17 UTC (rev 29403)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Volume.cpp	2009-03-05 22:02:59 UTC (rev 29404)
@@ -71,7 +71,7 @@
 
 // constructor
 Volume::Volume(FileSystem* fileSystem, fs_volume* fsVolume)
-	: Referencable(true),
+	: Referenceable(true),
 	  fFileSystem(fileSystem),
 	  fFSVolume(fsVolume),
 	  fUserlandVolume(NULL),

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Volume.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Volume.h	2009-03-05 21:36:17 UTC (rev 29403)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/kernel_add_on/Volume.h	2009-03-05 22:02:59 UTC (rev 29404)
@@ -7,8 +7,9 @@
 
 #include &lt;fs_interface.h&gt;
 
+#include &lt;Referenceable.h&gt;
+
 #include &quot;FSCapabilities.h&quot;
-#include &quot;Referencable.h&quot;
 
 namespace UserlandFSUtil {
 
@@ -29,7 +30,7 @@
 
 class FileSystem;
 
-class Volume : public Referencable {
+class Volume : public Referenceable {
 public:
 								Volume(FileSystem* fileSystem,
 									fs_volume* fsVolume);

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/Jamfile	2009-03-05 21:36:17 UTC (rev 29403)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/Jamfile	2009-03-05 22:02:59 UTC (rev 29404)
@@ -5,7 +5,7 @@
 local userlandFSIncludes = [ PrivateHeaders userlandfs ] ;
 
 SubDirSysHdrs [ FDirName $(userlandFSIncludes) ] ;
-UsePrivateHeaders libroot ;
+UsePrivateHeaders kernel libroot shared ;
 SubDirHdrs [ FDirName $(userlandFSIncludes) private ] ;
 SubDirHdrs [ FDirName $(userlandFSIncludes) shared ] ;
 
@@ -25,7 +25,6 @@
 	Locker.cpp
 	ObjectTracker.cpp
 	Port.cpp
-	Referencable.cpp
 	Request.cpp
 	RequestAllocator.cpp
 	RequestHandler.cpp

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/haiku/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/haiku/Jamfile	2009-03-05 21:36:17 UTC (rev 29403)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/server/haiku/Jamfile	2009-03-05 22:02:59 UTC (rev 29404)
@@ -9,7 +9,7 @@
 SubDirHdrs [ FDirName $(userlandFSIncludes) shared ] ;
 
 UsePrivateSystemHeaders ;
-UsePrivateHeaders libroot ;
+UsePrivateHeaders libroot shared ;
 
 SEARCH_SOURCE += [ FDirName $(userlandFSTop) private ] ;
 SEARCH_SOURCE += [ FDirName $(userlandFSTop) shared ] ;

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/DriverSettings.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/DriverSettings.cpp	2009-03-05 21:36:17 UTC (rev 29403)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/DriverSettings.cpp	2009-03-05 22:02:59 UTC (rev 29404)
@@ -6,8 +6,9 @@
 
 #include &lt;driver_settings.h&gt;
 
+#include &lt;Referenceable.h&gt;
+
 #include &quot;DriverSettings.h&quot;
-#include &quot;Referencable.h&quot;
 #include &quot;String.h&quot;
 
 // The parameter values that shall be evaluated to true.
@@ -21,9 +22,9 @@
 // #pragma mark ----- DriverParameterIterator -----
 
 // Delegate
-class DriverParameterIterator::Delegate : public Referencable {
+class DriverParameterIterator::Delegate : public Referenceable {
 public:
-								Delegate() : Referencable(true) {}
+								Delegate() : Referenceable(true) {}
 	virtual						~Delegate() {}
 
 	virtual	Delegate*			Clone() const = 0;
@@ -222,7 +223,7 @@
 {
 	int32 count;
 	return (GetParametersAndCount(&amp;count) ? count : 0);
-	
+
 }
 
 // GetParameters

Modified: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/ObjectTracker.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/ObjectTracker.cpp	2009-03-05 21:36:17 UTC (rev 29403)
+++ haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/ObjectTracker.cpp	2009-03-05 22:02:59 UTC (rev 29404)
@@ -3,7 +3,8 @@
 #include &lt;new&gt;
 #include &lt;typeinfo&gt;
 
-#include &quot;AutoLocker.h&quot;
+#include &lt;AutoLocker.h&gt;
+
 #include &quot;Debug.h&quot;
 #include &quot;ObjectTracker.h&quot;
 
@@ -34,7 +35,7 @@
 // destructor
 ObjectTracker::~ObjectTracker()
 {
-	ObjectTrackable* trackable = fTrackables.GetFirst();
+	ObjectTrackable* trackable = fTrackables.First();
 	if (trackable) {
 		WARN((&quot;ObjectTracker: WARNING: There are still undeleted objects:\n&quot;));
 		for (; trackable; trackable = fTrackables.GetNext(trackable)) {

Deleted: haiku/trunk/src/add-ons/kernel/file_systems/userlandfs/shared/Referencable.cpp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014684.html">[Haiku-commits] r29403 - haiku/trunk/src/preferences/bluetooth
</A></li>
	<LI>Next message: <A HREF="014686.html">[Haiku-commits] r29405 - haiku/trunk/build/jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14685">[ date ]</a>
              <a href="thread.html#14685">[ thread ]</a>
              <a href="subject.html#14685">[ subject ]</a>
              <a href="author.html#14685">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
