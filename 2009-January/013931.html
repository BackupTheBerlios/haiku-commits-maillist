<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r28932 - in haiku/trunk:	headers/libs/freetype2/freetype	headers/libs/freetype2/freetype/config	headers/libs/freetype2/freetype/internal	headers/libs/freetype2/freetype/internal/services	src/libs/freetype2/autofit src/libs/freetype2/base	src/libs/freetype2/bdf src/libs/freetype2/cache	src/libs/freetype2/cff src/libs/freetype2/cid	src/libs/freetype2/gzip src/libs/freetype2/lzw	src/libs/freetype2/otvalid src/libs/freetype2/pcf	src/libs/freetype2/pfr src/libs/freetype2/psaux	src/libs/freetype2/pshinter src/libs/freetype2/psnames	src/libs/freetype2/raster src/libs/freetype2/sfnt	src/libs/freetype2/smooth src/libs/freetype2/truetype	src/libs/freetype2/type1 src/libs/freetype2/type42	src/libs/freetype2/winfonts
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r28932%20-%20in%20haiku/trunk%3A%0A%09headers/libs/freetype2/freetype%0A%09headers/libs/freetype2/freetype/config%0A%09headers/libs/freetype2/freetype/internal%0A%09headers/libs/freetype2/freetype/internal/services%0A%09src/libs/freetype2/autofit%20src/libs/freetype2/base%0A%09src/libs/freetype2/bdf%20src/libs/freetype2/cache%0A%09src/libs/freetype2/cff%20src/libs/freetype2/cid%0A%09src/libs/freetype2/gzip%20src/libs/freetype2/lzw%0A%09src/libs/freetype2/otvalid%20src/libs/freetype2/pcf%0A%09src/libs/freetype2/pfr%20src/libs/freetype2/psaux%0A%09src/libs/freetype2/pshinter%20src/libs/freetype2/psnames%0A%09src/libs/freetype2/raster%20src/libs/freetype2/sfnt%0A%09src/libs/freetype2/smooth%20src/libs/freetype2/truetype%0A%09src/libs/freetype2/type1%20src/libs/freetype2/type42%0A%09src/libs/freetype2/winfonts&In-Reply-To=%3C200901181213.n0ICD8IQ028897%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013930.html">
   <LINK REL="Next"  HREF="013932.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r28932 - in haiku/trunk:	headers/libs/freetype2/freetype	headers/libs/freetype2/freetype/config	headers/libs/freetype2/freetype/internal	headers/libs/freetype2/freetype/internal/services	src/libs/freetype2/autofit src/libs/freetype2/base	src/libs/freetype2/bdf src/libs/freetype2/cache	src/libs/freetype2/cff src/libs/freetype2/cid	src/libs/freetype2/gzip src/libs/freetype2/lzw	src/libs/freetype2/otvalid src/libs/freetype2/pcf	src/libs/freetype2/pfr src/libs/freetype2/psaux	src/libs/freetype2/pshinter src/libs/freetype2/psnames	src/libs/freetype2/raster src/libs/freetype2/sfnt	src/libs/freetype2/smooth src/libs/freetype2/truetype	src/libs/freetype2/type1 src/libs/freetype2/type42	src/libs/freetype2/winfonts</H1>
    <B>korli at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r28932%20-%20in%20haiku/trunk%3A%0A%09headers/libs/freetype2/freetype%0A%09headers/libs/freetype2/freetype/config%0A%09headers/libs/freetype2/freetype/internal%0A%09headers/libs/freetype2/freetype/internal/services%0A%09src/libs/freetype2/autofit%20src/libs/freetype2/base%0A%09src/libs/freetype2/bdf%20src/libs/freetype2/cache%0A%09src/libs/freetype2/cff%20src/libs/freetype2/cid%0A%09src/libs/freetype2/gzip%20src/libs/freetype2/lzw%0A%09src/libs/freetype2/otvalid%20src/libs/freetype2/pcf%0A%09src/libs/freetype2/pfr%20src/libs/freetype2/psaux%0A%09src/libs/freetype2/pshinter%20src/libs/freetype2/psnames%0A%09src/libs/freetype2/raster%20src/libs/freetype2/sfnt%0A%09src/libs/freetype2/smooth%20src/libs/freetype2/truetype%0A%09src/libs/freetype2/type1%20src/libs/freetype2/type42%0A%09src/libs/freetype2/winfonts&In-Reply-To=%3C200901181213.n0ICD8IQ028897%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r28932 - in haiku/trunk:	headers/libs/freetype2/freetype	headers/libs/freetype2/freetype/config	headers/libs/freetype2/freetype/internal	headers/libs/freetype2/freetype/internal/services	src/libs/freetype2/autofit src/libs/freetype2/base	src/libs/freetype2/bdf src/libs/freetype2/cache	src/libs/freetype2/cff src/libs/freetype2/cid	src/libs/freetype2/gzip src/libs/freetype2/lzw	src/libs/freetype2/otvalid src/libs/freetype2/pcf	src/libs/freetype2/pfr src/libs/freetype2/psaux	src/libs/freetype2/pshinter src/libs/freetype2/psnames	src/libs/freetype2/raster src/libs/freetype2/sfnt	src/libs/freetype2/smooth src/libs/freetype2/truetype	src/libs/freetype2/type1 src/libs/freetype2/type42	src/libs/freetype2/winfonts">korli at mail.berlios.de
       </A><BR>
    <I>Sun Jan 18 13:13:08 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="013930.html">[Haiku-commits] r28931 - haiku/trunk/src/kits/network/libnetapi
</A></li>
        <LI>Next message: <A HREF="013932.html">[Haiku-commits] r28932 - in haiku/trunk: headers/libs/freetype2/freetype headers/libs/freetype2/freetype/config headers/libs/freetype2/freetype/internal headers/libs/freetype2/freetype/internal/services src/libs/freetype2/autofit src/libs/freetype2/base src/libs/freetype2/bdf src/libs/freetype2/cache src/libs/freetype2/cff src/libs/freetype2/cid src/libs/freetype2/gzip src/libs/freetype2/lzw src/libs/freetype2/otvalid src/libs/freetype2/pcf src/libs/freetype2/pfr src/libs/freetype2/psaux src/libs/freetype2/pshinter src/libs/freetype2/psnames src/libs/freetype2/raster src/libs/freetype2/sfnt src/libs/freetype2/smooth src/libs/freetype2/truetype src/libs/freetype2/type1 src/libs/freetype2/type42 src/libs/freetype2/winfonts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13931">[ date ]</a>
              <a href="thread.html#13931">[ thread ]</a>
              <a href="subject.html#13931">[ subject ]</a>
              <a href="author.html#13931">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: korli
Date: 2009-01-18 13:13:00 +0100 (Sun, 18 Jan 2009)
New Revision: 28932
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=28932&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=28932&amp;view=rev</A>

Added:
   haiku/trunk/headers/libs/freetype2/freetype/ftadvanc.h
   haiku/trunk/src/libs/freetype2/base/ftadvanc.c
   haiku/trunk/src/libs/freetype2/base/ftbase.h
Modified:
   haiku/trunk/headers/libs/freetype2/freetype/config/ftconfig.h
   haiku/trunk/headers/libs/freetype2/freetype/config/ftheader.h
   haiku/trunk/headers/libs/freetype2/freetype/config/ftmodule.h
   haiku/trunk/headers/libs/freetype2/freetype/config/ftoption.h
   haiku/trunk/headers/libs/freetype2/freetype/config/ftstdlib.h
   haiku/trunk/headers/libs/freetype2/freetype/freetype.h
   haiku/trunk/headers/libs/freetype2/freetype/ftbdf.h
   haiku/trunk/headers/libs/freetype2/freetype/ftbitmap.h
   haiku/trunk/headers/libs/freetype2/freetype/ftcache.h
   haiku/trunk/headers/libs/freetype2/freetype/ftchapters.h
   haiku/trunk/headers/libs/freetype2/freetype/ftgasp.h
   haiku/trunk/headers/libs/freetype2/freetype/ftglyph.h
   haiku/trunk/headers/libs/freetype2/freetype/ftimage.h
   haiku/trunk/headers/libs/freetype2/freetype/ftlcdfil.h
   haiku/trunk/headers/libs/freetype2/freetype/ftmodapi.h
   haiku/trunk/headers/libs/freetype2/freetype/ftoutln.h
   haiku/trunk/headers/libs/freetype2/freetype/ftpfr.h
   haiku/trunk/headers/libs/freetype2/freetype/ftstroke.h
   haiku/trunk/headers/libs/freetype2/freetype/ftsynth.h
   haiku/trunk/headers/libs/freetype2/freetype/internal/ftdebug.h
   haiku/trunk/headers/libs/freetype2/freetype/internal/ftdriver.h
   haiku/trunk/headers/libs/freetype2/freetype/internal/psaux.h
   haiku/trunk/headers/libs/freetype2/freetype/internal/services/svttcmap.h
   haiku/trunk/headers/libs/freetype2/freetype/internal/t1types.h
   haiku/trunk/headers/libs/freetype2/freetype/t1tables.h
   haiku/trunk/headers/libs/freetype2/freetype/ttnameid.h
   haiku/trunk/headers/libs/freetype2/freetype/tttags.h
   haiku/trunk/src/libs/freetype2/autofit/afcjk.c
   haiku/trunk/src/libs/freetype2/autofit/afhints.c
   haiku/trunk/src/libs/freetype2/autofit/aflatin.c
   haiku/trunk/src/libs/freetype2/autofit/aflatin2.c
   haiku/trunk/src/libs/freetype2/autofit/aftypes.h
   haiku/trunk/src/libs/freetype2/autofit/module.mk
   haiku/trunk/src/libs/freetype2/base/ftbase.c
   haiku/trunk/src/libs/freetype2/base/ftbitmap.c
   haiku/trunk/src/libs/freetype2/base/ftcalc.c
   haiku/trunk/src/libs/freetype2/base/ftdbgmem.c
   haiku/trunk/src/libs/freetype2/base/ftdebug.c
   haiku/trunk/src/libs/freetype2/base/ftinit.c
   haiku/trunk/src/libs/freetype2/base/ftlcdfil.c
   haiku/trunk/src/libs/freetype2/base/ftmac.c
   haiku/trunk/src/libs/freetype2/base/ftobjs.c
   haiku/trunk/src/libs/freetype2/base/ftotval.c
   haiku/trunk/src/libs/freetype2/base/ftoutln.c
   haiku/trunk/src/libs/freetype2/base/ftpatent.c
   haiku/trunk/src/libs/freetype2/base/ftpfr.c
   haiku/trunk/src/libs/freetype2/base/ftrfork.c
   haiku/trunk/src/libs/freetype2/base/ftstream.c
   haiku/trunk/src/libs/freetype2/base/ftstroke.c
   haiku/trunk/src/libs/freetype2/base/ftsynth.c
   haiku/trunk/src/libs/freetype2/base/ftsystem.c
   haiku/trunk/src/libs/freetype2/base/rules.mk
   haiku/trunk/src/libs/freetype2/bdf/bdfdrivr.c
   haiku/trunk/src/libs/freetype2/bdf/module.mk
   haiku/trunk/src/libs/freetype2/bdf/rules.mk
   haiku/trunk/src/libs/freetype2/cache/ftccmap.c
   haiku/trunk/src/libs/freetype2/cache/ftcmanag.c
   haiku/trunk/src/libs/freetype2/cache/rules.mk
   haiku/trunk/src/libs/freetype2/cff/cffdrivr.c
   haiku/trunk/src/libs/freetype2/cff/cffgload.c
   haiku/trunk/src/libs/freetype2/cff/cffgload.h
   haiku/trunk/src/libs/freetype2/cff/cffload.c
   haiku/trunk/src/libs/freetype2/cff/cffload.h
   haiku/trunk/src/libs/freetype2/cff/cffobjs.c
   haiku/trunk/src/libs/freetype2/cff/cffparse.c
   haiku/trunk/src/libs/freetype2/cff/module.mk
   haiku/trunk/src/libs/freetype2/cid/cidload.c
   haiku/trunk/src/libs/freetype2/cid/cidobjs.c
   haiku/trunk/src/libs/freetype2/cid/cidtoken.h
   haiku/trunk/src/libs/freetype2/cid/module.mk
   haiku/trunk/src/libs/freetype2/gzip/ftgzip.c
   haiku/trunk/src/libs/freetype2/gzip/inftrees.c
   haiku/trunk/src/libs/freetype2/lzw/ftlzw.c
   haiku/trunk/src/libs/freetype2/otvalid/Jamfile
   haiku/trunk/src/libs/freetype2/otvalid/module.mk
   haiku/trunk/src/libs/freetype2/otvalid/otvalid.h
   haiku/trunk/src/libs/freetype2/otvalid/otvcommn.h
   haiku/trunk/src/libs/freetype2/otvalid/otvgdef.c
   haiku/trunk/src/libs/freetype2/otvalid/otvmath.c
   haiku/trunk/src/libs/freetype2/otvalid/otvmod.c
   haiku/trunk/src/libs/freetype2/pcf/module.mk
   haiku/trunk/src/libs/freetype2/pcf/pcfdrivr.c
   haiku/trunk/src/libs/freetype2/pcf/pcfread.c
   haiku/trunk/src/libs/freetype2/pcf/rules.mk
   haiku/trunk/src/libs/freetype2/pfr/module.mk
   haiku/trunk/src/libs/freetype2/pfr/pfrdrivr.c
   haiku/trunk/src/libs/freetype2/pfr/pfrobjs.c
   haiku/trunk/src/libs/freetype2/psaux/afmparse.c
   haiku/trunk/src/libs/freetype2/psaux/module.mk
   haiku/trunk/src/libs/freetype2/psaux/psobjs.c
   haiku/trunk/src/libs/freetype2/psaux/t1decode.c
   haiku/trunk/src/libs/freetype2/pshinter/module.mk
   haiku/trunk/src/libs/freetype2/pshinter/pshalgo.c
   haiku/trunk/src/libs/freetype2/psnames/module.mk
   haiku/trunk/src/libs/freetype2/psnames/psmodule.c
   haiku/trunk/src/libs/freetype2/psnames/pstables.h
   haiku/trunk/src/libs/freetype2/raster/ftmisc.h
   haiku/trunk/src/libs/freetype2/raster/ftraster.c
   haiku/trunk/src/libs/freetype2/raster/module.mk
   haiku/trunk/src/libs/freetype2/raster/rules.mk
   haiku/trunk/src/libs/freetype2/sfnt/Jamfile
   haiku/trunk/src/libs/freetype2/sfnt/module.mk
   haiku/trunk/src/libs/freetype2/sfnt/sfobjs.c
   haiku/trunk/src/libs/freetype2/sfnt/ttcmap.c
   haiku/trunk/src/libs/freetype2/sfnt/ttload.c
   haiku/trunk/src/libs/freetype2/sfnt/ttmtx.c
   haiku/trunk/src/libs/freetype2/sfnt/ttpost.c
   haiku/trunk/src/libs/freetype2/sfnt/ttsbit.c
   haiku/trunk/src/libs/freetype2/sfnt/ttsbit.h
   haiku/trunk/src/libs/freetype2/smooth/ftgrays.c
   haiku/trunk/src/libs/freetype2/smooth/ftsmooth.c
   haiku/trunk/src/libs/freetype2/smooth/module.mk
   haiku/trunk/src/libs/freetype2/truetype/module.mk
   haiku/trunk/src/libs/freetype2/truetype/ttdriver.c
   haiku/trunk/src/libs/freetype2/truetype/ttgload.c
   haiku/trunk/src/libs/freetype2/truetype/ttgload.h
   haiku/trunk/src/libs/freetype2/truetype/ttgxvar.c
   haiku/trunk/src/libs/freetype2/truetype/ttinterp.c
   haiku/trunk/src/libs/freetype2/truetype/ttobjs.c
   haiku/trunk/src/libs/freetype2/truetype/ttobjs.h
   haiku/trunk/src/libs/freetype2/truetype/ttpload.c
   haiku/trunk/src/libs/freetype2/type1/module.mk
   haiku/trunk/src/libs/freetype2/type1/t1afm.c
   haiku/trunk/src/libs/freetype2/type1/t1driver.c
   haiku/trunk/src/libs/freetype2/type1/t1gload.c
   haiku/trunk/src/libs/freetype2/type1/t1gload.h
   haiku/trunk/src/libs/freetype2/type1/t1load.c
   haiku/trunk/src/libs/freetype2/type1/t1objs.c
   haiku/trunk/src/libs/freetype2/type1/t1tokens.h
   haiku/trunk/src/libs/freetype2/type42/module.mk
   haiku/trunk/src/libs/freetype2/type42/rules.mk
   haiku/trunk/src/libs/freetype2/type42/t42objs.c
   haiku/trunk/src/libs/freetype2/type42/t42parse.c
   haiku/trunk/src/libs/freetype2/type42/t42types.h
   haiku/trunk/src/libs/freetype2/winfonts/module.mk
   haiku/trunk/src/libs/freetype2/winfonts/winfnt.c
Log:
updated freetype to 2.3.8


Modified: haiku/trunk/headers/libs/freetype2/freetype/config/ftconfig.h
===================================================================
--- haiku/trunk/headers/libs/freetype2/freetype/config/ftconfig.h	2009-01-18 12:11:59 UTC (rev 28931)
+++ haiku/trunk/headers/libs/freetype2/freetype/config/ftconfig.h	2009-01-18 12:13:00 UTC (rev 28932)
@@ -4,7 +4,7 @@
 /*                                                                         */
 /*    ANSI-specific configuration file (specification only).               */
 /*                                                                         */
-/*  Copyright 1996-2001, 2002, 2003, 2004, 2006, 2007 by                   */
+/*  Copyright 1996-2001, 2002, 2003, 2004, 2006, 2007, 2008 by             */
 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */
 /*                                                                         */
 /*  This file is part of the FreeType project, and may only be used,       */
@@ -43,6 +43,7 @@
 #include FT_CONFIG_OPTIONS_H
 #include FT_CONFIG_STANDARD_LIBRARY_H
 
+
 FT_BEGIN_HEADER
 
 
@@ -134,9 +135,17 @@
 #else
 #define FT_MACINTOSH 1
 #endif
+
+#elif defined( __SC__ ) || defined( __MRC__ )
+  /* Classic MacOS compilers */
+#include &quot;ConditionalMacros.h&quot;
+#if TARGET_OS_MAC
+#define FT_MACINTOSH 1
 #endif
 
+#endif
 
+
   /*************************************************************************/
   /*                                                                       */
   /* &lt;Section&gt;                                                             */
@@ -212,6 +221,7 @@
 #error &quot;no 32bit type found -- please check your configuration files&quot;
 #endif
 
+
   /* look up an integer type that is at least 32 bits */
 #if FT_SIZEOF_INT &gt;= (32 / FT_CHAR_BIT)
 
@@ -267,17 +277,12 @@
 #endif /* FT_SIZEOF_LONG == (64 / FT_CHAR_BIT) */
 
 
-#define FT_BEGIN_STMNT  do {
-#define FT_END_STMNT    } while ( 0 )
-#define FT_DUMMY_STMNT  FT_BEGIN_STMNT FT_END_STMNT
-
-
   /*************************************************************************/
   /*                                                                       */
   /* A 64-bit data type will create compilation problems if you compile    */
-  /* in strict ANSI mode.  To avoid them, we disable their use if          */
-  /* __STDC__ is defined.  You can however ignore this rule by             */
-  /* defining the FT_CONFIG_OPTION_FORCE_INT64 configuration macro.        */
+  /* in strict ANSI mode.  To avoid them, we disable its use if __STDC__   */
+  /* is defined.  You can however ignore this rule by defining the         */
+  /* FT_CONFIG_OPTION_FORCE_INT64 configuration macro.                     */
   /*                                                                       */
 #if defined( FT_LONG64 ) &amp;&amp; !defined( FT_CONFIG_OPTION_FORCE_INT64 )
 
@@ -292,6 +297,86 @@
 #endif /* FT_LONG64 &amp;&amp; !FT_CONFIG_OPTION_FORCE_INT64 */
 
 
+#define FT_BEGIN_STMNT  do {
+#define FT_END_STMNT    } while ( 0 )
+#define FT_DUMMY_STMNT  FT_BEGIN_STMNT FT_END_STMNT
+
+
+#ifndef  FT_CONFIG_OPTION_NO_ASSEMBLER
+  /* Provide assembler fragments for performance-critical functions. */
+  /* These must be defined `static __inline__' with GCC.             */
+
+#ifdef __GNUC__
+
+#if defined( __arm__ ) &amp;&amp; !defined( __thumb__ )
+#define FT_MULFIX_ASSEMBLER  FT_MulFix_arm
+
+  /* documentation is in freetype.h */
+
+  static __inline__ FT_Int32
+  FT_MulFix_arm( FT_Int32  a,
+                 FT_Int32  b )
+  {
+    register FT_Int32  t, t2;
+
+
+    asm __volatile__ (
+      &quot;smull  %1, %2, %4, %3\n\t&quot;   /* (lo=%1,hi=%2) = a*b */
+      &quot;mov    %0, %2, asr #31\n\t&quot;  /* %0  = (hi &gt;&gt; 31) */
+      &quot;add    %0, %0, #0x8000\n\t&quot;  /* %0 += 0x8000 */
+      &quot;adds   %1, %1, %0\n\t&quot;       /* %1 += %0 */
+      &quot;adc    %2, %2, #0\n\t&quot;       /* %2 += carry */
+      &quot;mov    %0, %1, lsr #16\n\t&quot;  /* %0  = %1 &gt;&gt; 16 */
+      &quot;orr    %0, %2, lsl #16\n\t&quot;  /* %0 |= %2 &lt;&lt; 16 */
+      : &quot;=r&quot;(a), &quot;=&amp;r&quot;(t2), &quot;=&amp;r&quot;(t)
+      : &quot;r&quot;(a), &quot;r&quot;(b) );
+    return a;
+  }
+
+#endif /* __arm__ &amp;&amp; !__thumb__ */
+
+#if defined( i386 )
+#define FT_MULFIX_ASSEMBLER  FT_MulFix_i386
+
+  /* documentation is in freetype.h */
+
+  static __inline__ FT_Int32
+  FT_MulFix_i386( FT_Int32  a,
+                  FT_Int32  b )
+  {
+    register FT_Int32  result;
+
+
+    __asm__ __volatile__ (
+      &quot;imul  %%edx\n&quot;
+      &quot;movl  %%edx, %%ecx\n&quot;
+      &quot;sarl  $31, %%ecx\n&quot;
+      &quot;addl  $0x8000, %%ecx\n&quot;
+      &quot;addl  %%ecx, %%eax\n&quot;
+      &quot;adcl  $0, %%edx\n&quot;
+      &quot;shrl  $16, %%eax\n&quot;
+      &quot;shll  $16, %%edx\n&quot;
+      &quot;addl  %%edx, %%eax\n&quot;
+      : &quot;=a&quot;(result), &quot;+d&quot;(b)
+      : &quot;a&quot;(a)
+      : &quot;%ecx&quot; );
+    return result;
+  }
+
+#endif /* i386 */
+
+#endif /* __GNUC__ */
+
+#endif /* !FT_CONFIG_OPTION_NO_ASSEMBLER */
+
+
+#ifdef FT_CONFIG_OPTION_INLINE_MULFIX
+#ifdef FT_MULFIX_ASSEMBLER
+#define FT_MULFIX_INLINED  FT_MULFIX_ASSEMBLER
+#endif
+#endif
+
+
 #ifdef FT_MAKE_OPTION_SINGLE_OBJECT
 
 #define FT_LOCAL( x )      static  x

Modified: haiku/trunk/headers/libs/freetype2/freetype/config/ftheader.h
===================================================================
--- haiku/trunk/headers/libs/freetype2/freetype/config/ftheader.h	2009-01-18 12:11:59 UTC (rev 28931)
+++ haiku/trunk/headers/libs/freetype2/freetype/config/ftheader.h	2009-01-18 12:13:00 UTC (rev 28932)
@@ -729,6 +729,18 @@
 #define FT_GASP_H  &lt;freetype/ftgasp.h&gt;
 
 
+  /*************************************************************************
+   *
+   * @macro:
+   *   FT_ADVANCES_H
+   *
+   * @description:
+   *   A macro used in #include statements to name the file containing the
+   *   FreeType~2 API which returns individual and ranged glyph advances.
+   */
+#define FT_ADVANCES_H  &lt;freetype/ftadvanc.h&gt;
+
+
   /* */
 
 #define FT_ERROR_DEFINITIONS_H  &lt;freetype/fterrdef.h&gt;

Modified: haiku/trunk/headers/libs/freetype2/freetype/config/ftmodule.h
===================================================================
--- haiku/trunk/headers/libs/freetype2/freetype/config/ftmodule.h	2009-01-18 12:11:59 UTC (rev 28931)
+++ haiku/trunk/headers/libs/freetype2/freetype/config/ftmodule.h	2009-01-18 12:13:00 UTC (rev 28932)
@@ -10,23 +10,23 @@
  *
  */
 
-FT_USE_MODULE(autofit_module_class)
-FT_USE_MODULE(tt_driver_class)
-FT_USE_MODULE(t1_driver_class)
-FT_USE_MODULE(cff_driver_class)
-FT_USE_MODULE(t1cid_driver_class)
-FT_USE_MODULE(pfr_driver_class)
-FT_USE_MODULE(t42_driver_class)
-FT_USE_MODULE(winfnt_driver_class)
-FT_USE_MODULE(pcf_driver_class)
-FT_USE_MODULE(psaux_module_class)
-FT_USE_MODULE(psnames_module_class)
-FT_USE_MODULE(pshinter_module_class)
-FT_USE_MODULE(ft_raster1_renderer_class)
-FT_USE_MODULE(sfnt_module_class)
-FT_USE_MODULE(ft_smooth_renderer_class)
-FT_USE_MODULE(ft_smooth_lcd_renderer_class)
-FT_USE_MODULE(ft_smooth_lcdv_renderer_class)
-FT_USE_MODULE(bdf_driver_class)
+FT_USE_MODULE( FT_Module_Class, autofit_module_class )
+FT_USE_MODULE( FT_Driver_ClassRec, tt_driver_class )
+FT_USE_MODULE( FT_Driver_ClassRec, t1_driver_class )
+FT_USE_MODULE( FT_Driver_ClassRec, cff_driver_class )
+FT_USE_MODULE( FT_Driver_ClassRec, t1cid_driver_class )
+FT_USE_MODULE( FT_Driver_ClassRec, pfr_driver_class )
+FT_USE_MODULE( FT_Driver_ClassRec, t42_driver_class )
+FT_USE_MODULE( FT_Driver_ClassRec, winfnt_driver_class )
+FT_USE_MODULE( FT_Driver_ClassRec, pcf_driver_class )
+FT_USE_MODULE( FT_Module_Class, psaux_module_class )
+FT_USE_MODULE( FT_Module_Class, psnames_module_class )
+FT_USE_MODULE( FT_Module_Class, pshinter_module_class )
+FT_USE_MODULE( FT_Renderer_Class, ft_raster1_renderer_class )
+FT_USE_MODULE( FT_Module_Class, sfnt_module_class )
+FT_USE_MODULE( FT_Renderer_Class, ft_smooth_renderer_class )
+FT_USE_MODULE( FT_Renderer_Class, ft_smooth_lcd_renderer_class )
+FT_USE_MODULE( FT_Renderer_Class, ft_smooth_lcdv_renderer_class )
+FT_USE_MODULE( FT_Driver_ClassRec, bdf_driver_class )
 
 /* EOF */

Modified: haiku/trunk/headers/libs/freetype2/freetype/config/ftoption.h
===================================================================
--- haiku/trunk/headers/libs/freetype2/freetype/config/ftoption.h	2009-01-18 12:11:59 UTC (rev 28931)
+++ haiku/trunk/headers/libs/freetype2/freetype/config/ftoption.h	2009-01-18 12:13:00 UTC (rev 28932)
@@ -112,11 +112,32 @@
   /*         file `ftconfig.h' either statically or through the            */
   /*         `configure' script on supported platforms.                    */
   /*                                                                       */
-#undef  FT_CONFIG_OPTION_FORCE_INT64
+#undef FT_CONFIG_OPTION_FORCE_INT64
 
 
   /*************************************************************************/
   /*                                                                       */
+  /* If this macro is defined, do not try to use an assembler version of   */
+  /* performance-critical functions (e.g. FT_MulFix).  You should only do  */
+  /* that to verify that the assembler function works properly, or to      */
+  /* execute benchmark tests of the various implementations.               */
+/* #define FT_CONFIG_OPTION_NO_ASSEMBLER */
+
+
+  /*************************************************************************/
+  /*                                                                       */
+  /* If this macro is defined, try to use an inlined assembler version of  */
+  /* the `FT_MulFix' function, which is a `hotspot' when loading and       */
+  /* hinting glyphs, and which should be executed as fast as possible.     */
+  /*                                                                       */
+  /* Note that if your compiler or CPU is not supported, this will default */
+  /* to the standard and portable implementation found in `ftcalc.c'.      */
+  /*                                                                       */
+#define FT_CONFIG_OPTION_INLINE_MULFIX
+
+
+  /*************************************************************************/
+  /*                                                                       */
   /* LZW-compressed file support.                                          */
   /*                                                                       */
   /*   FreeType now handles font files that have been compressed with the  */
@@ -163,7 +184,7 @@
   /*   Do not #undef this macro here since the build system might define   */
   /*   it for certain configurations only.                                 */
   /*                                                                       */
-/* #define  FT_CONFIG_OPTION_SYSTEM_ZLIB */
+/* #define FT_CONFIG_OPTION_SYSTEM_ZLIB */
 
 
   /*************************************************************************/
@@ -204,27 +225,27 @@
   /*   Do not #undef these macros here since the build system might define */
   /*   them for certain configurations only.                               */
   /*                                                                       */
-/* #define  FT_EXPORT(x)       extern x */
-/* #define  FT_EXPORT_DEF(x)   x */
+/* #define FT_EXPORT(x)      extern x */
+/* #define FT_EXPORT_DEF(x)  x */
 
 
   /*************************************************************************/
   /*                                                                       */
   /* Glyph Postscript Names handling                                       */
   /*                                                                       */
-  /*   By default, FreeType 2 is compiled with the `PSNames' module.  This */
+  /*   By default, FreeType 2 is compiled with the `psnames' module.  This */
   /*   module is in charge of converting a glyph name string into a        */
   /*   Unicode value, or return a Macintosh standard glyph name for the    */
   /*   use with the TrueType `post' table.                                 */
   /*                                                                       */
-  /*   Undefine this macro if you do not want `PSNames' compiled in your   */
+  /*   Undefine this macro if you do not want `psnames' compiled in your   */
   /*   build of FreeType.  This has the following effects:                 */
   /*                                                                       */
   /*   - The TrueType driver will provide its own set of glyph names,      */
   /*     if you build it to support postscript names in the TrueType       */
   /*     `post' table.                                                     */
   /*                                                                       */
-  /*   - The Type 1 driver will not be able to synthetize a Unicode        */
+  /*   - The Type 1 driver will not be able to synthesize a Unicode        */
   /*     charmap out of the glyphs found in the fonts.                     */
   /*                                                                       */
   /*   You would normally undefine this configuration macro when building  */
@@ -240,12 +261,12 @@
   /*   By default, FreeType 2 is built with the `PSNames' module compiled  */
   /*   in.  Among other things, the module is used to convert a glyph name */
   /*   into a Unicode value.  This is especially useful in order to        */
-  /*   synthetize on the fly a Unicode charmap from the CFF/Type 1 driver  */
+  /*   synthesize on the fly a Unicode charmap from the CFF/Type 1 driver  */
   /*   through a big table named the `Adobe Glyph List' (AGL).             */
   /*                                                                       */
   /*   Undefine this macro if you do not want the Adobe Glyph List         */
   /*   compiled in your `PSNames' module.  The Type 1 driver will not be   */
-  /*   able to synthetize a Unicode charmap out of the glyphs found in the */
+  /*   able to synthesize a Unicode charmap out of the glyphs found in the */
   /*   fonts.                                                              */
   /*                                                                       */
 #define FT_CONFIG_OPTION_ADOBE_GLYPH_LIST
@@ -467,9 +488,9 @@
   /* If you define TT_CONFIG_OPTION_UNPATENTED_HINTING, a special version  */
   /* of the TrueType bytecode interpreter is used that doesn't implement   */
   /* any of the patented opcodes and algorithms.  Note that the            */
-  /* the TT_CONFIG_OPTION_UNPATENTED_HINTING macro is *ignored* if you     */
-  /* define TT_CONFIG_OPTION_BYTECODE_INTERPRETER; with other words,       */
-  /* either define TT_CONFIG_OPTION_BYTECODE_INTERPRETER or                */
+  /* TT_CONFIG_OPTION_UNPATENTED_HINTING macro is *ignored* if you define  */
+  /* TT_CONFIG_OPTION_BYTECODE_INTERPRETER; in other words, either define  */
+  /* TT_CONFIG_OPTION_BYTECODE_INTERPRETER or                              */
   /* TT_CONFIG_OPTION_UNPATENTED_HINTING but not both at the same time.    */
   /*                                                                       */
   /* This macro is only useful for a small number of font files (mostly    */
@@ -653,11 +674,12 @@
 
 
   /*
-   * This variable is defined if either unpatented or native TrueType
+   * This macro is defined if either unpatented or native TrueType
    * hinting is requested by the definitions above.
    */
 #ifdef TT_CONFIG_OPTION_BYTECODE_INTERPRETER
 #define  TT_USE_BYTECODE_INTERPRETER
+#undef   TT_CONFIG_OPTION_UNPATENTED_HINTING
 #elif defined TT_CONFIG_OPTION_UNPATENTED_HINTING
 #define  TT_USE_BYTECODE_INTERPRETER
 #endif

Modified: haiku/trunk/headers/libs/freetype2/freetype/config/ftstdlib.h
===================================================================
--- haiku/trunk/headers/libs/freetype2/freetype/config/ftstdlib.h	2009-01-18 12:11:59 UTC (rev 28931)
+++ haiku/trunk/headers/libs/freetype2/freetype/config/ftstdlib.h	2009-01-18 12:13:00 UTC (rev 28932)
@@ -5,7 +5,7 @@
 /*    ANSI-specific library and header configuration file (specification   */
 /*    only).                                                               */
 /*                                                                         */
-/*  Copyright 2002, 2003, 2004, 2005, 2006, 2007 by                        */
+/*  Copyright 2002, 2003, 2004, 2005, 2006, 2007, 2009 by                  */
 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */
 /*                                                                         */
 /*  This file is part of the FreeType project, and may only be used,       */
@@ -54,12 +54,6 @@
   /* In these case, `ftconfig.h' will refuse to compile anyway with a   */
   /* message like `couldn't find 32-bit type' or something similar.     */
   /*                                                                    */
-  /* IMPORTANT NOTE: We do not define aliases for heap management and   */
-  /*                 i/o routines (i.e. malloc/free/fopen/fread/...)    */
-  /*                 since these functions should all be encapsulated   */
-  /*                 by platform-specific implementations of            */
-  /*                 `ftsystem.c'.                                      */
-  /*                                                                    */
   /**********************************************************************/
 
 
@@ -124,9 +118,7 @@
 
 #define ft_qsort  qsort
 
-#define ft_exit   exit    /* only used to exit from unhandled exceptions */
 
-
   /**********************************************************************/
   /*                                                                    */
   /*                        memory allocation                           */

Modified: haiku/trunk/headers/libs/freetype2/freetype/freetype.h
===================================================================
--- haiku/trunk/headers/libs/freetype2/freetype/freetype.h	2009-01-18 12:11:59 UTC (rev 28931)
+++ haiku/trunk/headers/libs/freetype2/freetype/freetype.h	2009-01-18 12:13:00 UTC (rev 28932)
@@ -4,7 +4,7 @@
 /*                                                                         */
 /*    FreeType high-level API and common types (specification only).       */
 /*                                                                         */
-/*  Copyright 1996-2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008 by       */
+/*  Copyright 1996-2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 by */
 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */
 /*                                                                         */
 /*  This file is part of the FreeType project, and may only be used,       */
@@ -60,8 +60,8 @@
   /*                                                                       */
   /* &lt;Description&gt;                                                         */
   /*    FreeType assumes that structures allocated by the user and passed  */
-  /*    as arguments are zeroed out except for the actual data.  With      */
-  /*    other words, it is recommended to use `calloc' (or variants of it) */
+  /*    as arguments are zeroed out except for the actual data.  In other  */
+  /*    words, it is recommended to use `calloc' (or variants of it)       */
   /*    instead of `malloc' for allocation.                                */
   /*                                                                       */
   /*************************************************************************/
@@ -191,6 +191,15 @@
   /*    FT_Set_Charmap                                                     */
   /*    FT_Get_Charmap_Index                                               */
   /*                                                                       */
+  /*    FT_FSTYPE_INSTALLABLE_EMBEDDING                                    */
+  /*    FT_FSTYPE_RESTRICTED_LICENSE_EMBEDDING                             */
+  /*    FT_FSTYPE_PREVIEW_AND_PRINT_EMBEDDING                              */
+  /*    FT_FSTYPE_EDITABLE_EMBEDDING                                       */
+  /*    FT_FSTYPE_NO_SUBSETTING                                            */
+  /*    FT_FSTYPE_BITMAP_EMBEDDING_ONLY                                    */
+  /*                                                                       */
+  /*    FT_Get_FSType_Flags                                                */
+  /*                                                                       */
   /*************************************************************************/
 
 
@@ -606,7 +615,7 @@
   /*     Same as FT_ENCODING_JOHAB.  Deprecated.                           */
   /*                                                                       */
   /* &lt;Note&gt;                                                                */
-  /*   By default, FreeType automatically synthetizes a Unicode charmap    */
+  /*   By default, FreeType automatically synthesizes a Unicode charmap    */
   /*   for PostScript fonts, using their glyph names dictionaries.         */
   /*   However, it also reports the encodings defined explicitly in the    */
   /*   font file, for the cases when they are needed, with the Adobe       */
@@ -883,7 +892,7 @@
   /*                           scalable formats.                           */
   /*                                                                       */
   /*    underline_position  :: The position, in font units, of the         */
-  /*                           underline line for this face.  It's the     */
+  /*                           underline line for this face.  It is the    */
   /*                           center of the underlining stem.  Only       */
   /*                           relevant for scalable formats.              */
   /*                                                                       */
@@ -1037,6 +1046,27 @@
   /*      exist make FT_Load_Glyph return successfully; in all other cases */
   /*      you get an `FT_Err_Invalid_Argument' error.                      */
   /*                                                                       */
+  /*      Note that CID-keyed fonts which are in an SFNT wrapper don't     */
+  /*      have this flag set since the glyphs are accessed in the normal   */
+  /*      way (using contiguous indices); the `CID-ness' isn't visible to  */
+  /*      the application.                                                 */
+  /*                                                                       */
+  /*    FT_FACE_FLAG_TRICKY ::                                             */
+  /*      Set if the font is `tricky', this is, it always needs the        */
+  /*      font format's native hinting engine to get a reasonable result.  */
+  /*      A typical example is the Chinese font `mingli.ttf' which uses    */
+  /*      TrueType bytecode instructions to move and scale all of its      */
+  /*      subglyphs.                                                       */
+  /*                                                                       */
+  /*      It is not possible to autohint such fonts using                  */
+  /*      @FT_LOAD_FORCE_AUTOHINT; it will also ignore                     */
+  /*      @FT_LOAD_NO_HINTING.  You have to set both FT_LOAD_NO_HINTING    */
+  /*      and @FT_LOAD_NO_AUTOHINT to really disable hinting; however, you */
+  /*      probably never want this except for demonstration purposes.      */
+  /*                                                                       */
+  /*      Currently, there are six TrueType fonts in the list of tricky    */
+  /*      fonts; they are hard-coded in file `ttobjs.c'.                   */
+  /*                                                                       */
 #define FT_FACE_FLAG_SCALABLE          ( 1L &lt;&lt;  0 )
 #define FT_FACE_FLAG_FIXED_SIZES       ( 1L &lt;&lt;  1 )
 #define FT_FACE_FLAG_FIXED_WIDTH       ( 1L &lt;&lt;  2 )
@@ -1050,10 +1080,9 @@
 #define FT_FACE_FLAG_EXTERNAL_STREAM   ( 1L &lt;&lt; 10 )
 #define FT_FACE_FLAG_HINTER            ( 1L &lt;&lt; 11 )
 #define FT_FACE_FLAG_CID_KEYED         ( 1L &lt;&lt; 12 )
+#define FT_FACE_FLAG_TRICKY            ( 1L &lt;&lt; 13 )
 
-  /* */
 
-
   /*************************************************************************
    *
    * @macro:
@@ -1162,9 +1191,7 @@
 #define FT_HAS_FIXED_SIZES( face ) \
           ( face-&gt;face_flags &amp; FT_FACE_FLAG_FIXED_SIZES )
 
-  /* */
 
-
   /*************************************************************************
    *
    * @macro:
@@ -1224,9 +1251,23 @@
           ( face-&gt;face_flags &amp; FT_FACE_FLAG_CID_KEYED )
 
 
+  /*************************************************************************
+   *
+   * @macro:
+   *   FT_IS_TRICKY( face )
+   *
+   * @description:
+   *   A macro that returns true whenever a face represents a `tricky' font.
+   *   See the discussion of @FT_FACE_FLAG_TRICKY for more details.
+   *
+   */
+#define FT_IS_TRICKY( face ) \
+          ( face-&gt;face_flags &amp; FT_FACE_FLAG_TRICKY )
+
+
   /*************************************************************************/
   /*                                                                       */
-  /* &lt;Constant&gt;                                                            */
+  /* &lt;Const&gt;                                                               */
   /*    FT_STYLE_FLAG_XXX                                                  */
   /*                                                                       */
   /* &lt;Description&gt;                                                         */
@@ -1518,10 +1559,10 @@
   /*                                                                       */
   /*    This image can later be converted into a bitmap by calling         */
   /*    @FT_Render_Glyph.  This function finds the current renderer for    */
-  /*    the native image's format then invokes it.                         */
+  /*    the native image's format, then invokes it.                        */
   /*                                                                       */
   /*    The renderer is in charge of transforming the native image through */
-  /*    the slot's face transformation fields, then convert it into a      */
+  /*    the slot's face transformation fields, then converting it into a   */
   /*    bitmap that is returned in `slot-&gt;bitmap'.                         */
   /*                                                                       */
   /*    Note that `slot-&gt;bitmap_left' and `slot-&gt;bitmap_top' are also used */
@@ -1769,7 +1810,7 @@
   /*    `num_params' and `params' is used.  They are ignored otherwise.    */
   /*                                                                       */
   /*    Ideally, both the `pathname' and `params' fields should be tagged  */
-  /*    as `const'; this is missing for API backwards compatibility.  With */
+  /*    as `const'; this is missing for API backwards compatibility.  In   */
   /*    other words, applications should treat them as read-only.          */
   /*                                                                       */
   typedef struct  FT_Open_Args_
@@ -2174,7 +2215,8 @@
   /*    A character width or height smaller than 1pt is set to 1pt; if     */
   /*    both resolution values are zero, they are set to 72dpi.            */
   /*                                                                       */
-
+  /*    Don't use this function if you are using the FreeType cache API.   */
+  /*                                                                       */
   FT_EXPORT( FT_Error )
   FT_Set_Char_Size( FT_Face     face,
                     FT_F26Dot6  char_width,
@@ -2390,7 +2432,7 @@
    *     8~pixels packed into each byte of the bitmap data.
    *
    *     Note that this has no effect on the hinting algorithm used.  You
-   *     should use @FT_LOAD_TARGET_MONO instead so that the
+   *     should rather use @FT_LOAD_TARGET_MONO so that the
    *     monochrome-optimized hinting algorithm is used.
    *
    *   FT_LOAD_LINEAR_DESIGN ::
@@ -2409,6 +2451,9 @@
    *   @FT_LOAD_NO_AUTOHINT in case you don't want the auto-hinter to be
    *   used at all.
    *
+   *   See the description of @FT_FACE_FLAG_TRICKY for a special exception
+   *   (affecting only a handful of Asian fonts).
+   *
    *   Besides deciding which hinter to use, you can also decide which
    *   hinting algorithm to use.  See @FT_LOAD_TARGET_XXX for details.
    */
@@ -2426,12 +2471,15 @@
 #define FT_LOAD_IGNORE_TRANSFORM             0x800
 #define FT_LOAD_MONOCHROME                   0x1000
 #define FT_LOAD_LINEAR_DESIGN                0x2000
-#define FT_LOAD_SBITS_ONLY                   0x4000   /* temporary hack! */
 #define FT_LOAD_NO_AUTOHINT                  0x8000U
 
   /* */
 
+  /* used internally only by certain font drivers! */
+#define FT_LOAD_ADVANCE_ONLY                 0x100
+#define FT_LOAD_SBITS_ONLY                   0x4000
 
+
   /**************************************************************************
    *
    * @enum:
@@ -3158,6 +3206,88 @@
 
   /*************************************************************************/
   /*                                                                       */
+  /* &lt;Enum&gt;                                                                */
+  /*    FT_FSTYPE_XXX                                                      */
+  /*                                                                       */
+  /* &lt;Description&gt;                                                         */
+  /*    A list of bit flags used in the `fsType' field of the OS/2 table   */
+  /*    in a TrueType or OpenType font and the `FSType' entry in a         */
+  /*    PostScript font.  These bit flags are returned by                  */
+  /*    @FT_Get_FSType_Flags; they inform client applications of embedding */
+  /*    and subsetting restrictions associated with a font.                */
+  /*                                                                       */
+  /*    See <A HREF="http://www.adobe.com/devnet/acrobat/pdfs/FontPolicies.pdf">http://www.adobe.com/devnet/acrobat/pdfs/FontPolicies.pdf</A> for  */
+  /*    more details.                                                      */
+  /*                                                                       */
+  /* &lt;Values&gt;                                                              */
+  /*    FT_FSTYPE_INSTALLABLE_EMBEDDING ::                                 */
+  /*      Fonts with no fsType bit set may be embedded and permanently     */
+  /*      installed on the remote system by an application.                */
+  /*                                                                       */
+  /*    FT_FSTYPE_RESTRICTED_LICENSE_EMBEDDING ::                          */
+  /*      Fonts that have only this bit set must not be modified, embedded */
+  /*      or exchanged in any manner without first obtaining permission of */
+  /*      the font software copyright owner.                               */
+  /*                                                                       */
+  /*    FT_FSTYPE_PREVIEW_AND_PRINT_EMBEDDING ::                           */
+  /*      If this bit is set, the font may be embedded and temporarily     */
+  /*      loaded on the remote system.  Documents containing Preview &amp;     */
+  /*      Print fonts must be opened `read-only'; no edits can be applied  */
+  /*      to the document.                                                 */
+  /*                                                                       */
+  /*    FT_FSTYPE_EDITABLE_EMBEDDING ::                                    */
+  /*      If this bit is set, the font may be embedded but must only be    */
+  /*      installed temporarily on other systems.  In contrast to Preview  */
+  /*      &amp; Print fonts, documents containing editable fonts may be opened */
+  /*      for reading, editing is permitted, and changes may be saved.     */
+  /*                                                                       */
+  /*    FT_FSTYPE_NO_SUBSETTING ::                                         */
+  /*      If this bit is set, the font may not be subsetted prior to       */
+  /*      embedding.                                                       */
+  /*                                                                       */
+  /*    FT_FSTYPE_BITMAP_EMBEDDING_ONLY ::                                 */
+  /*      If this bit is set, only bitmaps contained in the font may be    */
+  /*      embedded; no outline data may be embedded.  If there are no      */
+  /*      bitmaps available in the font, then the font is unembeddable.    */
+  /*                                                                       */
+  /* &lt;Note&gt;                                                                */
+  /*    While the fsType flags can indicate that a font may be embedded, a */
+  /*    license with the font vendor may be separately required to use the */
+  /*    font in this way.                                                  */
+  /*                                                                       */
+#define FT_FSTYPE_INSTALLABLE_EMBEDDING         0x0000
+#define FT_FSTYPE_RESTRICTED_LICENSE_EMBEDDING  0x0002
+#define FT_FSTYPE_PREVIEW_AND_PRINT_EMBEDDING   0x0004
+#define FT_FSTYPE_EDITABLE_EMBEDDING            0x0008
+#define FT_FSTYPE_NO_SUBSETTING                 0x0100
+#define FT_FSTYPE_BITMAP_EMBEDDING_ONLY         0x0200
+
+
+  /*************************************************************************/
+  /*                                                                       */
+  /* &lt;Function&gt;                                                            */
+  /*    FT_Get_FSType_Flags                                                */
+  /*                                                                       */
+  /* &lt;Description&gt;                                                         */
+  /*    Return the fsType flags for a font.                                */
+  /*                                                                       */
+  /* &lt;Input&gt;                                                               */
+  /*    face :: A handle to the source face object.                        */
+  /*                                                                       */
+  /* &lt;Return&gt;                                                              */
+  /*    The fsType flags, @FT_FSTYPE_XXX.                                  */
+  /*                                                                       */
+  /* &lt;Note&gt;                                                                */
+  /*    Use this function rather than directly reading the `fs_type' field */
+  /*    in the @PS_FontInfoRec structure which is only guaranteed to       */
+  /*    return the correct results for Type~1 fonts.                       */
+  /*                                                                       */
+  FT_EXPORT( FT_UShort )
+  FT_Get_FSType_Flags( FT_Face  face );
+
+
+  /*************************************************************************/
+  /*                                                                       */
   /* &lt;Section&gt;                                                             */
   /*    glyph_variants                                                     */
   /*                                                                       */
@@ -3431,6 +3561,12 @@
              FT_Long  c );
 
 
+  /* */
+
+  /* The following #if 0 ... #endif is for the documentation formatter, */
+  /* hiding the internal `FT_MULFIX_INLINED' macro.                     */
+
+#if 0
   /*************************************************************************/
   /*                                                                       */
   /* &lt;Function&gt;                                                            */
@@ -3464,7 +3600,18 @@
   FT_MulFix( FT_Long  a,
              FT_Long  b );
 
+  /* */
+#endif
 
+#ifdef FT_MULFIX_INLINED
+#define FT_MulFix( a, b )  FT_MULFIX_INLINED( a, b )
+#else
+  FT_EXPORT( FT_Long )
+  FT_MulFix( FT_Long  a,
+             FT_Long  b );
+#endif
+
+
   /*************************************************************************/
   /*                                                                       */
   /* &lt;Function&gt;                                                            */
@@ -3611,7 +3758,7 @@
    */
 #define FREETYPE_MAJOR  2
 #define FREETYPE_MINOR  3
-#define FREETYPE_PATCH  7
+#define FREETYPE_PATCH  8
 
 
   /*************************************************************************/
@@ -3695,7 +3842,7 @@
   /*                                                                       */
   /* &lt;Return&gt;                                                              */
   /*    The old setting value.  This will always be false if this is not   */
-  /*    a SFNT font, or if the unpatented hinter is not compiled in this   */
+  /*    an SFNT font, or if the unpatented hinter is not compiled in this  */
   /*    instance of the library.                                           */
   /*                                                                       */
   /* &lt;Since&gt;                                                               */

Added: haiku/trunk/headers/libs/freetype2/freetype/ftadvanc.h
===================================================================
--- haiku/trunk/headers/libs/freetype2/freetype/ftadvanc.h	2009-01-18 12:11:59 UTC (rev 28931)
+++ haiku/trunk/headers/libs/freetype2/freetype/ftadvanc.h	2009-01-18 12:13:00 UTC (rev 28932)
@@ -0,0 +1,179 @@
+/***************************************************************************/
+/*                                                                         */
+/*  ftadvanc.h                                                             */
+/*                                                                         */
+/*    Quick computation of advance widths (specification only).            */
+/*                                                                         */
+/*  Copyright 2008 by                                                      */
+/*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */
+/*                                                                         */
+/*  This file is part of the FreeType project, and may only be used,       */
+/*  modified, and distributed under the terms of the FreeType project      */
+/*  license, LICENSE.TXT.  By continuing to use, modify, or distribute     */
+/*  this file you indicate that you have read the license and              */
+/*  understand and accept it fully.                                        */
+/*                                                                         */
+/***************************************************************************/
+
+
+#ifndef __FTADVANC_H__
+#define __FTADVANC_H__
+
+
+#include &lt;ft2build.h&gt;
+#include FT_FREETYPE_H
+
+#ifdef FREETYPE_H
+#error &quot;freetype.h of FreeType 1 has been loaded!&quot;
+#error &quot;Please fix the directory search order for header files&quot;
+#error &quot;so that freetype.h of FreeType 2 is found first.&quot;
+#endif
+
+
+FT_BEGIN_HEADER
+
+
+  /**************************************************************************
+   *
+   * @section:
+   *   quick_advance
+   *
+   * @title:
+   *   Quick retrieval of advance values
+   *
+   * @abstract:
+   *   Retrieve horizontal and vertical advance values without processing
+   *   glyph outlines, if possible.
+   *
+   * @description:
+   *   This section contains functions to quickly extract advance values
+   *   without handling glyph outlines, if possible.
+   */
+
+
+  /*************************************************************************/
+  /*                                                                       */
+  /* &lt;Const&gt;                                                               */
+  /*    FT_ADVANCE_FLAG_FAST_ONLY                                          */
+  /*                                                                       */
+  /* &lt;Description&gt;                                                         */
+  /*    A bit-flag to be OR-ed with the `flags' parameter of the           */
+  /*    @FT_Get_Advance and @FT_Get_Advances functions.                    */
+  /*                                                                       */
+  /*    If set, it indicates that you want these functions to fail if the  */
+  /*    corresponding hinting mode or font driver doesn't allow for very   */
+  /*    quick advance computation.                                         */
+  /*                                                                       */
+  /*    Typically, glyphs which are either unscaled, unhinted, bitmapped,  */
+  /*    or light-hinted can have their advance width computed very         */
+  /*    quickly.                                                           */
+  /*                                                                       */
+  /*    Normal and bytecode hinted modes, which require loading, scaling,  */
+  /*    and hinting of the glyph outline, are extremely slow by            */
+  /*    comparison.                                                        */
+  /*                                                                       */
+#define FT_ADVANCE_FLAG_FAST_ONLY  0x20000000UL
+
+
+  /*************************************************************************/
+  /*                                                                       */
+  /* &lt;Function&gt;                                                            */
+  /*    FT_Get_Advance                                                     */
+  /*                                                                       */
+  /* &lt;Description&gt;                                                         */
+  /*    Retrieve the advance value of a given glyph outline in an          */
+  /*    @FT_Face.  By default, the unhinted advance is returned in font    */
+  /*    units.                                                             */
+  /*                                                                       */
+  /* &lt;Input&gt;                                                               */
+  /*    face       :: The source @FT_Face handle.                          */
+  /*                                                                       */
+  /*    gindex     :: The glyph index.                                     */
+  /*                                                                       */
+  /*    load_flags :: A set of bit flags similar to those used when        */
+  /*                  calling @FT_Load_Glyph, used to determine what kind  */
+  /*                  of advances you need.                                */
+  /* &lt;Output&gt;                                                              */
+  /*    padvance :: The advance value, in either font units or 16.16       */
+  /*                format.                                                */
+  /*                                                                       */
+  /*                If @FT_LOAD_VERTICAL_LAYOUT is set, this is the        */
+  /*                vertical advance corresponding to a vertical layout.   */
+  /*                Otherwise, it is the horizontal advance in a           */
+  /*                horizontal layout.                                     */
+  /*                                                                       */
+  /* &lt;Return&gt;                                                              */
+  /*    FreeType error code.  0 means success.                             */
+  /*                                                                       */
+  /* &lt;Note&gt;                                                                */
+  /*    This function may fail if you use @FT_ADVANCE_FLAG_FAST_ONLY and   */
+  /*    if the corresponding font backend doesn't have a quick way to      */
+  /*    retrieve the advances.                                             */
+  /*                                                                       */
+  /*    A scaled advance is returned in 16.16 format but isn't transformed */
+  /*    by the affine transformation specified by @FT_Set_Transform.       */
+  /*                                                                       */
+  FT_EXPORT( FT_Error )
+  FT_Get_Advance( FT_Face    face,
+                  FT_UInt    gindex,
+                  FT_Int32   load_flags,
+                  FT_Fixed  *padvance );
+
+
+  /*************************************************************************/
+  /*                                                                       */
+  /* &lt;Function&gt;                                                            */
+  /*    FT_Get_Advances                                                    */
+  /*                                                                       */
+  /* &lt;Description&gt;                                                         */
+  /*    Retrieve the advance values of several glyph outlines in an        */
+  /*    @FT_Face.  By default, the unhinted advances are returned in font  */
+  /*    units.                                                             */
+  /*                                                                       */
+  /* &lt;Input&gt;                                                               */
+  /*    face        :: The source @FT_Face handle.                         */
+  /*                                                                       */
+  /*    start       :: The first glyph index.                              */
+  /*                                                                       */
+  /*    count       :: The number of advance values you want to retrieve.  */
+  /*                                                                       */
+  /*    load_flags  :: A set of bit flags similar to those used when       */
+  /*                   calling @FT_Load_Glyph.                             */
+  /*                                                                       */
+  /* &lt;Output&gt;                                                              */
+  /*    padvance :: The advances, in either font units or 16.16 format.    */
+  /*                This array must contain at least `count' elements.     */
+  /*                                                                       */
+  /*                If @FT_LOAD_VERTICAL_LAYOUT is set, these are the      */
+  /*                vertical advances corresponding to a vertical layout.  */
+  /*                Otherwise, they are the horizontal advances in a       */
+  /*                horizontal layout.                                     */
+  /*                                                                       */
+  /* &lt;Return&gt;                                                              */
+  /*    FreeType error code.  0 means success.                             */
+  /*                                                                       */
+  /* &lt;Note&gt;                                                                */
+  /*    This function may fail if you use @FT_ADVANCE_FLAG_FAST_ONLY and   */
+  /*    if the corresponding font backend doesn't have a quick way to      */
+  /*    retrieve the advances.                                             */
+  /*                                                                       */
+  /*    Scaled advances are returned in 16.16 format but aren't            */
+  /*    transformed by the affine transformation specified by              */
+  /*    @FT_Set_Transform.                                                 */
+  /*                                                                       */
+  FT_EXPORT( FT_Error )
+  FT_Get_Advances( FT_Face    face,
+                   FT_UInt    start,
+                   FT_UInt    count,
+                   FT_Int32   load_flags,
+                   FT_Fixed  *padvances );
+
+/* */
+
+
+FT_END_HEADER
+
+#endif /* __FTADVANC_H__ */
+
+
+/* END */

Modified: haiku/trunk/headers/libs/freetype2/freetype/ftbdf.h
===================================================================
--- haiku/trunk/headers/libs/freetype2/freetype/ftbdf.h	2009-01-18 12:11:59 UTC (rev 28931)
+++ haiku/trunk/headers/libs/freetype2/freetype/ftbdf.h	2009-01-18 12:13:00 UTC (rev 28932)
@@ -4,7 +4,7 @@
 /*                                                                         */
 /*    FreeType API for accessing BDF-specific strings (specification).     */
 /*                                                                         */
-/*  Copyright 2002, 2003, 2004, 2006 by                                    */
+/*  Copyright 2002, 2003, 2004, 2006, 2009 by                              */
 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */
 /*                                                                         */
 /*  This file is part of the FreeType project, and may only be used,       */
@@ -183,6 +183,14 @@
   *   otherwise.  It also returns an error if the property is not in the
   *   font.
   *
+  *   A `property' is a either key-value pair within the STARTPROPERTIES
+  *   ... ENDPROPERTIES block of a BDF font or a key-value pair from the
+  *   `info-&gt;props' array within a `FontRec' structure of a PCF font.
+  *
+  *   Integer properties are always stored as `signed' within PCF fonts;
+  *   consequently, @BDF_PROPERTY_TYPE_CARDINAL is a possible return value
+  *   for BDF fonts only.
+  *
   *   In case of error, `aproperty-&gt;type' is always set to
   *   @BDF_PROPERTY_TYPE_NONE.
   */

Modified: haiku/trunk/headers/libs/freetype2/freetype/ftbitmap.h
===================================================================
--- haiku/trunk/headers/libs/freetype2/freetype/ftbitmap.h	2009-01-18 12:11:59 UTC (rev 28931)
+++ haiku/trunk/headers/libs/freetype2/freetype/ftbitmap.h	2009-01-18 12:13:00 UTC (rev 28932)
@@ -2,10 +2,9 @@
 /*                                                                         */
 /*  ftbitmap.h                                                             */
 /*                                                                         */
-/*    FreeType utility functions for converting 1bpp, 2bpp, 4bpp, and 8bpp */
-/*    bitmaps into 8bpp format (specification).                            */
+/*    FreeType utility functions for bitmaps (specification).              */
 /*                                                                         */
-/*  Copyright 2004, 2005, 2006 by                                          */
+/*  Copyright 2004, 2005, 2006, 2008 by                                    */
 /*  David Turner, Robert Wilhelm, and Werner Lemberg.                      */
 /*                                                                         */
 /*  This file is part of the FreeType project, and may only be used,       */
@@ -121,7 +120,7 @@
   /*    or equal to~8 if bitmap is of pixel_mode @FT_PIXEL_MODE_MONO.      */
   /*                                                                       */
   /*    If you want to embolden the bitmap owned by a @FT_GlyphSlotRec,    */
-  /*    you should call `FT_GlyphSlot_Own_Bitmap' on the slot first.       */
+  /*    you should call @FT_GlyphSlot_Own_Bitmap on the slot first.        */
   /*                                                                       */
   FT_EXPORT( FT_Error )
   FT_Bitmap_Embolden( FT_Library  library,
@@ -173,6 +172,28 @@
   /*************************************************************************/
   /*                                                                       */
   /* &lt;Function&gt;                                                            */
+  /*    FT_GlyphSlot_Own_Bitmap                                            */
+  /*                                                                       */
+  /* &lt;Description&gt;                                                         */
+  /*    Make sure that a glyph slot owns `slot-&gt;bitmap'.                   */
+  /*                                                                       */
+  /* &lt;Input&gt;                                                               */
+  /*    slot :: The glyph slot.                                            */
+  /*                                                                       */
+  /* &lt;Return&gt;                                                              */
+  /*    FreeType error code.  0~means success.                             */
+  /*                                                                       */
+  /* &lt;Note&gt;                                                                */
+  /*    This function is to be used in combination with                    */
+  /*    @FT_Bitmap_Embolden.                                               */
+  /*                                                                       */
+  FT_EXPORT( FT_Error )
+  FT_GlyphSlot_Own_Bitmap( FT_GlyphSlot  slot );
+
+
+  /*************************************************************************/
+  /*                                                                       */
+  /* &lt;Function&gt;                                                            */
   /*    FT_Bitmap_Done                                                     */
   /*                                                                       */
   /* &lt;Description&gt;                                                         */

Modified: haiku/trunk/headers/libs/freetype2/freetype/ftcache.h
===================================================================

[... truncated: 10189 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013930.html">[Haiku-commits] r28931 - haiku/trunk/src/kits/network/libnetapi
</A></li>
	<LI>Next message: <A HREF="013932.html">[Haiku-commits] r28932 - in haiku/trunk: headers/libs/freetype2/freetype headers/libs/freetype2/freetype/config headers/libs/freetype2/freetype/internal headers/libs/freetype2/freetype/internal/services src/libs/freetype2/autofit src/libs/freetype2/base src/libs/freetype2/bdf src/libs/freetype2/cache src/libs/freetype2/cff src/libs/freetype2/cid src/libs/freetype2/gzip src/libs/freetype2/lzw src/libs/freetype2/otvalid src/libs/freetype2/pcf src/libs/freetype2/pfr src/libs/freetype2/psaux src/libs/freetype2/pshinter src/libs/freetype2/psnames src/libs/freetype2/raster src/libs/freetype2/sfnt src/libs/freetype2/smooth src/libs/freetype2/truetype src/libs/freetype2/type1 src/libs/freetype2/type42 src/libs/freetype2/winfonts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13931">[ date ]</a>
              <a href="thread.html#13931">[ thread ]</a>
              <a href="subject.html#13931">[ subject ]</a>
              <a href="author.html#13931">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
