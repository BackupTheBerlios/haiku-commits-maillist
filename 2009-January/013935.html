<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r28928 - in haiku/trunk: headers/os/net	src/kits/network/libnetapi
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r28928%20-%20in%20haiku/trunk%3A%20headers/os/net%0A%09src/kits/network/libnetapi&In-Reply-To=%3C49732ED5.5080107%40gmx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013934.html">
   <LINK REL="Next"  HREF="013936.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r28928 - in haiku/trunk: headers/os/net	src/kits/network/libnetapi</H1>
    <B>Stephan A&#223;mus</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r28928%20-%20in%20haiku/trunk%3A%20headers/os/net%0A%09src/kits/network/libnetapi&In-Reply-To=%3C49732ED5.5080107%40gmx.de%3E"
       TITLE="[Haiku-commits] r28928 - in haiku/trunk: headers/os/net	src/kits/network/libnetapi">superstippi at gmx.de
       </A><BR>
    <I>Sun Jan 18 14:29:57 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="013934.html">[Haiku-commits] r28928 - in haiku/trunk: headers/os/net src/kits/network/libnetapi
</A></li>
        <LI>Next message: <A HREF="013936.html">[Haiku-commits] r28928 - in haiku/trunk: headers/os/net	src/kits/network/libnetapi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13935">[ date ]</a>
              <a href="thread.html#13935">[ thread ]</a>
              <a href="subject.html#13935">[ subject ]</a>
              <a href="author.html#13935">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Bruno,

thanks for the quick fixes!

&gt;&gt;<i> A possible performance optimization: you could pre-allocate a fixed 
</I>&gt;&gt;<i> (2K 
</I>&gt;&gt;<i> maybe?) buffer size on the stack, and only use the allocator if the 
</I>&gt;&gt;<i> flattened size exceeds that size. Might be nice to have that since 
</I>&gt;&gt;<i> this 
</I>&gt;&gt;<i> call may be used frequently. In one test I was doing once, it saved 
</I>&gt;&gt;<i> about 200&#181;s per call, which may actually be quite a lot depending on 
</I>&gt;&gt;<i> how 
</I>&gt;&gt;<i> small the message is and our BMessages probably flatten pretty quickly 
</I>&gt;&gt;<i> anyways.
</I>&gt;<i> 
</I>&gt;<i> Done, although it is still to be proven if this optimization really 
</I>&gt;<i> helps as this is a buffer being flattened. It could easily be bigger 
</I>&gt;<i> than 2K.
</I>
Yeah, hard to tell. It may help in the situation where lots of small 
messages are being flattened. If the messages are getting bigger, the 
time to transmit them becomes larger and the function would probably be 
called less frequently. So the optimization hopefully kicks in exactly 
when it would be relevant. In theory anyways... :-)

Best regards,
-Stephan


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013934.html">[Haiku-commits] r28928 - in haiku/trunk: headers/os/net src/kits/network/libnetapi
</A></li>
	<LI>Next message: <A HREF="013936.html">[Haiku-commits] r28928 - in haiku/trunk: headers/os/net	src/kits/network/libnetapi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13935">[ date ]</a>
              <a href="thread.html#13935">[ thread ]</a>
              <a href="subject.html#13935">[ subject ]</a>
              <a href="author.html#13935">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
