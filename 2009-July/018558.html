<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r31997 - haiku/trunk/src/kits/media
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31997%20-%20haiku/trunk/src/kits/media&In-Reply-To=%3C200907302102.n6UL2w7b027922%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018555.html">
   <LINK REL="Next"  HREF="018559.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r31997 - haiku/trunk/src/kits/media</H1>
    <B>stippi at mail.berlios.de</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31997%20-%20haiku/trunk/src/kits/media&In-Reply-To=%3C200907302102.n6UL2w7b027922%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r31997 - haiku/trunk/src/kits/media">stippi at mail.berlios.de
       </A><BR>
    <I>Thu Jul 30 23:02:58 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018555.html">[Haiku-commits] r31996 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg
</A></li>
        <LI>Next message: <A HREF="018559.html">[Haiku-commits] r31998 - haiku/trunk/src/servers/media
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18558">[ date ]</a>
              <a href="thread.html#18558">[ thread ]</a>
              <a href="subject.html#18558">[ subject ]</a>
              <a href="author.html#18558">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: stippi
Date: 2009-07-30 23:02:56 +0200 (Thu, 30 Jul 2009)
New Revision: 31997
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=31997&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=31997&amp;view=rev</A>

Modified:
   haiku/trunk/src/kits/media/MediaFormats.cpp
Log:
Style cleanup, switched &quot;* &quot; style.


Modified: haiku/trunk/src/kits/media/MediaFormats.cpp
===================================================================
--- haiku/trunk/src/kits/media/MediaFormats.cpp	2009-07-30 20:49:04 UTC (rev 31996)
+++ haiku/trunk/src/kits/media/MediaFormats.cpp	2009-07-30 21:02:56 UTC (rev 31997)
@@ -1,9 +1,11 @@
 /*
-** Copyright 2004, the OpenBeOS project. All rights reserved.
-** Distributed under the terms of the OpenBeOS License.
-**
-** Authors: Axel D&#246;rfler, Marcus Overhagen
-*/
+ * Copyright 2004-2009, The Haiku Project. All rights reserved.
+ * Distributed under the terms of the MIT license.
+ *
+ * Authors:
+ *		Axel D&#246;rfler
+ *		Marcus Overhagen
+ */
 
 
 #include &quot;DataExchange.h&quot;
@@ -26,9 +28,9 @@
 
 
 status_t
-get_next_encoder(int32 *cookie, const media_file_format *_fileFormat,
-	const media_format *inFormat, media_format *_outFormat,
-	media_codec_info *_codecInfo)
+get_next_encoder(int32* cookie, const media_file_format* _fileFormat,
+	const media_format* inFormat, media_format* _outFormat,
+	media_codec_info* _codecInfo)
 {
 	UNIMPLEMENTED();
 	return B_ERROR;
@@ -36,10 +38,10 @@
 
 
 status_t
-get_next_encoder(int32 *cookie, const media_file_format *_fileFormat,
-	const media_format *inFormat, const media_format *_outFormat,
-	media_codec_info *_codecInfo, media_format *_acceptedInputFormat,
-	media_format *_acceptedOutputFormat)
+get_next_encoder(int32* cookie, const media_file_format* _fileFormat,
+	const media_format* inFormat, const media_format* _outFormat,
+	media_codec_info* _codecInfo, media_format* _acceptedInputFormat,
+	media_format* _acceptedOutputFormat)
 {
 	UNIMPLEMENTED();
 	return B_ERROR;
@@ -47,7 +49,7 @@
 
 
 status_t
-get_next_encoder(int32 *cookie, media_codec_info *_codecInfo)
+get_next_encoder(int32* cookie, media_codec_info* _codecInfo)
 {
 	UNIMPLEMENTED();
 	return B_ERROR;
@@ -55,8 +57,8 @@
 
 
 bool
-does_file_accept_format(const media_file_format *_fileFormat,
-	media_format *format, uint32 flags)
+does_file_accept_format(const media_file_format* _fileFormat,
+	media_format* format, uint32 flags)
 {
 	UNIMPLEMENTED();
 	return false;
@@ -77,14 +79,15 @@
 }
 
 
-_media_format_description::_media_format_description(const _media_format_description &amp; other)
+_media_format_description::_media_format_description(
+	const _media_format_description&amp; other)
 {
 	memcpy(this, &amp;other, sizeof(*this));
 }
 
 
-_media_format_description &amp; 
-_media_format_description::operator=(const _media_format_description &amp; other)
+_media_format_description&amp; 
+_media_format_description::operator=(const _media_format_description&amp; other)
 {
 	memcpy(this, &amp;other, sizeof(*this));
 	return *this;
@@ -92,7 +95,8 @@
 
 
 bool
-operator==(const media_format_description &amp; a, const media_format_description &amp; b)
+operator==(const media_format_description&amp; a,
+	const media_format_description&amp; b)
 {
 	if (a.family != b.family)
 		return false;
@@ -101,7 +105,8 @@
 		case B_BEOS_FORMAT_FAMILY:
 			return a.u.beos.format == b.u.beos.format;
 		case B_QUICKTIME_FORMAT_FAMILY:
-			return a.u.quicktime.codec == b.u.quicktime.codec &amp;&amp; a.u.quicktime.vendor == b.u.quicktime.vendor;
+			return a.u.quicktime.codec == b.u.quicktime.codec
+				&amp;&amp; a.u.quicktime.vendor == b.u.quicktime.vendor;
 		case B_AVI_FORMAT_FAMILY:
 			return a.u.avi.codec == b.u.avi.codec;
 		case B_ASF_FORMAT_FAMILY:
@@ -115,7 +120,8 @@
 		case B_AVR_FORMAT_FAMILY:
 			return a.u.avr.id == b.u.avr.id;
 		case B_MISC_FORMAT_FAMILY:
-			return a.u.misc.file_format == b.u.misc.file_format &amp;&amp; a.u.misc.codec == b.u.misc.codec;
+			return a.u.misc.file_format == b.u.misc.file_format
+				&amp;&amp; a.u.misc.codec == b.u.misc.codec;
 
 		default:
 			return false;
@@ -124,7 +130,7 @@
 
 
 bool
-operator&lt;(const media_format_description &amp; a, const media_format_description &amp; b)
+operator&lt;(const media_format_description&amp; a, const media_format_description&amp; b)
 {
 	if (a.family != b.family)
 		return a.family &lt; b.family;
@@ -160,14 +166,14 @@
 
 
 bool
-operator==(const GUID &amp; a, const GUID &amp; b)
+operator==(const GUID&amp; a, const GUID&amp; b)
 {
 	return memcmp(&amp;a, &amp;b, sizeof(a)) == 0;
 }
 
 
 bool
-operator&lt;(const GUID &amp; a, const GUID &amp; b)
+operator&lt;(const GUID&amp; a, const GUID&amp; b)
 {
 	return memcmp(&amp;a, &amp;b, sizeof(a)) &lt; 0;
 }
@@ -186,8 +192,8 @@
 
 
 
-meta_format::meta_format(const media_format_description &amp;description,
-	const media_format &amp;format, int32 id)
+meta_format::meta_format(const media_format_description&amp; description,
+	const media_format&amp; format, int32 id)
 	:
 	description(description),
 	format(format),
@@ -195,7 +201,8 @@
 {
 }
 
-meta_format::meta_format(const media_format_description &amp;description)
+
+meta_format::meta_format(const media_format_description&amp; description)
 	:
 	description(description),
 	id(0)
@@ -203,7 +210,7 @@
 }
 
 
-meta_format::meta_format(const meta_format &amp;other)
+meta_format::meta_format(const meta_format&amp; other)
 	:
 	description(other.description),
 	format(other.format)
@@ -212,7 +219,8 @@
 
 
 bool 
-meta_format::Matches(const media_format &amp;otherFormat, media_format_family family)
+meta_format::Matches(const media_format&amp; otherFormat,
+	media_format_family family)
 {
 	if (family != description.family)
 		return false;
@@ -222,7 +230,7 @@
 
 
 int 
-meta_format::CompareDescriptions(const meta_format *a, const meta_format *b)
+meta_format::CompareDescriptions(const meta_format* a, const meta_format* b)
 {
 	if (a-&gt;description == b-&gt;description)
 		return 0;
@@ -235,7 +243,7 @@
 
 
 int 
-meta_format::Compare(const meta_format *a, const meta_format *b)
+meta_format::Compare(const meta_format* a, const meta_format* b)
 {
 	int compare = CompareDescriptions(a, b);
 	if (compare != 0)
@@ -264,7 +272,8 @@
 	BMessage reply;
 	status_t status = QueryServer(request, reply);
 	if (status &lt; B_OK) {
-		ERROR(&quot;BMediaFormats: Could not update formats: %s\n&quot;, strerror(status));
+		ERROR(&quot;BMediaFormats: Could not update formats: %s\n&quot;,
+			strerror(status));
 		return status;
 	}
 
@@ -286,22 +295,22 @@
 
 	int32 index = 0;
 	for (; index &lt; sFormats.CountItems() &amp;&amp; index &lt; count; index++) {
-		meta_format *item = sFormats.ItemAt(index);
+		meta_format* item = sFormats.ItemAt(index);
 
-		const meta_format *newItem;
+		const meta_format* newItem;
 		ssize_t size;
 		if (reply.FindData(&quot;formats&quot;, MEDIA_META_FORMAT_TYPE, index,
-				(const void **)&amp;newItem, &amp;size) == B_OK)
+				(const void**)&amp;newItem, &amp;size) == B_OK)
 			*item = *newItem;
 	}
 
 	// allocate additional formats
 
 	for (; index &lt; count; index++) {
-		const meta_format *newItem;
+		const meta_format* newItem;
 		ssize_t size;
 		if (reply.FindData(&quot;formats&quot;, MEDIA_META_FORMAT_TYPE, index,
-				(const void **)&amp;newItem, &amp;size) == B_OK)
+				(const void**)&amp;newItem, &amp;size) == B_OK)
 			sFormats.AddItem(new meta_format(*newItem));
 	}
 
@@ -337,9 +346,9 @@
 
 
 status_t 
-BMediaFormats::GetCodeFor(const media_format &amp;format,
+BMediaFormats::GetCodeFor(const media_format&amp; format,
 	media_format_family family,
-	media_format_description *_description)
+	media_format_description* _description)
 {
 	BAutolock locker(sLock);
 
@@ -350,7 +359,7 @@
 	// search for a matching format
 
 	for (int32 index = sFormats.CountItems(); index-- &gt; 0;) {
-		meta_format *metaFormat = sFormats.ItemAt(index);
+		meta_format* metaFormat = sFormats.ItemAt(index);
 
 		if (metaFormat-&gt;Matches(format, family)) {
 			*_description = metaFormat-&gt;description;
@@ -363,8 +372,8 @@
 
 
 status_t 
-BMediaFormats::GetFormatFor(const media_format_description &amp;description,
-	media_format *_format)
+BMediaFormats::GetFormatFor(const media_format_description&amp; description,
+	media_format* _format)
 {
 	BAutolock locker(sLock);
 
@@ -381,7 +390,7 @@
 	// search for a matching format description
 
 	meta_format other(description);
-	const meta_format *metaFormat = sFormats.BinarySearch(other,
+	const meta_format* metaFormat = sFormats.BinarySearch(other,
 		meta_format::CompareDescriptions);
 	TRACE(&quot;meta format == %p\n&quot;, metaFormat);
 	if (metaFormat == NULL) {
@@ -397,7 +406,7 @@
 
 status_t 
 BMediaFormats::GetBeOSFormatFor(uint32 format, 
-	media_format *_format, media_type type)
+	media_format* _format, media_type type)
 {
 	BMediaFormats formats;
 
@@ -418,7 +427,7 @@
 
 status_t 
 BMediaFormats::GetAVIFormatFor(uint32 codec,
-	media_format *_format, media_type type)
+	media_format* _format, media_type type)
 {
 	UNIMPLEMENTED();
 	BMediaFormats formats;
@@ -440,7 +449,7 @@
 
 status_t 
 BMediaFormats::GetQuicktimeFormatFor(uint32 vendor, uint32 codec, 
-	media_format *_format, media_type type)
+	media_format* _format, media_type type)
 {
 	BMediaFormats formats;
 
@@ -464,7 +473,7 @@
 BMediaFormats::RewindFormats()
 {
 	if (!sLock.IsLocked() || sLock.LockingThread() != find_thread(NULL)) {
-		// ToDo: shouldn't we simply drop into the debugger in this case?
+		// TODO: Shouldn't we simply drop into the debugger in this case?
 		return B_NOT_ALLOWED;
 	}
 
@@ -474,23 +483,23 @@
 
 
 status_t 
-BMediaFormats::GetNextFormat(media_format *_format,
-	media_format_description *_description)
+BMediaFormats::GetNextFormat(media_format* _format,
+	media_format_description* _description)
 {
 	if (!sLock.IsLocked() || sLock.LockingThread() != find_thread(NULL)) {
-		// ToDo: shouldn't we simply drop into the debugger in this case?
+		// TODO: Shouldn't we simply drop into the debugger in this case?
 		return B_NOT_ALLOWED;
 	}
 
 	if (fIteratorIndex == 0) {
-		// this is the first call, so let's make sure we have
-		// current data to operate on
+		// This is the first call, so let's make sure we have current data to
+		// operate on.
 		status_t status = update_media_formats();
 		if (status &lt; B_OK)
 			return status;
 	}
 
-	meta_format *format = sFormats.ItemAt(fIteratorIndex++);
+	meta_format* format = sFormats.ItemAt(fIteratorIndex++);
 	if (format == NULL)
 		return B_BAD_INDEX;
 
@@ -513,12 +522,14 @@
 
 
 status_t 
-BMediaFormats::MakeFormatFor(const media_format_description *descriptions,
-	int32 descriptionCount, media_format *format, uint32 flags, void * _reserved)
+BMediaFormats::MakeFormatFor(const media_format_description* descriptions,
+	int32 descriptionCount, media_format* format, uint32 flags,
+	void* _reserved)
 {
 	BMessage request(MEDIA_SERVER_MAKE_FORMAT_FOR);
 	for (int32 i = 0 ; i &lt; descriptionCount ; i++) {
-		request.AddData(&quot;description&quot;, B_RAW_TYPE, &amp;descriptions[i], sizeof(descriptions[i]));
+		request.AddData(&quot;description&quot;, B_RAW_TYPE, &amp;descriptions[i],
+			sizeof(descriptions[i]));
 	}
 	request.AddData(&quot;format&quot;, B_RAW_TYPE, format, sizeof(*format));
 	request.AddData(&quot;flags&quot;, B_UINT32_TYPE, &amp;flags, sizeof(flags));
@@ -532,34 +543,32 @@
 	}
 
 	// check the status
-	if (reply.FindInt32(&quot;result&quot;, &amp;status) &lt; B_OK) {
+	if (reply.FindInt32(&quot;result&quot;, &amp;status) &lt; B_OK)
 		return B_ERROR;
-	}
-	if (status != B_OK) {
+	if (status != B_OK)
 		return status;
-	}
 
 	// get the format
-	const void * data;
+	const void* data;
 	ssize_t size;
-	if (reply.FindData(&quot;format&quot;, B_RAW_TYPE, 0, &amp;data, &amp;size) != B_OK) {
+	if (reply.FindData(&quot;format&quot;, B_RAW_TYPE, 0, &amp;data, &amp;size) != B_OK)
 		return B_ERROR;
-	}
-	if (size != sizeof(*format)) {
+	if (size != sizeof(*format))
 		return B_ERROR;
-	}
 
 	// copy the BMessage's data into our format
-	*format = *(media_format *)data;
+	*format = *(media_format*)data;
 
 	return B_OK;
 }
 
-/* --- begin deprecated API --- */
 
+// #pragma mark - deprecated API
+
+
 status_t 
-BMediaFormats::MakeFormatFor(const media_format_description &amp;description,
-	const media_format &amp;inFormat, media_format *_outFormat)
+BMediaFormats::MakeFormatFor(const media_format_description&amp; description,
+	const media_format&amp; inFormat, media_format* _outFormat)
 {
 	*_outFormat = inFormat;
 	return MakeFormatFor(&amp;description, 1, _outFormat);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018555.html">[Haiku-commits] r31996 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg
</A></li>
	<LI>Next message: <A HREF="018559.html">[Haiku-commits] r31998 - haiku/trunk/src/servers/media
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18558">[ date ]</a>
              <a href="thread.html#18558">[ thread ]</a>
              <a href="subject.html#18558">[ subject ]</a>
              <a href="author.html#18558">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
