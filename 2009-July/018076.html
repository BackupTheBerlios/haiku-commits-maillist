<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r31617 - in haiku/branches/components/gsoc-locale-kit: build/jam data/artwork/icons headers/build/os/kernel headers/build/os/midi headers/cpp headers/os/midi headers/posix/sys headers/private/net headers/private/shared src/add-ons/kernel/drivers/audio/hda src/add-ons/kernel/drivers/graphics/ati src/add-ons/kernel/drivers/graphics/s3 src/add-ons/kernel/drivers/power/acpi_embedded_controller src/add-ons/kernel/drivers/random src/add-ons/kernel/file_systems/cdda src/add-ons/kernel/file_systems/ntfs/libntfs src/add-ons/kernel/file_systems/reiserfs src/add-ons/kernel/network/protocols/icmp src/add-ons/kernel/network/protocols/ipv4 src/add-ons/kernel/network/protocols/l2cap src/add-ons/kernel/network/protocols/tcp src/add-ons/kernel/network/protocols/udp src/add-ons/kernel/network/protocols/unix src/add-ons/kernel/network/stack src/add-ons/kernel/partitioning_systems/intel src/add-ons/media/plugins/ffmpeg src/add-ons/opengl/mesa_software_renderer src/apps/charactermap src! /apps/debugger src/apps/debugger/arch src/apps/debugger/arch/x86 src/apps/debugger/debug_info src/apps/debugger/dwarf src/apps/debugger/files src/apps/debugger/gui/team_window src/apps/debugger/model src/apps/debugger/types src/apps/installer src/apps/mail src/apps/mediaplayer src/apps/mediaplayer/media_node_framework src/apps/mediaplayer/media_node_framework/video src/apps/mediaplayer/supplier src/apps/processcontroller src/bin src/bin/desklink src/bin/multiuser src/bin/network/ftp src/build/libbe/interface src/data/beos_mime/video src/kits/device src/kits/interface src/kits/shared src/kits/tracker src/servers/app src/servers/cddb_daemon src/servers/mail src/servers/midi src/servers/registrar src/system/kernel/debug src/tests/add-ons/kernel/file_systems/userlandfs/ntfs
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31617%20-%20in%0A%20haiku/branches/components/gsoc-locale-kit%3A%20build/jam%20data/artwork/icons%0A%20headers/build/os/kernel%20headers/build/os/midi%20headers/cpp%20headers/os/midi%0A%20headers/posix/sys%20headers/private/net%20headers/private/shared%0A%20src/add-ons/kernel/drivers/audio/hda%0A%20src/add-ons/kernel/drivers/graphics/ati%0A%20src/add-ons/kernel/drivers/graphics/s3%0A%20src/add-ons/kernel/drivers/power/acpi_embedded_controller%0A%20src/add-ons/kernel/drivers/random%20src/add-ons/kernel/file_systems/cdda%0A%20src/add-ons/kernel/file_systems/ntfs/libntfs%0A%20src/add-ons/kernel/file_systems/reiserfs%0A%20src/add-ons/kernel/network/protocols/icmp%0A%20src/add-ons/kernel/network/protocols/ipv4%0A%20src/add-ons/kernel/network/protocols/l2cap%0A%20src/add-ons/kernel/network/protocols/tcp%0A%20src/add-ons/kernel/network/protocols/udp%0A%20src/add-ons/kernel/network/protocols/unix%20src/add-ons/kernel/network/stack%0A%20src/add-ons/kernel/partitioning_systems/intel%0A%20src/add-ons/media/plugins/ffmpeg%20src/add-ons/opengl/mesa_software_renderer%0A%20src/apps/charactermap%20src%21%20/apps/debugger%20src/apps/debugger/arch%0A%20src/apps/debugger/arch/x86%20src/apps/debugger/debug_info%0A%20src/apps/debugger/dwarf%20src/apps/debugger/files%0A%20src/apps/debugger/gui/team_window%20src/apps/debugger/model%0A%20src/apps/debugger/types%20src/apps/installer%20src/apps/mail%0A%20src/apps/mediaplayer%20src/apps/mediaplayer/media_node_framework%0A%20src/apps/mediaplayer/media_node_framework/video%0A%20src/apps/mediaplayer/supplier%20src/apps/processcontroller%20src/bin%0A%20src/bin/desklink%20src/bin/multiuser%20src/bin/network/ftp%0A%20src/build/libbe/interface%20src/data/beos_mime/video%20src/kits/device%0A%20src/kits/interface%20src/kits/shared%20src/kits/tracker%20src/servers/app%0A%20src/servers/cddb_daemon%20src/servers/mail%20src/servers/midi%0A%20src/servers/registrar%20src/system/kernel/debug%0A%20src/tests/add-ons/kernel/file_systems/userlandfs/ntfs&In-Reply-To=%3C200907171156.n6HBuoPS016678%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018075.html">
   <LINK REL="Next"  HREF="018077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r31617 - in haiku/branches/components/gsoc-locale-kit: build/jam data/artwork/icons headers/build/os/kernel headers/build/os/midi headers/cpp headers/os/midi headers/posix/sys headers/private/net headers/private/shared src/add-ons/kernel/drivers/audio/hda src/add-ons/kernel/drivers/graphics/ati src/add-ons/kernel/drivers/graphics/s3 src/add-ons/kernel/drivers/power/acpi_embedded_controller src/add-ons/kernel/drivers/random src/add-ons/kernel/file_systems/cdda src/add-ons/kernel/file_systems/ntfs/libntfs src/add-ons/kernel/file_systems/reiserfs src/add-ons/kernel/network/protocols/icmp src/add-ons/kernel/network/protocols/ipv4 src/add-ons/kernel/network/protocols/l2cap src/add-ons/kernel/network/protocols/tcp src/add-ons/kernel/network/protocols/udp src/add-ons/kernel/network/protocols/unix src/add-ons/kernel/network/stack src/add-ons/kernel/partitioning_systems/intel src/add-ons/media/plugins/ffmpeg src/add-ons/opengl/mesa_software_renderer src/apps/charactermap src! /apps/debugger src/apps/debugger/arch src/apps/debugger/arch/x86 src/apps/debugger/debug_info src/apps/debugger/dwarf src/apps/debugger/files src/apps/debugger/gui/team_window src/apps/debugger/model src/apps/debugger/types src/apps/installer src/apps/mail src/apps/mediaplayer src/apps/mediaplayer/media_node_framework src/apps/mediaplayer/media_node_framework/video src/apps/mediaplayer/supplier src/apps/processcontroller src/bin src/bin/desklink src/bin/multiuser src/bin/network/ftp src/build/libbe/interface src/data/beos_mime/video src/kits/device src/kits/interface src/kits/shared src/kits/tracker src/servers/app src/servers/cddb_daemon src/servers/mail src/servers/midi src/servers/registrar src/system/kernel/debug src/tests/add-ons/kernel/file_systems/userlandfs/ntfs</H1>
    <B>zooey at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31617%20-%20in%0A%20haiku/branches/components/gsoc-locale-kit%3A%20build/jam%20data/artwork/icons%0A%20headers/build/os/kernel%20headers/build/os/midi%20headers/cpp%20headers/os/midi%0A%20headers/posix/sys%20headers/private/net%20headers/private/shared%0A%20src/add-ons/kernel/drivers/audio/hda%0A%20src/add-ons/kernel/drivers/graphics/ati%0A%20src/add-ons/kernel/drivers/graphics/s3%0A%20src/add-ons/kernel/drivers/power/acpi_embedded_controller%0A%20src/add-ons/kernel/drivers/random%20src/add-ons/kernel/file_systems/cdda%0A%20src/add-ons/kernel/file_systems/ntfs/libntfs%0A%20src/add-ons/kernel/file_systems/reiserfs%0A%20src/add-ons/kernel/network/protocols/icmp%0A%20src/add-ons/kernel/network/protocols/ipv4%0A%20src/add-ons/kernel/network/protocols/l2cap%0A%20src/add-ons/kernel/network/protocols/tcp%0A%20src/add-ons/kernel/network/protocols/udp%0A%20src/add-ons/kernel/network/protocols/unix%20src/add-ons/kernel/network/stack%0A%20src/add-ons/kernel/partitioning_systems/intel%0A%20src/add-ons/media/plugins/ffmpeg%20src/add-ons/opengl/mesa_software_renderer%0A%20src/apps/charactermap%20src%21%20/apps/debugger%20src/apps/debugger/arch%0A%20src/apps/debugger/arch/x86%20src/apps/debugger/debug_info%0A%20src/apps/debugger/dwarf%20src/apps/debugger/files%0A%20src/apps/debugger/gui/team_window%20src/apps/debugger/model%0A%20src/apps/debugger/types%20src/apps/installer%20src/apps/mail%0A%20src/apps/mediaplayer%20src/apps/mediaplayer/media_node_framework%0A%20src/apps/mediaplayer/media_node_framework/video%0A%20src/apps/mediaplayer/supplier%20src/apps/processcontroller%20src/bin%0A%20src/bin/desklink%20src/bin/multiuser%20src/bin/network/ftp%0A%20src/build/libbe/interface%20src/data/beos_mime/video%20src/kits/device%0A%20src/kits/interface%20src/kits/shared%20src/kits/tracker%20src/servers/app%0A%20src/servers/cddb_daemon%20src/servers/mail%20src/servers/midi%0A%20src/servers/registrar%20src/system/kernel/debug%0A%20src/tests/add-ons/kernel/file_systems/userlandfs/ntfs&In-Reply-To=%3C200907171156.n6HBuoPS016678%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r31617 - in haiku/branches/components/gsoc-locale-kit: build/jam data/artwork/icons headers/build/os/kernel headers/build/os/midi headers/cpp headers/os/midi headers/posix/sys headers/private/net headers/private/shared src/add-ons/kernel/drivers/audio/hda src/add-ons/kernel/drivers/graphics/ati src/add-ons/kernel/drivers/graphics/s3 src/add-ons/kernel/drivers/power/acpi_embedded_controller src/add-ons/kernel/drivers/random src/add-ons/kernel/file_systems/cdda src/add-ons/kernel/file_systems/ntfs/libntfs src/add-ons/kernel/file_systems/reiserfs src/add-ons/kernel/network/protocols/icmp src/add-ons/kernel/network/protocols/ipv4 src/add-ons/kernel/network/protocols/l2cap src/add-ons/kernel/network/protocols/tcp src/add-ons/kernel/network/protocols/udp src/add-ons/kernel/network/protocols/unix src/add-ons/kernel/network/stack src/add-ons/kernel/partitioning_systems/intel src/add-ons/media/plugins/ffmpeg src/add-ons/opengl/mesa_software_renderer src/apps/charactermap src! /apps/debugger src/apps/debugger/arch src/apps/debugger/arch/x86 src/apps/debugger/debug_info src/apps/debugger/dwarf src/apps/debugger/files src/apps/debugger/gui/team_window src/apps/debugger/model src/apps/debugger/types src/apps/installer src/apps/mail src/apps/mediaplayer src/apps/mediaplayer/media_node_framework src/apps/mediaplayer/media_node_framework/video src/apps/mediaplayer/supplier src/apps/processcontroller src/bin src/bin/desklink src/bin/multiuser src/bin/network/ftp src/build/libbe/interface src/data/beos_mime/video src/kits/device src/kits/interface src/kits/shared src/kits/tracker src/servers/app src/servers/cddb_daemon src/servers/mail src/servers/midi src/servers/registrar src/system/kernel/debug src/tests/add-ons/kernel/file_systems/userlandfs/ntfs">zooey at mail.berlios.de
       </A><BR>
    <I>Fri Jul 17 13:56:50 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018075.html">[Haiku-commits] r31616 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg
</A></li>
        <LI>Next message: <A HREF="018077.html">[Haiku-commits] r31618 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18076">[ date ]</a>
              <a href="thread.html#18076">[ thread ]</a>
              <a href="subject.html#18076">[ subject ]</a>
              <a href="author.html#18076">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: zooey
Date: 2009-07-17 13:56:36 +0200 (Fri, 17 Jul 2009)
New Revision: 31617
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=31617&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=31617&amp;view=rev</A>

Added:
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beacon
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beacon_2
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beacon_3
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beam_1_NewMail
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beam_2_NewMail
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beam_2_NoMail
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beam_3_NewMail
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beam_3_NoMail
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Bikeshed
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_CharacterMap
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_DiskUsage
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Transmission
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/Device_Mobile
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/File_Broken_Link_2
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/Misc_CF_LightBulb
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/Misc_TCF_LightBulb
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/Server_MIDI
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/arch/RegisterMap.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/arch/RegisterMap.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/DwarfInterfaceFactory.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/DwarfInterfaceFactory.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/CfaContext.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/CfaContext.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/CfaRule.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/CfaRuleSet.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/CfaRuleSet.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DwarfExpressionEvaluator.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DwarfExpressionEvaluator.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DwarfTargetInterface.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DwarfTargetInterface.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/gui/team_window/RegistersView.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/gui/team_window/RegistersView.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/gui/team_window/VariablesView.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/gui/team_window/VariablesView.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/model/Type.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/model/Type.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/model/Variable.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/model/Variable.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/source_language/
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/types/ValueLocation.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/types/ValueLocation.h
   haiku/branches/components/gsoc-locale-kit/src/data/beos_mime/video/mp2t
Removed:
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DwarfTypes.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/gui/team_window/RegisterView.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/gui/team_window/RegisterView.h
Modified:
   haiku/branches/components/gsoc-locale-kit/build/jam/UserBuildConfig.ReadMe
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_BeHappy
   haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Poorman
   haiku/branches/components/gsoc-locale-kit/headers/build/os/kernel/OS.h
   haiku/branches/components/gsoc-locale-kit/headers/build/os/midi/MidiDefs.h
   haiku/branches/components/gsoc-locale-kit/headers/cpp/stl_alloc.h
   haiku/branches/components/gsoc-locale-kit/headers/cpp/stl_config.h
   haiku/branches/components/gsoc-locale-kit/headers/os/midi/MidiDefs.h
   haiku/branches/components/gsoc-locale-kit/headers/posix/sys/sockio.h
   haiku/branches/components/gsoc-locale-kit/headers/private/net/net_protocol.h
   haiku/branches/components/gsoc-locale-kit/headers/private/shared/Variant.h
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/audio/hda/hda_multi_audio.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/graphics/ati/driver.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/graphics/s3/driver.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/SmallResourceData.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/SmallResourceData.h
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/acpi_embedded_controller.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/random/driver.c
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/cdda/cdda.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/Jamfile
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/config.h
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/unistr.c
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/unistr.h
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/Block.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/Settings.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/kernel_interface.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/icmp/icmp.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/ipv4/ipv4.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/l2cap/l2cap.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/tcp/tcp.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/udp/udp.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/unix/unix.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/stack/net_socket.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/partitioning_systems/intel/write_support.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/media/plugins/ffmpeg/AVCodecDecoder.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/media/plugins/ffmpeg/AVFormatReader.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/media/plugins/ffmpeg/CodecTable.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/media/plugins/ffmpeg/DemuxerTable.cpp
   haiku/branches/components/gsoc-locale-kit/src/add-ons/opengl/mesa_software_renderer/MesaSoftwareRenderer.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/charactermap/CharacterMap.rdef
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/Jamfile
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/MessageCodes.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/arch/Architecture.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/arch/Architecture.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/arch/CpuState.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/arch/Register.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/arch/Register.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/arch/x86/ArchitectureX86.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/arch/x86/ArchitectureX86.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/arch/x86/CpuStateX86.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/arch/x86/CpuStateX86.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/DebuggerImageDebugInfo.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/DebuggerImageDebugInfo.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/DwarfFunctionDebugInfo.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/DwarfFunctionDebugInfo.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/DwarfImageDebugInfo.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/DwarfImageDebugInfo.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/DwarfTeamDebugInfo.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/DwarfTeamDebugInfo.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/SpecificImageDebugInfo.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/debug_info/TeamDebugInfo.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/AbbreviationTable.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/AbbreviationTable.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/AttributeValue.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/AttributeValue.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/CompilationUnit.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/CompilationUnit.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DataReader.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DebugInfoEntries.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DebugInfoEntries.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DebugInfoEntry.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DebugInfoEntry.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/Dwarf.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DwarfFile.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/DwarfFile.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/Jamfile
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/LineNumberProgram.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/dwarf/LineNumberProgram.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/files/SourceFile.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/files/SourceFile.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/gui/team_window/SourceView.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/gui/team_window/SourceView.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/gui/team_window/TeamWindow.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/gui/team_window/TeamWindow.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/model/DisassembledCode.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/model/DisassembledCode.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/model/FileSourceCode.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/model/FileSourceCode.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/model/SourceCode.h
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/model/StackFrame.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/debugger/model/StackFrame.h
   haiku/branches/components/gsoc-locale-kit/src/apps/installer/WorkerThread.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/mail/Content.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/mail/Header.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/mail/Header.h
   haiku/branches/components/gsoc-locale-kit/src/apps/mediaplayer/Controller.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/mediaplayer/MainWin.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/mediaplayer/MainWin.h
   haiku/branches/components/gsoc-locale-kit/src/apps/mediaplayer/media_node_framework/PlaybackManager.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/mediaplayer/media_node_framework/video/VideoConsumer.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/mediaplayer/media_node_framework/video/VideoProducer.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/mediaplayer/supplier/MediaTrackAudioSupplier.cpp
   haiku/branches/components/gsoc-locale-kit/src/apps/processcontroller/PCWorld.cpp
   haiku/branches/components/gsoc-locale-kit/src/bin/desklink/MediaReplicant.cpp
   haiku/branches/components/gsoc-locale-kit/src/bin/desklink/MixerControl.h
   haiku/branches/components/gsoc-locale-kit/src/bin/desklink/VolumeControl.cpp
   haiku/branches/components/gsoc-locale-kit/src/bin/df.cpp
   haiku/branches/components/gsoc-locale-kit/src/bin/hey.cpp
   haiku/branches/components/gsoc-locale-kit/src/bin/lsindex.cpp
   haiku/branches/components/gsoc-locale-kit/src/bin/mkindex.cpp
   haiku/branches/components/gsoc-locale-kit/src/bin/mountvolume.cpp
   haiku/branches/components/gsoc-locale-kit/src/bin/multiuser/login.cpp
   haiku/branches/components/gsoc-locale-kit/src/bin/network/ftp/util.c
   haiku/branches/components/gsoc-locale-kit/src/build/libbe/interface/Bitmap.cpp
   haiku/branches/components/gsoc-locale-kit/src/kits/device/USBInterface.cpp
   haiku/branches/components/gsoc-locale-kit/src/kits/interface/View.cpp
   haiku/branches/components/gsoc-locale-kit/src/kits/shared/Variant.cpp
   haiku/branches/components/gsoc-locale-kit/src/kits/tracker/ContainerWindow.cpp
   haiku/branches/components/gsoc-locale-kit/src/kits/tracker/FSClipboard.cpp
   haiku/branches/components/gsoc-locale-kit/src/kits/tracker/FindPanel.cpp
   haiku/branches/components/gsoc-locale-kit/src/kits/tracker/IconCache.cpp
   haiku/branches/components/gsoc-locale-kit/src/kits/tracker/InfoWindow.cpp
   haiku/branches/components/gsoc-locale-kit/src/kits/tracker/WidgetAttributeText.cpp
   haiku/branches/components/gsoc-locale-kit/src/servers/app/Window.cpp
   haiku/branches/components/gsoc-locale-kit/src/servers/app/WorkspacesView.cpp
   haiku/branches/components/gsoc-locale-kit/src/servers/cddb_daemon/cddb_daemon.cpp
   haiku/branches/components/gsoc-locale-kit/src/servers/mail/main.cpp
   haiku/branches/components/gsoc-locale-kit/src/servers/midi/midi_server.rdef
   haiku/branches/components/gsoc-locale-kit/src/servers/registrar/RosterSettingsCharStream.cpp
   haiku/branches/components/gsoc-locale-kit/src/system/kernel/debug/user_debugger.cpp
   haiku/branches/components/gsoc-locale-kit/src/tests/add-ons/kernel/file_systems/userlandfs/ntfs/Jamfile
Log:
* merge changes from trunk up to r31615

Modified: haiku/branches/components/gsoc-locale-kit/build/jam/UserBuildConfig.ReadMe
===================================================================
--- haiku/branches/components/gsoc-locale-kit/build/jam/UserBuildConfig.ReadMe	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/build/jam/UserBuildConfig.ReadMe	2009-07-17 11:56:36 UTC (rev 31617)
@@ -195,10 +195,9 @@
 
 switch $(HAIKU_BUILD_PROFILE) {
 	case &quot;disk&quot; : {
-		AddOptionalHaikuImagePackages Beam BeBook BeHappy BePDF Bluetooth CVS
-			Development Firefox LibLayout Links NetSurf OpenSound OpenSSH
-			OpenSSL P7zip Pe Perl Subversion UserlandFS Vision VLC Welcome
-			WonderBrush Yasm ;
+		AddOptionalHaikuImagePackages BeBook BeHappy BePDF Bluetooth CVS
+			Development Firefox OpenSSH OpenSSL P7zip Pe Subversion Vision
+			Welcome WonderBrush ;
 	}
 
 	case &quot;qemu&quot; : {

Modified: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_BeHappy
===================================================================
(Binary files differ)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beacon (from rev 31615, haiku/trunk/data/artwork/icons/App_Beacon)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beacon_2 (from rev 31615, haiku/trunk/data/artwork/icons/App_Beacon_2)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beacon_3 (from rev 31615, haiku/trunk/data/artwork/icons/App_Beacon_3)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beam_1_NewMail (from rev 31615, haiku/trunk/data/artwork/icons/App_Beam_1_NewMail)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beam_2_NewMail (from rev 31615, haiku/trunk/data/artwork/icons/App_Beam_2_NewMail)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beam_2_NoMail (from rev 31615, haiku/trunk/data/artwork/icons/App_Beam_2_NoMail)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beam_3_NewMail (from rev 31615, haiku/trunk/data/artwork/icons/App_Beam_3_NewMail)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Beam_3_NoMail (from rev 31615, haiku/trunk/data/artwork/icons/App_Beam_3_NoMail)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Bikeshed (from rev 31615, haiku/trunk/data/artwork/icons/App_Bikeshed)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_CharacterMap (from rev 31615, haiku/trunk/data/artwork/icons/App_CharacterMap)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_DiskUsage (from rev 31615, haiku/trunk/data/artwork/icons/App_DiskUsage)

Modified: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Poorman
===================================================================
(Binary files differ)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/App_Transmission (from rev 31615, haiku/trunk/data/artwork/icons/App_Transmission)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/Device_Mobile (from rev 31615, haiku/trunk/data/artwork/icons/Device_Mobile)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/File_Broken_Link_2 (from rev 31615, haiku/trunk/data/artwork/icons/File_Broken_Link_2)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/Misc_CF_LightBulb (from rev 31615, haiku/trunk/data/artwork/icons/Misc_CF_LightBulb)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/Misc_TCF_LightBulb (from rev 31615, haiku/trunk/data/artwork/icons/Misc_TCF_LightBulb)

Copied: haiku/branches/components/gsoc-locale-kit/data/artwork/icons/Server_MIDI (from rev 31615, haiku/trunk/data/artwork/icons/Server_MIDI)

Modified: haiku/branches/components/gsoc-locale-kit/headers/build/os/kernel/OS.h
===================================================================
--- haiku/branches/components/gsoc-locale-kit/headers/build/os/kernel/OS.h	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/headers/build/os/kernel/OS.h	2009-07-17 11:56:36 UTC (rev 31617)
@@ -354,7 +354,7 @@
 
    to re-enable the default debugger pass a zero.
 */   
-extern const int disable_debugger(int state);
+extern int disable_debugger(int state);
 
 // TODO: Remove. Temporary debug helper.
 extern void debug_printf(const char *format, ...)

Modified: haiku/branches/components/gsoc-locale-kit/headers/build/os/midi/MidiDefs.h
===================================================================
--- haiku/branches/components/gsoc-locale-kit/headers/build/os/midi/MidiDefs.h	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/headers/build/os/midi/MidiDefs.h	2009-07-17 11:56:36 UTC (rev 31617)
@@ -14,7 +14,7 @@
 
 /* Synthesizer things */
 
-#define B_SYNTH_DIRECTORY    B_BEOS_ETC_DIRECTORY
+#define B_SYNTH_DIRECTORY    B_BEOS_DATA_DIRECTORY
 #define B_BIG_SYNTH_FILE     &quot;synth/big_synth.sy&quot;
 #define B_LITTLE_SYNTH_FILE  &quot;synth/little_synth.sy&quot;
 

Modified: haiku/branches/components/gsoc-locale-kit/headers/cpp/stl_alloc.h
===================================================================
--- haiku/branches/components/gsoc-locale-kit/headers/cpp/stl_alloc.h	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/headers/cpp/stl_alloc.h	2009-07-17 11:56:36 UTC (rev 31617)
@@ -30,7 +30,6 @@
 #  define __USE_MALLOC
 #endif
 
-
 // This implements some standard node allocators.  These are
 // NOT the same as the allocators in the C++ draft standard or in
 // in the original STL.  They do not encapsulate different pointer
@@ -329,11 +328,7 @@
   // instead of enum { x = N }, but few compilers accept the former.
 # ifndef __SUNPRO_CC
     enum {_ALIGN = 8};
-#  if (defined(__BEOS__) || defined(__HAIKU__))
-    enum {_MAX_BYTES = 0};
-#  else
     enum {_MAX_BYTES = 128};
-#  endif
     enum {_NFREELISTS = _MAX_BYTES/_ALIGN};
 # endif
   static size_t
@@ -710,11 +705,7 @@
 __default_alloc_template&lt;__threads, __inst&gt;::_Obj* __VOLATILE
 __default_alloc_template&lt;__threads, __inst&gt; ::_S_free_list[
     _NFREELISTS
-#if (defined(__BEOS__) || defined(__HAIKU__))
-] = { };
-#else
 ] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, };
-#endif
 // The 16 zeros are necessary to make version 4.1 of the SunPro
 // compiler happy.  Otherwise it appears to allocate too little
 // space for the array.

Modified: haiku/branches/components/gsoc-locale-kit/headers/cpp/stl_config.h
===================================================================
--- haiku/branches/components/gsoc-locale-kit/headers/cpp/stl_config.h	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/headers/cpp/stl_config.h	2009-07-17 11:56:36 UTC (rev 31617)
@@ -87,6 +87,19 @@
 // * _NOTHREADS: if defined, don't use any multithreading support.
 
 
+#  define __USE_MALLOC
+	// BeOS used to trick the STL allocator (in stl_alloc.h) into falling back
+	// to malloc/free-allocation by setting MAX_BYTES to 0.
+	// By requesting to use those directly, we should get the same allocator,
+	// but will avoid the '... creates array of size 0'-warnings that are
+	// produced by 'gcc -strict' (for instance when building ICU).
+	// Alternatively, we could define _PTHREADS here and use the real STL
+	// allocator with posix threads enabled (however, this would have to be
+	// tested first, and most probably requires a rebuild of gcc2, too,
+	// in order to make sure that no code existing in libstdc++.r4.so is
+	// still using the old allocator).
+
+
 // Other macros defined by this file:
 
 // * bool, true, and false, if __STL_NO_BOOL is defined.

Modified: haiku/branches/components/gsoc-locale-kit/headers/os/midi/MidiDefs.h
===================================================================
--- haiku/branches/components/gsoc-locale-kit/headers/os/midi/MidiDefs.h	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/headers/os/midi/MidiDefs.h	2009-07-17 11:56:36 UTC (rev 31617)
@@ -14,7 +14,7 @@
 
 /* Synthesizer things */
 
-#define B_SYNTH_DIRECTORY    B_BEOS_ETC_DIRECTORY
+#define B_SYNTH_DIRECTORY    B_BEOS_DATA_DIRECTORY
 #define B_BIG_SYNTH_FILE     &quot;synth/big_synth.sy&quot;
 #define B_LITTLE_SYNTH_FILE  &quot;synth/little_synth.sy&quot;
 

Modified: haiku/branches/components/gsoc-locale-kit/headers/posix/sys/sockio.h
===================================================================
--- haiku/branches/components/gsoc-locale-kit/headers/posix/sys/sockio.h	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/headers/posix/sys/sockio.h	2009-07-17 11:56:36 UTC (rev 31617)
@@ -6,52 +6,50 @@
 #define _SYS_SOCKIO_H
 
 
-enum {
-	SIOCADDRT = 8900,	/* add route */
-	SIOCDELRT,			/* delete route */
-	SIOCSIFADDR,		/* set interface address */
-	SIOCGIFADDR,		/* get interface address */
-	SIOCSIFDSTADDR,		/* set point-to-point address */
-	SIOCGIFDSTADDR,		/* get point-to-point address */
-	SIOCSIFFLAGS,		/* set interface flags */
-	SIOCGIFFLAGS,		/* get interface flags */
-	SIOCGIFBRDADDR,		/* get broadcast address */
-	SIOCSIFBRDADDR,		/* set broadcast address */
-	SIOCGIFCOUNT,		/* count interfaces */
-	SIOCGIFCONF,		/* get interface list */
-	SIOCGIFINDEX,		/* interface name -&gt; index */
-	SIOCGIFNAME,		/* interface index -&gt; name */
-	SIOCGIFNETMASK,		/* get net address mask */
-	SIOCSIFNETMASK,		/* set net address mask */
-	SIOCGIFMETRIC,		/* get interface metric */
-	SIOCSIFMETRIC,		/* set interface metric */
-	SIOCDIFADDR,		/* delete interface address */
-	SIOCAIFADDR,		/* configure interface alias */
-	SIOCADDMULTI,		/* add multicast address */
-	SIOCDELMULTI,		/* delete multicast address */
-	SIOCGIFMTU,			/* get interface MTU */
-	SIOCSIFMTU,			/* set interface MTU */
-	SIOCSIFMEDIA,		/* set net media */
-	SIOCGIFMEDIA,		/* get net media */
+#define SIOCADDRT			8900	/* add route */
+#define SIOCDELRT			8901	/* delete route */
+#define SIOCSIFADDR			8902	/* set interface address */
+#define SIOCGIFADDR			8903	/* get interface address */
+#define SIOCSIFDSTADDR		8904	/* set point-to-point address */
+#define SIOCGIFDSTADDR		8905	/* get point-to-point address */
+#define SIOCSIFFLAGS		8906	/* set interface flags */
+#define SIOCGIFFLAGS		8907	/* get interface flags */
+#define SIOCGIFBRDADDR		8908	/* get broadcast address */
+#define SIOCSIFBRDADDR		8909	/* set broadcast address */
+#define SIOCGIFCOUNT		8910	/* count interfaces */
+#define SIOCGIFCONF			8911	/* get interface list */
+#define SIOCGIFINDEX		8912	/* interface name -&gt; index */
+#define SIOCGIFNAME			8913	/* interface index -&gt; name */
+#define SIOCGIFNETMASK		8914	/* get net address mask */
+#define SIOCSIFNETMASK		8915	/* set net address mask */
+#define SIOCGIFMETRIC		8916	/* get interface metric */
+#define SIOCSIFMETRIC		8917	/* set interface metric */
+#define SIOCDIFADDR			8918	/* delete interface address */
+#define SIOCAIFADDR			8919	/* configure interface alias */
+#define SIOCADDMULTI		8920	/* add multicast address */
+#define SIOCDELMULTI		8921	/* delete multicast address */
+#define SIOCGIFMTU			8922	/* get interface MTU */
+#define SIOCSIFMTU			8923	/* set interface MTU */
+#define SIOCSIFMEDIA		8924	/* set net media */
+#define SIOCGIFMEDIA		8925	/* get net media */
 
-	SIOCGRTSIZE,		/* get route table size */
-	SIOCGRTTABLE,		/* get route table */
-	SIOCGETRT,			/* get route information for destination */
+#define SIOCGRTSIZE			8926	/* get route table size */
+#define SIOCGRTTABLE		8927	/* get route table */
+#define SIOCGETRT			8928	/* get route information for destination */
 
-	SIOCGIFSTATS,		/* get interface stats */
-	SIOCGIFPARAM,		/* get interface parameter */
-	SIOCGIFTYPE,		/* get interface type */
+#define SIOCGIFSTATS		8929	/* get interface stats */
+#define SIOCGIFPARAM		8930	/* get interface parameter */
+#define SIOCGIFTYPE			8931	/* get interface type */
 
-	SIOCSPACKETCAP,		/* Start capturing packets on an interface */
-	SIOCCPACKETCAP,		/* Stop capturing packets on an interface */
+#define SIOCSPACKETCAP		8932	/* Start capturing packets on an interface */
+#define SIOCCPACKETCAP		8933	/* Stop capturing packets on an interface */
 
-	SIOCSHIWAT,			/* set high watermark */
-	SIOCGHIWAT,			/* get high watermark */
-	SIOCSLOWAT,			/* set low watermark */
-	SIOCGLOWAT,			/* get low watermark */
-	SIOCATMARK,			/* at out-of-band mark? */
-	SIOCSPGRP,			/* set process group */
-	SIOCGPGRP			/* get process group */
-};
+#define SIOCSHIWAT			8934	/* set high watermark */
+#define SIOCGHIWAT			8935	/* get high watermark */
+#define SIOCSLOWAT			8936	/* set low watermark */
+#define SIOCGLOWAT			8937	/* get low watermark */
+#define SIOCATMARK			8938	/* at out-of-band mark? */
+#define SIOCSPGRP			8939	/* set process group */
+#define SIOCGPGRP			8940	/* get process group */
 
 #endif	/* _SYS_SOCKIO_H */

Modified: haiku/branches/components/gsoc-locale-kit/headers/private/net/net_protocol.h
===================================================================
--- haiku/branches/components/gsoc-locale-kit/headers/private/net/net_protocol.h	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/headers/private/net/net_protocol.h	2009-07-17 11:56:36 UTC (rev 31617)
@@ -79,6 +79,8 @@
 	ssize_t		(*process_ancillary_data)(net_protocol *self,
 					const ancillary_data_header *header, const void *data,
 					void *buffer, size_t bufferSize);
+	ssize_t		(*process_ancillary_data_no_container)(net_protocol *self,
+					net_buffer *buffer, void *data, size_t bufferSize);
 
 	ssize_t		(*send_data_no_buffer)(net_protocol *self, const iovec *vecs,
 					size_t vecCount, ancillary_data_container *ancillaryData,

Modified: haiku/branches/components/gsoc-locale-kit/headers/private/shared/Variant.h
===================================================================
--- haiku/branches/components/gsoc-locale-kit/headers/private/shared/Variant.h	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/headers/private/shared/Variant.h	2009-07-17 11:56:36 UTC (rev 31617)
@@ -73,6 +73,8 @@
 			void*				ToPointer() const;
 			const char*			ToString() const;
 
+	static	size_t				SizeOfType(uint32 type);
+
 private:
 			void				_SetTo(const BVariant&amp; other);
 			void				_SetTo(int8 value);

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/audio/hda/hda_multi_audio.cpp
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/audio/hda/hda_multi_audio.cpp	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/audio/hda/hda_multi_audio.cpp	2009-07-17 11:56:36 UTC (rev 31617)
@@ -580,14 +580,14 @@
 				| AMP_SET_LEFT_CHANNEL
 				| AMP_SET_INPUT_INDEX(control-&gt;index)
 				| control-&gt;mute
-				| resp[0] &amp; AMP_GAIN_MASK);
+				| (resp[0] &amp; AMP_GAIN_MASK));
 			TRACE(&quot;set_mix: sending verb to %ld: %lx %lx %x %lx\n&quot;, control-&gt;nid, 
 				control-&gt;mute, resp[0] &amp; AMP_GAIN_MASK, control-&gt;input,
 				(control-&gt;input ? AMP_SET_INPUT : AMP_SET_OUTPUT)
 				| AMP_SET_LEFT_CHANNEL
 				| AMP_SET_INPUT_INDEX(control-&gt;index)
 				| control-&gt;mute
-				| resp[0] &amp; AMP_GAIN_MASK);
+				| (resp[0] &amp; AMP_GAIN_MASK));
 			verb[1] = MAKE_VERB(audioGroup-&gt;codec-&gt;addr,
 				control-&gt;nid,
 				VID_SET_AMPLIFIER_GAIN_MUTE,
@@ -595,7 +595,7 @@
 				| AMP_SET_RIGHT_CHANNEL
 				| AMP_SET_INPUT_INDEX(control-&gt;index)
 				| control-&gt;mute
-				| resp[1] &amp; AMP_GAIN_MASK);
+				| (resp[1] &amp; AMP_GAIN_MASK));
 			TRACE(&quot;set_mix: ctrl2 sending verb to %ld: %lx %lx %x\n&quot;, control-&gt;nid,
 				control-&gt;mute, resp[1] &amp; AMP_GAIN_MASK, control-&gt;input);
 			hda_send_verbs(audioGroup-&gt;codec, verb, NULL, 2);

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/graphics/ati/driver.cpp
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/graphics/ati/driver.cpp	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/graphics/ati/driver.cpp	2009-07-17 11:56:36 UTC (rev 31617)
@@ -54,7 +54,7 @@
 struct ChipInfo {
 	uint16		chipID;			// PCI device id of the chip
 	ChipType	chipType;		// assigned chip type identifier
-	char*		chipName;		// user recognizable name for chip (must be &lt; 32 chars)
+	const char*	chipName;		// user recognizable name for chip (must be &lt; 32 chars)
 };
 
 

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/graphics/s3/driver.cpp
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/graphics/s3/driver.cpp	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/graphics/s3/driver.cpp	2009-07-17 11:56:36 UTC (rev 31617)
@@ -39,9 +39,10 @@
 
 
 struct ChipInfo {
-	uint16	chipID;			// PCI device id of the chip
-	uint16	chipType;		// assigned chip type identifier
-	char*	chipName;		// user recognizable name for chip (must be &lt; 32 chars)
+	uint16		chipID;			// PCI device id of the chip
+	uint16		chipType;		// assigned chip type identifier
+	const char*	chipName;		// user recognizable name for chip (must be &lt; 32
+								// chars)
 };
 
 // This table maps a PCI device ID to a chip type identifier and the chip name.

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/SmallResourceData.cpp
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/SmallResourceData.cpp	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/SmallResourceData.cpp	2009-07-17 11:56:36 UTC (rev 31617)
@@ -32,7 +32,7 @@
 
 
 SmallResourceData::SmallResourceData(acpi_device_module_info* acpi,
-	acpi_device acpiCookie, char* method)
+	acpi_device acpiCookie, const char* method)
 {
 	acpi_data buffer;
 	buffer.pointer = NULL;

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/SmallResourceData.h
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/SmallResourceData.h	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/SmallResourceData.h	2009-07-17 11:56:36 UTC (rev 31617)
@@ -38,7 +38,7 @@
 {
 public:
 						SmallResourceData(acpi_device_module_info* acpi,
-							acpi_device acpiCookie, char* method);
+							acpi_device acpiCookie, const char* method);
 						~SmallResourceData();
 
 	status_t			InitCheck();

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/acpi_embedded_controller.cpp
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/acpi_embedded_controller.cpp	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/power/acpi_embedded_controller/acpi_embedded_controller.cpp	2009-07-17 11:56:36 UTC (rev 31617)
@@ -74,7 +74,7 @@
 
 status_t
 acpi_GetInteger(acpi_device_module_info* acpi, acpi_device&amp; acpiCookie,
-	char* path, int* number)
+	const char* path, int* number)
 {
 	status_t status;
  	acpi_data buf;
@@ -227,7 +227,7 @@
 static float
 embedded_controller_support(device_node *dev)
 {
-    static char *ec_ids[] = { &quot;PNP0C09&quot;, NULL };
+    static const char *ec_ids[] = { &quot;PNP0C09&quot;, NULL };
 
 	/* Check that this is a device. */
     if (acpi_get_type(dev) != ACPI_TYPE_DEVICE)

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/random/driver.c
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/random/driver.c	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/drivers/random/driver.c	2009-07-17 11:56:36 UTC (rev 31617)
@@ -304,8 +304,8 @@
 	prandgen-&gt;rndptrX = prandgen-&gt;ira;
 	prandgen-&gt;rndptrA = prandgen-&gt;ira;
 	prandgen-&gt;rndptrB = prandgen-&gt;ira;
-	prandgen-&gt;rndLeft.Q[0] = 0x1A4B385C72D69E0FUL;
-	prandgen-&gt;rndRite.Q[0] = 0x9C805FE7361A42DBUL;
+	prandgen-&gt;rndLeft.Q[0] = 0x1A4B385C72D69E0FULL;
+	prandgen-&gt;rndRite.Q[0] = 0x9C805FE7361A42DBULL;
 	reseed (prandgen, inittimes);
 
 	prandgen-&gt;seedptr = prandgen-&gt;ira + chrand (prandgen) % NK;

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/cdda/cdda.cpp
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/cdda/cdda.cpp	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/cdda/cdda.cpp	2009-07-17 11:56:36 UTC (rev 31617)
@@ -114,7 +114,7 @@
 
 
 static void
-cut_string(char *string, char *cut)
+cut_string(char *string, const char *cut)
 {
 	if (string == NULL || cut == NULL)
 		return;

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/Jamfile
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/Jamfile	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/Jamfile	2009-07-17 11:56:36 UTC (rev 31617)
@@ -1,8 +1,10 @@
 SubDir HAIKU_TOP src add-ons kernel file_systems ntfs libntfs ;
 
-SubDirCcFlags -Wall -Wno-multichar -DHAVE_CONFIG_H=1 ;
+SubDirCcFlags -Wall -Wno-multichar ;
 
-StaticLibrary libntfs.a :
+DEFINES += HAVE_CONFIG_H=1 ;
+
+KernelStaticLibrary libntfs.a :
 	attrib.c
 	attrlist.c
 	bitmap.c
@@ -27,4 +29,3 @@
 	unistr.c
 	volume.c
 ;
-

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/config.h
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/config.h	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/config.h	2009-07-17 11:56:36 UTC (rev 31617)
@@ -12,6 +12,8 @@
 /* Define to 1 if you have the &lt;ctype.h&gt; header file. */
 #define HAVE_CTYPE_H 1
 
+#define HAVE_DAEMON 1
+
 /* Define to 1 if you have the &lt;dlfcn.h&gt; header file. */
 #undef HAVE_DLFCN_H
 

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/unistr.c
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/unistr.c	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/unistr.c	2009-07-17 11:56:36 UTC (rev 31617)
@@ -55,6 +55,15 @@
 
 #define NOREVBOM 0  /* JPA rejecting U+FFFE and U+FFFF, open to debate */
 
+// no wchar support in the Haiku kernel
+#if defined(__HAIKU__) &amp;&amp; defined(_KERNEL_MODE)
+#	include &lt;KernelExport.h&gt;
+#	define mbstowcs(a, b, c)	(panic(&quot;mbstowcs&quot;), 0)
+#	define wctomb(a, b)			(panic(&quot;wctomb&quot;), 0)
+#	define mbtowc(a, b, c)		(panic(&quot;mbtowc&quot;), 0)
+#	define setlocale(a, b)		(panic(&quot;setlocale&quot;), 0)
+#endif
+
 /*
  * IMPORTANT
  * =========
@@ -62,9 +71,8 @@
  * All these routines assume that the Unicode characters are in little endian
  * encoding inside the strings!!!
  */
-#ifndef __HAIKU__
 static int use_utf8 = 1; /* use UTF-8 encoding for file names */
-#endif
+
 /*
  * This is used by the name collation functions to quickly determine what
  * characters are (in)valid.
@@ -383,7 +391,6 @@
 			err_val, ic, upcase, upcase_len);
 }
 
-#ifndef __HAIKU__
 /*
    NTFS uses Unicode (UTF-16LE [NTFS-3G uses UCS-2LE, which is enough
    for now]) for path names, but the Unicode code points need to be
@@ -700,139 +707,7 @@
 fail:
 	return ret;
 }
-#endif
 
-#ifdef __HAIKU__
-/* Encode a single wide character into a sequence of utf8 bytes.
- * Returns the number of bytes consumed, or 0 on error.
- */
-static int
-ntfs_wc_to_utf8(wchar_t c,unsigned char* buf)
-{
-	if(c==0)
-		return 0; /* No support for embedded 0 runes */
-	if(c&lt;0x80) {
-		if(buf)buf[0]=(unsigned char)c;
-		return 1;
-	}
-	if(c&lt;0x800) {
-		if(buf) {
-			buf[0] = 0xc0 | (c&gt;&gt;6);
-			buf[1] = 0x80 | (c &amp; 0x3f);
-		}
-		return 2;
-	}
-	if(c&lt;0x10000) {
-		if(buf) {
-			buf[0] = 0xe0 | (c&gt;&gt;12);
-			buf[1] = 0x80 | ((c&gt;&gt;6) &amp; 0x3f);
-			buf[2] = 0x80 | (c &amp; 0x3f);
-		}
-		return 3;
-	}
-	/* We don't support characters above 0xFFFF in NTFS */
-	return 0;
-}
-
-
-/* Decodes a sequence of utf8 bytes into a single wide character.
- * The character is returned in host byte order.
- * Returns the number of bytes consumed, or 0 on error.
- */
-static int
-ntfs_wc_from_utf8(const unsigned char* str,wchar_t *c)
-{
-	int l=0,i;
-
-	if(*str&lt;0x80) {
-		*c = *str;
-		return 1;
-	}
-	if(*str&lt;0xc0) /* lead byte must not be 10xxxxxx */
-		return 0;   /* is c0 a possible lead byte? */
-	if(*str&lt;0xe0) {         /* 110xxxxx */
-		*c = *str &amp; 0x1f;
-		l=2;
-	} else if(*str&lt;0xf0) {   /* 1110xxxx */
-		*c = *str &amp; 0xf;
-		l=3;
-	} else if(*str&lt;0xf8) {   /* 11110xxx */
-		*c = *str &amp; 7;
-		l=4;
-	} else /* We don't support characters above 0xFFFF in NTFS */
-		return 0;
-	 
-
-	for(i=1;i&lt;l;i++) {
-		/* all other bytes must be 10xxxxxx */
-		if((str[i] &amp; 0xc0) != 0x80)
-			return 0;
-		*c &lt;&lt;= 6;
-		*c |= str[i] &amp; 0x3f;
-	}
-	return l;
-}
-
-
-/* Converts wide string to UTF-8. Expects two in- and two out-parameters.
- * Returns 0 on success, or error code. 
- * The caller has to free the result string.
- * There is no support for UTF-16, yet
- */
-static inline int ntfs_dupuni2utf8(wchar_t* in, int in_len,char **out,int *out_len)
-{
-	int i,tmp;
-	int len8;
-	unsigned char *result;
-
-	/* count the length of the resulting UTF-8 */
-	for(i=len8=0;i&lt;in_len;i++) {
-		tmp=ntfs_wc_to_utf8(le16_to_cpu( *(in+i) ),0);
-		if(!tmp)
-			/* invalid character */
-			return EILSEQ;
-		len8+=tmp;
-	}
-	*out=result=ntfs_malloc(len8+1); /* allow for zero-termination */
-
-	if(!result)
-		return ENOMEM;
-	result[len8]='\0';
-	*out_len=len8;
-	for(i=len8=0;i&lt;in_len;i++)
-		len8+=ntfs_wc_to_utf8(le16_to_cpu( *(in+i) ),result+len8);
-	return 0;
-}
-
-/* Converts an UTF-8 sequence to a wide string. Same conventions as the
- * previous function
- */
-static inline int ntfs_duputf82uni(unsigned char* in, int in_len,wchar_t** out,int *out_len)
-{
-	int i,tmp;
-	int len16;
-
-	wchar_t* result;
-	wchar_t wtmp;
-	for(i=len16=0;i&lt;in_len;i+=tmp,len16++) {
-		tmp=ntfs_wc_from_utf8(in+i,&amp;wtmp);
-		if(!tmp)
-			return EILSEQ;
-	}
-	*out=result=ntfs_malloc(2*(len16+1));
-	if(!result)
-		return ENOMEM;
-	result[len16]=0;
-	*out_len=len16;
-	for(i=len16=0;i&lt;in_len;i+=tmp,len16++)
-	{
-		tmp=ntfs_wc_from_utf8(in+i, &amp;wtmp);
-		*(result+len16) = cpu_to_le16(wtmp);
-	}
-	return 0;
-}
-
-
 /**
  * ntfs_ucstombs - convert a little endian Unicode string to a multibyte string
  * @ins:	input Unicode string buffer
@@ -858,76 +733,6 @@
  *	ENAMETOOLONG	Destination buffer is too small for input string.
  *	ENOMEM		Not enough memory to allocate destination buffer.
  */
-int ntfs_ucstombs(const ntfschar *ins, const int ins_len, char **outs,	int outs_len)
-{
-	int out_len = outs_len;
-	if(ntfs_dupuni2utf8((wchar_t*)ins,ins_len,outs,&amp;out_len)==0)
-	  	return out_len;
-	else
-		return EINVAL;
-}
-
-/**
- * ntfs_mbstoucs - convert a multibyte string to a little endian Unicode string
- * @ins:	input multibyte string buffer
- * @outs:	on return contains the (allocated) output Unicode string
- * @outs_len:	length of output buffer in Unicode characters
- *
- * Convert the input multibyte string @ins, from the current locale into the
- * corresponding little endian, 2-byte Unicode string.
- *
- * If *@outs is NULL, the function allocates the string and the caller is
- * responsible for calling free(*@outs); when finished with it.
- *
- * On success the function returns the number of Unicode characters written to
- * the output string *@outs (&gt;= 0), not counting the terminating Unicode NULL
- * character. If the output string buffer was allocated, *@outs is set to it.
- *
- * On error, -1 is returned, and errno is set to the error code. The following
- * error codes can be expected:
- *	EINVAL		Invalid arguments (e.g. @ins or @outs is NULL).
- *	EILSEQ		The input string cannot be represented as a Unicode
- *			string according to the current locale.
- *	ENAMETOOLONG	Destination buffer is too small for input string.
- *	ENOMEM		Not enough memory to allocate destination buffer.
- */
-int ntfs_mbstoucs(const char *ins, ntfschar **outs)
-{
-	int in_len = strlen(ins);
-	int out_len = 0;	
-	if(ntfs_duputf82uni((unsigned char*)ins,in_len,outs,&amp;out_len)==0)
-		return out_len;
-	else
-		return EILSEQ;
-}
-
-#else
-
-/**
- * ntfs_ucstombs - convert a little endian Unicode string to a multibyte string
- * @ins:	input Unicode string buffer
- * @ins_len:	length of input string in Unicode characters
- * @outs:	on return contains the (allocated) output multibyte string
- * @outs_len:	length of output buffer in bytes
- *
- * Convert the input little endian, 2-byte Unicode string @ins, of length
- * @ins_len into the multibyte string format dictated by the current locale.
- *
- * If *@outs is NULL, the function allocates the string and the caller is
- * responsible for calling free(*@outs); when finished with it.
- *
- * On success the function returns the number of bytes written to the output
- * string *@outs (&gt;= 0), not counting the terminating NULL byte. If the output
- * string buffer was allocated, *@outs is set to it.
- *
- * On error, -1 is returned, and errno is set to the error code. The following
- * error codes can be expected:
- *	EINVAL		Invalid arguments (e.g. @ins or @outs is NULL).
- *	EILSEQ		The input string cannot be represented as a multibyte
- *			sequence according to the current locale.
- *	ENAMETOOLONG	Destination buffer is too small for input string.
- *	ENOMEM		Not enough memory to allocate destination buffer.
- */
 int ntfs_ucstombs(const ntfschar *ins, const int ins_len, char **outs,
 		int outs_len)
 {
@@ -1152,8 +957,6 @@
 	return -1;
 }
 
-#endif //__HAIKU__
-
 /**
  * ntfs_upcase_table_build - build the default upcase table for NTFS
  * @uc:		destination buffer where to store the built table
@@ -1275,8 +1078,6 @@
  * Define the character encoding to be used.
  * Use UTF-8 unless specified otherwise.
  */
-#ifndef __HAIKU__
-
 int ntfs_set_char_encoding(const char *locale)
 {
 	use_utf8 = 0;
@@ -1292,5 +1093,3 @@
 	 	}
 	return 0; /* always successful */
 }
-#endif
-

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/unistr.h
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/unistr.h	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/ntfs/libntfs/unistr.h	2009-07-17 11:56:36 UTC (rev 31617)
@@ -65,5 +65,7 @@
 
 extern void ntfs_ucsfree(ntfschar *ucs);
 
+extern int ntfs_set_char_encoding(const char *locale);
+
 #endif /* defined _NTFS_UNISTR_H */
 

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/Block.cpp
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/Block.cpp	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/Block.cpp	2009-07-17 11:56:36 UTC (rev 31617)
@@ -102,7 +102,7 @@
 void
 Block::SetKind(uint32 kind)
 {
-	fFlags = fFlags &amp; ~(uint32)KIND_MASK | kind &amp; KIND_MASK;
+	fFlags = (fFlags &amp; ~(uint32)KIND_MASK) | (kind &amp; KIND_MASK);
 }
 
 // SetChecked

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/Settings.cpp
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/Settings.cpp	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/Settings.cpp	2009-07-17 11:56:36 UTC (rev 31617)
@@ -31,7 +31,7 @@
 	\brief Manages the ReiserFS settings.
 */
 
-static char *kFSName = &quot;reiserfs&quot;;
+static const char *kFSName = &quot;reiserfs&quot;;
 
 // defaults
 static const char *kDefaultDefaultVolumeName = &quot;ReiserFS untitled&quot;;

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/kernel_interface.cpp
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/kernel_interface.cpp	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/file_systems/reiserfs/kernel_interface.cpp	2009-07-17 11:56:36 UTC (rev 31617)
@@ -211,7 +211,7 @@
 		// hide non-file/dir/symlink entries, if the user desires that, and
 		// those entries explicitly set to hidden
 		if (error == B_OK
-			&amp;&amp; (foundNode.IsEsoteric() &amp;&amp; volume-&gt;GetHideEsoteric()
+			&amp;&amp; ((foundNode.IsEsoteric() &amp;&amp; volume-&gt;GetHideEsoteric())
 				|| volume-&gt;IsNegativeEntry(foundNode.GetID()))) {
 			error = B_ENTRY_NOT_FOUND;
 		}
@@ -602,7 +602,7 @@
 			if (volume-&gt;GetTree()-&gt;FindStatItem(dirID, objectID, &amp;statItem)
 					!= B_OK
 				|| statItem.GetStatData(&amp;statData) != B_OK
-				|| statData.IsEsoteric() &amp;&amp; volume-&gt;GetHideEsoteric()) {
+				|| (statData.IsEsoteric() &amp;&amp; volume-&gt;GetHideEsoteric())) {
 				continue;
 			}
 			if (error == B_OK) {

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/icmp/icmp.cpp
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/icmp/icmp.cpp	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/icmp/icmp.cpp	2009-07-17 11:56:36 UTC (rev 31617)
@@ -374,6 +374,7 @@
 	icmp_error_reply,
 	NULL,		// add_ancillary_data()
 	NULL,		// process_ancillary_data()
+	NULL,		// process_ancillary_data_no_container()
 	NULL,		// send_data_no_buffer()
 	NULL		// read_data_no_buffer()
 };

Modified: haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/ipv4/ipv4.cpp
===================================================================
--- haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/ipv4/ipv4.cpp	2009-07-17 09:32:09 UTC (rev 31616)
+++ haiku/branches/components/gsoc-locale-kit/src/add-ons/kernel/network/protocols/ipv4/ipv4.cpp	2009-07-17 11:56:36 UTC (rev 31617)
@@ -166,12 +166,14 @@
 	uint8		time_to_live;
 	uint8		multicast_time_to_live;
 	uint32		flags;
+	struct sockaddr* interface_address; // for IP_MULTICAST_IF
 
 	IPv4MulticastFilter multicast_filter;
 };
 
 // protocol flags
-#define IP_FLAG_HEADER_INCLUDED	0x01
+#define IP_FLAG_HEADER_INCLUDED		0x01
+#define IP_FLAG_RECEIVE_DEST_ADDR	0x02
 
 
 static const int kDefaultTTL = 254;
@@ -214,7 +216,8 @@
 
 
 RawSocket::RawSocket(net_socket* socket)
-	: DatagramSocket&lt;&gt;(&quot;ipv4 raw socket&quot;, socket)
+	:
+	DatagramSocket&lt;&gt;(&quot;ipv4 raw socket&quot;, socket)
 {
 }
 
@@ -1013,6 +1016,7 @@
 	protocol-&gt;time_to_live = kDefaultTTL;
 	protocol-&gt;multicast_time_to_live = kDefaultMulticastTTL;
 	protocol-&gt;flags = 0;
+	protocol-&gt;interface_address = NULL;
 	return protocol;
 }
 
@@ -1023,6 +1027,7 @@
 	ipv4_protocol* protocol = (ipv4_protocol*)_protocol;
 
 	delete protocol-&gt;raw;
+	delete protocol-&gt;interface_address;
 	delete protocol;
 	return B_OK;
 }
@@ -1118,6 +1123,10 @@
 			return get_int_option(value, *_length,
 				(protocol-&gt;flags &amp; IP_FLAG_HEADER_INCLUDED) != 0);
 		}
+		if (option == IP_RECVDSTADDR) {
+			return get_int_option(value, *_length,
+				(protocol-&gt;flags &amp; IP_FLAG_RECEIVE_DEST_ADDR) != 0);
+		}
 		if (option == IP_TTL)
 			return get_int_option(value, *_length, protocol-&gt;time_to_live);
 		if (option == IP_TOS)
@@ -1175,10 +1184,59 @@
 
 			return B_OK;
 		}
+		if (option == IP_RECVDSTADDR) {
+			int getAddress;
+			if (length != sizeof(int))
+				return B_BAD_VALUE;
+			if (user_memcpy(&amp;getAddress, value, sizeof(int)) != B_OK)
+				return B_BAD_ADDRESS;
+
+			if (getAddress &amp;&amp; (protocol-&gt;socket-&gt;type == SOCK_DGRAM
+					|| protocol-&gt;socket-&gt;type == SOCK_RAW))
+				protocol-&gt;flags |= IP_FLAG_RECEIVE_DEST_ADDR;
+			else
+				protocol-&gt;flags &amp;= ~IP_FLAG_RECEIVE_DEST_ADDR;
+
+			return B_OK;
+		}
 		if (option == IP_TTL)
 			return set_int_option(protocol-&gt;time_to_live, value, length);
 		if (option == IP_TOS)
 			return set_int_option(protocol-&gt;service_type, value, length);
+		if (option == IP_MULTICAST_IF) {
+			if (length != sizeof(struct in_addr))
+				return B_BAD_VALUE;
+
+			struct sockaddr_in* address = new (std::nothrow) sockaddr_in;
+			if (address == NULL)
+				return B_NO_MEMORY;
+
+			if (user_memcpy(&amp;address-&gt;sin_addr, value, sizeof(struct in_addr))
+					!= B_OK) {
+				delete address;
+				return B_BAD_ADDRESS;
+			}
+
+			// Using INADDR_ANY to remove the previous setting.
+			if (address-&gt;sin_addr.s_addr == htonl(INADDR_ANY)) {
+				delete address;
+				delete protocol-&gt;interface_address;
+				protocol-&gt;interface_address = NULL;
+				return B_OK;
+			}
+
+			struct net_interface* interface
+				= sDatalinkModule-&gt;get_interface_with_address(sDomain,
+					(struct sockaddr*)address);
+			if (interface == NULL) {
+				delete address;
+				return EADDRNOTAVAIL;
+			}
+
+			delete protocol-&gt;interface_address;
+			protocol-&gt;interface_address = (struct sockaddr*)address;
+			return B_OK;
+		}
 		if (option == IP_MULTICAST_TTL) {
 			return set_int_option(protocol-&gt;multicast_time_to_live, value,
 				length);
@@ -1405,6 +1463,25 @@
 			offsetof(ipv4_header, destination)&gt;(buffer));
 	}
 
+	// handle IP_MULTICAST_IF
+	if (IN_MULTICAST(ntohl(((sockaddr_in*)buffer-&gt;destination)-&gt;
+			sin_addr.s_addr)) &amp;&amp; protocol-&gt;interface_address != NULL) {
+		net_interface* interface
+			= sDatalinkModule-&gt;get_interface_with_address(sDomain,
+				protocol-&gt;interface_address);
+		if (interface == NULL || (interface-&gt;flags &amp; IFF_UP) == 0)
+			return EADDRNOTAVAIL;
+
+		buffer-&gt;interface = interface;
+
+		net_route* route = sDatalinkModule-&gt;get_route(sDomain,
+			interface-&gt;address);
+		if (route == NULL)
+			return ENETUNREACH;
+
+		return sDatalinkModule-&gt;send_data(route, buffer);
+	}
+
 	return sDatalinkModule-&gt;send_datagram(protocol, sDomain, buffer);
 }
 
@@ -1600,6 +1677,32 @@
 }
 
 
+ssize_t
+ipv4_process_ancillary_data_no_container(net_protocol* protocol,
+	net_buffer* buffer, void* msgControl, size_t msgControlLen)
+{
+	ssize_t bytesWritten = 0;
+
+	if ((((ipv4_protocol*)protocol)-&gt;flags &amp; IP_FLAG_RECEIVE_DEST_ADDR) != 0) {
+		if (msgControlLen &lt; CMSG_SPACE(sizeof(struct in_addr)))
+			return B_NO_MEMORY;
+
+		cmsghdr* messageHeader = (cmsghdr*)msgControl;
+		messageHeader-&gt;cmsg_len = CMSG_LEN(sizeof(struct in_addr));
+		messageHeader-&gt;cmsg_level = IPPROTO_IP;
+		messageHeader-&gt;cmsg_type = IP_RECVDSTADDR;
+
+		memcpy(CMSG_DATA(messageHeader),
+		 	&amp;((struct sockaddr_in*)buffer-&gt;destination)-&gt;sin_addr,
+		 	sizeof(struct in_addr));
+
+		bytesWritten += CMSG_SPACE(sizeof(struct in_addr));
+	}

[... truncated: 9585 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018075.html">[Haiku-commits] r31616 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg
</A></li>
	<LI>Next message: <A HREF="018077.html">[Haiku-commits] r31618 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18076">[ date ]</a>
              <a href="thread.html#18076">[ thread ]</a>
              <a href="subject.html#18076">[ subject ]</a>
              <a href="author.html#18076">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
