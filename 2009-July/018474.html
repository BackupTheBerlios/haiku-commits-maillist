<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r31930 - haiku/trunk/src/servers/media
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31930%20-%20haiku/trunk/src/servers/media&In-Reply-To=%3C200907291758.n6THwn0e010350%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018473.html">
   <LINK REL="Next"  HREF="018475.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r31930 - haiku/trunk/src/servers/media</H1>
    <B>stippi at mail.berlios.de</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31930%20-%20haiku/trunk/src/servers/media&In-Reply-To=%3C200907291758.n6THwn0e010350%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r31930 - haiku/trunk/src/servers/media">stippi at mail.berlios.de
       </A><BR>
    <I>Wed Jul 29 19:58:49 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018473.html">[Haiku-commits] r31929 - in haiku/branches/components/gsoc-locale-kit: 3rdparty/mmu_man/onlinedemo build/jam data/artwork data/etc data/settings/kernel/drivers data/system/boot docs/userguide/en docs/userguide/en/applications docs/userguide/en/desktop-applets docs/userguide/en/installation docs/userguide/en/preferences docs/userguide/images docs/userguide/images/apps-images docs/userguide/images/deskbar-images docs/userguide/images/desktop-applets-images docs/userguide/images/prefs-images headers/cpp headers/os/arch headers/os/arch/m68k headers/os/arch/mipsel headers/os/arch/ppc headers/os/arch/x86 headers/os/drivers headers/os/drivers/usb headers/os/interface headers/os/kernel headers/os/storage headers/os/support headers/posix headers/private/app headers/private/debug headers/private/interface headers/private/kernel headers/private/kernel/arch headers/private/kernel/arch/ppc headers/private/kernel/boot/platform headers/private/kernel/disk_device_manager headers/private/kernel/uti! l headers/private/media headers/private/screen_saver headers/private/shared headers/private/storage headers/private/system headers/private/system/arch headers/private/userlandfs/shared src/add-ons/accelerants/nvidia src/add-ons/disk_systems/bfs src/add-ons/disk_systems/intel src/add-ons/kernel src/add-ons/kernel/bus_managers/agp_gart src/add-ons/kernel/bus_managers/ps2 src/add-ons/kernel/debugger/demangle src/add-ons/kernel/drivers/audio/hda src/add-ons/kernel/drivers/disk/scsi/scsi_cd src/add-ons/kernel/drivers/input/ps2_hid src/add-ons/kernel/drivers/input/usb_hid src/add-ons/kernel/drivers/midi/usb_midi src/add-ons/kernel/drivers/ports/pc_serial src/add-ons/kernel/drivers/power/acpi_battery src/add-ons/kernel/file_systems/bfs src/add-ons/kernel/file_systems/ext2 src/add-ons/kernel/file_systems/fat src/add-ons/kernel/file_systems/iso9660 src/add-ons/kernel/file_systems/userlandfs/kernel_add_on src/add-ons/kernel/file_systems/userlandfs/server/fuse src/add-ons/kernel/file_! systems/userlandfs/server/haiku src/add-ons/kernel/network/pro! tocols/i
</A></li>
        <LI>Next message: <A HREF="018475.html">[Haiku-commits] r31931 - haiku/trunk/src/system/kernel/vm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18474">[ date ]</a>
              <a href="thread.html#18474">[ thread ]</a>
              <a href="subject.html#18474">[ subject ]</a>
              <a href="author.html#18474">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: stippi
Date: 2009-07-29 19:58:46 +0200 (Wed, 29 Jul 2009)
New Revision: 31930
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=31930&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=31930&amp;view=rev</A>

Modified:
   haiku/trunk/src/servers/media/AddOnManager.cpp
   haiku/trunk/src/servers/media/AddOnManager.h
Log:
Header indentation updated, changed &quot;* &quot; style.


Modified: haiku/trunk/src/servers/media/AddOnManager.cpp
===================================================================
--- haiku/trunk/src/servers/media/AddOnManager.cpp	2009-07-29 17:53:45 UTC (rev 31929)
+++ haiku/trunk/src/servers/media/AddOnManager.cpp	2009-07-29 17:58:46 UTC (rev 31930)
@@ -1,6 +1,6 @@
 /*
- * Copyright 2004-2008, Haiku. All rights reserved.
- * Distributed under the terms of the MIT License.
+ * Copyright 2004-2009, Haiku. All rights reserved.
+ * Distributed under the terms of the MIT license.
  *
  * Authors:
  *		Marcus Overhagen
@@ -29,29 +29,29 @@
 #include &quot;debug.h&quot;
 
 
-//	#pragma mark ImageLoader
+//	#pragma mark - ImageLoader
 
 /*!	The ImageLoader class is a convenience class to temporarily load
 	an image file, and unload it on deconstruction automatically.
 */
 class ImageLoader {
-	public:
-		ImageLoader(BPath &amp;path)
-		{
-			fImage = load_add_on(path.Path());
-		}
+public:
+	ImageLoader(BPath&amp; path)
+	{
+		fImage = load_add_on(path.Path());
+	}
 
-		~ImageLoader()
-		{
-			if (fImage &gt;= B_OK)
-				unload_add_on(fImage);
-		}
+	~ImageLoader()
+	{
+		if (fImage &gt;= B_OK)
+			unload_add_on(fImage);
+	}
 
-		status_t InitCheck() const { return fImage; }
-		image_id Image() const { return fImage; }
+	status_t InitCheck() const { return fImage; }
+	image_id Image() const { return fImage; }
 
-	private:
-		image_id	fImage;
+private:
+	image_id	fImage;
 };
 
 
@@ -84,8 +84,8 @@
 
 
 status_t
-AddOnManager::GetDecoderForFormat(xfer_entry_ref *_decoderRef,
-	const media_format &amp;format)
+AddOnManager::GetDecoderForFormat(xfer_entry_ref* _decoderRef,
+	const media_format&amp; format)
 {
 	if ((format.type == B_MEDIA_ENCODED_VIDEO
 			|| format.type == B_MEDIA_ENCODED_AUDIO
@@ -100,9 +100,9 @@
 	printf(&quot;AddOnManager::GetDecoderForFormat: searching decoder for encoding &quot;
 		&quot;%ld\n&quot;, format.Encoding());
 
-	decoder_info *info;
+	decoder_info* info;
 	for (fDecoderList.Rewind(); fDecoderList.GetNext(&amp;info);) {
-		media_format *decoderFormat;
+		media_format* decoderFormat;
 		for (info-&gt;formats.Rewind(); info-&gt;formats.GetNext(&amp;decoderFormat);) {
 			// check if the decoder matches the supplied format
 			if (!decoderFormat-&gt;Matches(&amp;format))
@@ -120,13 +120,13 @@
 									
 
 status_t
-AddOnManager::GetReaders(xfer_entry_ref *outRefs, int32 *outCount,
+AddOnManager::GetReaders(xfer_entry_ref* outRefs, int32* outCount,
 	int32 maxCount)
 {
 	BAutolock locker(fLock);
 
 	fReaderList.Rewind();
-	reader_info *info;
+	reader_info* info;
 	for (*outCount = 0; fReaderList.GetNext(&amp;info) &amp;&amp; *outCount &lt; maxCount;
 			(*outCount)++) {
 		outRefs[*outCount] = info-&gt;ref;
@@ -137,7 +137,7 @@
 
 
 status_t
-AddOnManager::RegisterAddOn(BEntry &amp;entry)
+AddOnManager::RegisterAddOn(BEntry&amp; entry)
 {
 	BPath path(&amp;entry);
 
@@ -153,16 +153,16 @@
 	if ((status = loader.InitCheck()) &lt; B_OK)
 		return status;
 
-	MediaPlugin *(*instantiate_plugin_func)();
+	MediaPlugin* (*instantiate_plugin_func)();
 
 	if (get_image_symbol(loader.Image(), &quot;instantiate_plugin&quot;,
-			B_SYMBOL_TYPE_TEXT, (void **)&amp;instantiate_plugin_func) &lt; B_OK) {
+			B_SYMBOL_TYPE_TEXT, (void**)&amp;instantiate_plugin_func) &lt; B_OK) {
 		printf(&quot;AddOnManager::RegisterAddOn(): can't find instantiate_plugin &quot;
 			&quot;in \&quot;%s\&quot;\n&quot;, path.Path());
 		return B_BAD_TYPE;
 	}
 
-	MediaPlugin *plugin = (*instantiate_plugin_func)();
+	MediaPlugin* plugin = (*instantiate_plugin_func)();
 	if (plugin == NULL) {
 		printf(&quot;AddOnManager::RegisterAddOn(): instantiate_plugin in \&quot;%s\&quot; &quot;
 			&quot;returned NULL\n&quot;, path.Path());
@@ -171,11 +171,11 @@
 
 	// ToDo: remove any old formats describing this add-on!!
 
-	ReaderPlugin *reader = dynamic_cast&lt;ReaderPlugin *&gt;(plugin);
+	ReaderPlugin* reader = dynamic_cast&lt;ReaderPlugin*&gt;(plugin);
 	if (reader != NULL)
 		RegisterReader(reader, ref);
 
-	DecoderPlugin *decoder = dynamic_cast&lt;DecoderPlugin *&gt;(plugin);
+	DecoderPlugin* decoder = dynamic_cast&lt;DecoderPlugin*&gt;(plugin);
 	if (decoder != NULL)
 		RegisterDecoder(decoder, ref);
 
@@ -190,19 +190,19 @@
 {
 	class CodecHandler : public AddOnMonitorHandler {
 	private:
-		AddOnManager * fManager;
+		AddOnManager* fManager;
 
 	public:
-		CodecHandler(AddOnManager *manager)
+		CodecHandler(AddOnManager* manager)
 		{
 			fManager = manager;
 		}
 
-		virtual void AddOnCreated(const add_on_entry_info *entryInfo)
+		virtual void AddOnCreated(const add_on_entry_info* entryInfo)
 		{
 		}
 
-		virtual void AddOnEnabled(const add_on_entry_info *entryInfo)
+		virtual void AddOnEnabled(const add_on_entry_info* entryInfo)
 		{
 			entry_ref ref;
 			make_entry_ref(entryInfo-&gt;dir_nref.device,
@@ -212,11 +212,11 @@
 				fManager-&gt;RegisterAddOn(entry);
 		}
 
-		virtual void AddOnDisabled(const add_on_entry_info *entryInfo)
+		virtual void AddOnDisabled(const add_on_entry_info* entryInfo)
 		{
 		}
 
-		virtual void AddOnRemoved(const add_on_entry_info *entryInfo)
+		virtual void AddOnRemoved(const add_on_entry_info* entryInfo)
 		{
 		}
 	};
@@ -261,11 +261,11 @@
 
 
 void
-AddOnManager::RegisterReader(ReaderPlugin *reader, const entry_ref &amp;ref)
+AddOnManager::RegisterReader(ReaderPlugin* reader, const entry_ref&amp; ref)
 {
 	BAutolock locker(fLock);
 
-	reader_info *pinfo;
+	reader_info* pinfo;
 	for (fReaderList.Rewind(); fReaderList.GetNext(&amp;pinfo);) {
 		if (!strcmp(pinfo-&gt;ref.name, ref.name)) {
 			// we already know this reader
@@ -283,11 +283,11 @@
 
 
 void
-AddOnManager::RegisterDecoder(DecoderPlugin *plugin, const entry_ref &amp;ref)
+AddOnManager::RegisterDecoder(DecoderPlugin* plugin, const entry_ref&amp; ref)
 {
 	BAutolock locker(fLock);
 
-	decoder_info *pinfo;
+	decoder_info* pinfo;
 	for (fDecoderList.Rewind(); fDecoderList.GetNext(&amp;pinfo);) {
 		if (!strcmp(pinfo-&gt;ref.name, ref.name)) {
 			// we already know this decoder
@@ -300,7 +300,7 @@
 	decoder_info info;
 	info.ref = ref;
 
-	media_format * formats = 0;
+	media_format* formats = 0;
 	size_t count = 0;
 	if (plugin-&gt;GetSupportedFormats(&amp;formats,&amp;count) != B_OK) {
 		printf(&quot;AddOnManager::RegisterDecoder(): plugin-&gt;GetSupportedFormats&quot;

Modified: haiku/trunk/src/servers/media/AddOnManager.h
===================================================================
--- haiku/trunk/src/servers/media/AddOnManager.h	2009-07-29 17:53:45 UTC (rev 31929)
+++ haiku/trunk/src/servers/media/AddOnManager.h	2009-07-29 17:58:46 UTC (rev 31930)
@@ -1,15 +1,20 @@
 /*
-** Copyright 2004, the OpenBeOS project. All rights reserved.
-** Distributed under the terms of the OpenBeOS License.
-**
-** Authors: Marcus Overhagen, Axel D&#246;rfler
-*/
+ * Copyright 2004-2009, Haiku. All rights reserved.
+ * Distributed under the terms of the MIT license.
+ *
+ * Authors:
+ *		Marcus Overhagen
+ *		Axel D&#246;rfler
+ */
 #ifndef _ADD_ON_MANAGER_H
 #define _ADD_ON_MANAGER_H
 
-// Manager for codec add-ons (reader, writer, encoder, decoder)
-// BMediaAddOn are handled in the NodeManager
 
+/*!	Manager for codec add-ons (reader, writer, encoder, decoder)
+	BMediaAddOn are handled in the NodeManager
+*/
+
+
 #include &quot;ReaderPlugin.h&quot;
 #include &quot;DecoderPlugin.h&quot;
 #include &quot;DataExchange.h&quot;
@@ -18,52 +23,55 @@
 #include &quot;AddOnMonitor.h&quot;
 #include &quot;AddOnMonitorHandler.h&quot;
 
+
 class AddOnManager {
-	public:
-		AddOnManager();
-		~AddOnManager();
+public:
+								AddOnManager();
+								~AddOnManager();
 
-		void		LoadState();
-		void		SaveState();
+			void				LoadState();
+			void				SaveState();
 
-		status_t 	GetDecoderForFormat(xfer_entry_ref *out_ref,
-						const media_format &amp;in_format);
+			status_t			GetDecoderForFormat(xfer_entry_ref* _ref,
+									const media_format&amp; format);
 
-		status_t	GetReaders(xfer_entry_ref *out_res, int32 *out_count,
-						int32 max_count);
+			status_t			GetReaders(xfer_entry_ref* _ref,
+									int32* _count, int32 maxCount);
 
-	private:
-		status_t	RegisterAddOn(BEntry &amp;entry);
-		void		RegisterAddOns();
+private:
+			status_t			RegisterAddOn(BEntry&amp; entry);
+			void				RegisterAddOns();
 
-		void		RegisterReader(ReaderPlugin *reader, const entry_ref &amp;ref);
-		void		RegisterDecoder(DecoderPlugin *decoder, const entry_ref &amp;ref);
+			void				RegisterReader(ReaderPlugin* reader,
+									const entry_ref&amp; ref);
+			void				RegisterDecoder(DecoderPlugin* decoder,
+									const entry_ref&amp; ref);
 
-	private:
-		struct reader_info {
-			entry_ref ref;
-		};
-		struct writer_info {
-			entry_ref ref;
-		};
-		struct decoder_info {
-			entry_ref ref;
-			List&lt;media_format&gt; formats;
-		};
-		struct encoder_info {
-			entry_ref ref;
-		};
+private:
+			struct reader_info {
+				entry_ref ref;
+			};
+			struct writer_info {
+				entry_ref ref;
+			};
+			struct decoder_info {
+				entry_ref ref;
+				List&lt;media_format&gt; formats;
+			};
+			struct encoder_info {
+				entry_ref ref;
+			};
 
-		BLocker fLock;
-		List&lt;reader_info&gt; fReaderList;
-		List&lt;writer_info&gt; fWriterList;
-		List&lt;decoder_info&gt; fDecoderList;
-		List&lt;encoder_info&gt; fEncoderList;
+			BLocker				fLock;
+			List&lt;reader_info&gt;	fReaderList;
+			List&lt;writer_info&gt;	fWriterList;
+			List&lt;decoder_info&gt;	fDecoderList;
+			List&lt;encoder_info&gt;	fEncoderList;
 
-		decoder_info	*fCurrentDecoder;
+			decoder_info*		fCurrentDecoder;
 
-		AddOnMonitorHandler	*fHandler;
-		AddOnMonitor		*fAddOnMonitor;
+			AddOnMonitorHandler* fHandler;
+			AddOnMonitor*		fAddOnMonitor;
 };
 
 #endif // _ADD_ON_MANAGER_H


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018473.html">[Haiku-commits] r31929 - in haiku/branches/components/gsoc-locale-kit: 3rdparty/mmu_man/onlinedemo build/jam data/artwork data/etc data/settings/kernel/drivers data/system/boot docs/userguide/en docs/userguide/en/applications docs/userguide/en/desktop-applets docs/userguide/en/installation docs/userguide/en/preferences docs/userguide/images docs/userguide/images/apps-images docs/userguide/images/deskbar-images docs/userguide/images/desktop-applets-images docs/userguide/images/prefs-images headers/cpp headers/os/arch headers/os/arch/m68k headers/os/arch/mipsel headers/os/arch/ppc headers/os/arch/x86 headers/os/drivers headers/os/drivers/usb headers/os/interface headers/os/kernel headers/os/storage headers/os/support headers/posix headers/private/app headers/private/debug headers/private/interface headers/private/kernel headers/private/kernel/arch headers/private/kernel/arch/ppc headers/private/kernel/boot/platform headers/private/kernel/disk_device_manager headers/private/kernel/uti! l headers/private/media headers/private/screen_saver headers/private/shared headers/private/storage headers/private/system headers/private/system/arch headers/private/userlandfs/shared src/add-ons/accelerants/nvidia src/add-ons/disk_systems/bfs src/add-ons/disk_systems/intel src/add-ons/kernel src/add-ons/kernel/bus_managers/agp_gart src/add-ons/kernel/bus_managers/ps2 src/add-ons/kernel/debugger/demangle src/add-ons/kernel/drivers/audio/hda src/add-ons/kernel/drivers/disk/scsi/scsi_cd src/add-ons/kernel/drivers/input/ps2_hid src/add-ons/kernel/drivers/input/usb_hid src/add-ons/kernel/drivers/midi/usb_midi src/add-ons/kernel/drivers/ports/pc_serial src/add-ons/kernel/drivers/power/acpi_battery src/add-ons/kernel/file_systems/bfs src/add-ons/kernel/file_systems/ext2 src/add-ons/kernel/file_systems/fat src/add-ons/kernel/file_systems/iso9660 src/add-ons/kernel/file_systems/userlandfs/kernel_add_on src/add-ons/kernel/file_systems/userlandfs/server/fuse src/add-ons/kernel/file_! systems/userlandfs/server/haiku src/add-ons/kernel/network/pro! tocols/i
</A></li>
	<LI>Next message: <A HREF="018475.html">[Haiku-commits] r31931 - haiku/trunk/src/system/kernel/vm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18474">[ date ]</a>
              <a href="thread.html#18474">[ thread ]</a>
              <a href="subject.html#18474">[ subject ]</a>
              <a href="author.html#18474">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
