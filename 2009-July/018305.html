<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r31797 - haiku/trunk/src/kits/interface
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31797%20-%20haiku/trunk/src/kits/interface&In-Reply-To=%3C200907271050.n6RAouhJ015952%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018304.html">
   <LINK REL="Next"  HREF="018306.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r31797 - haiku/trunk/src/kits/interface</H1>
    <B>axeld at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31797%20-%20haiku/trunk/src/kits/interface&In-Reply-To=%3C200907271050.n6RAouhJ015952%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r31797 - haiku/trunk/src/kits/interface">axeld at mail.berlios.de
       </A><BR>
    <I>Mon Jul 27 12:50:56 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018304.html">[Haiku-commits] r31796 -	haiku/branches/components/gsoc-locale-kit/src/libs/icu/source/data
</A></li>
        <LI>Next message: <A HREF="018306.html">[Haiku-commits] r31798 - haiku/trunk/src/apps/deskbar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18305">[ date ]</a>
              <a href="thread.html#18305">[ thread ]</a>
              <a href="subject.html#18305">[ subject ]</a>
              <a href="author.html#18305">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: axeld
Date: 2009-07-27 12:50:53 +0200 (Mon, 27 Jul 2009)
New Revision: 31797
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=31797&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=31797&amp;view=rev</A>

Modified:
   haiku/trunk/src/kits/interface/Window.cpp
Log:
* Style cleanups.
* Removed former dead print-screen code.


Modified: haiku/trunk/src/kits/interface/Window.cpp
===================================================================
--- haiku/trunk/src/kits/interface/Window.cpp	2009-07-27 10:50:21 UTC (rev 31796)
+++ haiku/trunk/src/kits/interface/Window.cpp	2009-07-27 10:50:53 UTC (rev 31797)
@@ -1,5 +1,5 @@
 /*
- * Copyright 2001-2008, Haiku.
+ * Copyright 2001-2009, Haiku.
  * Distributed under the terms of the MIT License.
  *
  * Authors:
@@ -63,6 +63,7 @@
 
 void do_minimize_team(BRect zoomRect, team_id team, bool zoom);
 
+
 struct BWindow::unpack_cookie {
 	unpack_cookie();
 
@@ -76,28 +77,29 @@
 };
 
 class BWindow::Shortcut {
-	public:
-		Shortcut(uint32 key, uint32 modifiers, BMenuItem* item);
-		Shortcut(uint32 key, uint32 modifiers, BMessage* message,
-			BHandler* target);
-		~Shortcut();
+public:
+							Shortcut(uint32 key, uint32 modifiers,
+								BMenuItem* item);
+							Shortcut(uint32 key, uint32 modifiers,
+								BMessage* message, BHandler* target);
+							~Shortcut();
 
-		bool Matches(uint32 key, uint32 modifiers) const;
+			bool			Matches(uint32 key, uint32 modifiers) const;
 
-		BMenuItem* MenuItem() const { return fMenuItem; }
-		BMessage* Message() const { return fMessage; }
-		BHandler* Target() const { return fTarget; }
+			BMenuItem*		MenuItem() const { return fMenuItem; }
+			BMessage*		Message() const { return fMessage; }
+			BHandler*		Target() const { return fTarget; }
 
-		static uint32 AllowedModifiers();
-		static uint32 PrepareKey(uint32 key);
-		static uint32 PrepareModifiers(uint32 modifiers);
+	static	uint32			AllowedModifiers();
+	static	uint32			PrepareKey(uint32 key);
+	static	uint32			PrepareModifiers(uint32 modifiers);
 
-	private:
-		uint32		fKey;
-		uint32		fModifiers;
-		BMenuItem*	fMenuItem;
-		BMessage*	fMessage;
-		BHandler*	fTarget;
+private:
+			uint32			fKey;
+			uint32			fModifiers;
+			BMenuItem*		fMenuItem;
+			BMessage*		fMessage;
+			BHandler*		fTarget;
 };
 
 
@@ -193,7 +195,7 @@
 
 
 void
-_set_menu_sem_(BWindow *window, sem_id sem)
+_set_menu_sem_(BWindow* window, sem_id sem)
 {
 	if (window != NULL)
 		window-&gt;fMenuSem = sem;
@@ -310,20 +312,20 @@
 {
 	data-&gt;FindRect(&quot;_frame&quot;, &amp;fFrame);
 
-	const char *title;
+	const char* title;
 	data-&gt;FindString(&quot;_title&quot;, &amp;title);
 
 	window_look look;
-	data-&gt;FindInt32(&quot;_wlook&quot;, (int32 *)&amp;look);
+	data-&gt;FindInt32(&quot;_wlook&quot;, (int32*)&amp;look);
 
 	window_feel feel;
-	data-&gt;FindInt32(&quot;_wfeel&quot;, (int32 *)&amp;feel);
+	data-&gt;FindInt32(&quot;_wfeel&quot;, (int32*)&amp;feel);
 
-	if (data-&gt;FindInt32(&quot;_flags&quot;, (int32 *)&amp;fFlags) != B_OK)
+	if (data-&gt;FindInt32(&quot;_flags&quot;, (int32*)&amp;fFlags) != B_OK)
 		fFlags = 0;
 
 	uint32 workspaces;
-	data-&gt;FindInt32(&quot;_wspace&quot;, (int32 *)&amp;workspaces);
+	data-&gt;FindInt32(&quot;_wspace&quot;, (int32*)&amp;workspaces);
 
 	uint32 type;
 	if (data-&gt;FindInt32(&quot;_type&quot;, (int32*)&amp;type) == B_OK)
@@ -349,9 +351,8 @@
 	BMessage msg;
 	int32 i = 0;
 	while (data-&gt;FindMessage(&quot;_views&quot;, i++, &amp;msg) == B_OK) {
-		BArchivable *obj = instantiate_object(&amp;msg);
-		BView *child = dynamic_cast&lt;BView *&gt;(obj);
-		if (child)
+		BArchivable* obj = instantiate_object(&amp;msg);
+		if (BView* child = dynamic_cast&lt;BView*&gt;(obj))
 			AddChild(child);
 	}
 }
@@ -368,7 +369,7 @@
 
 BWindow::~BWindow()
 {
-	if (BMenu *menu = dynamic_cast&lt;BMenu *&gt;(fFocus)) {
+	if (BMenu* menu = dynamic_cast&lt;BMenu*&gt;(fFocus)) {
 		MenuPrivate(menu).QuitTracking();
 	}
 
@@ -419,8 +420,8 @@
 }
 
 
-BArchivable *
-BWindow::Instantiate(BMessage *data)
+BArchivable*
+BWindow::Instantiate(BMessage* data)
 {
 	if (!validate_instantiation(data , &quot;BWindow&quot;))
 		return NULL;
@@ -492,7 +493,7 @@
 BWindow::Quit()
 {
 	if (!IsLocked()) {
-		const char *name = Name();
+		const char* name = Name();
 		if (!name)
 			name = &quot;no-name&quot;;
 
@@ -518,7 +519,7 @@
 
 
 void
-BWindow::AddChild(BView *child, BView *before)
+BWindow::AddChild(BView* child, BView* before)
 {
 	BAutolock locker(this);
 	if (locker.IsLocked())
@@ -527,7 +528,7 @@
 
 
 bool
-BWindow::RemoveChild(BView *child)
+BWindow::RemoveChild(BView* child)
 {
 	BAutolock locker(this);
 	if (!locker.IsLocked())
@@ -548,7 +549,7 @@
 }
 
 
-BView *
+BView*
 BWindow::ChildAt(int32 index) const
 {
 	BAutolock locker(const_cast&lt;BWindow*&gt;(this));
@@ -577,7 +578,7 @@
 
 
 status_t
-BWindow::SendBehind(const BWindow *window)
+BWindow::SendBehind(const BWindow* window)
 {
 	if (!window || !Lock())
 		return B_ERROR;
@@ -598,9 +599,9 @@
 void
 BWindow::Flush() const
 {
-	if (const_cast&lt;BWindow *&gt;(this)-&gt;Lock()) {
+	if (const_cast&lt;BWindow*&gt;(this)-&gt;Lock()) {
 		fLink-&gt;Flush();
-		const_cast&lt;BWindow *&gt;(this)-&gt;Unlock();
+		const_cast&lt;BWindow*&gt;(this)-&gt;Unlock();
 	}
 }
 
@@ -683,7 +684,7 @@
 
 
 void
-BWindow::MessageReceived(BMessage *msg)
+BWindow::MessageReceived(BMessage* msg)
 {
 	if (!msg-&gt;HasSpecifiers()) {
 		if (msg-&gt;what == B_KEY_DOWN)
@@ -697,7 +698,7 @@
 
 	BMessage specifier;
 	int32 what;
-	const char *prop;
+	const char* prop;
 	int32 index;
 
 	if (msg-&gt;GetCurrentSpecifier(&amp;index, &amp;specifier, &amp;what, &amp;prop) != B_OK)
@@ -723,7 +724,7 @@
 				handled = true;
 			} else {
 				uint32 newFeel;
-				if (msg-&gt;FindInt32(&quot;data&quot;, (int32 *)&amp;newFeel) == B_OK) {
+				if (msg-&gt;FindInt32(&quot;data&quot;, (int32*)&amp;newFeel) == B_OK) {
 					SetFeel((window_feel)newFeel);
 					handled = true;
 				}
@@ -735,7 +736,7 @@
 				handled = true;
 			} else {
 				uint32 newFlags;
-				if (msg-&gt;FindInt32(&quot;data&quot;, (int32 *)&amp;newFlags) == B_OK) {
+				if (msg-&gt;FindInt32(&quot;data&quot;, (int32*)&amp;newFlags) == B_OK) {
 					SetFlags(newFlags);
 					handled = true;
 				}
@@ -776,7 +777,7 @@
 				handled = true;
 			} else {
 				uint32 newLook;
-				if (msg-&gt;FindInt32(&quot;data&quot;, (int32 *)&amp;newLook) == B_OK) {
+				if (msg-&gt;FindInt32(&quot;data&quot;, (int32*)&amp;newLook) == B_OK) {
 					SetLook((window_look)newLook);
 					handled = true;
 				}
@@ -787,7 +788,7 @@
 				replyMsg.AddString(&quot;result&quot;, Title());
 				handled = true;
 			} else {
-				const char *newTitle = NULL;
+				const char* newTitle = NULL;
 				if (msg-&gt;FindString(&quot;data&quot;, &amp;newTitle) == B_OK) {
 					SetTitle(newTitle);
 					handled = true;
@@ -800,7 +801,7 @@
 				handled = true;
 			} else {
 				uint32 newWorkspaces;
-				if (msg-&gt;FindInt32(&quot;data&quot;, (int32 *)&amp;newWorkspaces) == B_OK) {
+				if (msg-&gt;FindInt32(&quot;data&quot;, (int32*)&amp;newWorkspaces) == B_OK) {
 					SetWorkspaces(newWorkspaces);
 					handled = true;
 				}
@@ -835,7 +836,7 @@
 
 
 void
-BWindow::DispatchMessage(BMessage *msg, BHandler *target)
+BWindow::DispatchMessage(BMessage* msg, BHandler* target)
 {
 	if (!msg)
 		return;
@@ -986,7 +987,7 @@
 				BRect frame;
 				uint32 mode;
 				if (msg-&gt;FindRect(&quot;frame&quot;, &amp;frame) == B_OK
-					&amp;&amp; msg-&gt;FindInt32(&quot;mode&quot;, (int32 *)&amp;mode) == B_OK)
+					&amp;&amp; msg-&gt;FindInt32(&quot;mode&quot;, (int32*)&amp;mode) == B_OK)
 					ScreenChanged(frame, (color_space)mode);
 			} else
 				target-&gt;MessageReceived(msg);
@@ -996,7 +997,7 @@
 			if (target == this) {
 				uint32 workspace;
 				bool active;
-				if (msg-&gt;FindInt32(&quot;workspace&quot;, (int32 *)&amp;workspace) == B_OK
+				if (msg-&gt;FindInt32(&quot;workspace&quot;, (int32*)&amp;workspace) == B_OK
 					&amp;&amp; msg-&gt;FindBool(&quot;active&quot;, &amp;active) == B_OK)
 					WorkspaceActivated(workspace, active);
 			} else
@@ -1006,8 +1007,8 @@
 		case B_WORKSPACES_CHANGED:
 			if (target == this) {
 				uint32 oldWorkspace, newWorkspace;
-				if (msg-&gt;FindInt32(&quot;old&quot;, (int32 *)&amp;oldWorkspace) == B_OK
-					&amp;&amp; msg-&gt;FindInt32(&quot;new&quot;, (int32 *)&amp;newWorkspace) == B_OK)
+				if (msg-&gt;FindInt32(&quot;old&quot;, (int32*)&amp;oldWorkspace) == B_OK
+					&amp;&amp; msg-&gt;FindInt32(&quot;new&quot;, (int32*)&amp;newWorkspace) == B_OK)
 					WorkspacesChanged(oldWorkspace, newWorkspace);
 			} else
 				target-&gt;MessageReceived(msg);
@@ -1030,10 +1031,10 @@
 		{
 			if (!_HandleKeyDown(msg)) {
 				if (BView* view = dynamic_cast&lt;BView*&gt;(target)) {
-					// TODO: cannot use &quot;string&quot; here if we support having different
-					//	font encoding per view (it's supposed to be converted by
-					//	_HandleKeyDown() one day)
-					const char *string = NULL;
+					// TODO: cannot use &quot;string&quot; here if we support having
+					// different font encoding per view (it's supposed to be
+					// converted by _HandleKeyDown() one day)
+					const char* string;
 					if (msg-&gt;FindString(&quot;bytes&quot;, &amp;string) == B_OK)
 						view-&gt;KeyDown(string, strlen(string));
 				} else
@@ -1044,7 +1045,7 @@
 
 		case B_KEY_UP:
 		{
-			const char *string = NULL;
+			const char* string = NULL;
 			msg-&gt;FindString(&quot;bytes&quot;, &amp;string);
 
 			// TODO: same as above
@@ -1057,11 +1058,11 @@
 
 		case B_MOUSE_DOWN:
 		{
-			BView *view = dynamic_cast&lt;BView *&gt;(target);
+			BView* view = dynamic_cast&lt;BView*&gt;(target);
 
 			// Close an eventually opened menu
 			// unless the target is the menu itself
-			BMenu *menu = dynamic_cast&lt;BMenu *&gt;(fFocus);
+			BMenu* menu = dynamic_cast&lt;BMenu*&gt;(fFocus);
 			MenuPrivate privMenu(menu);
 			if (menu != NULL &amp;&amp; menu != view
 				&amp;&amp; privMenu.State() != MENU_STATE_CLOSED) {
@@ -1081,7 +1082,7 @@
 
 		case B_MOUSE_UP:
 		{
-			if (BView *view = dynamic_cast&lt;BView *&gt;(target)) {
+			if (BView* view = dynamic_cast&lt;BView*&gt;(target)) {
 				BPoint where;
 				msg-&gt;FindPoint(&quot;be:view_where&quot;, &amp;where);
 				view-&gt;fMouseEventOptions = 0;
@@ -1094,8 +1095,7 @@
 
 		case B_MOUSE_MOVED:
 		{
-			if (BView *view = dynamic_cast&lt;BView *&gt;(target)) {
-
+			if (BView* view = dynamic_cast&lt;BView*&gt;(target)) {
 				uint32 eventOptions = view-&gt;fEventOptions
 					| view-&gt;fMouseEventOptions;
 				bool noHistory = eventOptions &amp; B_NO_POINTER_HISTORY;
@@ -1125,11 +1125,12 @@
 					|| (dropIfLate &amp;&amp; (system_time() - eventTime &gt; 20000))) {
 					// filter out older mouse moved messages in the queue
 					_DequeueAll();
-					BMessageQueue *queue = MessageQueue();
+					BMessageQueue* queue = MessageQueue();
 					queue-&gt;Lock();
 
-					BMessage *moved;
-					for (int32 i = 0; (moved = queue-&gt;FindMessage(i)) != NULL; i++) {
+					BMessage* moved;
+					for (int32 i = 0; (moved = queue-&gt;FindMessage(i)) != NULL;
+							i++) {
 						if (moved != msg &amp;&amp; moved-&gt;what == B_MOUSE_MOVED) {
 							// there is a newer mouse moved message in the
 							// queue, just ignore the current one, the newer one
@@ -1149,7 +1150,8 @@
 				BMessage* dragMessage = NULL;
 				if (msg-&gt;HasMessage(&quot;be:drag_message&quot;)) {
 					dragMessage = new BMessage();
-					if (msg-&gt;FindMessage(&quot;be:drag_message&quot;, dragMessage) != B_OK) {
+					if (msg-&gt;FindMessage(&quot;be:drag_message&quot;, dragMessage)
+							!= B_OK) {
 						delete dragMessage;
 						dragMessage = NULL;
 					}
@@ -1410,14 +1412,18 @@
 
 
 void
-BWindow::GetSizeLimits(float *minWidth, float *maxWidth,
-	float *minHeight, float *maxHeight)
+BWindow::GetSizeLimits(float* _minWidth, float* _maxWidth, float* _minHeight,
+	float* _maxHeight)
 {
 	// TODO: What about locking?!?
-	*minHeight = fMinHeight;
-	*minWidth = fMinWidth;
-	*maxHeight = fMaxHeight;
-	*maxWidth = fMaxWidth;
+	if (_minHeight != NULL)
+		*_minHeight = fMinHeight;
+	if (_minWidth != NULL)
+		*_minWidth = fMinWidth;
+	if (_maxHeight != NULL)
+		*_maxHeight = fMaxHeight;
+	if (_maxWidth != NULL)
+		*_maxWidth = fMaxWidth;
 }
 
 
@@ -1430,28 +1436,27 @@
 
 	int32 size = settings.FlattenedSize();
 	char buffer[size];
-	status_t ret = settings.Flatten(buffer, size);
+	status_t status = settings.Flatten(buffer, size);
+	if (status != B_OK)
+		return status;
 
-	if (ret &lt; B_OK)
-		return ret;
-
 	if (!Lock())
 		return B_ERROR;
 
-	ret = fLink-&gt;StartMessage(AS_SET_DECORATOR_SETTINGS);
+	status = fLink-&gt;StartMessage(AS_SET_DECORATOR_SETTINGS);
 
-	if (ret == B_OK)
-		ret = fLink-&gt;Attach&lt;int32&gt;(size);
+	if (status == B_OK)
+		status = fLink-&gt;Attach&lt;int32&gt;(size);
 
-	if (ret == B_OK)
-		ret = fLink-&gt;Attach(buffer, size);
+	if (status == B_OK)
+		status = fLink-&gt;Attach(buffer, size);
 
-	if (ret == B_OK)
-		ret = fLink-&gt;Flush();
+	if (status == B_OK)
+		status = fLink-&gt;Flush();
 
 	Unlock();
 
-	return ret;
+	return status;
 }
 
 
@@ -1464,30 +1469,30 @@
 	if (!const_cast&lt;BWindow*&gt;(this)-&gt;Lock())
 		return B_ERROR;
 
-	status_t ret = fLink-&gt;StartMessage(AS_GET_DECORATOR_SETTINGS);
+	status_t status = fLink-&gt;StartMessage(AS_GET_DECORATOR_SETTINGS);
 
-	if (ret == B_OK) {
+	if (status == B_OK) {
 		int32 code;
-		ret = fLink-&gt;FlushWithReply(code);
-		if (ret == B_OK &amp;&amp; code != B_OK)
-			ret = code;
+		status = fLink-&gt;FlushWithReply(code);
+		if (status == B_OK &amp;&amp; code != B_OK)
+			status = code;
 	}
 
-	if (ret == B_OK) {
+	if (status == B_OK) {
 		int32 size;
-		ret = fLink-&gt;Read&lt;int32&gt;(&amp;size);
-		if (ret == B_OK) {
+		status = fLink-&gt;Read&lt;int32&gt;(&amp;size);
+		if (status == B_OK) {
 			char buffer[size];
-			ret = fLink-&gt;Read(buffer, size);
-			if (ret == B_OK) {
-				ret = settings-&gt;Unflatten(buffer);
+			status = fLink-&gt;Read(buffer, size);
+			if (status == B_OK) {
+				status = settings-&gt;Unflatten(buffer);
 			}
 		}
 	}
 
 	const_cast&lt;BWindow*&gt;(this)-&gt;Unlock();
 
-	return ret;
+	return status;
 }
 
 
@@ -1521,17 +1526,10 @@
 BWindow::Zoom()
 {
 	// TODO: What about locking?!?
-	/*
-		from BeBook:
-		However, if the window's rectangle already matches these &quot;zoom&quot; dimensions
-		(give or take a few pixels), Zoom() passes the window's previous
-		(&quot;non-zoomed&quot;) size and location. (??????)
-	*/
 
-	/* From BeBook:
-		The dimensions that non-virtual Zoom() passes to hook Zoom() are deduced from
-		the smallest of three rectangles:
-	*/
+	// From BeBook:
+	// The dimensions that non-virtual Zoom() passes to hook Zoom() are deduced
+	// from the smallest of three rectangles:
 
 	float borderWidth;
 	float tabHeight;
@@ -1560,18 +1558,20 @@
 	BPoint zoomedLeftTop = screen.Frame().LeftTop() + BPoint(borderWidth,
 		tabHeight + borderWidth);
 
-	// UN-ZOOM:
+	// Un-Zoom
+
 	if (fPreviousFrame.IsValid()
 		// NOTE: don't check for fFrame.LeftTop() == zoomedLeftTop
 		// -&gt; makes it easier on the user to get a window back into place
 		&amp;&amp; fFrame.Width() == zoomedWidth
 		&amp;&amp; fFrame.Height() == zoomedHeight) {
 		// already zoomed!
-		Zoom(fPreviousFrame.LeftTop(), fPreviousFrame.Width(), fPreviousFrame.Height());
+		Zoom(fPreviousFrame.LeftTop(), fPreviousFrame.Width(),
+			fPreviousFrame.Height());
 		return;
 	}
 
-	// ZOOM:
+	// Zoom
 
 	// remember fFrame for later &quot;unzooming&quot;
 	fPreviousFrame = fFrame;
@@ -1591,7 +1591,8 @@
 BWindow::SetPulseRate(bigtime_t rate)
 {
 	// TODO: What about locking?!?
-	if (rate &lt; 0 || (rate == fPulseRate &amp;&amp; !((rate == 0) ^ (fPulseRunner == NULL))))
+	if (rate &lt; 0
+		|| (rate == fPulseRate &amp;&amp; !((rate == 0) ^ (fPulseRunner == NULL))))
 		return;
 
 	fPulseRate = rate;
@@ -1620,7 +1621,7 @@
 
 
 void
-BWindow::AddShortcut(uint32 key, uint32 modifiers, BMenuItem *item)
+BWindow::AddShortcut(uint32 key, uint32 modifiers, BMenuItem* item)
 {
 	Shortcut* shortcut = new(std::nothrow) Shortcut(key, modifiers, item);
 	if (shortcut == NULL)
@@ -1634,7 +1635,7 @@
 
 
 void
-BWindow::AddShortcut(uint32 key, uint32 modifiers, BMessage *message)
+BWindow::AddShortcut(uint32 key, uint32 modifiers, BMessage* message)
 {
 	AddShortcut(key, modifiers, message, this);
 }
@@ -1673,7 +1674,7 @@
 }
 
 
-BButton *
+BButton*
 BWindow::DefaultButton() const
 {
 	// TODO: What about locking?!?
@@ -1682,7 +1683,7 @@
 
 
 void
-BWindow::SetDefaultButton(BButton *button)
+BWindow::SetDefaultButton(BButton* button)
 {
 	// TODO: What about locking?!?
 	if (fDefaultButton == button)
@@ -1690,7 +1691,7 @@
 
 	if (fDefaultButton != NULL) {
 		// tell old button it's no longer the default one
-		BButton *oldDefault = fDefaultButton;
+		BButton* oldDefault = fDefaultButton;
 		oldDefault-&gt;MakeDefault(false);
 		oldDefault-&gt;Invalidate();
 	}
@@ -1708,7 +1709,7 @@
 bool
 BWindow::NeedsUpdate() const
 {
-	if (!const_cast&lt;BWindow *&gt;(this)-&gt;Lock())
+	if (!const_cast&lt;BWindow*&gt;(this)-&gt;Lock())
 		return false;
 
 	fLink-&gt;StartMessage(AS_NEEDS_UPDATE);
@@ -1716,7 +1717,7 @@
 	int32 code = B_ERROR;
 	fLink-&gt;FlushWithReply(code);
 
-	const_cast&lt;BWindow *&gt;(this)-&gt;Unlock();
+	const_cast&lt;BWindow*&gt;(this)-&gt;Unlock();
 
 	return code == B_OK;
 }
@@ -1731,7 +1732,7 @@
 
 	// if the queue is already locked we are called recursivly
 	// from our own dispatched update message
-	if (((const BMessageQueue *)MessageQueue())-&gt;IsLocked())
+	if (((const BMessageQueue*)MessageQueue())-&gt;IsLocked())
 		return;
 
 	if (!Lock())
@@ -1745,7 +1746,7 @@
 	// all messages that are pending on the port.
 	_DequeueAll();
 
-	BMessageQueue *queue = MessageQueue();
+	BMessageQueue* queue = MessageQueue();
 
 	// First process and remove any _UPDATE_ message in the queue
 	// With the current design, there can only be one at a time
@@ -1753,7 +1754,7 @@
 	while (true) {
 		queue-&gt;Lock();
 
-		BMessage *message = queue-&gt;FindMessage(_UPDATE_, 0);
+		BMessage* message = queue-&gt;FindMessage(_UPDATE_, 0);
 		queue-&gt;RemoveMessage(message);
 
 		queue-&gt;Unlock();
@@ -1769,8 +1770,8 @@
 }
 
 
-BView *
-BWindow::FindView(const char *viewName) const
+BView*
+BWindow::FindView(const char* viewName) const
 {
 	BAutolock locker(const_cast&lt;BWindow*&gt;(this));
 	if (!locker.IsLocked())
@@ -1780,7 +1781,7 @@
 }
 
 
-BView *
+BView*
 BWindow::FindView(BPoint point) const
 {
 	BAutolock locker(const_cast&lt;BWindow*&gt;(this));
@@ -1793,7 +1794,7 @@
 }
 
 
-BView *
+BView*
 BWindow::CurrentFocus() const
 {
 	return fFocus;
@@ -1828,7 +1829,7 @@
 
 
 void
-BWindow::ConvertToScreen(BPoint *point) const
+BWindow::ConvertToScreen(BPoint* point) const
 {
 	point-&gt;x += fFrame.left;
 	point-&gt;y += fFrame.top;
@@ -1843,7 +1844,7 @@
 
 
 void
-BWindow::ConvertFromScreen(BPoint *point) const
+BWindow::ConvertFromScreen(BPoint* point) const
 {
 	point-&gt;x -= fFrame.left;
 	point-&gt;y -= fFrame.top;
@@ -1858,7 +1859,7 @@
 
 
 void
-BWindow::ConvertToScreen(BRect *rect) const
+BWindow::ConvertToScreen(BRect* rect) const
 {
 	rect-&gt;OffsetBy(fFrame.LeftTop());
 }
@@ -1926,7 +1927,7 @@
 }
 
 
-const char *
+const char*
 BWindow::Title() const
 {
 	return fTitle;
@@ -1934,7 +1935,7 @@
 
 
 void
-BWindow::SetTitle(const char *title)
+BWindow::SetTitle(const char* title)
 {
 	if (title == NULL)
 		title = &quot;&quot;;
@@ -1962,13 +1963,13 @@
 
 
 void
-BWindow::SetKeyMenuBar(BMenuBar *bar)
+BWindow::SetKeyMenuBar(BMenuBar* bar)
 {
 	fKeyMenuBar = bar;
 }
 
 
-BMenuBar *
+BMenuBar*
 BWindow::KeyMenuBar() const
 {
 	return fKeyMenuBar;
@@ -1995,7 +1996,7 @@
 
 
 status_t
-BWindow::AddToSubset(BWindow *window)
+BWindow::AddToSubset(BWindow* window)
 {
 	if (window == NULL || window-&gt;Feel() != B_NORMAL_WINDOW_FEEL
 		|| (fFeel != B_MODAL_SUBSET_WINDOW_FEEL
@@ -2017,7 +2018,7 @@
 
 
 status_t
-BWindow::RemoveFromSubset(BWindow *window)
+BWindow::RemoveFromSubset(BWindow* window)
 {
 	if (window == NULL || window-&gt;Feel() != B_NORMAL_WINDOW_FEEL
 		|| (fFeel != B_MODAL_SUBSET_WINDOW_FEEL
@@ -2192,18 +2193,18 @@
 
 
 status_t
-BWindow::GetWindowAlignment(window_alignment *mode,
-	int32 *h, int32 *hOffset, int32 *width, int32 *widthOffset,
-	int32 *v, int32 *vOffset, int32 *height, int32 *heightOffset) const
+BWindow::GetWindowAlignment(window_alignment* mode,
+	int32* h, int32* hOffset, int32* width, int32* widthOffset,
+	int32* v, int32* vOffset, int32* height, int32* heightOffset) const
 {
-	if (!const_cast&lt;BWindow *&gt;(this)-&gt;Lock())
+	if (!const_cast&lt;BWindow*&gt;(this)-&gt;Lock())
 		return B_ERROR;
 
 	fLink-&gt;StartMessage(AS_GET_ALIGNMENT);
 
 	status_t status;
 	if (fLink-&gt;FlushWithReply(status) == B_OK &amp;&amp; status == B_OK) {
-		fLink-&gt;Read&lt;int32&gt;((int32 *)mode);
+		fLink-&gt;Read&lt;int32&gt;((int32*)mode);
 		fLink-&gt;Read&lt;int32&gt;(h);
 		fLink-&gt;Read&lt;int32&gt;(hOffset);
 		fLink-&gt;Read&lt;int32&gt;(width);
@@ -2214,7 +2215,7 @@
 		fLink-&gt;Read&lt;int32&gt;(heightOffset);
 	}
 
-	const_cast&lt;BWindow *&gt;(this)-&gt;Unlock();
+	const_cast&lt;BWindow*&gt;(this)-&gt;Unlock();
 	return status;
 }
 
@@ -2222,7 +2223,7 @@
 uint32
 BWindow::Workspaces() const
 {
-	if (!const_cast&lt;BWindow *&gt;(this)-&gt;Lock())
+	if (!const_cast&lt;BWindow*&gt;(this)-&gt;Lock())
 		return 0;
 
 	uint32 workspaces = 0;
@@ -2233,7 +2234,7 @@
 	if (fLink-&gt;FlushWithReply(status) == B_OK &amp;&amp; status == B_OK)
 		fLink-&gt;Read&lt;uint32&gt;(&amp;workspaces);
 
-	const_cast&lt;BWindow *&gt;(this)-&gt;Unlock();
+	const_cast&lt;BWindow*&gt;(this)-&gt;Unlock();
 	return workspaces;
 }
 
@@ -2254,7 +2255,7 @@
 }
 
 
-BView *
+BView*
 BWindow::LastMouseMovedView() const
 {
 	return fLastMouseMovedView;
@@ -2440,7 +2441,7 @@
 
 
 status_t
-BWindow::GetSupportedSuites(BMessage *data)
+BWindow::GetSupportedSuites(BMessage* data)
 {
 	if (data == NULL)
 		return B_BAD_VALUE;
@@ -2458,9 +2459,9 @@
 }
 
 
-BHandler *
-BWindow::ResolveSpecifier(BMessage *msg, int32 index, BMessage *specifier,
-	int32 what,	const char *property)
+BHandler*
+BWindow::ResolveSpecifier(BMessage* msg, int32 index, BMessage* specifier,
+	int32 what,	const char* property)
 {
 	if (msg-&gt;what == B_WINDOW_MOVE_BY
 		|| msg-&gt;what == B_WINDOW_MOVE_TO)
@@ -2478,7 +2479,8 @@
 			} else {
 				BMessage replyMsg(B_MESSAGE_NOT_UNDERSTOOD);
 				replyMsg.AddInt32(&quot;error&quot;, B_NAME_NOT_FOUND);
-				replyMsg.AddString(&quot;message&quot;, &quot;This window doesn't have a main MenuBar&quot;);
+				replyMsg.AddString(&quot;message&quot;,
+					&quot;This window doesn't have a main MenuBar&quot;);
 				msg-&gt;SendReply(&amp;replyMsg);
 				return NULL;
 			}
@@ -2500,7 +2502,8 @@
 	STRACE((&quot;BWindow::InitData()\n&quot;));
 
 	if (be_app == NULL) {
-		debugger(&quot;You need a valid BApplication object before interacting with the app_server&quot;);
+		debugger(&quot;You need a valid BApplication object before interacting with &quot;
+			&quot;the app_server&quot;);
 		return;
 	}
 
@@ -2656,7 +2659,7 @@
 
 //! Rename the handler and its thread
 void
-BWindow::_SetName(const char *title)
+BWindow::_SetName(const char* title)
 {
 	if (title == NULL)
 		title = &quot;&quot;;
@@ -2691,7 +2694,7 @@
 	int32 count = port_count(fMsgPort);
 
 	for (int32 i = 0; i &lt; count; i++) {
-		BMessage *message = MessageFromPort(0);
+		BMessage* message = MessageFromPort(0);
 		if (message != NULL)
 			fDirectTarget-&gt;Queue()-&gt;AddMessage(message);
 	}
@@ -2756,7 +2759,7 @@
 				// Get the target handler
 				BMessage::Private messagePrivate(fLastMessage);
 				bool usePreferred = messagePrivate.UsePreferredTarget();
-				BHandler *handler = NULL;
+				BHandler* handler = NULL;
 				bool dropMessage = false;
 
 				if (usePreferred) {
@@ -2765,7 +2768,7 @@
 						handler = this;
 				} else {
 					gDefaultTokens.GetToken(messagePrivate.GetTarget(),
-						B_HANDLER_TOKEN, (void **)&amp;handler);
+						B_HANDLER_TOKEN, (void**)&amp;handler);
 
 					// if this handler doesn't belong to us, we drop the message
 					if (handler != NULL &amp;&amp; handler-&gt;Looper() != this) {
@@ -2860,8 +2863,8 @@
 
 
 void
-BWindow::_DecomposeType(window_type type, window_look *_look,
-	window_feel *_feel) const
+BWindow::_DecomposeType(window_type type, window_look* _look,
+	window_feel* _feel) const
 {
 	switch (type) {
 		case B_DOCUMENT_WINDOW:
@@ -2946,7 +2949,7 @@
 
 
 void
-BWindow::_SetFocus(BView *focusView, bool notifyInputServer)
+BWindow::_SetFocus(BView* focusView, bool notifyInputServer)
 {
 	if (fFocus == focusView)
 		return;
@@ -2975,8 +2978,8 @@
 	\brief Determines the target of a message received for the
 		focus view.
 */
-BHandler *
-BWindow::_DetermineTarget(BMessage *message, BHandler *target)
+BHandler*
+BWindow::_DetermineTarget(BMessage* message, BHandler* target)
 {
 	if (target == NULL)
 		target = this;
@@ -3334,7 +3337,7 @@
 	if (!_IsFocusMessage(event))
 		return false;
 
-	const char *string = NULL;
+	const char* string = NULL;
 	if (event-&gt;FindString(&quot;bytes&quot;, &amp;string) != B_OK)
 		return false;
 
@@ -3388,7 +3391,6 @@
 		// Check for Print Screen
 		int32 rawKey;
 		if (event-&gt;FindInt32(&quot;key&quot;, &amp;rawKey) == B_OK &amp;&amp; rawKey == B_PRINT_KEY) {
-#ifdef __HAIKU__
 			BMessage message(B_REFS_RECEIVED);
 			message.AddBool(&quot;silent&quot;, true);
 
@@ -3400,41 +3402,6 @@
 
 			be_roster-&gt;Launch(&quot;application/x-vnd.haiku-screenshot&quot;, &amp;message);
 			return true;
-#else
-			// Get filename
-			BPath homePath;
-
-			if (find_directory(B_USER_DIRECTORY, &amp;homePath) != B_OK) {
-				fprintf(stderr, &quot;failed to find user home directory\n&quot;);
-				return true;
-			}
-
-			BPath path;
-			BEntry entry;
-			int32 index = 1;
-			do {
-				char filename[32];
-				sprintf(filename, &quot;screen%ld.png&quot;, index++);
-				path = homePath;
-				path.Append(filename);
-				entry.SetTo(path.Path());
-			} while (entry.Exists());
-
-			// Get the screen bitmap
-			BScreen screen(this);
-			BBitmap* screenDump;
-			screen.GetBitmap(&amp;screenDump, false);
-
-			// Dump to PNG
-			SaveToPNG(path.Path(), screen.Frame(), screenDump-&gt;ColorSpace(),
-				screenDump-&gt;Bits(),
-				screenDump-&gt;BitsLength(),
-				screenDump-&gt;BytesPerRow());
-
-			// Free the bitmap allocated by BScreen.GetBitmap
-			delete screenDump;
-#endif
-			return true;
 		}
 	}
 
@@ -3499,11 +3466,11 @@
 void
 BWindow::_KeyboardNavigation()
 {
-	BMessage *message = CurrentMessage();
+	BMessage* message = CurrentMessage();
 	if (message == NULL)
 		return;
 
-	const char *bytes;
+	const char* bytes;
 	uint32 modifiers;
 	if (message-&gt;FindString(&quot;bytes&quot;, &amp;bytes) != B_OK
 		|| bytes[0] != B_TAB)
@@ -3511,7 +3478,7 @@
 
 	message-&gt;FindInt32(&quot;modifiers&quot;, (int32*)&amp;modifiers);
 
-	BView *nextFocus;
+	BView* nextFocus;
 	int32 jumpGroups = modifiers &amp; B_CONTROL_KEY ? B_NAVIGABLE_JUMP : B_NAVIGABLE;
 	if (modifiers &amp; B_SHIFT_KEY)
 		nextFocus = _FindPreviousNavigable(fFocus, jumpGroups);
@@ -3524,14 +3491,14 @@
 }
 
 
-BMessage *
-BWindow::ConvertToMessage(void *raw, int32 code)
+BMessage*
+BWindow::ConvertToMessage(void* raw, int32 code)
 {
 	return BLooper::ConvertToMessage(raw, code);
 }
 
 

[... truncated: 48 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018304.html">[Haiku-commits] r31796 -	haiku/branches/components/gsoc-locale-kit/src/libs/icu/source/data
</A></li>
	<LI>Next message: <A HREF="018306.html">[Haiku-commits] r31798 - haiku/trunk/src/apps/deskbar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18305">[ date ]</a>
              <a href="thread.html#18305">[ thread ]</a>
              <a href="subject.html#18305">[ subject ]</a>
              <a href="author.html#18305">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
