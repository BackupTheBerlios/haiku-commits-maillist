<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r31643 - haiku/trunk/3rdparty/mmu_man/onlinedemo
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31643%20-%20haiku/trunk/3rdparty/mmu_man/onlinedemo&In-Reply-To=%3C200907192002.n6JK2wb5026258%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018102.html">
   <LINK REL="Next"  HREF="018108.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r31643 - haiku/trunk/3rdparty/mmu_man/onlinedemo</H1>
    <B>mmu_man at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r31643%20-%20haiku/trunk/3rdparty/mmu_man/onlinedemo&In-Reply-To=%3C200907192002.n6JK2wb5026258%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r31643 - haiku/trunk/3rdparty/mmu_man/onlinedemo">mmu_man at mail.berlios.de
       </A><BR>
    <I>Sun Jul 19 22:02:58 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018102.html">[Haiku-commits] r31642 - in haiku/vendor/bind: . 9.6.1 9.6.1/bin 9.6.1/bin/check 9.6.1/bin/check/win32 9.6.1/bin/dig 9.6.1/bin/dig/include 9.6.1/bin/dig/include/dig 9.6.1/bin/dig/win32 9.6.1/bin/dnssec 9.6.1/bin/dnssec/win32 9.6.1/bin/named 9.6.1/bin/named/include 9.6.1/bin/named/include/named 9.6.1/bin/named/unix 9.6.1/bin/named/unix/include 9.6.1/bin/named/unix/include/named 9.6.1/bin/named/win32 9.6.1/bin/named/win32/include 9.6.1/bin/named/win32/include/named 9.6.1/bin/nsupdate 9.6.1/bin/nsupdate/win32 9.6.1/bin/rndc 9.6.1/bin/rndc/include 9.6.1/bin/rndc/include/rndc 9.6.1/bin/rndc/unix 9.6.1/bin/rndc/win32 9.6.1/bin/tests 9.6.1/bin/tests/db 9.6.1/bin/tests/dst 9.6.1/bin/tests/master 9.6.1/bin/tests/mem 9.6.1/bin/tests/names 9.6.1/bin/tests/net 9.6.1/bin/tests/rbt 9.6.1/bin/tests/sockaddr 9.6.1/bin/tests/system 9.6.1/bin/tests/system/acl 9.6.1/bin/tests/system/acl/ns2 9.6.1/bin/tests/system/cacheclean 9.6.1/bin/tests/system/cacheclean/ns1 9.6.1/bin/tests/system/cacheclean/ns2 9! .6.1/bin/tests/system/checkconf 9.6.1/bin/tests/system/checknames 9.6.1/bin/tests/system/checknames/ns1 9.6.1/bin/tests/system/checknames/ns2 9.6.1/bin/tests/system/checknames/ns3 9.6.1/bin/tests/system/common 9.6.1/bin/tests/system/dialup 9.6.1/bin/tests/system/dialup/ns1 9.6.1/bin/tests/system/dialup/ns2 9.6.1/bin/tests/system/dialup/ns3 9.6.1/bin/tests/system/dlv 9.6.1/bin/tests/system/dlv/ns1 9.6.1/bin/tests/system/dlv/ns2 9.6.1/bin/tests/system/dlv/ns3 9.6.1/bin/tests/system/dlv/ns4 9.6.1/bin/tests/system/dlv/ns5 9.6.1/bin/tests/system/dnssec 9.6.1/bin/tests/system/dnssec/ns1 9.6.1/bin/tests/system/dnssec/ns2 9.6.1/bin/tests/system/dnssec/ns3 9.6.1/bin/tests/system/dnssec/ns4 9.6.1/bin/tests/system/dnssec/ns5 9.6.1/bin/tests/system/dnssec/ns6 9.6.1/bin/tests/system/dnssec/ns7 9.6.1/bin/tests/system/forward 9.6.1/bin/tests/system/forward/ns1 9.6.1/bin/tests/system/forward/ns2 9.6.1/bin/tests/system/forward/ns3 9.6.1/bin/tests/system/forward/ns4 9.6.1/bin/tests/system/gl! ue 9.6.1/bin/tests/system/glue/ns1 9.6.1/bin/tests/system/ixfr! 9.6.1/b
</A></li>
        <LI>Next message: <A HREF="018108.html">[Haiku-commits] r31644 - haiku/trunk/3rdparty/mmu_man/onlinedemo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18107">[ date ]</a>
              <a href="thread.html#18107">[ thread ]</a>
              <a href="subject.html#18107">[ subject ]</a>
              <a href="author.html#18107">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mmu_man
Date: 2009-07-19 22:02:58 +0200 (Sun, 19 Jul 2009)
New Revision: 31643
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=31643&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=31643&amp;view=rev</A>

Modified:
   haiku/trunk/3rdparty/mmu_man/onlinedemo/haiku.php
Log:
- cleaner way to scroll to the applet,
- include a config file if exists to avoid committing config stuff.


Modified: haiku/trunk/3rdparty/mmu_man/onlinedemo/haiku.php
===================================================================
--- haiku/trunk/3rdparty/mmu_man/onlinedemo/haiku.php	2009-07-19 14:41:59 UTC (rev 31642)
+++ haiku/trunk/3rdparty/mmu_man/onlinedemo/haiku.php	2009-07-19 20:02:58 UTC (rev 31643)
@@ -8,6 +8,12 @@
 // parts inspired by the Free Live OS Zoo
 // <A HREF="http://www.oszoo.org/wiki/index.php/Free_Live_OS_Zoo">http://www.oszoo.org/wiki/index.php/Free_Live_OS_Zoo</A>
 
+
+// include local configuration that possibly overrides defines below.
+if (file_exists('haiku.conf.php'))
+	include('haiku.conf.php');
+
+
 // name of the page
 define(&quot;PAGE_TITLE&quot;, &quot;Haiku Online Demo&quot;);
 
@@ -58,17 +64,19 @@
 define(&quot;QEMU_ARGS&quot;, &quot;&quot;
 	.&quot;-daemonize &quot; /* detach from stdin */
 	.&quot;-localtime &quot; /* not UTC */
-	.&quot;-name '&quot; . PAGE_TITLE . &quot;' &quot;
+	.&quot;-name '&quot; . addslashes(PAGE_TITLE) . &quot;' &quot;
 	.&quot;-monitor /dev/null &quot;
 	.&quot;-serial none &quot;
 	.&quot;-parallel none &quot;
-	.&quot; -net none &quot;
+	.&quot;-net none &quot;
 	.&quot;-usbdevice wacom-tablet &quot;
 	.&quot;-vga vmware &quot;
-	.&quot;-snapshot&quot;);
+	.&quot;-snapshot &quot;);
 
 // absolute path to the image.
-define(&quot;QEMU_IMAGE_PATH&quot;,&quot;/home/revol/haiku/trunk/generated.x86/haiku.image&quot;);
+define(&quot;QEMU_IMAGE_PATH&quot;, &quot;/home/revol/haiku.image&quot;);
+// BAD: let's one download the image
+//define(&quot;QEMU_IMAGE_PATH&quot;, dirname($_SERVER['SCRIPT_FILENAME']) . &quot;/haiku.image&quot;);
 // qemu 0.8.2 needs &quot;&quot;, qemu 0.9.1 needs &quot;:&quot;
 define(&quot;QEMU_VNC_PREFIX&quot;, &quot;:&quot;);
 
@@ -81,12 +89,15 @@
 
 // uncomment if you want to pass your Sonix webcam device through
 // migth need to update VID:PID
+// doesnt really work yet
 //define(&quot;QEMU_USB_PASSTHROUGH&quot;, &quot;-usbdevice host:0c45:6005&quot;);
 
 
 define(&quot;BGCOLOR&quot;, &quot;#336698&quot;);
 
 
+
+
 $vnckeymap = &quot;en-us&quot;;
 
 $cpucount = 1;
@@ -643,7 +654,7 @@
 	// scroll to the top of the applet
 	echo &quot;&lt;script&gt;\n&quot;;
 	echo &quot;&lt;!--\n&quot;;
-	echo &quot;window.location.hash = \&quot;haiku_online_applet\&quot;;&quot;;
+	echo &quot;scrollToAnchor(\&quot;haiku_online_applet\&quot;);&quot;;
 	echo &quot;//--&gt;&lt;/script&gt;\n&quot;;
 	ob_flush();
 	flush();
@@ -729,6 +740,17 @@
 function onPageUnload() {
 	//window.open(&quot;&lt;?php echo $_SERVER[&quot;SCRIPT_NAME&quot;] . &quot;?close&quot;; ?&gt;&quot;, &quot;closing&quot;, &quot;width=100,height=30,location=no,menubar=no,toolbar=no,scrollbars=no&quot;);
 }
+
+function scrollToAnchor(anchor) {
+  var a = document.anchors[anchor];
+  if (a) {
+    if (a.scrollIntoView)
+      a.scrollIntoView(true);
+    else if (a.focus)
+      a.focus();
+  } else
+    window.location.hash = anchor;
+}
 &lt;/script&gt;
 &lt;/head&gt;
 &lt;?php


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018102.html">[Haiku-commits] r31642 - in haiku/vendor/bind: . 9.6.1 9.6.1/bin 9.6.1/bin/check 9.6.1/bin/check/win32 9.6.1/bin/dig 9.6.1/bin/dig/include 9.6.1/bin/dig/include/dig 9.6.1/bin/dig/win32 9.6.1/bin/dnssec 9.6.1/bin/dnssec/win32 9.6.1/bin/named 9.6.1/bin/named/include 9.6.1/bin/named/include/named 9.6.1/bin/named/unix 9.6.1/bin/named/unix/include 9.6.1/bin/named/unix/include/named 9.6.1/bin/named/win32 9.6.1/bin/named/win32/include 9.6.1/bin/named/win32/include/named 9.6.1/bin/nsupdate 9.6.1/bin/nsupdate/win32 9.6.1/bin/rndc 9.6.1/bin/rndc/include 9.6.1/bin/rndc/include/rndc 9.6.1/bin/rndc/unix 9.6.1/bin/rndc/win32 9.6.1/bin/tests 9.6.1/bin/tests/db 9.6.1/bin/tests/dst 9.6.1/bin/tests/master 9.6.1/bin/tests/mem 9.6.1/bin/tests/names 9.6.1/bin/tests/net 9.6.1/bin/tests/rbt 9.6.1/bin/tests/sockaddr 9.6.1/bin/tests/system 9.6.1/bin/tests/system/acl 9.6.1/bin/tests/system/acl/ns2 9.6.1/bin/tests/system/cacheclean 9.6.1/bin/tests/system/cacheclean/ns1 9.6.1/bin/tests/system/cacheclean/ns2 9! .6.1/bin/tests/system/checkconf 9.6.1/bin/tests/system/checknames 9.6.1/bin/tests/system/checknames/ns1 9.6.1/bin/tests/system/checknames/ns2 9.6.1/bin/tests/system/checknames/ns3 9.6.1/bin/tests/system/common 9.6.1/bin/tests/system/dialup 9.6.1/bin/tests/system/dialup/ns1 9.6.1/bin/tests/system/dialup/ns2 9.6.1/bin/tests/system/dialup/ns3 9.6.1/bin/tests/system/dlv 9.6.1/bin/tests/system/dlv/ns1 9.6.1/bin/tests/system/dlv/ns2 9.6.1/bin/tests/system/dlv/ns3 9.6.1/bin/tests/system/dlv/ns4 9.6.1/bin/tests/system/dlv/ns5 9.6.1/bin/tests/system/dnssec 9.6.1/bin/tests/system/dnssec/ns1 9.6.1/bin/tests/system/dnssec/ns2 9.6.1/bin/tests/system/dnssec/ns3 9.6.1/bin/tests/system/dnssec/ns4 9.6.1/bin/tests/system/dnssec/ns5 9.6.1/bin/tests/system/dnssec/ns6 9.6.1/bin/tests/system/dnssec/ns7 9.6.1/bin/tests/system/forward 9.6.1/bin/tests/system/forward/ns1 9.6.1/bin/tests/system/forward/ns2 9.6.1/bin/tests/system/forward/ns3 9.6.1/bin/tests/system/forward/ns4 9.6.1/bin/tests/system/gl! ue 9.6.1/bin/tests/system/glue/ns1 9.6.1/bin/tests/system/ixfr! 9.6.1/b
</A></li>
	<LI>Next message: <A HREF="018108.html">[Haiku-commits] r31644 - haiku/trunk/3rdparty/mmu_man/onlinedemo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18107">[ date ]</a>
              <a href="thread.html#18107">[ thread ]</a>
              <a href="subject.html#18107">[ subject ]</a>
              <a href="author.html#18107">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
