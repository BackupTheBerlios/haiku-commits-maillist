<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r22899 - in haiku/trunk/src/apps: . 3dmov
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-November/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r22899%20-%20in%20haiku/trunk/src/apps%3A%20.%203dmov&In-Reply-To=%3C200711111456.lABEuOv0030109%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004717.html">
   <LINK REL="Next"  HREF="004719.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r22899 - in haiku/trunk/src/apps: . 3dmov</H1>
    <B>mmu_man at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r22899%20-%20in%20haiku/trunk/src/apps%3A%20.%203dmov&In-Reply-To=%3C200711111456.lABEuOv0030109%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r22899 - in haiku/trunk/src/apps: . 3dmov">mmu_man at mail.berlios.de
       </A><BR>
    <I>Sun Nov 11 15:56:24 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004717.html">[Haiku-commits] r22898 - haiku/trunk/src/add-ons/translators/stxt
</A></li>
        <LI>Next message: <A HREF="004719.html">[Haiku-commits] r22899 - in haiku/trunk/src/apps: . 3dmov
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4718">[ date ]</a>
              <a href="thread.html#4718">[ thread ]</a>
              <a href="subject.html#4718">[ subject ]</a>
              <a href="author.html#4718">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mmu_man
Date: 2007-11-11 15:56:22 +0100 (Sun, 11 Nov 2007)
New Revision: 22899
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=22899&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=22899&amp;view=rev</A>

Added:
   haiku/trunk/src/apps/3dmov/
   haiku/trunk/src/apps/3dmov/3dmov.rdef
   haiku/trunk/src/apps/3dmov/CubeView.cpp
   haiku/trunk/src/apps/3dmov/CubeView.h
   haiku/trunk/src/apps/3dmov/GLMovApp.cpp
   haiku/trunk/src/apps/3dmov/GLMovApp.h
   haiku/trunk/src/apps/3dmov/GLMovMessages.h
   haiku/trunk/src/apps/3dmov/GLMovStrings.h
   haiku/trunk/src/apps/3dmov/GLMovView.cpp
   haiku/trunk/src/apps/3dmov/GLMovView.h
   haiku/trunk/src/apps/3dmov/GLMovWindow.cpp
   haiku/trunk/src/apps/3dmov/GLMovWindow.h
   haiku/trunk/src/apps/3dmov/Jamfile
   haiku/trunk/src/apps/3dmov/makefile
Log:
A canvas for a reimplementation of the memorable 3DMov demo, this time using OpenGL and the Media Kit.
Stippi, an HVIF icon please ;)


Added: haiku/trunk/src/apps/3dmov/3dmov.rdef
===================================================================
--- haiku/trunk/src/apps/3dmov/3dmov.rdef	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/3dmov.rdef	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,93 @@
+/*
+** /Data/haiku/trunk/src/apps/3dmov/3dmov.rdef
+**
+** Automatically generated by BResourceParser on
+** Tuesday, May 08, 2007 at 16:24:02.
+**
+*/
+
+resource(1, &quot;BEOS:APP_FLAGS&quot;) (#'APPF') $&quot;00000000&quot;;
+
+resource(1, &quot;BEOS:APP_VERSION&quot;) #'APPV' array {
+	$&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
+	$&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
+	$&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
+	$&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
+	$&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
+	$&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
+	$&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
+	$&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
+	$&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
+	$&quot;0000000000000000000000000000000000000000000000000000000000000000&quot;
+	$&quot;000000000000000000000000000000000000000080031200FC105760EC111000&quot;
+	$&quot;EC088BC800000000FC1057808003220080052980800294408000600380032200&quot;
+	$&quot;8005298000000002FC1057C0FC105A7C000000018003E7800000000280032200&quot;
+	$&quot;800529808002944080006003EC02ECB88005298000000000FC1057D0EC111000&quot;
+	$&quot;EC01BE200000000200000000FC105A7C000000018003E7800000000280006003&quot;
+	$&quot;000000028001DEE88001DEF8EC02ECB88004B38000000000FC1058108003E780&quot;
+	$&quot;EC01BE20EC02ECB8FC105810EC111000EC01BE7C00000001FC10582000000000&quot;
+	$&quot;EC02ECBCFFFFFFFFEC05B434FC1058B88005298080029440FC10585080019244&quot;
+	$&quot;FC1059B8EC02ECB8FC105850EC111000EC01BE7C8002A680FC105870EC111000&quot;
+	$&quot;80052980FFFFFFFFEC05B434FC10593800000004000201DC800060038003E780&quot;
+	$&quot;8005298000000000FC105890420C0000EC019C080000010043300000EC111000&quot;
+	$&quot;8004B38000000000&quot;
+};
+
+resource(101, &quot;BEOS:L:STD_ICON&quot;) #'ICON' array {
+	$&quot;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00FFFFFFFFFFFFFFFFFF&quot;
+	$&quot;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF005D00FFFFFFFFFFFFFFFF&quot;
+	$&quot;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF005D5D00FFFFFFFFFFFFFFFF&quot;
+	$&quot;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF005D5D5D00FFFFFFFFFFFFFFFF&quot;
+	$&quot;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF003F5D5D5D5D00FFFFFFFFFFFFFF&quot;
+	$&quot;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF003F5D5D5D5D00FFFFFFFFFFFFFF&quot;
+	$&quot;FFFFFFFF000000FFFFFFFFFFFFFFFFFFFF00FA3F5D5D5D5D5D00FFFFFFFFFFFF&quot;
+	$&quot;FFFFFF005E5E5E0000FFFFFFFFFFFFFFFF00FA3F5D5D5D5D5D00FFFFFFFFFFFF&quot;
+	$&quot;FFFF005E5E5E5E5E5E0000FFFFFFFFFF00FAFA3F5D5D5D5D5D00FFFFFFFFFFFF&quot;
+	$&quot;FF005E5E5E5E5E5E5E5E5E00FFFFFFFF00FAFAFA3F5D5D5D5D5D00FFFFFFFFFF&quot;
+	$&quot;005E5E5E5E5E5E5E5E5EB200FFFFFF00FAFAFAFA3F5D5D5D5D5D00FFFFFFFFFF&quot;
+	$&quot;00B2B25E5E5E5E5E5EB22100FFFF00FAFAFAFAFA3F5D5D5D5D5D5D00FFFFFFFF&quot;
+	$&quot;002121B2B25E5E5EB2212400FFFF00FAFAFAFAFAFA3F5D5D5D5D5D00FFFFFFFF&quot;
+	$&quot;0021212021B2B2B221242500FF00FAFAFAFAFAFAFA3F5D5D5D5D5D5D00FFFFFF&quot;
+	$&quot;002121202121BE2124252500FF00FAFAFAFAFAFAFAFA3F5D5D5D5D5D00FFFFFF&quot;
+	$&quot;002121202121BE212425250000FAFAFAFAFAFAFAFAFA3F5D5D5D5D5D00FFFFFF&quot;
+	$&quot;002121202121BE212425250000FAFAFAFAFAFAFAFAFA3F5D5D5D5D5D5D00FFFF&quot;
+	$&quot;002121202121BE2124252500FF0000FAFAFA00000000003F5D5D5D5D5D0011FF&quot;
+	$&quot;002121202121BE2124252500FFFFFF0000002FEB2F302F00005D5D5D5D001111&quot;
+	$&quot;002121202121BE2124252500FFFFFF002F2B2B2B2D2D2F302F005D5D00111111&quot;
+	$&quot;002121202121BE2124252500FFFF002F2B2A2B2A2C2C2BEB2F2F0000111111FF&quot;
+	$&quot;002121202121BE2124252500FFFF002B2B2B2A2B2B2B2D2D2F2F00111111FFFF&quot;
+	$&quot;002121202121BE2124252500FF002F2B2B2A5A2B2B2B2C2D2DEB3000FFFFFFFF&quot;
+	$&quot;002121202121BE212425250011002F2B2B5A3F5A2B2C2C2D2D2F2F00FFFFFFFF&quot;
+	$&quot;002121202121BE212425250011002F2C2C2A5A2C2B2C2C2DEB2F2F00FFFFFFFF&quot;
+	$&quot;002121202121BE21242500111100302E2B2C2B2B2C2C2D2CEB2F2F0011FFFFFF&quot;
+	$&quot;FF0000212120BE2124001111FF002F2F2D2C2C2C2C2D2D2E2EEB30001111FFFF&quot;
+	$&quot;FFFFFF000021BE21001111FFFFFF00302D2D2D2C2D2DEBEB2F2F00111111FFFF&quot;
+	$&quot;FFFFFFFFFF0000001111FFFFFFFF00302EEBEBEBEBEBEB2FEB3000111111FFFF&quot;
+	$&quot;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00302F2FEB2FEB2F2F2F0011111111FFFF&quot;
+	$&quot;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0000302F2F302F000011111111FFFFFF&quot;
+	$&quot;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000011111111FFFFFFFFFF&quot;
+};
+
+resource(101, &quot;BEOS:M:STD_ICON&quot;) #'MICN' array {
+	$&quot;FFFFFFFFFFFFFFFFFFFFFF0000FFFFFF&quot;
+	$&quot;FFFFFFFFFFFFFFFFFFFF005D5D00FFFF&quot;
+	$&quot;FFFF000000FFFFFFFF005D5D5D00FFFF&quot;
+	$&quot;FF005E5E5E00FFFF00FA5D5D5D00FFFF&quot;
+	$&quot;005E5E5E5E5E00FF00FAFA5D5D5D00FF&quot;
+	$&quot;00215E5E5E250000FAFAFA5D5D5D00FF&quot;
+	$&quot;0021212025250000FAFAFA5D5D5D5D00&quot;
+	$&quot;00202121242500FAFAFAFAFA5D5D5D00&quot;
+	$&quot;00212021252400FAFA000000005D5D00&quot;
+	$&quot;00212120252500FA002B2D2F30000000&quot;
+	$&quot;00202121242500002B2B2B2D2D2F0011&quot;
+	$&quot;00212021252400002B5A2C2C2D2F00FF&quot;
+	$&quot;00212120250000002D2B2B2D2D2F0011&quot;
+	$&quot;00002120001111002F2E2C2E2E2F0011&quot;
+	$&quot;FFFF00001111FFFF0030EB2F2F001111&quot;
+	$&quot;FFFFFFFFFFFFFFFFFF00000000111111&quot;
+};
+
+resource(1, &quot;BEOS:APP_SIG&quot;) (#'MIMS') &quot;application/x-vnd.Haiku-3DMov&quot;;
+
+resource(1, &quot;BEOS:FILE_TYPES&quot;) message { };
+

Added: haiku/trunk/src/apps/3dmov/CubeView.cpp
===================================================================
--- haiku/trunk/src/apps/3dmov/CubeView.cpp	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/CubeView.cpp	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,35 @@
+/*
+  -----------------------------------------------------------------------------
+
+	File:	CubeView.cpp
+	
+	Date:	10/20/2004
+
+	Description:	3DMov reloaded...
+	
+	Author:	Fran&#231;ois Revol.
+	
+	
+	Copyright 2004, yellowTAB GmbH, All rights reserved.
+	
+
+  -----------------------------------------------------------------------------
+*/
+
+#include &lt;opengl/GL/gl.h&gt;
+#include &lt;opengl/GL/glu.h&gt;
+#include &quot;CubeView.h&quot;
+
+CubeView::CubeView(BRect frame)
+	: GLMovView(frame)
+{
+}
+
+CubeView::~CubeView()
+{
+}
+
+void CubeView::AttachedToWindow()
+{
+	
+}

Added: haiku/trunk/src/apps/3dmov/CubeView.h
===================================================================
--- haiku/trunk/src/apps/3dmov/CubeView.h	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/CubeView.h	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,32 @@
+/*
+  -----------------------------------------------------------------------------
+
+	File:	CubeView.h
+	
+	Date:	10/20/2004
+
+	Description:	3DMov reloaded...
+	
+	Author:	Fran&#231;ois Revol.
+	
+	
+	Copyright 2004, yellowTAB GmbH, All rights reserved.
+	
+
+  -----------------------------------------------------------------------------
+*/
+#ifndef _CUBEVIEW_H
+#define _CUBEVIEW_H
+
+#include &quot;GLMovView.h&quot;
+
+class CubeView: public GLMovView
+{
+	public:
+					CubeView(BRect frame);
+					~CubeView();
+	virtual void	AttachedToWindow();
+	
+};
+
+#endif /* _CUBEVIEW_H */

Added: haiku/trunk/src/apps/3dmov/GLMovApp.cpp
===================================================================
--- haiku/trunk/src/apps/3dmov/GLMovApp.cpp	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/GLMovApp.cpp	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,54 @@
+/*
+  -----------------------------------------------------------------------------
+
+	File:	GLMovApp.cpp
+	
+	Date:	10/20/2004
+
+	Description:	3DMov reloaded...
+	
+	Author:	Fran&#231;ois Revol.
+	
+	
+	Copyright 2004, yellowTAB GmbH, All rights reserved.
+	
+
+  -----------------------------------------------------------------------------
+*/
+
+#include &lt;Alert.h&gt;
+#include &quot;GLMovApp.h&quot;
+#include &quot;GLMovStrings.h&quot;
+#include &quot;GLMovWindow.h&quot;
+
+GLMovApp::GLMovApp()
+	: BApplication(&quot;application/x-vnd.Be-3DM2&quot;)
+{
+}
+
+GLMovApp::~GLMovApp()
+{
+}
+
+void GLMovApp::ReadyToRun()
+{
+	GLMovWindow *win = GLMovWindow::MakeWindow(OBJ_CUBE);
+}
+
+void GLMovApp::AboutRequested()
+{
+	BAlert *alert;
+	alert = new BAlert(&quot;about&quot;, STR_ABOUT_TEXT, STR_OK);
+	alert-&gt;Go(NULL);
+}
+
+void GLMovApp::MessageReceived(BMessage *message)
+{
+}
+
+int main(int argc, char **argv)
+{
+	GLMovApp app;
+	app.Run();
+	return 0;
+}

Added: haiku/trunk/src/apps/3dmov/GLMovApp.h
===================================================================
--- haiku/trunk/src/apps/3dmov/GLMovApp.h	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/GLMovApp.h	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,34 @@
+/*
+  -----------------------------------------------------------------------------
+
+	File:	GLMovApp.h
+	
+	Date:	10/20/2004
+
+	Description:	3DMov reloaded...
+	
+	Author:	Fran&#231;ois Revol.
+	
+	
+	Copyright 2004, yellowTAB GmbH, All rights reserved.
+	
+
+  -----------------------------------------------------------------------------
+*/
+#ifndef _GLMOVAPP_H
+#define _GLMOVAPP_H
+
+#include &lt;Application.h&gt;
+
+class GLMovApp: public BApplication
+{
+	public:
+					GLMovApp();
+					~GLMovApp();
+	virtual void	ReadyToRun();
+	virtual void	AboutRequested();
+	virtual void	MessageReceived(BMessage *message);
+	
+};
+
+#endif /* _GLMOVAPP_H */

Added: haiku/trunk/src/apps/3dmov/GLMovMessages.h
===================================================================
--- haiku/trunk/src/apps/3dmov/GLMovMessages.h	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/GLMovMessages.h	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,27 @@
+/*
+  -----------------------------------------------------------------------------
+
+	File:	GLMovStrings.h
+	
+	Date:	10/20/2004
+
+	Description:	3DMov reloaded...
+	
+	Author:	Fran&#231;ois Revol.
+	
+	
+	Copyright 2004, yellowTAB GmbH, All rights reserved.
+	
+
+  -----------------------------------------------------------------------------
+*/
+#ifndef _GLMOVMESSAGES_H
+#define _GLMOVMESSAGES_H
+
+#define MSG_OBJ1	'Obj1'
+#define MSG_OBJ2	'Obj2'
+#define MSG_OBJ3	'Obj3'
+#define MSG_OBJ4	'Obj4'
+#define MSG_PAUSE	'Paus'
+
+#endif /* _GLMOVMESSAGES_H */

Added: haiku/trunk/src/apps/3dmov/GLMovStrings.h
===================================================================
--- haiku/trunk/src/apps/3dmov/GLMovStrings.h	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/GLMovStrings.h	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,36 @@
+/*
+  -----------------------------------------------------------------------------
+
+	File:	GLMovStrings.h
+	
+	Date:	10/20/2004
+
+	Description:	3DMov reloaded...
+	
+	Author:	Fran&#231;ois Revol.
+	
+	
+	Copyright 2004, yellowTAB GmbH, All rights reserved.
+	
+
+  -----------------------------------------------------------------------------
+*/
+#ifndef _GLMOVSTRINGS_H
+#define _GLMOVSTRINGS_H
+
+#define STR_ABOUT_TEXT &quot;3DMov reloaded.\n\n Demonstrates OpenGL and the Media Kit.&quot;
+#define STR_OK &quot;Ok&quot;
+
+#define STR_MENU &quot;File&quot; //not really related.... &quot;Object&quot; ?
+
+#define STR_CUBE &quot;Cube&quot;
+#define STR_SPHERE &quot;Sphere&quot;
+#define STR_PULSE &quot;Pulse&quot;
+#define STR_BOOK &quot;Book&quot;
+
+#define STR_PAUSE &quot;Pause&quot;
+#define STR_CLOSE &quot;Close&quot;
+#define STR_ABOUT &quot;About 3dMov&quot;
+#define STR_QUIT &quot;Quit&quot;
+
+#endif /* _GLMOVSTRINGS_H */

Added: haiku/trunk/src/apps/3dmov/GLMovView.cpp
===================================================================
--- haiku/trunk/src/apps/3dmov/GLMovView.cpp	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/GLMovView.cpp	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,35 @@
+/*
+  -----------------------------------------------------------------------------
+
+	File:	GLMovView.cpp
+	
+	Date:	10/20/2004
+
+	Description:	3DMov reloaded...
+	
+	Author:	Fran&#231;ois Revol.
+	
+	
+	Copyright 2004, yellowTAB GmbH, All rights reserved.
+	
+
+  -----------------------------------------------------------------------------
+*/
+
+#include &lt;opengl/GL/gl.h&gt;
+#include &lt;opengl/GL/glu.h&gt;
+#include &quot;GLMovView.h&quot;
+
+GLMovView::GLMovView(BRect frame)
+	: BGLView(frame, &quot;glview&quot;, B_FOLLOW_ALL, B_WILL_DRAW, BGL_RGB|BGL_DOUBLE)
+{
+}
+
+GLMovView::~GLMovView()
+{
+}
+
+void GLMovView::AttachedToWindow()
+{
+	
+}

Added: haiku/trunk/src/apps/3dmov/GLMovView.h
===================================================================
--- haiku/trunk/src/apps/3dmov/GLMovView.h	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/GLMovView.h	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,40 @@
+/*
+  -----------------------------------------------------------------------------
+
+	File:	GLMovView.h
+	
+	Date:	10/20/2004
+
+	Description:	3DMov reloaded...
+	
+	Author:	Fran&#231;ois Revol.
+	
+	
+	Copyright 2004, yellowTAB GmbH, All rights reserved.
+	
+
+  -----------------------------------------------------------------------------
+*/
+#ifndef _GLMOVVIEW_H
+#define _GLMOVVIEW_H
+
+#include &lt;GLView.h&gt;
+#include &lt;MediaFile.h&gt;
+
+class GLMovView: public BGLView
+{
+	public:
+					GLMovView(BRect frame);
+					~GLMovView();
+	virtual void	AttachedToWindow();
+	
+	// for mouse control
+	virtual void	MouseDown(BPoint where);
+	virtual void	MouseUp(BPoint where);
+	virtual void	MouseMoved(BPoint where, uint32 code, const BMessage *a_message);
+	
+	//
+	virtual void	FileDropped(BPoint where, BMediaFile *file);
+};
+
+#endif /* _GLMOVVIEW_H */

Added: haiku/trunk/src/apps/3dmov/GLMovWindow.cpp
===================================================================
--- haiku/trunk/src/apps/3dmov/GLMovWindow.cpp	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/GLMovWindow.cpp	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,126 @@
+/*
+  -----------------------------------------------------------------------------
+
+	File:	GLMovWindow.cpp
+	
+	Date:	10/20/2004
+
+	Description:	3DMov reloaded...
+	
+	Author:	Fran&#231;ois Revol.
+	
+	
+	Copyright 2004, yellowTAB GmbH, All rights reserved.
+	
+
+  -----------------------------------------------------------------------------
+*/
+
+#include &lt;Application.h&gt;
+#include &lt;MenuBar.h&gt;
+#include &lt;MenuItem.h&gt;
+#include &quot;GLMovStrings.h&quot;
+#include &quot;GLMovMessages.h&quot;
+#include &quot;GLMovWindow.h&quot;
+#include &quot;GLMovView.h&quot;
+#include &quot;CubeView.h&quot;
+
+#include &lt;stdio.h&gt;
+
+GLMovWindow::GLMovWindow(GLMovView *view, BRect frame, const char *title)
+	: BDirectWindow(frame, title, B_TITLED_WINDOW_LOOK, B_NORMAL_WINDOW_FEEL, 0)
+{
+	fGLView = view;
+}
+
+GLMovWindow::~GLMovWindow()
+{
+}
+
+bool GLMovWindow::QuitRequested()
+{
+	be_app-&gt;Lock();
+	if (be_app-&gt;CountWindows() &lt; 2)
+		be_app_messenger.SendMessage(B_QUIT_REQUESTED);
+	be_app-&gt;Unlock();
+	return true;
+}
+
+void GLMovWindow::MessageReceived(BMessage *message)
+{
+	switch (message-&gt;what) {
+	case MSG_OBJ1:
+	case MSG_OBJ2:
+	case MSG_OBJ3:
+	case MSG_OBJ4:
+		MakeWindow((object_type)(OBJ_CUBE + message-&gt;what - MSG_OBJ1));
+		break;
+	case 'Paus':
+		break;
+	default:
+		BDirectWindow::MessageReceived(message);
+	}
+}
+
+void GLMovWindow::DirectConnected(direct_buffer_info *info)
+{
+	fGLView-&gt;DirectConnected(info);
+}
+
+
+GLMovWindow *GLMovWindow::MakeWindow(object_type obj)
+{
+	GLMovWindow *win;
+	GLMovView *view;
+	BMenuBar *bar;
+	BMenu *menu;
+	BMenuItem *menuItem;
+	BRect frame(0, 0, 400-1, 400-1);
+	const char *title = &quot;3dMov&quot;;
+
+	bar = new BMenuBar(frame, &quot;menu&quot;, B_FOLLOW_LEFT_RIGHT | B_FOLLOW_TOP, B_ITEMS_IN_ROW, true);
+	menu = new BMenu(STR_MENU);
+	menu-&gt;AddItem(new BMenuItem(STR_CUBE, new BMessage(MSG_OBJ1), '1'));
+	menu-&gt;AddItem(new BMenuItem(STR_SPHERE, new BMessage(MSG_OBJ2), '2'));
+	menu-&gt;AddItem(new BMenuItem(STR_PULSE, new BMessage(MSG_OBJ3), '3'));
+	menu-&gt;AddItem(new BMenuItem(STR_BOOK, new BMessage(MSG_OBJ4), '4'));
+	menu-&gt;AddItem(new BSeparatorItem);
+	menu-&gt;AddItem((menuItem = new BMenuItem(STR_PAUSE, new BMessage(MSG_PAUSE), 'P')));
+	menuItem-&gt;SetTarget(be_app_messenger);
+	menu-&gt;AddItem(new BMenuItem(STR_CLOSE, new BMessage(B_QUIT_REQUESTED), 'W'));
+	menu-&gt;AddItem(new BSeparatorItem);
+	menu-&gt;AddItem((menuItem = new BMenuItem(STR_ABOUT, new BMessage(B_ABOUT_REQUESTED))));
+	menuItem-&gt;SetTarget(be_app_messenger);
+	menu-&gt;AddItem((menuItem = new BMenuItem(STR_QUIT, new BMessage(B_QUIT_REQUESTED), 'Q')));
+	menuItem-&gt;SetTarget(be_app_messenger);
+	bar-&gt;AddItem(new BMenuItem(menu));
+	bar-&gt;ResizeToPreferred();
+	switch (obj) {
+	case OBJ_CUBE:
+	default:
+		view = new CubeView(frame.OffsetByCopy(0, bar-&gt;Bounds().Height()+1));
+		title = STR_CUBE;
+		break;
+	case OBJ_SPHERE:
+		view = new GLMovView(frame.OffsetByCopy(0, bar-&gt;Bounds().Height()+1));
+		title = STR_SPHERE;
+		break;
+	case OBJ_PULSE:
+		view = new GLMovView(frame.OffsetByCopy(0, bar-&gt;Bounds().Height()+1));
+		title = STR_PULSE;
+		break;
+	case OBJ_BOOK:
+		frame = BRect(0, 0, 600-1, 400-1);
+		view = new GLMovView(frame.OffsetByCopy(0, bar-&gt;Bounds().Height()+1));
+		title = STR_BOOK;
+		break;
+	}
+	view-&gt;SetViewColor(0,0,0);
+	frame.bottom += bar-&gt;Bounds().Height()+1;
+	frame.OffsetBySelf(50,50);
+	win = new GLMovWindow(view, frame, title);
+	win-&gt;AddChild(bar);
+	win-&gt;AddChild(view);
+	win-&gt;Show();
+	return win;
+}

Added: haiku/trunk/src/apps/3dmov/GLMovWindow.h
===================================================================
--- haiku/trunk/src/apps/3dmov/GLMovWindow.h	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/GLMovWindow.h	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,46 @@
+/*
+  -----------------------------------------------------------------------------
+
+	File:	GLMovWindow.h
+	
+	Date:	10/20/2004
+
+	Description:	3DMov reloaded...
+	
+	Author:	Fran&#231;ois Revol.
+	
+	
+	Copyright 2004, yellowTAB GmbH, All rights reserved.
+	
+
+  -----------------------------------------------------------------------------
+*/
+#ifndef _GLMOVWINDOW_H
+#define _GLMOVWINDOW_H
+
+#include &lt;DirectWindow.h&gt;
+
+class GLMovView;
+
+enum object_type {
+	OBJ_CUBE,
+	OBJ_SPHERE,
+	OBJ_PULSE,
+	OBJ_BOOK,
+};
+
+class GLMovWindow: public BDirectWindow
+{
+	public:
+					GLMovWindow(GLMovView *view, BRect frame, const char *title);
+					~GLMovWindow();
+	virtual bool	QuitRequested();
+	virtual void	MessageReceived(BMessage *message);
+	virtual void	DirectConnected(direct_buffer_info *info);
+	static GLMovWindow	*MakeWindow(object_type obj);
+
+	private:
+		GLMovView	*fGLView;
+};
+
+#endif /* _GLMOVWINDOW_H */

Added: haiku/trunk/src/apps/3dmov/Jamfile
===================================================================
--- haiku/trunk/src/apps/3dmov/Jamfile	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/Jamfile	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,12 @@
+SubDir HAIKU_TOP src apps 3dmov ;
+
+SetSubDirSupportedPlatformsBeOSCompatible ;
+
+Application 3DMov :
+	CubeView.cpp
+	GLMovApp.cpp
+	GLMovView.cpp
+	GLMovWindow.cpp
+	: be GL game
+	: 3dmov.rdef
+;

Added: haiku/trunk/src/apps/3dmov/makefile
===================================================================
--- haiku/trunk/src/apps/3dmov/makefile	2007-11-11 14:45:04 UTC (rev 22898)
+++ haiku/trunk/src/apps/3dmov/makefile	2007-11-11 14:56:22 UTC (rev 22899)
@@ -0,0 +1,120 @@
+## BeOS Generic Makefile v2.2 ##
+
+## Fill in this file to specify the project being created, and the referenced
+## makefile-engine will do all of the hard work for you.  This handles both
+## Intel and PowerPC builds of the BeOS.
+
+## Application Specific Settings ---------------------------------------------
+
+# specify the name of the binary
+NAME= 3DMov2
+
+# specify the type of binary
+#	APP:	Application
+#	SHARED:	Shared library or add-on
+#	STATIC:	Static library archive
+#	DRIVER: Kernel Driver
+TYPE= APP
+
+#	add support for new Pe and Eddie features
+#	to fill in generic makefile
+
+#%{
+# @src-&gt;@ 
+
+#	specify the source files to use
+#	full paths or paths relative to the makefile can be included
+# 	all files, regardless of directory, will have their object
+#	files created in the common object directory.
+#	Note that this means this makefile will not work correctly
+#	if two source files with the same name (source.c or source.cpp)
+#	are included from different directories.  Also note that spaces
+#	in folder names do not work well with this makefile.
+SRCS= $(wildcard *.cpp)
+
+#	specify the resource files to use
+#	full path or a relative path to the resource file can be used.
+RSRCS= 3dmov.rsrc
+
+# @&lt;-src@ 
+#%}
+
+#	end support for Pe and Eddie
+
+#	specify additional libraries to link against
+#	there are two acceptable forms of library specifications
+#	-	if your library follows the naming pattern of:
+#		libXXX.so or libXXX.a you can simply specify XXX
+#		library: libbe.so entry: be
+#		
+#	- 	if your library does not follow the standard library
+#		naming scheme you need to specify the path to the library
+#		and it's name
+#		library: my_lib.a entry: my_lib.a or path/my_lib.a
+LIBS= be game GL
+
+#	specify additional paths to directories following the standard
+#	libXXX.so or libXXX.a naming scheme.  You can specify full paths
+#	or paths relative to the makefile.  The paths included may not
+#	be recursive, so include all of the paths where libraries can
+#	be found.  Directories where source files are found are
+#	automatically included.
+LIBPATHS= 
+
+#	additional paths to look for system headers
+#	thes use the form: #include &lt;header&gt;
+#	source file directories are NOT auto-included here
+SYSTEM_INCLUDE_PATHS = 
+
+#	additional paths to look for local headers
+#	thes use the form: #include &quot;header&quot;
+#	source file directories are automatically included
+LOCAL_INCLUDE_PATHS = 
+
+#	specify the level of optimization that you desire
+#	NONE, SOME, FULL
+OPTIMIZE= 
+
+#	specify any preprocessor symbols to be defined.  The symbols will not
+#	have their values set automatically; you must supply the value (if any)
+#	to use.  For example, setting DEFINES to &quot;DEBUG=1&quot; will cause the
+#	compiler option &quot;-DDEBUG=1&quot; to be used.  Setting DEFINES to &quot;DEBUG&quot;
+#	would pass &quot;-DDEBUG&quot; on the compiler's command line.
+DEFINES= 
+
+#	specify special warning levels
+#	if unspecified default warnings will be used
+#	NONE = supress all warnings
+#	ALL = enable all warnings
+WARNINGS = 
+
+#	specify whether image symbols will be created
+#	so that stack crawls in the debugger are meaningful
+#	if TRUE symbols will be created
+SYMBOLS = 
+
+#	specify debug settings
+#	if TRUE will allow application to be run from a source-level
+#	debugger.  Note that this will disable all optimzation.
+DEBUGGER = 
+
+#	specify additional compiler flags for all files
+COMPILER_FLAGS =
+
+#	specify additional linker flags
+LINKER_FLAGS =
+
+#	specify the version of this particular item
+#	(for example, -app 3 4 0 d 0 -short 340 -long &quot;340 &quot;`echo -n -e '\302\251'`&quot;1999 GNU GPL&quot;) 
+#	This may also be specified in a resource.
+APP_VERSION = 
+
+#	(for TYPE == DRIVER only) Specify desired location of driver in the /dev
+#	hierarchy. Used by the driverinstall rule. E.g., DRIVER_PATH = video/usb will
+#	instruct the driverinstall rule to place a symlink to your driver's binary in
+#	~/add-ons/kernel/drivers/dev/video/usb, so that your driver will appear at
+#	/dev/video/usb when loaded. Default is &quot;misc&quot;.
+DRIVER_PATH = 
+
+## include the makefile-engine
+include $(BUILDHOME)/etc/makefile-engine


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004717.html">[Haiku-commits] r22898 - haiku/trunk/src/add-ons/translators/stxt
</A></li>
	<LI>Next message: <A HREF="004719.html">[Haiku-commits] r22899 - in haiku/trunk/src/apps: . 3dmov
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4718">[ date ]</a>
              <a href="thread.html#4718">[ thread ]</a>
              <a href="subject.html#4718">[ subject ]</a>
              <a href="author.html#4718">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
