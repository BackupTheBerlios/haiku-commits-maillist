<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r22948 - in	haiku/trunk/src/tests/system/libroot/posix/posixtestsuite: .	conformance/interfaces conformance/interfaces/difftime	conformance/interfaces/fork conformance/interfaces/kill	conformance/interfaces/sighold conformance/interfaces/sigignore	conformance/interfaces/signal conformance/interfaces/sigprocmask	conformance/interfaces/sigrelse conformance/interfaces/sigset	conformance/interfaces/sigsuspend
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-November/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r22948%20-%20in%0A%09haiku/trunk/src/tests/system/libroot/posix/posixtestsuite%3A%20.%0A%09conformance/interfaces%20conformance/interfaces/difftime%0A%09conformance/interfaces/fork%20conformance/interfaces/kill%0A%09conformance/interfaces/sighold%20conformance/interfaces/sigignore%0A%09conformance/interfaces/signal%20conformance/interfaces/sigprocmask%0A%09conformance/interfaces/sigrelse%20conformance/interfaces/sigset%0A%09conformance/interfaces/sigsuspend&In-Reply-To=%3C200711181644.lAIGipKE015645%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004783.html">
   <LINK REL="Next"  HREF="004785.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r22948 - in	haiku/trunk/src/tests/system/libroot/posix/posixtestsuite: .	conformance/interfaces conformance/interfaces/difftime	conformance/interfaces/fork conformance/interfaces/kill	conformance/interfaces/sighold conformance/interfaces/sigignore	conformance/interfaces/signal conformance/interfaces/sigprocmask	conformance/interfaces/sigrelse conformance/interfaces/sigset	conformance/interfaces/sigsuspend</H1>
    <B>bonefish at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r22948%20-%20in%0A%09haiku/trunk/src/tests/system/libroot/posix/posixtestsuite%3A%20.%0A%09conformance/interfaces%20conformance/interfaces/difftime%0A%09conformance/interfaces/fork%20conformance/interfaces/kill%0A%09conformance/interfaces/sighold%20conformance/interfaces/sigignore%0A%09conformance/interfaces/signal%20conformance/interfaces/sigprocmask%0A%09conformance/interfaces/sigrelse%20conformance/interfaces/sigset%0A%09conformance/interfaces/sigsuspend&In-Reply-To=%3C200711181644.lAIGipKE015645%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r22948 - in	haiku/trunk/src/tests/system/libroot/posix/posixtestsuite: .	conformance/interfaces conformance/interfaces/difftime	conformance/interfaces/fork conformance/interfaces/kill	conformance/interfaces/sighold conformance/interfaces/sigignore	conformance/interfaces/signal conformance/interfaces/sigprocmask	conformance/interfaces/sigrelse conformance/interfaces/sigset	conformance/interfaces/sigsuspend">bonefish at mail.berlios.de
       </A><BR>
    <I>Sun Nov 18 17:44:51 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004783.html">[Haiku-commits] r22947 - in haiku/trunk: headers/posix	src/system/libroot/posix/signal
</A></li>
        <LI>Next message: <A HREF="004785.html">[Haiku-commits] r22949 - haiku/trunk/headers/posix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4784">[ date ]</a>
              <a href="thread.html#4784">[ thread ]</a>
              <a href="subject.html#4784">[ subject ]</a>
              <a href="author.html#4784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: bonefish
Date: 2007-11-18 17:44:49 +0100 (Sun, 18 Nov 2007)
New Revision: 22948
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=22948&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=22948&amp;view=rev</A>

Added:
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/1-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/10-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/2-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/3-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/4-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/5-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/6-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/7-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/8-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/9-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/Jamfile
Modified:
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/Jamfile
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/difftime/1-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/12-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/3-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/4-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/6-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/8-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/9-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/kill/2-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/1-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/2-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/3-core-buildonly.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/1-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/4-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/5-core-buildonly.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/6-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/6-2.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/1-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/2-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/3-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/5-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/6-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/7-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/12-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-2.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-3.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/1-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/2-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/3-core-buildonly.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigsuspend/6-1.c
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/run_posix_tests.sh
Log:
Patch by Vasilis Kaoutsis:
* Added sigset() tests to the posix test suite (changes by me: fixed tests
  5, 6, and 7).
* Modified output to include the name of the test.


Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/Jamfile
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/Jamfile	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/Jamfile	2007-11-18 16:44:49 UTC (rev 22948)
@@ -12,4 +12,5 @@
 SubInclude HAIKU_TOP src tests system libroot posix posixtestsuite conformance interfaces sigprocmask ;
 SubInclude HAIKU_TOP src tests system libroot posix posixtestsuite conformance interfaces sigrelse ;
 SubInclude HAIKU_TOP src tests system libroot posix posixtestsuite conformance interfaces signal ;
+SubInclude HAIKU_TOP src tests system libroot posix posixtestsuite conformance interfaces sigset ;
 SubInclude HAIKU_TOP src tests system libroot posix posixtestsuite conformance interfaces sigsuspend ;

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/difftime/1-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/difftime/1-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/difftime/1-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -33,7 +33,7 @@
 		return PTS_FAIL;
 	}
 
-	printf(&quot;Test PASSED\n&quot;);
+	printf(&quot;difftime_1-1: Test PASSED\n&quot;);
 	return PTS_PASS;
 }
 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/12-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/12-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/12-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -277,7 +277,7 @@
 	/* Test passed */
 #if VERBOSE &gt; 0
 
-	output( &quot;Test passed\n&quot; );
+	output( &quot;fork_12-1: Test PASSED\n&quot; );
 
 #endif
 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/3-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/3-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/3-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -125,7 +125,7 @@
 
 	/* Test passed */
 	#if VERBOSE &gt; 0
-	output(&quot;Test passed\n&quot;);
+	output(&quot;fork_3-1: Test PASSED\n&quot;);
 	#endif
 
 	PASSED;

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/4-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/4-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/4-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -118,7 +118,7 @@
 	
 	/* Test passed */
 	#if VERBOSE &gt; 0
-	output(&quot;Test passed\n&quot;);
+	output(&quot;fork_4-1: Test PASSED\n&quot;);
 	#endif
 
 	PASSED;

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/6-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/6-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/6-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -189,7 +189,7 @@
 
 	/* Test passed */
 #if VERBOSE &gt; 0
-	output( &quot;Test passed\n&quot; );
+	output( &quot;fork_6-1: Test PASSED\n&quot; );
 
 #endif
 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/8-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/8-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/8-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -226,7 +226,7 @@
 	/* Test passed */
 #if VERBOSE &gt; 0
 
-	output( &quot;Test passed\n&quot; );
+	output( &quot;fork_8-1: Test PASSED\n&quot; );
 
 #endif
 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/9-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/9-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/fork/9-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -143,7 +143,7 @@
 	/* Test passed */
 #if VERBOSE &gt; 0
 
-	output( &quot;Test passed\n&quot; );
+	output( &quot;fork_9-1: Test PASSED\n&quot; );
 
 #endif
 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/kill/2-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/kill/2-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/kill/2-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -24,7 +24,7 @@
 		return PTS_FAIL;
 	}
 
-	printf(&quot;Test PASSED\n&quot;);
+	printf(&quot;kill_2-1: Test PASSED\n&quot;);
 	return PTS_PASS;
 }
 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/1-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/1-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/1-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -58,7 +58,7 @@
 		return PTS_FAIL;
 	}
 
-	printf(&quot;sighold(): Test PASSED: signal was blocked\n&quot;);
+	printf(&quot;sighold_1-1: Test PASSED: signal was blocked\n&quot;);
 	return PTS_PASS;
 }
 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/2-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/2-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/2-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -22,6 +22,6 @@
 		perror(&quot;sighold failed -- returned -- test aborted&quot;);
 		return PTS_UNRESOLVED;
 	} 
-	printf(&quot;sighold passed\n&quot;);
+	printf(&quot;sighold_2-1: Test PASSED\n&quot;);
 	return PTS_PASS;
 }

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/3-core-buildonly.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/3-core-buildonly.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sighold/3-core-buildonly.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -74,8 +74,8 @@
 
 	if (TEST_RETURN == -1) {
 		if (EINVAL == errno) {
-			printf (&quot;errno set to EINVAL\n&quot;);
-			printf(&quot;sighold(): Test passed\n&quot;);
+			printf (&quot;sighold_3-core-buildonly %s: successfully set errno to EINVAL\n&quot;, argv[1]);
+			printf(&quot;sighold_3-core-buildonly %s: Test PASSED\n&quot;, argv[1]);
 			return PTS_PASS;
 		} else {
 			printf (&quot;errno not set to EINVAL\n&quot;);

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/1-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/1-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/1-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -51,7 +51,7 @@
 		printf(&quot;FAIL: Signal was not ignored\n&quot;);
 		return PTS_FAIL;
 	} 
-	printf(&quot;PASS\n&quot;);
+	printf(&quot;sigignore_1-1: Test PASSED\n&quot;);
 	return PTS_PASS;
 }
 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/4-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/4-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/4-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -22,6 +22,6 @@
 		perror(&quot;sigignore failed -- returned -- test aborted&quot;);
 		return PTS_UNRESOLVED;
 	} 
-	printf(&quot;sigignore passed\n&quot;);
+	printf(&quot;sigignore_4-1: Test PASSED\n&quot;);
 	return PTS_PASS;
 }

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/5-core-buildonly.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/5-core-buildonly.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/5-core-buildonly.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -53,7 +53,8 @@
 
 	if (sigignore(signo) == -1) {
 		if (EINVAL == errno) {
-			printf (&quot;errno set to EINVAL\n&quot;);
+			printf (&quot;sigignore_5-core-buildonly %s: successfully set errno to EINVAL\n&quot;, argv[1]);
+			printf(&quot;sigignore_5-core-buildonly %s: Test PASSED\n&quot;, argv[1]);
 			return PTS_PASS;
 		} else {
 			printf (&quot;errno not set to EINVAL\n&quot;);

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/6-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/6-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/6-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -23,7 +23,8 @@
 {
 	if (sigignore(SIGKILL) == -1) {
 		if (EINVAL == errno) {
-			printf (&quot;errno set to EINVAL\n&quot;);
+			printf (&quot;sigignore_6-1: successfully set errno to EINVAL\n&quot;);
+			printf(&quot;sigignore_6-1: Test PASSED\n&quot;);
 			return PTS_PASS;
 		} else {
 			printf (&quot;errno not set to EINVAL\n&quot;);

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/6-2.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/6-2.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigignore/6-2.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -23,7 +23,8 @@
 {
 	if (sigignore(SIGSTOP) == -1) {
 		if (EINVAL == errno) {
-			printf (&quot;errno set to EINVAL\n&quot;);
+			printf (&quot;sigignore_6-2: successfully set errno to EINVAL\n&quot;);
+			printf(&quot;sigignore_6-2: Test PASSED\n&quot;);
 			return PTS_PASS;
 		} else {
 			printf (&quot;errno not set to EINVAL\n&quot;);

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/1-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/1-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/1-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -26,7 +26,7 @@
 
 void myhandler(int signo)
 {
-	printf(&quot;SIGCHLD called. Inside handler\n&quot;);
+	printf(&quot;signal_1-1: SIGCHLD called. Inside handler\n&quot;);
 	handler_called = 1;
 }
 
@@ -48,6 +48,6 @@
 		printf(&quot;Test FAILED: handler was called even though default was expected\n&quot;);
 		return PTS_FAIL;
 	}
-	printf(&quot;signal(): Test passed\n&quot;);		
+	printf(&quot;signal_1-1: Test PASSED\n&quot;);		
 	return PTS_PASS;
 } 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/2-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/2-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/2-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -25,7 +25,7 @@
 
 void myhandler(int signo)
 {
-	printf(&quot;SIGCHLD called. Inside handler\n&quot;);
+	printf(&quot;signal_2-1: SIGCHLD called. Inside handler\n&quot;);
 	handler_called = 1;
 }
 
@@ -47,6 +47,6 @@
 		printf(&quot;Test FAILED: handler was called even though default was expected\n&quot;);
 		return PTS_FAIL;
 	}
-	printf(&quot;signal(): Test passed\n&quot;);		
+	printf(&quot;signal_2-1: Test PASSED\n&quot;);		
 	return PTS_PASS;
 } 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/3-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/3-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/3-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -23,7 +23,7 @@
 
 void myhandler(int signo)
 {
-	printf(&quot;SIGCHLD called. Inside handler\n&quot;);
+	printf(&quot;signal_3-1: SIGCHLD called. Inside handler\n&quot;);
 	handler_called = 1;
 }
 
@@ -40,6 +40,6 @@
 		printf(&quot;Test FAILED: handler was called even though default was expected\n&quot;);
 		return PTS_FAIL;
 	}
-	printf(&quot;signal(): Test passed\n&quot;);		
+	printf(&quot;signal_3-1: Test PASSED\n&quot;);		
 	return PTS_PASS;
 } 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/5-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/5-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/5-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -24,12 +24,12 @@
 
 void SIGUSR1_handler(int signo)
 {
-	printf(&quot;do nothing useful\n&quot;);
+	printf(&quot;signal_5-1: inside SIGUSR1_handler\n&quot;);
 }
 
 void SIGUSR2_handler(int signo)
 {
-	printf(&quot;do nothing useful\n&quot;);
+	printf(&quot;signal_5-1: inside SIGUSR2_handler\n&quot;);
 }
 
 int main()
@@ -48,6 +48,6 @@
 		printf(&quot;signal did not return the last handler that was associated with SIGUSR1\n&quot;);
                	return PTS_FAIL;
         }
-	printf(&quot;signal(): Test passed\n&quot;);
+	printf(&quot;signal_5-1: Test PASSED\n&quot;);
 	return PTS_PASS;
 } 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/6-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/6-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/6-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -19,7 +19,7 @@
 
 void myhandler(int signo)
 {
-	printf(&quot;handler does nothing useful.\n&quot;);
+	printf(&quot;signal_6-1: inside handler\n&quot;);
 }
 
 int main()
@@ -35,6 +35,6 @@
 		printf(&quot;Test FAILED: errno wasn't set to EINVAL even though invalid signal number was passed to the signal() function\n&quot;);
                	return PTS_FAIL;
         }
-    printf(&quot;signal(): Test passed\n&quot;);
+    printf(&quot;signal_6-1: Test PASSED\n&quot;);
 	return PTS_PASS;
 } 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/7-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/7-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/signal/7-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -19,7 +19,7 @@
 
 void myhandler(int signo)
 {
-	printf(&quot;handler does nothing useful.\n&quot;);
+	printf(&quot;signal_7-1: inside handler\n&quot;);
 }
 
 int main()
@@ -35,6 +35,6 @@
 		printf(&quot;Test FAILED: errno wasn't set to EINVAL even though a non-catchable signal was passed to the signal() function\n&quot;);
                	return PTS_FAIL;
         }
-    printf(&quot;signal(): Test passed\n&quot;);
+    printf(&quot;signal_7-1: Test PASSED\n&quot;);
 	return PTS_PASS;
 } 

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/12-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/12-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/12-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -81,6 +81,6 @@
 		return PTS_FAIL;
 	}
 
-	printf(&quot;PASS: signal mask was not changed.\n&quot;);
+	printf(&quot;sigprocmask_12-1: Test PASSED: signal mask was not changed.\n&quot;);
 	return PTS_PASS;
 }

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -58,6 +58,6 @@
 	if (is_changed(oactl, SIGABRT)) {
 		return PTS_FAIL;
 	}
-	printf(&quot;PASS: signal mask was not changed.\n&quot;);
+	printf(&quot;sigprocmask_8-1: Test PASSED: signal mask was not changed.\n&quot;);
 	return PTS_PASS;
 }

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-2.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-2.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-2.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -59,6 +59,6 @@
 	if (is_changed(oactl, SIGABRT)) {
 		return PTS_FAIL;
 	}
-	printf(&quot;PASS: signal mask was not changed.\n&quot;);
+	printf(&quot;sigprocmask_8-2: Test PASSED: signal mask was not changed.\n&quot;);
 	return PTS_PASS;
 }

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-3.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-3.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigprocmask/8-3.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -58,6 +58,6 @@
 	if (is_changed(oactl, SIGABRT)) {
 		return PTS_FAIL;
 	}
-	printf(&quot;PASS: signal mask was not changed.\n&quot;);
+	printf(&quot;sigprocmask_8-3: Test PASSED: signal mask was not changed.\n&quot;);
 	return PTS_PASS;
 }

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/1-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/1-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/1-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -64,7 +64,7 @@
 	sleep(1);
 
 	if (handler_called) {
-		printf(&quot;sigrelse(): Test PASSED: SIGABRT successfully removed from signal mask\n&quot;);
+		printf(&quot;sigrelse_1-1: Test PASSED: SIGABRT successfully removed from signal mask\n&quot;);
 		return PTS_PASS;
 	} 
 	printf(&quot;FAIL\n&quot;);

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/2-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/2-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/2-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -22,6 +22,6 @@
 		perror(&quot;sigrelse failed -- returned -- test aborted&quot;);
 		return PTS_UNRESOLVED;
 	} 
-	printf(&quot;sigrelse(): Test PASSED\n&quot;);
+	printf(&quot;sigrelse_2-1: Test PASSED\n&quot;);
 	return PTS_PASS;
 }

Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/3-core-buildonly.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/3-core-buildonly.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigrelse/3-core-buildonly.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -75,8 +75,8 @@
 
         if (TEST_RETURN == -1) {
                 if (EINVAL == errno) {
-                        printf (&quot;errno set to EINVAL\n&quot;);
-                        printf(&quot;sigrelse(): Test PASSED\n&quot;);
+                        printf (&quot;sigrelse_3-core-buildonly %s: successfully set errno to EINVAL\n&quot;, argv[1]);
+                        printf(&quot;sigrelse_3-core-buildonly %s: Test PASSED\n&quot;, argv[1]);
                         return PTS_PASS;
                 } else {
                         printf (&quot;errno not set to EINVAL\n&quot;);

Added: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/1-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/1-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/1-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -0,0 +1,61 @@
+/*
+ * Copyright (c) 2003, Intel Corporation. All rights reserved.
+ * Created by:  salwan.searty REMOVE-THIS AT intel DOT com
+ * This file is licensed under the GPL license.  For the full content
+ * of this license, see the COPYING file at the top level of this 
+ * source tree.
+
+ This program tests the assertion that the default handling of the 
+ signal shall occur if the value of the disp parameter is SIG_DFL.
+
+ How this program tests this assertion by setting up a handler 
+ &quot;myhandler&quot; for SIGCHLD. Then another call to sigset() is made about
+ SIGCHLD, this time with SIG_DFL as the value of the func parameter.
+ The default action for SIGCHLD is to be ignored, so unless myhandler
+ gets called when SIGCHLD is raised, the test passess, otherwise
+ returns failure.
+
+*/
+
+#define _XOPEN_SOURCE 600
+
+#include &lt;signal.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &quot;posixtest.h&quot;
+
+int handler_called = 0;
+
+void myhandler(int signo)
+{
+	printf(&quot;sigset_1-1: SIGCHLD called. Inside handler\n&quot;);
+	handler_called = 1;
+}
+
+int main()
+{
+
+	struct sigaction act;
+	act.sa_handler = myhandler;
+	act.sa_flags = 0;
+	sigemptyset(&amp;act.sa_mask);
+
+	if (sigaction(SIGCHLD, &amp;act, 0) != 0) {
+                perror(&quot;Unexpected error while using sigaction()&quot;);
+               	return PTS_UNRESOLVED;
+        }
+
+        if (sigset(SIGCHLD,SIG_DFL) != myhandler) {
+                perror(&quot;Unexpected error while using signal()&quot;);
+               	return PTS_UNRESOLVED;
+        }
+
+	raise(SIGCHLD);
+	
+	if (handler_called == 1) {
+		printf(&quot;Test FAILED: handler was called even though default was expected\n&quot;);
+		return PTS_FAIL;
+	}
+	printf(&quot;sigset_1-1: Test PASSED\n&quot;);		
+	return PTS_PASS;
+} 

Added: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/10-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/10-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/10-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -0,0 +1,34 @@
+/*
+ * Copyright (c) 2003, Intel Corporation. All rights reserved.
+ * Created by:  salwan.searty REMOVE-THIS AT intel DOT com
+ * This file is licensed under the GPL license.  For the full content
+ * of this license, see the COPYING file at the top level of this 
+ * source tree.
+
+ This program tests the assertion that when unsuccessful, SIG_ERROR 
+ shall be returned, and errno set to EINVAL.
+
+*/
+
+#define _XOPEN_SOURCE 600
+
+#include &lt;signal.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;errno.h&gt;
+#include &quot;posixtest.h&quot;
+
+int main()
+{
+        if (sigset(SIGKILL,SIG_IGN) == SIG_ERR) {
+		if (errno != EINVAL) {
+			printf(&quot;Test FAILED: sigset() returned SIG_ERR but didn't set errno to EINVAL\n&quot;);
+			return PTS_FAIL;
+		}
+	} else {
+		printf(&quot;Test FAILED: sigset() didn't return SIG_ERROR even though SIGKILL was passed to it\n&quot;);
+		return PTS_FAIL;
+	}
+	printf(&quot;sigset_10-1: Test PASSED\n&quot;);
+	return PTS_PASS;
+} 

Added: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/2-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/2-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/2-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -0,0 +1,59 @@
+/*
+ * Copyright (c) 2003, Intel Corporation. All rights reserved.
+ * Created by:  salwan.searty REMOVE-THIS AT intel DOT com
+ * This file is licensed under the GPL license.  For the full content
+ * of this license, see the COPYING file at the top level of this 
+ * source tree.
+
+ This program tests the assertion that the signal shall be ignored
+ if the value of the dist parameter is SIG_IGN.
+
+ How this program tests this assertion is by setting up a handler 
+ &quot;myhandler&quot; for SIGUSR1. Then another call to signal() is made about
+ SIGUSR1, this time with SIG_IGN as the value of the func parameter.
+ SIGUSR1 should be ignored now, so unless myhandler gets called when
+ SIGUSR1 is raised, the test passes, otherwise returns failure.
+     
+*/
+
+#define _XOPEN_SOURCE 600
+
+#include &lt;signal.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &quot;posixtest.h&quot;
+
+int handler_called = 0;
+
+void myhandler(int signo)
+{
+	printf(&quot;sigset_2-1: SIGUSR1 called. Inside handler\n&quot;);
+	handler_called = 1;
+}
+
+int main()
+{
+	struct sigaction act;
+	act.sa_flags = 0;
+	act.sa_handler = myhandler;
+	sigemptyset(&amp;act.sa_mask);
+
+	if (sigaction(SIGUSR1, &amp;act, 0) != 0) {
+                perror(&quot;Unexpected error while using sigaction()&quot;);
+               	return PTS_UNRESOLVED;
+        }
+
+        if (sigset(SIGUSR1,SIG_IGN) != myhandler) {
+                perror(&quot;Unexpected error while using signal()&quot;);
+               	return PTS_UNRESOLVED;
+        }
+
+	raise(SIGUSR1);
+	
+	if (handler_called == 1) {
+		printf(&quot;Test FAILED: handler was called even though default was expected\n&quot;);
+		return PTS_FAIL;
+	}
+	printf(&quot;sigset_2-1: Test PASSED\n&quot;);		
+	return PTS_PASS;
+} 

Added: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/3-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/3-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/3-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -0,0 +1,47 @@
+/*
+ * Copyright (c) 2003, Intel Corporation. All rights reserved.
+ * Created by:  salwan.searty REMOVE-THIS AT intel DOT com
+ * This file is licensed under the GPL license.  For the full content
+ * of this license, see the COPYING file at the top level of this 
+ * source tree.
+
+ This program tests the assertion that the function shall be executed
+ when the signal occurs if the disp parameter is the address of a function.
+
+ How this program tests this assertion is by setting up a handler 
+ &quot;myhandler&quot; for SIGCHLD, and then raising that signal. If the 
+ handler_called variable is anything but 1, then fail, otherwise pass.
+     
+*/
+
+#define _XOPEN_SOURCE 600
+
+#include &lt;signal.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &quot;posixtest.h&quot;
+
+int handler_called = 0;
+
+void myhandler(int signo)
+{
+	printf(&quot;sigset_3-1: SIGCHLD called. Inside handler\n&quot;);
+	handler_called = 1;
+}
+
+int main()
+{
+	if (sigset(SIGCHLD, myhandler) == SIG_ERR) {
+                perror(&quot;Unexpected error while using sigset()&quot;);
+               	return PTS_UNRESOLVED;
+        }
+
+	raise(SIGCHLD);
+	
+	if (handler_called != 1) {
+		printf(&quot;Test FAILED: handler was called even though default was expected\n&quot;);
+		return PTS_FAIL;
+	}
+	printf(&quot;sigset_3-1: Test PASSED\n&quot;);		
+	return PTS_PASS;
+} 

Added: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/4-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/4-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/4-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -0,0 +1,47 @@
+/*
+ * Copyright (c) 2003, Intel Corporation. All rights reserved.
+ * Created by:  salwan.searty REMOVE-THIS AT intel DOT com
+ * This file is licensed under the GPL license.  For the full content
+ * of this license, see the COPYING file at the top level of this 
+ * source tree.
+
+ This program tests the assertion that the signal will be added to the
+ signal mask before its handler is executed.
+
+*/
+
+#define _XOPEN_SOURCE 600
+
+#include &lt;signal.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &quot;posixtest.h&quot;
+
+int signal_blocked = 0;
+
+void myhandler(int signo)
+{
+	sigset_t mask;
+	printf(&quot;sigset_4-1: SIGCHLD called. Inside handler\n&quot;);
+	sigprocmask(SIG_SETMASK, NULL, &amp;mask);
+	if(sigismember(&amp;mask, SIGCHLD)) {
+		signal_blocked = 1;
+	}
+}
+
+int main()
+{
+	if (sigset(SIGCHLD, myhandler) == SIG_ERR) {
+                perror(&quot;Unexpected error while using sigset()&quot;);
+               	return PTS_UNRESOLVED;
+        }
+
+	raise(SIGCHLD);
+	
+	if (signal_blocked != 1) {
+		printf(&quot;Test FAILED: handler was called even though default was expected\n&quot;);
+		return PTS_FAIL;
+	}
+	printf(&quot;sigset_4-1: Test PASSED\n&quot;);		
+	return PTS_PASS;
+} 

Added: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/5-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/5-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/5-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -0,0 +1,71 @@
+/*
+ * Copyright (c) 2003, Intel Corporation. All rights reserved.
+ * Created by:  salwan.searty REMOVE-THIS AT intel DOT com
+ * This file is licensed under the GPL license.  For the full content
+ * of this license, see the COPYING file at the top level of this 
+ * source tree.
+
+ This program tests the assertion that the process's signal mask will be
+ restored to the state that it was in prior to the delivery of the signal
+
+ Steps:
+ 1. Empty the signal mask
+ 2. Deliver the signal
+ 3. When we return from the signal handler, verify that the signal mask 
+    is still empty, otherwise fail.
+
+*/
+
+#define _XOPEN_SOURCE 600
+
+#include &lt;signal.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &quot;posixtest.h&quot;
+
+#define NUMSIGNALS 26
+
+int is_empty(sigset_t *set) {
+
+        int i;
+        int siglist[] = {SIGABRT, SIGALRM, SIGBUS, SIGCHLD,
+                SIGCONT, SIGFPE, SIGHUP, SIGILL, SIGINT,
+                SIGPIPE, SIGQUIT, SIGSEGV,
+                SIGTERM, SIGTSTP, SIGTTIN, SIGTTOU,
+                SIGUSR1, SIGUSR2, SIGPOLL, SIGPROF, SIGSYS,
+                SIGTRAP, SIGURG, SIGVTALRM, SIGXCPU, SIGXFSZ };
+
+        for (i=0; i&lt;NUMSIGNALS; i++) {
+		if (sigismember(set, siglist[i]) != 0)
+			return 0;
+        }
+        return 1;
+}
+
+void myhandler(int signo)
+{
+	printf(&quot;sigset_5-1: SIGCHLD called. Inside handler\n&quot;);
+}
+
+int main()
+{
+	sigset_t mask;
+	sigemptyset(&amp;mask);
+
+	sigprocmask(SIG_SETMASK, &amp;mask, NULL);
+
+	if (sigset(SIGCHLD, myhandler) == SIG_ERR) {
+                perror(&quot;Unexpected error while using sigset()&quot;);
+               	return PTS_UNRESOLVED;
+        }
+
+	raise(SIGCHLD);
+	sigprocmask(SIG_SETMASK, NULL, &amp;mask);
+
+	if (is_empty(&amp;mask) != 1) {
+		printf(&quot;Test FAILED: signal mask should be empty\n&quot;);
+		return PTS_FAIL;
+	}
+	printf(&quot;sigset_5-1: Test passed\n&quot;);
+	return PTS_PASS;
+} 

Added: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/6-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/6-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/6-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -0,0 +1,63 @@
+/*
+ * Copyright (c) 2003, Intel Corporation. All rights reserved.
+ * Created by:  salwan.searty REMOVE-THIS AT intel DOT com
+ * This file is licensed under the GPL license.  For the full content
+ * of this license, see the COPYING file at the top level of this 
+ * source tree.
+
+ This program tests the assertion that if disp is SIG_HOLD, then the 
+ signal shall be added to the process's signal mask.
+
+ Steps:
+ 1. Register SIGCHLD with myhandler
+ 2. Add SIGCHLD to the process's signal mask using sigset with disp
+    equal to SIG_HOLD
+ 3. raise SIGCHLD
+ 4. Verify that SIGCHLD is pending.
+*/
+
+#define _XOPEN_SOURCE 600
+
+#include &lt;signal.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &quot;posixtest.h&quot;
+
+
+void myhandler(int signo)
+{
+	printf(&quot;sigset_6-1: SIGCHLD called. Inside handler\n&quot;);
+}
+
+int main()
+{
+	sigset_t pendingset;
+	struct sigaction act;
+	act.sa_handler = myhandler;
+	act.sa_flags = 0;
+	sigemptyset(&amp;act.sa_mask);
+
+	if (sigaction(SIGCHLD, &amp;act, 0) != 0) {
+                perror(&quot;Unexpected error while using sigaction()&quot;);
+               	return PTS_UNRESOLVED;
+        }
+
+        if (sigset(SIGCHLD,SIG_HOLD) == SIG_ERR) {
+                perror(&quot;Unexpected error while using sigset()&quot;);
+               	return PTS_UNRESOLVED;
+        }
+
+	raise(SIGCHLD);
+	
+        if (sigpending(&amp;pendingset) == -1) {
+                printf(&quot;Error calling sigpending()\n&quot;);
+                return PTS_UNRESOLVED;
+        }
+
+        if (sigismember(&amp;pendingset, SIGCHLD) != 1) {
+		printf(&quot;Test FAILED: Signal SIGCHLD was not successfully blocked\n&quot;);
+		return PTS_FAIL;
+	}
+	printf(&quot;sigset_6-1: Test PASSED\n&quot;);
+	return PTS_PASS;
+} 

Added: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/7-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/7-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/7-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -0,0 +1,74 @@
+/*
+ * Copyright (c) 2003, Intel Corporation. All rights reserved.
+ * Created by:  salwan.searty REMOVE-THIS AT intel DOT com
+ * This file is licensed under the GPL license.  For the full content
+ * of this license, see the COPYING file at the top level of this 
+ * source tree.
+
+ This program tests the assertion that if disp is SIG_HOLD, then the 
+ signal's disposition shall remain unchanged
+
+ Steps:
+ 1. Register SIGCHLD with myhandler
+ 2. Add SIGCHLD to the process's signal mask using sigset with disp
+    equal to SIG_HOLD
+ 3. raise SIGCHLD
+ 4. remove SIGCHLD from the signal mask
+ 5. Verify that the original disposition hasn't been changed, by making
+    sure that SIGCHLD is still handled by myhandler.
+*/
+
+#define _XOPEN_SOURCE 600
+
+#include &lt;signal.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &quot;posixtest.h&quot;
+
+int handler_called = 0;
+
+void myhandler(int signo)
+{
+	printf(&quot;sigset_7-1: SIGCHLD called. Inside handler\n&quot;);
+	handler_called = 1;
+}
+
+int main()
+{
+	sigset_t pendingset;
+	struct sigaction act;
+	act.sa_handler = myhandler;
+	act.sa_flags = 0;
+	sigemptyset(&amp;act.sa_mask);
+
+	if (sigaction(SIGCHLD, &amp;act, 0) != 0) {
+                perror(&quot;Unexpected error while using sigaction()&quot;);
+               	return PTS_UNRESOLVED;
+        }
+
+        if (sigset(SIGCHLD,SIG_HOLD) == SIG_ERR) {
+                perror(&quot;Unexpected error while using sigset()&quot;);
+               	return PTS_UNRESOLVED;
+        }
+
+	raise(SIGCHLD);
+	
+        if (sigpending(&amp;pendingset) == -1) {
+                printf(&quot;Error calling sigpending()\n&quot;);
+                return PTS_UNRESOLVED;
+        }
+
+        if (sigismember(&amp;pendingset, SIGCHLD) != 1) {
+		printf(&quot;Test UNRESOLVED: Signal SIGCHLD was not successfully blocked\n&quot;);
+		return PTS_UNRESOLVED;
+	}
+
+	sigrelse(SIGCHLD);
+
+	if (handler_called != 1) {
+		printf(&quot;Test FAILED: Signal wasn't delivered even though it was removed from the signal mask\n&quot;);
+		return PTS_FAIL;
+	}
+	printf(&quot;sigset_7-1: Test PASSED\n&quot;);
+	return PTS_PASS;
+} 

Added: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/8-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/8-1.c	2007-11-18 16:39:18 UTC (rev 22947)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/sigset/8-1.c	2007-11-18 16:44:49 UTC (rev 22948)
@@ -0,0 +1,29 @@
+/*
+ * Copyright (c) 2003, Intel Corporation. All rights reserved.
+ * Created by:  salwan.searty REMOVE-THIS AT intel DOT com
+ * This file is licensed under the GPL license.  For the full content
+ * of this license, see the COPYING file at the top level of this 
+ * source tree.
+
+ This program tests the assertion that if signal has been blocked, then
+ sigset shall return SIG_HOLD
+
+*/
+
+#define _XOPEN_SOURCE 600
+
+#include &lt;signal.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &quot;posixtest.h&quot;
+
+int main()

[... truncated: 126 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004783.html">[Haiku-commits] r22947 - in haiku/trunk: headers/posix	src/system/libroot/posix/signal
</A></li>
	<LI>Next message: <A HREF="004785.html">[Haiku-commits] r22949 - haiku/trunk/headers/posix
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4784">[ date ]</a>
              <a href="thread.html#4784">[ thread ]</a>
              <a href="subject.html#4784">[ subject ]</a>
              <a href="author.html#4784">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
