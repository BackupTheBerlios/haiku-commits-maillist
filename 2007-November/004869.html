<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r23010 -	haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/pthread_key_create
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-November/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r23010%20-%0A%09haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/pthread_key_create&In-Reply-To=%3C200711280014.lAS0Eghh010042%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004868.html">
   <LINK REL="Next"  HREF="004870.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r23010 -	haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/pthread_key_create</H1>
    <B>bonefish at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r23010%20-%0A%09haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/pthread_key_create&In-Reply-To=%3C200711280014.lAS0Eghh010042%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r23010 -	haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/pthread_key_create">bonefish at mail.berlios.de
       </A><BR>
    <I>Wed Nov 28 01:14:42 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004868.html">[Haiku-commits] r23009 - in haiku/trunk: headers/private/kernel	src/system/kernel
</A></li>
        <LI>Next message: <A HREF="004870.html">[Haiku-commits] r23011 - haiku/trunk/src/system/kernel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4869">[ date ]</a>
              <a href="thread.html#4869">[ thread ]</a>
              <a href="subject.html#4869">[ subject ]</a>
              <a href="author.html#4869">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: bonefish
Date: 2007-11-28 01:14:41 +0100 (Wed, 28 Nov 2007)
New Revision: 23010
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=23010&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=23010&amp;view=rev</A>

Modified:
   haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/pthread_key_create/2-1.c
Log:
The behavior of pthread_getspecific() when called with an invalid key is
undefined as per Open Group Base Specs. Commented out the code block. It
doesn't do what the preceding comment suggests anyway. In fact the whole
test doesn't quite do what the comment in the header promises.


Modified: haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/pthread_key_create/2-1.c
===================================================================
--- haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/pthread_key_create/2-1.c	2007-11-28 00:07:32 UTC (rev 23009)
+++ haiku/trunk/src/tests/system/libroot/posix/posixtestsuite/conformance/interfaces/pthread_key_create/2-1.c	2007-11-28 00:14:41 UTC (rev 23010)
@@ -30,12 +30,12 @@
 	void* rc;
 
 	/* Verify that the value associated with &quot;key&quot; in a new thread is NULL */
-	rc = pthread_getspecific(key);
-	if(rc != NULL)
-	{
-		printf(&quot;pthread_key_create_2-1 Test FAILED\n&quot;);
-		return PTS_FAIL;
-	}
+// 	rc = pthread_getspecific(key);
+// 	if(rc != NULL)
+// 	{
+// 		printf(&quot;pthread_key_create_2-1 Test FAILED\n&quot;);
+// 		return PTS_FAIL;
+// 	}
 
 	if(pthread_key_create(&amp;key, NULL) != 0)
 	{


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004868.html">[Haiku-commits] r23009 - in haiku/trunk: headers/private/kernel	src/system/kernel
</A></li>
	<LI>Next message: <A HREF="004870.html">[Haiku-commits] r23011 - haiku/trunk/src/system/kernel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4869">[ date ]</a>
              <a href="thread.html#4869">[ thread ]</a>
              <a href="subject.html#4869">[ subject ]</a>
              <a href="author.html#4869">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
