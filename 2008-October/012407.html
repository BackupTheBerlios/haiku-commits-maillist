<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r27884 - haiku/trunk/src/add-ons/kernel/generic/ide_adapter
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-October/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27884%20-%0A%20haiku/trunk/src/add-ons/kernel/generic/ide_adapter&In-Reply-To=%3C40629.85.223.98.72.1223314029.squirrel%40webmail.inter.nl.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012423.html">
   <LINK REL="Next"  HREF="012393.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r27884 - haiku/trunk/src/add-ons/kernel/generic/ide_adapter</H1>
    <B>Info.Be-Hold at inter.nl.net</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27884%20-%0A%20haiku/trunk/src/add-ons/kernel/generic/ide_adapter&In-Reply-To=%3C40629.85.223.98.72.1223314029.squirrel%40webmail.inter.nl.net%3E"
       TITLE="[Haiku-commits] r27884 - haiku/trunk/src/add-ons/kernel/generic/ide_adapter">Info.Be-Hold at inter.nl.net
       </A><BR>
    <I>Mon Oct  6 19:27:09 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="012423.html">[Haiku-commits] r27884 - haiku/trunk/src/add-ons/kernel/generic/ide_adapter
</A></li>
        <LI>Next message: <A HREF="012393.html">[Haiku-commits] r27885 -	haiku/trunk/src/add-ons/input_server/filters/screensaver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12407">[ date ]</a>
              <a href="thread.html#12407">[ thread ]</a>
              <a href="subject.html#12407">[ subject ]</a>
              <a href="author.html#12407">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi again,

I'll add a comment in the sourcecode on these places then.
I.ve got a Marvell 88SE6111 PATA/SATA controller with one ultra DMA
100/133 connector, and one external SATA3.0 Gb/s port (sata on the go)

(at least the manual says so. I'll doublecheck the mainboard to see if I
can locate it)

How so???
And: I can imagine the non-functioning DMA has the same source of trouble
since I get a buffer underrun (buffer filled at half speed since every
32bit transfer only delivers 16bit of data??, seeing this is the case with
the PIO trouble over here...) ???


BTW The seperate Promise Ultra133tx2 board still doesn't boot, but its
another error as even with the fix it says it can't find a bootvolume (it
seems it doesn't detect the drive at all from the syslog)
Controller: PDC20269, V2.20.0.15 firmware onboard: a standard PCI device
with two PATA ports.

BTW I wholeheartedly agree that the busmanagers should automatically
fallback to 16 bit PIO mode if 32bit mode fails. I guess one could even
try with and without int handling (though that's perfectly OK here after
all as we know now.)

thanks for the comments!

Rudolf.






Op Ma, 6 oktober, 2008 9:26 am schreef Axel D&#195;&#182;rfler:
&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">rudolfc at mail.berlios.de</A> wrote:
</I>&gt;&gt;<i> Log:
</I>&gt;&gt;<i> forcing 16bit pio writes, disabling 32bit pio writes. This was already
</I>&gt;&gt;<i> the case for read pio ever since this driver got imported. This fixes
</I>&gt;&gt;<i> booting from IDE drives in PIO mode with both the IDE and ATA
</I>&gt;&gt;<i> busmanagers, at least on my ASUS P5E3 mainboard. If I am stepping out of
</I>&gt;&gt;<i> bounds here please correct and let me know..
</I>&gt;<i>
</I>&gt;<i> As a temporary fix, this is definitely okay (a comment would have been
</I>&gt;<i> nice, too, also in the read case). But it should actually be handled
</I>&gt;<i> differently; the controller should decide whether or not to force 16 bit.
</I>&gt;<i> I guess that's just one more thing to change in the ATA bus
</I>&gt;<i> manager.
</I>&gt;<i>
</I>&gt;<i> Judging from the FreeBSD sources, is it possible that you have either a
</I>&gt;<i> Marvell, Netcell, or Promise IDE controller on your board?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Bye,
</I>&gt;<i> Axel.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Haiku-commits mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">Haiku-commits at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">https://lists.berlios.de/mailman/listinfo/haiku-commits</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="012423.html">[Haiku-commits] r27884 - haiku/trunk/src/add-ons/kernel/generic/ide_adapter
</A></li>
	<LI>Next message: <A HREF="012393.html">[Haiku-commits] r27885 -	haiku/trunk/src/add-ons/input_server/filters/screensaver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12407">[ date ]</a>
              <a href="thread.html#12407">[ thread ]</a>
              <a href="subject.html#12407">[ subject ]</a>
              <a href="author.html#12407">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
