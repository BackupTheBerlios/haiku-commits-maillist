<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r22228 - haiku/trunk/src/kits/interface
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r22228%20-%20haiku/trunk/src/kits/interface&In-Reply-To=%3C374484810-BeMail%40laptop%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003889.html">
   <LINK REL="Next"  HREF="003893.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r22228 - haiku/trunk/src/kits/interface</H1>
    <B>Fran&#231;ois Revol</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r22228%20-%20haiku/trunk/src/kits/interface&In-Reply-To=%3C374484810-BeMail%40laptop%3E"
       TITLE="[Haiku-commits] r22228 - haiku/trunk/src/kits/interface">revol at free.fr
       </A><BR>
    <I>Fri Sep 14 13:39:31 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003889.html">[Haiku-commits] r22228 - haiku/trunk/src/kits/interface
</A></li>
        <LI>Next message: <A HREF="003893.html">[Haiku-commits] r22228 - haiku/trunk/src/kits/interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3892">[ date ]</a>
              <a href="thread.html#3892">[ thread ]</a>
              <a href="subject.html#3892">[ subject ]</a>
              <a href="author.html#3892">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt; Right.
</I>&gt;<i> &gt; Some apps that want to get full control (VNCViewer for ex, maybe 
</I>&gt;<i> &gt; SDL) 
</I>&gt;<i> &gt; usually override DispatchMessage(), and do tricky stuff, but I 
</I>&gt;<i> &gt; don't know 
</I>&gt;<i> &gt; if they touch the mouse.
</I>&gt;<i> 
</I>&gt;<i> I too remember weird behaviour of MediaPlayer being dragged by 
</I>&gt;<i> clicking 
</I>&gt;<i> somewhere inside between the controls. So I tried this yesterday 
</I>&gt;<i> again, 
</I>&gt;<i> both in the test environment and under Haiku on real hardware. To my 
</I>&gt;<i> surprise, it worked perfectly. Maybe Axel's recent changes have fixed 
</I>&gt;<i> this. 
</I>&gt;<i> I have not yet looked closer into which code path is truely used in 
</I>&gt;<i> MediaPlayer. The funny thing is, the code first tries to find a 
</I>&gt;<i> coordinate 
</I>&gt;<i> &quot;screen_where&quot; in the message, which appearantly ZETA provides. The 
</I>&gt;<i> comment 
</I>&gt;<i> there says &quot;screen_where is the only reliable coordinate under ZETA&quot;. 
</I>&gt;<i> When 
</I>&gt;<i> the code does not find &quot;screen_where&quot;, it goes on to try and find the 
</I>&gt;<i> &quot;normal&quot; mouse coord field and translates that to screen space using 
</I>&gt;<i> the 
</I>&gt;<i> original handler for the mouse message. I presume that this is the 
</I>&gt;<i> code 
</I>&gt;<i> path which works under Haiku. So because this works like a charm, I 
</I>&gt;<i> assume 
</I>&gt;<i> that the &quot;sanitizing&quot; of messages (ie filtering them before the 
</I>&gt;<i> application 
</I>&gt;<i> sees them) so that they are compatible with R5 messages, works, even 
</I>&gt;<i> if an 
</I>&gt;<i> application overrides DispatchMessage(). I think the only time an 
</I>&gt;<i> application would see the orignal messages is when it directly uses 
</I>&gt;<i> the 
</I>&gt;<i> message queue.
</I>
I remember Marcus ranting about it in zeta, yes :)
Now, maybe for correctness we should name it screen_where when sending, 
and using the other name after converting. It would be cleaner, and an 
app really digging the message queue would just not work instead of 
doing nasty things like orbitting the window off-screen like I've seen 
with some apps using that kind of mouse tricks.

Fran&#231;ois.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003889.html">[Haiku-commits] r22228 - haiku/trunk/src/kits/interface
</A></li>
	<LI>Next message: <A HREF="003893.html">[Haiku-commits] r22228 - haiku/trunk/src/kits/interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3892">[ date ]</a>
              <a href="thread.html#3892">[ thread ]</a>
              <a href="subject.html#3892">[ subject ]</a>
              <a href="author.html#3892">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
