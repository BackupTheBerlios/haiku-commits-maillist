<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r22329 - in haiku/trunk: headers/private/kernel	headers/private/kernel/arch headers/private/kernel/arch/x86	headers/private/kernel/util src/system/kernel	src/system/kernel/arch/x86 src/system/kernel/cache	src/system/kernel/debug src/system/kernel/slab	src/system/kernel/util src/system/kernel/vm
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r22329%20-%20in%20haiku/trunk%3A%20headers/private/kernel%0A%09headers/private/kernel/arch%20headers/private/kernel/arch/x86%0A%09headers/private/kernel/util%20src/system/kernel%0A%09src/system/kernel/arch/x86%20src/system/kernel/cache%0A%09src/system/kernel/debug%20src/system/kernel/slab%0A%09src/system/kernel/util%20src/system/kernel/vm&In-Reply-To=%3C200709271221.l8RCLapc014731%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004011.html">
   <LINK REL="Next"  HREF="004013.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r22329 - in haiku/trunk: headers/private/kernel	headers/private/kernel/arch headers/private/kernel/arch/x86	headers/private/kernel/util src/system/kernel	src/system/kernel/arch/x86 src/system/kernel/cache	src/system/kernel/debug src/system/kernel/slab	src/system/kernel/util src/system/kernel/vm</H1>
    <B>axeld at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r22329%20-%20in%20haiku/trunk%3A%20headers/private/kernel%0A%09headers/private/kernel/arch%20headers/private/kernel/arch/x86%0A%09headers/private/kernel/util%20src/system/kernel%0A%09src/system/kernel/arch/x86%20src/system/kernel/cache%0A%09src/system/kernel/debug%20src/system/kernel/slab%0A%09src/system/kernel/util%20src/system/kernel/vm&In-Reply-To=%3C200709271221.l8RCLapc014731%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r22329 - in haiku/trunk: headers/private/kernel	headers/private/kernel/arch headers/private/kernel/arch/x86	headers/private/kernel/util src/system/kernel	src/system/kernel/arch/x86 src/system/kernel/cache	src/system/kernel/debug src/system/kernel/slab	src/system/kernel/util src/system/kernel/vm">axeld at mail.berlios.de
       </A><BR>
    <I>Thu Sep 27 14:21:36 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004011.html">[Haiku-commits] r22328 - haiku/trunk/src/system/kernel/vm
</A></li>
        <LI>Next message: <A HREF="004013.html">[Haiku-commits] r22329 - in haiku/trunk: headers/private/kernel	headers/private/kernel/arch headers/private/kernel/arch/x86	headers/private/kernel/util src/system/kernel	src/system/kernel/arch/x86 src/system/kernel/cache	src/system/kernel/debug s
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4012">[ date ]</a>
              <a href="thread.html#4012">[ thread ]</a>
              <a href="subject.html#4012">[ subject ]</a>
              <a href="author.html#4012">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: axeld
Date: 2007-09-27 14:21:33 +0200 (Thu, 27 Sep 2007)
New Revision: 22329
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=22329&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=22329&amp;view=rev</A>

Modified:
   haiku/trunk/headers/private/kernel/arch/vm.h
   haiku/trunk/headers/private/kernel/arch/x86/commpage.h
   haiku/trunk/headers/private/kernel/util/syscall_args.h
   haiku/trunk/headers/private/kernel/vm.h
   haiku/trunk/headers/private/kernel/vm_address_space.h
   haiku/trunk/headers/private/kernel/vm_cache.h
   haiku/trunk/headers/private/kernel/vm_page.h
   haiku/trunk/headers/private/kernel/vm_priv.h
   haiku/trunk/headers/private/kernel/vm_types.h
   haiku/trunk/src/system/kernel/arch/x86/arch_cpu.c
   haiku/trunk/src/system/kernel/arch/x86/arch_debug.cpp
   haiku/trunk/src/system/kernel/arch/x86/arch_thread.c
   haiku/trunk/src/system/kernel/arch/x86/commpage.c
   haiku/trunk/src/system/kernel/cache/block_allocator.cpp
   haiku/trunk/src/system/kernel/cache/vnode_store.h
   haiku/trunk/src/system/kernel/debug/debug.c
   haiku/trunk/src/system/kernel/debug/gdb.c
   haiku/trunk/src/system/kernel/elf.cpp
   haiku/trunk/src/system/kernel/slab/Slab.cpp
   haiku/trunk/src/system/kernel/system_info.c
   haiku/trunk/src/system/kernel/thread.cpp
   haiku/trunk/src/system/kernel/util/cbuf.c
   haiku/trunk/src/system/kernel/vm/vm.cpp
   haiku/trunk/src/system/kernel/vm/vm_cache.cpp
   haiku/trunk/src/system/kernel/vm/vm_store_device.c
   haiku/trunk/src/system/kernel/vm/vm_store_device.h
   haiku/trunk/src/system/kernel/vm/vm_store_null.c
   haiku/trunk/src/system/kernel/vm/vm_store_null.h
Log:
* vm.h no longer includes vm_types.h - only those that actually need access
  to the private VM types are including vm_types.h now.
* Removed vm_page, vm_area, vm_cache, and vm_address_space typedefs; it's
  cleaner this way, and the actual types are only used in C++ files now,
  anyway.
* And that caused changes in many files...
* Made commpage.h self-containing.
* Minor cleanup.


Modified: haiku/trunk/headers/private/kernel/arch/vm.h
===================================================================
--- haiku/trunk/headers/private/kernel/arch/vm.h	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/headers/private/kernel/arch/vm.h	2007-09-27 12:21:33 UTC (rev 22329)
@@ -1,5 +1,5 @@
 /*
- * Copyright 2002-2005, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A>
+ * Copyright 2002-2007, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A>
  * Distributed under the terms of the MIT License.
  *
  * Copyright 2001-2002, Travis Geiselbrecht. All rights reserved.
@@ -9,10 +9,16 @@
 #define KERNEL_ARCH_VM_H
 
 
-#include &lt;vm.h&gt;
 #include &lt;arch_vm.h&gt;
 
+#include &lt;SupportDefs.h&gt;
 
+
+struct kernel_args;
+struct vm_area;
+struct vm_address_space;
+
+
 #ifdef __cplusplus
 extern &quot;C&quot; {
 #endif
@@ -20,12 +26,13 @@
 status_t arch_vm_init(struct kernel_args *args);
 status_t arch_vm_init_post_area(struct kernel_args *args);
 status_t arch_vm_init_end(struct kernel_args *args);
-status_t arch_vm_init_post_modules(kernel_args *args);
-void arch_vm_aspace_swap(vm_address_space *aspace);
+status_t arch_vm_init_post_modules(struct kernel_args *args);
+void arch_vm_aspace_swap(struct vm_address_space *aspace);
 bool arch_vm_supports_protection(uint32 protection);
 
-status_t arch_vm_set_memory_type(vm_area *area, addr_t physicalBase, uint32 type);
-void arch_vm_unset_memory_type(vm_area *area);
+status_t arch_vm_set_memory_type(struct vm_area *area, addr_t physicalBase,
+	uint32 type);
+void arch_vm_unset_memory_type(struct vm_area *area);
 
 #ifdef __cplusplus
 }

Modified: haiku/trunk/headers/private/kernel/arch/x86/commpage.h
===================================================================
--- haiku/trunk/headers/private/kernel/arch/x86/commpage.h	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/headers/private/kernel/arch/x86/commpage.h	2007-09-27 12:21:33 UTC (rev 22329)
@@ -5,8 +5,13 @@
 #ifndef _KERNEL_ARCH_x86_COMMPAGE_H
 #define _KERNEL_ARCH_x86_COMMPAGE_H
 
-/* some systemwide commpage constants, used in the kernel and libroot */
+/*! Some systemwide commpage constants, used in the kernel and libroot */
 
+#ifndef _ASSEMBLER
+#	include &lt;SupportDefs.h&gt;
+#endif
+
+
 /* be careful what you put here, this file is included from assembly */
 #define COMMPAGE_ENTRY_MAGIC   0
 #define COMMPAGE_ENTRY_VERSION 1
@@ -23,5 +28,4 @@
 status_t commpage_init(void);
 #endif
 
-#endif
-
+#endif	/* _KERNEL_ARCH_x86_COMMPAGE_H */

Modified: haiku/trunk/headers/private/kernel/util/syscall_args.h
===================================================================
--- haiku/trunk/headers/private/kernel/util/syscall_args.h	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/headers/private/kernel/util/syscall_args.h	2007-09-27 12:21:33 UTC (rev 22329)
@@ -3,8 +3,8 @@
 #ifndef _SYSCALL_ARGS_H
 #define _SYSCALL_ARGS_H
 
-#include &lt;KernelExport.h&gt;
-#include &lt;vm.h&gt;
+#include &lt;kernel.h&gt;
+//#include &lt;vm.h&gt;
 
 // Hack to be able to use the IS_USER_ADDRESS macro when compiling for R5.
 #ifdef R5_MEMORY_LAYOUT

Modified: haiku/trunk/headers/private/kernel/vm.h
===================================================================
--- haiku/trunk/headers/private/kernel/vm.h	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/headers/private/kernel/vm.h	2007-09-27 12:21:33 UTC (rev 22329)
@@ -9,12 +9,17 @@
 #define _KERNEL_VM_H
 
 
-#include &lt;vm_types.h&gt;
 #include &lt;arch/vm.h&gt;
-#include &lt;arch/vm_translation_map.h&gt;
 
+#include &lt;OS.h&gt;
+
+
 struct kernel_args;
 struct team;
+struct vm_page;
+struct vm_cache;
+struct vm_area;
+struct vm_address_space;
 struct vnode;
 
 
@@ -23,13 +28,13 @@
 #endif
 
 // startup only
-status_t vm_init(kernel_args *args);
+status_t vm_init(struct kernel_args *args);
 status_t vm_init_post_sem(struct kernel_args *args);
 status_t vm_init_post_thread(struct kernel_args *args);
 status_t vm_init_post_modules(struct kernel_args *args);
-void vm_free_kernel_args(kernel_args *args);
+void vm_free_kernel_args(struct kernel_args *args);
 void vm_free_unused_boot_loader_range(addr_t start, addr_t end);
-addr_t vm_allocate_early(kernel_args *args, size_t virtualSize,
+addr_t vm_allocate_early(struct kernel_args *args, size_t virtualSize,
 			size_t physicalSize, uint32 attributes);
 
 
@@ -56,8 +61,8 @@
 area_id vm_map_file(team_id aid, const char *name, void **address, 
 			uint32 addressSpec, addr_t size, uint32 protection, uint32 mapping, 
 			const char *path, off_t offset);
-vm_cache *vm_area_get_locked_cache(vm_area *area);
-void vm_area_put_locked_cache(vm_cache *cache);
+struct vm_cache *vm_area_get_locked_cache(struct vm_area *area);
+void vm_area_put_locked_cache(struct vm_cache *cache);
 area_id vm_create_null_area(team_id team, const char *name, void **address, 
 			uint32 addressSpec, addr_t size);
 area_id vm_copy_area(team_id team, const char *name, void **_address, 
@@ -65,16 +70,17 @@
 area_id vm_clone_area(team_id team, const char *name, void **address, 
 			uint32 addressSpec, uint32 protection, uint32 mapping, 
 			area_id sourceArea);
-status_t vm_delete_area(team_id aid, area_id id);
-status_t vm_create_vnode_cache(struct vnode *vnode, vm_cache **_cache);
-vm_area *vm_area_lookup(vm_address_space *addressSpace, addr_t address);
+status_t vm_delete_area(team_id teamID, area_id areaID);
+status_t vm_create_vnode_cache(struct vnode *vnode, struct vm_cache **_cache);
+struct vm_area *vm_area_lookup(struct vm_address_space *addressSpace,
+			addr_t address);
 status_t vm_set_area_memory_type(area_id id, addr_t physicalBase, uint32 type);
 status_t vm_get_page_mapping(team_id team, addr_t vaddr, addr_t *paddr);
-int32 vm_test_map_activation(vm_page *page, bool *_modified);
-void vm_clear_map_activation(vm_page *page);
-void vm_remove_all_page_mappings(vm_page *page);
-status_t vm_unmap_pages(vm_area *area, addr_t base, size_t length);
-status_t vm_map_page(vm_area *area, vm_page *page, addr_t address,
+int32 vm_test_map_activation(struct vm_page *page, bool *_modified);
+void vm_clear_map_activation(struct vm_page *page);
+void vm_remove_all_page_mappings(struct vm_page *page);
+status_t vm_unmap_pages(struct vm_area *area, addr_t base, size_t length);
+status_t vm_map_page(struct vm_area *area, struct vm_page *page, addr_t address,
 			uint32 protection);
 status_t vm_get_physical_page(addr_t paddr, addr_t *vaddr, uint32 flags);
 status_t vm_put_physical_page(addr_t vaddr);

Modified: haiku/trunk/headers/private/kernel/vm_address_space.h
===================================================================
--- haiku/trunk/headers/private/kernel/vm_address_space.h	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/headers/private/kernel/vm_address_space.h	2007-09-27 12:21:33 UTC (rev 22329)
@@ -9,10 +9,11 @@
 #define _KERNEL_VM_ADDRESS_SPACE_H
 
 
-#include &lt;vm_types.h&gt;
-#include &lt;arch/vm.h&gt;
+#include &lt;OS.h&gt;
 
+
 struct kernel_args;
+struct vm_address_space;
 
 
 #ifdef __cplusplus
@@ -22,17 +23,17 @@
 status_t vm_address_space_init(void);
 status_t vm_address_space_init_post_sem(void);
 
-void vm_delete_address_space(vm_address_space *aspace);
+void vm_delete_address_space(struct vm_address_space *aspace);
 status_t vm_create_address_space(team_id id, addr_t base, addr_t size,
-			bool kernel, vm_address_space **_aspace);
+			bool kernel, struct vm_address_space **_aspace);
 status_t vm_delete_areas(struct vm_address_space *aspace);
-vm_address_space *vm_get_kernel_address_space(void);
-vm_address_space *vm_kernel_address_space(void);
+struct vm_address_space *vm_get_kernel_address_space(void);
+struct vm_address_space *vm_kernel_address_space(void);
 team_id vm_kernel_address_space_id(void);
-vm_address_space *vm_get_current_user_address_space(void);
+struct vm_address_space *vm_get_current_user_address_space(void);
 team_id vm_current_user_address_space_id(void);
-vm_address_space *vm_get_address_space_by_id(team_id aid);
-void vm_put_address_space(vm_address_space *aspace);
+struct vm_address_space *vm_get_address_space_by_id(team_id aid);
+void vm_put_address_space(struct vm_address_space *aspace);
 #define vm_swap_address_space(aspace) arch_vm_aspace_swap(aspace)
 
 #ifdef __cplusplus

Modified: haiku/trunk/headers/private/kernel/vm_cache.h
===================================================================
--- haiku/trunk/headers/private/kernel/vm_cache.h	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/headers/private/kernel/vm_cache.h	2007-09-27 12:21:33 UTC (rev 22329)
@@ -12,28 +12,34 @@
 #include &lt;kernel.h&gt;
 #include &lt;vm.h&gt;
 
+
 struct kernel_args;
 
+//typedef struct vm_store vm_store;
 
+
 #ifdef __cplusplus
 extern &quot;C&quot; {
 #endif
 
 status_t vm_cache_init(struct kernel_args *args);
-vm_cache *vm_cache_create(vm_store *store);
-void vm_cache_acquire_ref(vm_cache *cache);
-void vm_cache_release_ref(vm_cache *cache);
-vm_cache *vm_cache_acquire_page_cache_ref(vm_page *page);
-vm_page *vm_cache_lookup_page(vm_cache *cache, off_t page);
-void vm_cache_insert_page(vm_cache *cache, vm_page *page, off_t offset);
-void vm_cache_remove_page(vm_cache *cache, vm_page *page);
-void vm_cache_remove_consumer(vm_cache *cache, vm_cache *consumer);
-void vm_cache_add_consumer_locked(vm_cache *cache, vm_cache *consumer);
-status_t vm_cache_write_modified(vm_cache *cache, bool fsReenter);
-status_t vm_cache_set_minimal_commitment_locked(vm_cache *cache, off_t commitment);
-status_t vm_cache_resize(vm_cache *cache, off_t newSize);
-status_t vm_cache_insert_area_locked(vm_cache *cache, vm_area *area);
-status_t vm_cache_remove_area(vm_cache *cache, vm_area *area);
+struct vm_cache *vm_cache_create(struct vm_store *store);
+void vm_cache_acquire_ref(struct vm_cache *cache);
+void vm_cache_release_ref(struct vm_cache *cache);
+struct vm_cache *vm_cache_acquire_page_cache_ref(struct vm_page *page);
+struct vm_page *vm_cache_lookup_page(struct vm_cache *cache, off_t page);
+void vm_cache_insert_page(struct vm_cache *cache, struct vm_page *page,
+	off_t offset);
+void vm_cache_remove_page(struct vm_cache *cache, struct vm_page *page);
+void vm_cache_remove_consumer(struct vm_cache *cache, struct vm_cache *consumer);
+void vm_cache_add_consumer_locked(struct vm_cache *cache,
+	struct vm_cache *consumer);
+status_t vm_cache_write_modified(struct vm_cache *cache, bool fsReenter);
+status_t vm_cache_set_minimal_commitment_locked(struct vm_cache *cache,
+	off_t commitment);
+status_t vm_cache_resize(struct vm_cache *cache, off_t newSize);
+status_t vm_cache_insert_area_locked(struct vm_cache *cache, vm_area *area);
+status_t vm_cache_remove_area(struct vm_cache *cache, struct vm_area *area);
 
 #ifdef __cplusplus
 }

Modified: haiku/trunk/headers/private/kernel/vm_page.h
===================================================================
--- haiku/trunk/headers/private/kernel/vm_page.h	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/headers/private/kernel/vm_page.h	2007-09-27 12:21:33 UTC (rev 22329)
@@ -19,31 +19,32 @@
 extern &quot;C&quot; {
 #endif
 
-void vm_page_init_num_pages(kernel_args *args);
+void vm_page_init_num_pages(struct kernel_args *args);
 status_t vm_page_init(struct kernel_args *args);
 status_t vm_page_init_post_area(struct kernel_args *args);
 status_t vm_page_init_post_thread(struct kernel_args *args);
 
 status_t vm_mark_page_inuse(addr_t page);
 status_t vm_mark_page_range_inuse(addr_t startPage, addr_t length);
-status_t vm_page_set_state(vm_page *page, int state);
+status_t vm_page_set_state(struct vm_page *page, int state);
 
 // get some data about the number of pages in the system
 size_t vm_page_num_pages(void);
 size_t vm_page_num_free_pages(void);
 
-status_t vm_page_write_modified_page(vm_cache *cache, struct vm_page *page,
-	bool fsReenter);
-status_t vm_page_write_modified_pages(vm_cache *cache, bool fsReenter);
+status_t vm_page_write_modified_page(struct vm_cache *cache,
+	struct vm_page *page, bool fsReenter);
+status_t vm_page_write_modified_pages(struct vm_cache *cache, bool fsReenter);
 
 void vm_page_unreserve_pages(uint32 count);
 void vm_page_reserve_pages(uint32 count);
 
-vm_page *vm_page_allocate_page(int pageState, bool reserved);
-status_t vm_page_allocate_pages(int pageState, vm_page **pages, uint32 numPages);
-vm_page *vm_page_allocate_page_run(int state, addr_t length);
-vm_page *vm_page_at_index(int32 index);
-vm_page *vm_lookup_page(addr_t pageNumber);
+struct vm_page *vm_page_allocate_page(int pageState, bool reserved);
+status_t vm_page_allocate_pages(int pageState, struct vm_page **pages,
+	uint32 numPages);
+struct vm_page *vm_page_allocate_page_run(int state, addr_t length);
+struct vm_page *vm_page_at_index(int32 index);
+struct vm_page *vm_lookup_page(addr_t pageNumber);
 
 #ifdef __cplusplus
 }

Modified: haiku/trunk/headers/private/kernel/vm_priv.h
===================================================================
--- haiku/trunk/headers/private/kernel/vm_priv.h	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/headers/private/kernel/vm_priv.h	2007-09-27 12:21:33 UTC (rev 22329)
@@ -8,9 +8,10 @@
 #ifndef _KERNEL_VM_PRIV_H
 #define _KERNEL_VM_PRIV_H
 
-#include &lt;vm.h&gt;
-#include &lt;util/khash.h&gt;
 
+#include &lt;vm_types.h&gt;
+
+
 /* should make these scale with the system */
 #define DEFAULT_KERNEL_WORKING_SET  1024
 #define DEFAULT_WORKING_SET         256

Modified: haiku/trunk/headers/private/kernel/vm_types.h
===================================================================
--- haiku/trunk/headers/private/kernel/vm_types.h	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/headers/private/kernel/vm_types.h	2007-09-27 12:21:33 UTC (rev 22329)
@@ -69,8 +69,7 @@
 typedef class DoublyLinkedQueue&lt;vm_page_mapping, DoublyLinkedPageLink&gt; vm_page_mappings;
 typedef class DoublyLinkedQueue&lt;vm_page_mapping, DoublyLinkedAreaLink&gt; vm_area_mappings;
 
-// vm page
-typedef struct vm_page {
+struct vm_page {
 	struct vm_page		*queue_prev;
 	struct vm_page		*queue_next;
 
@@ -104,7 +103,7 @@
 
 	uint16				wired_count;
 	int8				usage_count;
-} vm_page;
+};
 
 enum {
 	PAGE_TYPE_PHYSICAL = 0,
@@ -134,8 +133,7 @@
 	ConditionVariable&lt;vm_page&gt;	busy_condition;
 };
 
-// vm_cache
-typedef struct vm_cache {
+struct vm_cache {
 	mutex				lock;
 	struct vm_area		*areas;
 	vint32				ref_count;
@@ -158,15 +156,14 @@
 	struct vm_cache*	debug_previous;
 	struct vm_cache*	debug_next;
 #endif
-} vm_cache;
+};
 
 
 #if DEBUG_CACHE_LIST
 extern vm_cache* gDebugCacheList;
 #endif
 
-// vm area
-typedef struct vm_area {
+struct vm_area {
 	char				*name;
 	area_id				id;
 	addr_t				base;
@@ -186,24 +183,18 @@
 	struct vm_area		*cache_next;
 	struct vm_area		*cache_prev;
 	struct vm_area		*hash_next;
-} vm_area;
+};
 
-#else	// !__cplusplus
-// these are just opaque types in C
-typedef struct vm_page vm_page;
-typedef struct vm_cache vm_cache;
-typedef struct vm_area vm_area;
-#endif
+#endif	// __cplusplus
 
 enum {
 	VM_ASPACE_STATE_NORMAL = 0,
 	VM_ASPACE_STATE_DELETION
 };
 
-// address space
-typedef struct vm_address_space {
-	vm_area				*areas;
-	vm_area				*area_hint;
+struct vm_address_space {
+	struct vm_area		*areas;
+	struct vm_area		*area_hint;
 	sem_id				sem;
 	addr_t				base;
 	addr_t				size;
@@ -219,26 +210,24 @@
 	addr_t				min_working_set;
 	bigtime_t			last_working_set_adjust;
 	struct vm_address_space *hash_next;
-} vm_address_space;
+};
 
-// vm_store
-typedef struct vm_store {
+struct vm_store {
 	struct vm_store_ops	*ops;
 	struct vm_cache		*cache;
 	off_t				committed_size;
-} vm_store;
+};
 
-// vm_store_ops
 typedef struct vm_store_ops {
 	void (*destroy)(struct vm_store *backing_store);
 	status_t (*commit)(struct vm_store *backing_store, off_t size);
 	bool (*has_page)(struct vm_store *backing_store, off_t offset);
-	status_t (*read)(struct vm_store *backing_store, off_t offset, const iovec *vecs,
-				size_t count, size_t *_numBytes, bool fsReenter);
-	status_t (*write)(struct vm_store *backing_store, off_t offset, const iovec *vecs,
-				size_t count, size_t *_numBytes, bool fsReenter);
-	status_t (*fault)(struct vm_store *backing_store, struct vm_address_space *aspace,
-				off_t offset);
+	status_t (*read)(struct vm_store *backing_store, off_t offset,
+		const iovec *vecs, size_t count, size_t *_numBytes, bool fsReenter);
+	status_t (*write)(struct vm_store *backing_store, off_t offset,
+		const iovec *vecs, size_t count, size_t *_numBytes, bool fsReenter);
+	status_t (*fault)(struct vm_store *backing_store,
+		struct vm_address_space *aspace, off_t offset);
 	void (*acquire_ref)(struct vm_store *backing_store);
 	void (*release_ref)(struct vm_store *backing_store);
 } vm_store_ops;
@@ -291,6 +280,7 @@
 	//	flags region in the protection field.
 
 #define B_USER_AREA_FLAGS		(B_USER_PROTECTION)
-#define B_KERNEL_AREA_FLAGS		(B_KERNEL_PROTECTION | B_USER_CLONEABLE_AREA | B_OVERCOMMITTING_AREA)
+#define B_KERNEL_AREA_FLAGS \
+	(B_KERNEL_PROTECTION | B_USER_CLONEABLE_AREA | B_OVERCOMMITTING_AREA)
 
 #endif	/* _KERNEL_VM_TYPES_H */

Modified: haiku/trunk/src/system/kernel/arch/x86/arch_cpu.c
===================================================================
--- haiku/trunk/src/system/kernel/arch/x86/arch_cpu.c	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/arch/x86/arch_cpu.c	2007-09-27 12:21:33 UTC (rev 22329)
@@ -1,5 +1,5 @@
 /*
- * Copyright 2002-2006, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A> All rights reserved.
+ * Copyright 2002-2007, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A> All rights reserved.
  * Distributed under the terms of the MIT License.
  *
  * Copyright 2001-2002, Travis Geiselbrecht. All rights reserved.
@@ -7,25 +7,25 @@
  */
 
 
+#include &lt;cpu.h&gt;
+
+#include &lt;string.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;stdio.h&gt;
+
 #include &lt;boot_device.h&gt;
 #include &lt;smp.h&gt;
 #include &lt;tls.h&gt;
-#include &lt;vm.h&gt;
+#include &lt;vm_types.h&gt;
 
 #include &lt;arch_system_info.h&gt;
-#include &lt;cpu.h&gt;
-#include &lt;arch/cpu.h&gt;
 #include &lt;arch/x86/selector.h&gt;
 #include &lt;boot/kernel_args.h&gt;
 #include &lt;arch/x86/commpage.h&gt;
 
 #include &quot;interrupts.h&quot;
 
-#include &lt;string.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;stdio.h&gt;
 
-
 /* cpu vendor info */
 struct cpu_vendor_info {
 	const char *vendor;

Modified: haiku/trunk/src/system/kernel/arch/x86/arch_debug.cpp
===================================================================
--- haiku/trunk/src/system/kernel/arch/x86/arch_debug.cpp	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/arch/x86/arch_debug.cpp	2007-09-27 12:21:33 UTC (rev 22329)
@@ -7,19 +7,21 @@
  */
 
 
+#include &lt;arch/debug.h&gt;
+
+#include &lt;stdlib.h&gt;
+
 #include &lt;debug.h&gt;
 #include &lt;elf.h&gt;
 #include &lt;kernel.h&gt;
 #include &lt;kimage.h&gt;
 #include &lt;thread.h&gt;
 #include &lt;vm.h&gt;
+#include &lt;vm_types.h&gt;
 
-#include &lt;arch/debug.h&gt;
 #include &lt;arch_cpu.h&gt;
 
-#include &lt;stdlib.h&gt;
 
-
 struct stack_frame {
 	struct stack_frame	*previous;
 	addr_t				return_address;

Modified: haiku/trunk/src/system/kernel/arch/x86/arch_thread.c
===================================================================
--- haiku/trunk/src/system/kernel/arch/x86/arch_thread.c	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/arch/x86/arch_thread.c	2007-09-27 12:21:33 UTC (rev 22329)
@@ -7,15 +7,17 @@
  */
 
 
-#include &lt;thread.h&gt;
 #include &lt;arch/thread.h&gt;
+
 #include &lt;arch/user_debugger.h&gt;
 #include &lt;arch_cpu.h&gt;
+#include &lt;debug.h&gt;
 #include &lt;kernel.h&gt;
-#include &lt;debug.h&gt;
 #include &lt;int.h&gt;
+#include &lt;thread.h&gt;
+#include &lt;tls.h&gt;
 #include &lt;vm_address_space.h&gt;
-#include &lt;tls.h&gt;
+#include &lt;vm_types.h&gt;
 
 #include &lt;string.h&gt;
 

Modified: haiku/trunk/src/system/kernel/arch/x86/commpage.c
===================================================================
--- haiku/trunk/src/system/kernel/arch/x86/commpage.c	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/arch/x86/commpage.c	2007-09-27 12:21:33 UTC (rev 22329)
@@ -2,12 +2,18 @@
  * Copyright 2007, Travis Geiselbrecht. All rights reserved.
  * Distributed under the terms of the MIT License.
  */
-#include &lt;vm.h&gt;
+
+
 #include &lt;arch/x86/commpage.h&gt;
 
-#include &lt;KernelExport.h&gt;
 #include &lt;string.h&gt;
 
+#include &lt;KernelExport.h&gt;
+
+#include &lt;vm.h&gt;
+#include &lt;vm_types.h&gt;
+
+
 static area_id comm_area;
 static area_id user_comm_area;
 static unsigned long *comm_ptr;
@@ -18,14 +24,16 @@
 extern void _user_syscall_int(void);
 extern unsigned int _user_syscall_int_end;
 
-static inline
-addr_t commpage_ptr_to_user_ptr(const void *ptr)
+
+static inline addr_t
+commpage_ptr_to_user_ptr(const void *ptr)
 {
 	return ((addr_t)ptr) + ((addr_t)user_comm_ptr - (addr_t)comm_ptr);
 }
 
-static
-status_t initialize_commpage_syscall(void)
+
+static status_t
+initialize_commpage_syscall(void)
 {
 	size_t len;
 	
@@ -40,19 +48,20 @@
 	return B_OK;
 }
 
+
 status_t
 commpage_init(void)
 {
 	int i;
 
 	// create a read/write kernel area
-	comm_area = create_area(&quot;commpage&quot;, (void **)&amp;comm_ptr, B_ANY_ADDRESS, COMMPAGE_SIZE, B_FULL_LOCK, 
-		B_KERNEL_WRITE_AREA | B_KERNEL_READ_AREA);
+	comm_area = create_area(&quot;commpage&quot;, (void **)&amp;comm_ptr, B_ANY_ADDRESS,
+		COMMPAGE_SIZE, B_FULL_LOCK, B_KERNEL_WRITE_AREA | B_KERNEL_READ_AREA);
 
 	// clone it at a fixed address with user read/only permissions
 	user_comm_ptr = (void *)USER_COMMPAGE_ADDR;
-	user_comm_area = clone_area(&quot;user_commpage&quot;, (void **)&amp;user_comm_ptr, B_EXACT_ADDRESS, 
-		B_READ_AREA | B_EXECUTE_AREA, comm_area);
+	user_comm_area = clone_area(&quot;user_commpage&quot;, (void **)&amp;user_comm_ptr,
+		B_EXACT_ADDRESS, B_READ_AREA | B_EXECUTE_AREA, comm_area);
 
 	// zero it out
 	memset(comm_ptr, 0, COMMPAGE_SIZE);

Modified: haiku/trunk/src/system/kernel/cache/block_allocator.cpp
===================================================================
--- haiku/trunk/src/system/kernel/cache/block_allocator.cpp	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/cache/block_allocator.cpp	2007-09-27 12:21:33 UTC (rev 22329)
@@ -10,6 +10,7 @@
 
 #include &lt;vm_address_space.h&gt;
 #include &lt;vm_page.h&gt;
+#include &lt;vm_types.h&gt;
 #include &lt;util/AutoLock.h&gt;
 #include &lt;util/khash.h&gt;
 

Modified: haiku/trunk/src/system/kernel/cache/vnode_store.h
===================================================================
--- haiku/trunk/src/system/kernel/cache/vnode_store.h	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/cache/vnode_store.h	2007-09-27 12:21:33 UTC (rev 22329)
@@ -6,7 +6,7 @@
 #define VNODE_STORE_H
 
 
-#include &lt;vm.h&gt;
+#include &lt;vm_types.h&gt;
 
 
 struct vnode_store {

Modified: haiku/trunk/src/system/kernel/debug/debug.c
===================================================================
--- haiku/trunk/src/system/kernel/debug/debug.c	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/debug/debug.c	2007-09-27 12:21:33 UTC (rev 22329)
@@ -15,6 +15,7 @@
 #include &lt;driver_settings.h&gt;
 #include &lt;frame_buffer_console.h&gt;
 #include &lt;int.h&gt;
+#include &lt;kernel.h&gt;
 #include &lt;smp.h&gt;
 #include &lt;thread.h&gt;
 #include &lt;vm.h&gt;

Modified: haiku/trunk/src/system/kernel/debug/gdb.c
===================================================================
--- haiku/trunk/src/system/kernel/debug/gdb.c	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/debug/gdb.c	2007-09-27 12:21:33 UTC (rev 22329)
@@ -1,5 +1,5 @@
 /*
- * Copyright 2005-2006, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A>
+ * Copyright 2005-2007, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A>
  * Distributed under the terms of the MIT License.
  *
  * Copyright 2002, Manuel J. Petit. All rights reserved.
@@ -13,10 +13,13 @@
 #include &lt;string.h&gt;
 #include &lt;stdarg.h&gt;
 #include &lt;stdio.h&gt;
+
+#include &lt;ByteOrder.h&gt;
+
+#include &lt;arch/debug_console.h&gt;
+#include &lt;debug.h&gt;
+#include &lt;smp.h&gt;
 #include &lt;vm.h&gt;
-#include &lt;smp.h&gt;
-#include &lt;debug.h&gt;
-#include &lt;arch/debug_console.h&gt;
 
 
 enum { INIT = 0, CMDREAD, CKSUM1, CKSUM2, WAITACK, QUIT, GDBSTATES };

Modified: haiku/trunk/src/system/kernel/elf.cpp
===================================================================
--- haiku/trunk/src/system/kernel/elf.cpp	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/elf.cpp	2007-09-27 12:21:33 UTC (rev 22329)
@@ -1,5 +1,5 @@
 /*
- * Copyright 2002-2006, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A> All rights reserved.
+ * Copyright 2002-2007, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A> All rights reserved.
  * Distributed under the terms of the MIT License.
  *
  * Copyright 2001, Travis Geiselbrecht. All rights reserved.
@@ -8,29 +8,32 @@
 
 /* Contains the ELF loader */
 
+#include &lt;elf.h&gt;
+
 #include &lt;OS.h&gt;
-#include &lt;elf.h&gt;
+
+#include &lt;unistd.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;ctype.h&gt;
+
+#include &lt;debug.h&gt;
+#include &lt;kimage.h&gt;
+#include &lt;syscalls.h&gt;
+#include &lt;team.h&gt;
+#include &lt;thread.h&gt;
+#include &lt;util/khash.h&gt;
 #include &lt;vfs.h&gt;
 #include &lt;vm.h&gt;
 #include &lt;vm_address_space.h&gt;
-#include &lt;thread.h&gt;
-#include &lt;team.h&gt;
-#include &lt;debug.h&gt;
-#include &lt;kimage.h&gt;
-#include &lt;util/khash.h&gt;
-#include &lt;syscalls.h&gt;
+#include &lt;vm_types.h&gt;
 
 #include &lt;arch/cpu.h&gt;
 #include &lt;arch/elf.h&gt;
 #include &lt;elf_priv.h&gt;
 #include &lt;boot/elf.h&gt;
 
-#include &lt;unistd.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;ctype.h&gt;
-
 //#define TRACE_ELF
 #ifdef TRACE_ELF
 #	define TRACE(x) dprintf x

Modified: haiku/trunk/src/system/kernel/slab/Slab.cpp
===================================================================
--- haiku/trunk/src/system/kernel/slab/Slab.cpp	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/slab/Slab.cpp	2007-09-27 12:21:33 UTC (rev 22329)
@@ -10,22 +10,22 @@
 
 #include &quot;slab_private.h&quot;
 
+#include &lt;algorithm&gt;
+#include &lt;new&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
 
 #include &lt;KernelExport.h&gt;
+
+#include &lt;smp.h&gt;
 #include &lt;util/AutoLock.h&gt;
 #include &lt;util/DoublyLinkedList.h&gt;
 #include &lt;util/OpenHashTable.h&gt;
-
-#include &lt;smp.h&gt;
 #include &lt;vm.h&gt;
+#include &lt;vm_types.h&gt;
 #include &lt;vm_low_memory.h&gt;
 
-#include &lt;algorithm&gt; // swap
-#include &lt;new&gt;
 
-
 // TODO kMagazineCapacity should be dynamically tuned per cache.
 
 

Modified: haiku/trunk/src/system/kernel/system_info.c
===================================================================
--- haiku/trunk/src/system/kernel/system_info.c	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/system_info.c	2007-09-27 12:21:33 UTC (rev 22329)
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2004-2006, Haiku, Inc.
+ * Copyright (c) 2004-2007, Haiku, Inc.
  * Distributed under the terms of the MIT license.
  *
  * Authors:
@@ -8,14 +8,14 @@
  */
 
 
+#include &lt;system_info.h&gt;
+
 #include &lt;OS.h&gt;
 #include &lt;KernelExport.h&gt;
 
-#include &lt;system_info.h&gt;
-#include &lt;arch/system_info.h&gt;
-
 #include &lt;cpu.h&gt;
 #include &lt;debug.h&gt;
+#include &lt;kernel.h&gt;
 #include &lt;port.h&gt;
 #include &lt;real_time_clock.h&gt;
 #include &lt;sem.h&gt;
@@ -25,6 +25,8 @@
 #include &lt;vm.h&gt;
 #include &lt;vm_page.h&gt;
 
+#include &lt;arch/system_info.h&gt;
+
 #include &lt;string.h&gt;
 
 

Modified: haiku/trunk/src/system/kernel/thread.cpp
===================================================================
--- haiku/trunk/src/system/kernel/thread.cpp	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/thread.cpp	2007-09-27 12:21:33 UTC (rev 22329)
@@ -24,7 +24,9 @@
 #include &lt;tls.h&gt;
 #include &lt;user_runtime.h&gt;
 #include &lt;vfs.h&gt;
+#include &lt;vm.h&gt;
 #include &lt;vm_address_space.h&gt;
+#include &lt;vm_types.h&gt;
 
 #include &lt;boot/kernel_args.h&gt;
 #include &lt;util/khash.h&gt;

Modified: haiku/trunk/src/system/kernel/util/cbuf.c
===================================================================
--- haiku/trunk/src/system/kernel/util/cbuf.c	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/util/cbuf.c	2007-09-27 12:21:33 UTC (rev 22329)
@@ -1,5 +1,5 @@
 /*
- * Copyright 2002-2005, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A> All rights reserved.
+ * Copyright 2002-2007, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A> All rights reserved.
  * Distributed under the terms of the MIT License.
  *
  * Copyright 2001-2002, Travis Geiselbrecht. All rights reserved.
@@ -12,14 +12,16 @@
  */
 
 
-#include &lt;OS.h&gt;
-#include &lt;KernelExport.h&gt;
 #include &lt;cbuf.h&gt;
-#include &lt;vm.h&gt;
 
 #include &lt;string.h&gt;
 
+#include &lt;KernelExport.h&gt;
 
+#include &lt;lock.h&gt;
+#include &lt;kernel.h&gt;
+
+
 #define CBUF_LENGTH 2048
 
 #define CBUF_FLAG_CHAIN_HEAD 1

Modified: haiku/trunk/src/system/kernel/vm/vm.cpp
===================================================================
--- haiku/trunk/src/system/kernel/vm/vm.cpp	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/vm/vm.cpp	2007-09-27 12:21:33 UTC (rev 22329)
@@ -35,6 +35,7 @@
 #include &lt;thread.h&gt;
 #include &lt;team.h&gt;
 #include &lt;util/AutoLock.h&gt;
+#include &lt;util/khash.h&gt;
 
 #include &lt;boot/stage2.h&gt;
 #include &lt;boot/elf.h&gt;

Modified: haiku/trunk/src/system/kernel/vm/vm_cache.cpp
===================================================================
--- haiku/trunk/src/system/kernel/vm/vm_cache.cpp	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/vm/vm_cache.cpp	2007-09-27 12:21:33 UTC (rev 22329)
@@ -11,9 +11,6 @@
 #include &lt;stddef.h&gt;
 #include &lt;stdlib.h&gt;
 
-#include &lt;util/khash.h&gt;
-#include &lt;util/AutoLock.h&gt;
-
 #include &lt;arch/cpu.h&gt;
 #include &lt;condition_variable.h&gt;
 #include &lt;debug.h&gt;
@@ -21,9 +18,12 @@
 #include &lt;kernel.h&gt;
 #include &lt;lock.h&gt;
 #include &lt;smp.h&gt;
+#include &lt;util/khash.h&gt;
+#include &lt;util/AutoLock.h&gt;
 #include &lt;vm.h&gt;
 #include &lt;vm_page.h&gt;
 #include &lt;vm_priv.h&gt;
+#include &lt;vm_types.h&gt;
 
 
 //#define TRACE_VM_CACHE

Modified: haiku/trunk/src/system/kernel/vm/vm_store_device.c
===================================================================
--- haiku/trunk/src/system/kernel/vm/vm_store_device.c	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/vm/vm_store_device.c	2007-09-27 12:21:33 UTC (rev 22329)
@@ -16,8 +16,8 @@
 
 
 struct device_store {
-	vm_store	vm;
-	addr_t		base_address;
+	struct vm_store	vm;
+	addr_t			base_address;
 };
 
 
@@ -63,7 +63,8 @@
 
 
 static status_t
-device_fault(struct vm_store *_store, struct vm_address_space *aspace, off_t offset)
+device_fault(struct vm_store *_store, struct vm_address_space *aspace,
+	off_t offset)
 {
 	// devices are mapped in completely, so we shouldn't experience faults
 	return B_BAD_ADDRESS;
@@ -82,7 +83,7 @@
 };
 
 
-vm_store *
+struct vm_store *
 vm_store_create_device(addr_t baseAddress)
 {
 	struct device_store *store = malloc(sizeof(struct device_store));

Modified: haiku/trunk/src/system/kernel/vm/vm_store_device.h
===================================================================
--- haiku/trunk/src/system/kernel/vm/vm_store_device.h	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/vm/vm_store_device.h	2007-09-27 12:21:33 UTC (rev 22329)
@@ -1,5 +1,5 @@
 /*
- * Copyright 2005, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A>
+ * Copyright 2005-2007, Axel D&#246;rfler, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de.</A>
  * Distributed under the terms of the MIT License.
  *
  * Copyright 2001-2002, Travis Geiselbrecht. All rights reserved.
@@ -15,6 +15,6 @@
 #ifdef __cplusplus
 extern &quot;C&quot;
 #endif
-vm_store *vm_store_create_device(addr_t base_addr);
+struct vm_store *vm_store_create_device(addr_t base_addr);
 
 #endif	/* _KERNEL_VM_STORE_DEVICE_H */

Modified: haiku/trunk/src/system/kernel/vm/vm_store_null.c
===================================================================
--- haiku/trunk/src/system/kernel/vm/vm_store_null.c	2007-09-27 12:12:24 UTC (rev 22328)
+++ haiku/trunk/src/system/kernel/vm/vm_store_null.c	2007-09-27 12:21:33 UTC (rev 22329)
@@ -35,25 +35,27 @@
 
 
 static status_t
-null_read(struct vm_store *store, off_t offset, const iovec *vecs, size_t count,
-	size_t *_numBytes, bool fsReenter)
+null_read(struct vm_store *store, off_t offset, const iovec *vecs,
+	size_t count, size_t *_numBytes, bool fsReenter)
 {
 	return -1;
 }
 
 
 static status_t
-null_write(struct vm_store *store, off_t offset, const iovec *vecs, size_t count,
-	size_t *_numBytes, bool fsReenter)
+null_write(struct vm_store *store, off_t offset, const iovec *vecs,
+	size_t count, size_t *_numBytes, bool fsReenter)
 {
 	return -1;

[... truncated: 51 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004011.html">[Haiku-commits] r22328 - haiku/trunk/src/system/kernel/vm
</A></li>
	<LI>Next message: <A HREF="004013.html">[Haiku-commits] r22329 - in haiku/trunk: headers/private/kernel	headers/private/kernel/arch headers/private/kernel/arch/x86	headers/private/kernel/util src/system/kernel	src/system/kernel/arch/x86 src/system/kernel/cache	src/system/kernel/debug s
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4012">[ date ]</a>
              <a href="thread.html#4012">[ thread ]</a>
              <a href="subject.html#4012">[ subject ]</a>
              <a href="author.html#4012">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
