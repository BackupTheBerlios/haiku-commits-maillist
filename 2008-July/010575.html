<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r26601 - haiku/trunk/src/system/kernel/device_manager
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r26601%20-%0A%20haiku/trunk/src/system/kernel/device_manager&In-Reply-To=%3C20080725011425.722.3%40knochen-vm.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010568.html">
   <LINK REL="Next"  HREF="010539.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r26601 - haiku/trunk/src/system/kernel/device_manager</H1>
    <B>Ingo Weinhold</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r26601%20-%0A%20haiku/trunk/src/system/kernel/device_manager&In-Reply-To=%3C20080725011425.722.3%40knochen-vm.localdomain%3E"
       TITLE="[Haiku-commits] r26601 - haiku/trunk/src/system/kernel/device_manager">ingo_weinhold at gmx.de
       </A><BR>
    <I>Fri Jul 25 01:14:25 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="010568.html">[Haiku-commits] r26601 -	haiku/trunk/src/system/kernel/device_manager
</A></li>
        <LI>Next message: <A HREF="010539.html">[Haiku-commits] r26602 -	haiku/trunk/src/tests/system/kernel/device_manager
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10575">[ date ]</a>
              <a href="thread.html#10575">[ thread ]</a>
              <a href="subject.html#10575">[ subject ]</a>
              <a href="author.html#10575">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 2008-07-25 at 00:36:38 [+0200], Rene Gollent &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">anevilyak at gmail.com</A>&gt; wrote:
&gt;<i> On Thu, Jul 24, 2008 at 3:44 PM, Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">ingo_weinhold at gmx.de</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It's even worse: The user app could delete the area in question. This
</I>&gt;<i> &gt; should block too, until all memory locks on it are removed.
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> I thought delete_area() on locked mem fails already?
</I>
I might be wrong, but I don't recall having seen anything in the code to that 
effect. I'd say when this happens the error message is brought to you by the 
kernel panic() &quot;remove page ... from cache ...: page still has mappings&quot;.

You're right though, delete_area() definitely should fail, or probably even 
better block until the memory has been unlocked.

&gt;<i> If it doesn't,
</I>&gt;<i> that'd affect more than just the I/O scheduler already, no?
</I>
Yep all drivers that lock user memory. Since usually the user thread of the 
respective team locks the memory, waits, and unlocks it again, the address 
space won't go anywhere in the meantime. That the area is deleted by another 
thread isn't that common either.

CU, Ingo

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010568.html">[Haiku-commits] r26601 -	haiku/trunk/src/system/kernel/device_manager
</A></li>
	<LI>Next message: <A HREF="010539.html">[Haiku-commits] r26602 -	haiku/trunk/src/tests/system/kernel/device_manager
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10575">[ date ]</a>
              <a href="thread.html#10575">[ thread ]</a>
              <a href="subject.html#10575">[ subject ]</a>
              <a href="author.html#10575">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
