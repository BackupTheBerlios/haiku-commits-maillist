<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r26656 - haiku/trunk/src/servers/app/drawing/Painter
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r26656%20-%0A%20haiku/trunk/src/servers/app/drawing/Painter&In-Reply-To=%3C20080729000447.503.2%40knochen-vm.localdomain%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010617.html">
   <LINK REL="Next"  HREF="010606.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r26656 - haiku/trunk/src/servers/app/drawing/Painter</H1>
    <B>Ingo Weinhold</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r26656%20-%0A%20haiku/trunk/src/servers/app/drawing/Painter&In-Reply-To=%3C20080729000447.503.2%40knochen-vm.localdomain%3E"
       TITLE="[Haiku-commits] r26656 - haiku/trunk/src/servers/app/drawing/Painter">ingo_weinhold at gmx.de
       </A><BR>
    <I>Tue Jul 29 00:04:47 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="010617.html">[Haiku-commits] r26656 - haiku/trunk/src/servers/app/drawing/Painter
</A></li>
        <LI>Next message: <A HREF="010606.html">[Haiku-commits] r26657 - haiku/trunk/src/servers/app/drawing/Painter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10620">[ date ]</a>
              <a href="thread.html#10620">[ thread ]</a>
              <a href="subject.html#10620">[ subject ]</a>
              <a href="author.html#10620">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 2008-07-28 at 22:45:19 [+0200], Axel D&#246;rfler &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de</A>&gt; 
wrote:
&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">stippi at mail.berlios.de</A> wrote:
</I>&gt;<i> &gt; * Added a compile time option to allocate the filter weighting and
</I>&gt;<i> &gt; index
</I>&gt;<i> &gt;   caches on the heap instead of the cache. I am not sure if it is a
</I>&gt;<i> &gt; problem
</I>&gt;<i> &gt;   though, I recall Haiku threads have quite a lot of stack space. The
</I>&gt;<i> &gt; needed
</I>&gt;<i> &gt;   memory depends on the target size. For a screen with 1920x1200, the
</I>&gt;<i> &gt; caches
</I>&gt;<i> &gt;   would need 12.5 KB. Allocating them on the stack saves about 0.2 ms
</I>&gt;<i> &gt; on my
</I>&gt;<i> &gt;   test system.
</I>&gt;<i> 
</I>&gt;<i> Variable sized stack allocations don't sound that nice, but 12.5 KB for
</I>&gt;<i> 1920x1200 should be bearable -- currently, every user thread has 192 KB
</I>&gt;<i> stack (or should have, for some reason it's 256 KB right now). For the
</I>&gt;<i> thread heavy app_server, I would like to reduce the stack size a bit,
</I>&gt;<i> though (to save address space), maybe something between 64 to 128 KB.
</I>
Just as a reminder: The (private) API for creating threads with a custom 
stack size is already there.

&gt;<i> In any case, maybe you could allocate on the stack up to a certain size
</I>&gt;<i> only - this would speed up the general case without hurting future
</I>&gt;<i> stability and robustness.
</I>
Or maybe allocate it on the heap the first time and keep the allocation 
around for later reuse.

BTW, how often is the code executed that the heap allocation sums up to 0.2 
ms?

CU, Ingo

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010617.html">[Haiku-commits] r26656 - haiku/trunk/src/servers/app/drawing/Painter
</A></li>
	<LI>Next message: <A HREF="010606.html">[Haiku-commits] r26657 - haiku/trunk/src/servers/app/drawing/Painter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10620">[ date ]</a>
              <a href="thread.html#10620">[ thread ]</a>
              <a href="subject.html#10620">[ subject ]</a>
              <a href="author.html#10620">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
