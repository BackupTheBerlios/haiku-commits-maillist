<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r27615 - haiku/trunk/src/add-ons/kernel/partitioning_systems/intel
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27615%20-%0A%20haiku/trunk/src/add-ons/kernel/partitioning_systems/intel&In-Reply-To=%3C20080918121343.17050%40gmx.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011973.html">
   <LINK REL="Next"  HREF="011976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r27615 - haiku/trunk/src/add-ons/kernel/partitioning_systems/intel</H1>
    <B>Stephan Assmus</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27615%20-%0A%20haiku/trunk/src/add-ons/kernel/partitioning_systems/intel&In-Reply-To=%3C20080918121343.17050%40gmx.net%3E"
       TITLE="[Haiku-commits] r27615 - haiku/trunk/src/add-ons/kernel/partitioning_systems/intel">superstippi at gmx.de
       </A><BR>
    <I>Thu Sep 18 14:13:43 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="011973.html">[Haiku-commits] r27615 - haiku/trunk/src/add-ons/kernel/partitioning_systems/intel
</A></li>
        <LI>Next message: <A HREF="011976.html">[Haiku-commits] r27615 - haiku/trunk/src/add-ons/kernel/partitioning_systems/intel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11975">[ date ]</a>
              <a href="thread.html#11975">[ thread ]</a>
              <a href="subject.html#11975">[ subject ]</a>
              <a href="author.html#11975">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-------- Original-Nachricht --------
&gt;<i> Datum: Thu, 18 Sep 2008 13:34:56 +0200
</I>&gt;<i> Von: Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">ingo_weinhold at gmx.de</A>&gt;
</I>&gt;<i> An: SVN commits to the Haiku source repository &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">haiku-commits at lists.berlios.de</A>&gt;
</I>&gt;<i> Betreff: Re: [Haiku-commits] r27615 - haiku/trunk/src/add-ons/kernel/partitioning_systems/intel
</I>
&gt;<i> 
</I>&gt;<i> On 2008-09-18 at 11:20:35 [+0200], stippi at BerliOS
</I>&gt;<i> &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">stippi at mail.berlios.de</A>&gt; 
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; Author: stippi
</I>&gt;<i> &gt; Date: 2008-09-18 11:20:34 +0200 (Thu, 18 Sep 2008)
</I>&gt;<i> &gt; New Revision: 27615
</I>&gt;<i> &gt; ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=27615&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=27615&amp;view=rev</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Modified:
</I>&gt;<i> &gt;   
</I>&gt;<i> haiku/trunk/src/add-ons/kernel/partitioning_systems/intel/PartitionMap.cp
</I>&gt;<i> &gt;    p
</I>&gt;<i> &gt; Log:
</I>&gt;<i> &gt; Ah yes, here is the TODO I wrote with regards to the comment in my
</I>&gt;<i> earlier
</I>&gt;<i> &gt; commit.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Modified: 
</I>&gt;<i> &gt;
</I>&gt;<i> haiku/trunk/src/add-ons/kernel/partitioning_systems/intel/PartitionMap.cpp
</I>&gt;<i> &gt; ===================================================================
</I>&gt;<i> &gt; --- 
</I>&gt;<i> &gt;
</I>&gt;<i> haiku/trunk/src/add-ons/kernel/partitioning_systems/intel/PartitionMap.cpp  
</I>&gt;<i> &gt;   2008-09-18 09:19:20 UTC (rev 27614)
</I>&gt;<i> &gt; +++ 
</I>&gt;<i> &gt;
</I>&gt;<i> haiku/trunk/src/add-ons/kernel/partitioning_systems/intel/PartitionMap.cpp  
</I>&gt;<i> &gt;   2008-09-18 09:20:34 UTC (rev 27615)
</I>&gt;<i> &gt; @@ -576,8 +576,16 @@
</I>&gt;<i> &gt;  {
</I>&gt;<i> &gt;      Unset();
</I>&gt;<i> &gt;      if (descriptor &amp;&amp; primary) {
</I>&gt;<i> &gt; +        // TODO: I am wondering if this is wrong, since it always uses
</I>&gt;<i> the
</I>&gt;<i> &gt; +        // offset of the primary partition as base offset, even for
</I>&gt;<i> &gt; +        // logical partitions that come much later in the chain. For
</I>&gt;<i> each,
</I>&gt;<i> &gt; +        // PTS in the chain of logical partitions, there should be one
</I>&gt;<i> &gt; +        // extended and one non-extended in the four possible table 
</I>&gt;<i> &gt; entries.
</I>&gt;<i> &gt; +        // So baseOffset would be wrong for all but the first three?
</I>&gt;<i> The
</I>&gt;<i> &gt; +        // forth logical partition, assuming it's the extended one,
</I>&gt;<i> would
</I>&gt;<i> &gt; +        // get a wrong baseOffset.
</I>&gt;<i> &gt;          off_t baseOffset = (descriptor-&gt;is_extended() ?
</I>&gt;<i> primary-&gt;Offset()
</I>&gt;<i> &gt; -                                                      : ptsOffset);
</I>&gt;<i> &gt; +            : ptsOffset);
</I>&gt;<i> &gt;          Partition::SetTo(descriptor, ptsOffset, baseOffset);
</I>&gt;<i> &gt;          fPrimary = primary;
</I>&gt;<i> &gt;      }
</I>&gt;<i> 
</I>&gt;<i> I really don't understand your comment at all. A descriptor for a logical 
</I>&gt;<i> partition is not marked extended, so its base offset is the given
</I>&gt;<i> ptsOffset, 
</I>&gt;<i> which is the offset of the PTS the descriptor lives in (cf. 
</I>&gt;<i> PartitionMapParser::_ParseExtended()). The base offset for the extended 
</I>&gt;<i> descriptors in the singly linked list is the start of the extended
</I>&gt;<i> partition.
</I>
So for each logical partition, you have 2 PTS? One describing the next logical partition (PTS is marked as extended) and one describing the logical partion itself (marked as primary)? The extended PTS of the two does not describe a partition with content? I am sorry if I added non-sense comments, but I am working on different computers and of course I am going to clean these up later. For now, they help me understand what is going on. The code is commented way too little for someone to pick up the work.

Best regars,
-Stephan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011973.html">[Haiku-commits] r27615 - haiku/trunk/src/add-ons/kernel/partitioning_systems/intel
</A></li>
	<LI>Next message: <A HREF="011976.html">[Haiku-commits] r27615 - haiku/trunk/src/add-ons/kernel/partitioning_systems/intel
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11975">[ date ]</a>
              <a href="thread.html#11975">[ thread ]</a>
              <a href="subject.html#11975">[ subject ]</a>
              <a href="author.html#11975">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
