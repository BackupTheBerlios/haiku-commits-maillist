<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r27425 - haiku/trunk/src/apps/magnify
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27425%20-%20haiku/trunk/src/apps/magnify&In-Reply-To=%3C200809112252.m8BMqjrJ026783%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011701.html">
   <LINK REL="Next"  HREF="011703.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r27425 - haiku/trunk/src/apps/magnify</H1>
    <B>julun at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27425%20-%20haiku/trunk/src/apps/magnify&In-Reply-To=%3C200809112252.m8BMqjrJ026783%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r27425 - haiku/trunk/src/apps/magnify">julun at mail.berlios.de
       </A><BR>
    <I>Fri Sep 12 00:52:45 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="011701.html">[Haiku-commits] r27424 - haiku/trunk/headers/posix
</A></li>
        <LI>Next message: <A HREF="011703.html">[Haiku-commits] r27426 - haiku/trunk/src/apps/magnify
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11702">[ date ]</a>
              <a href="thread.html#11702">[ thread ]</a>
              <a href="subject.html#11702">[ subject ]</a>
              <a href="author.html#11702">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: julun
Date: 2008-09-12 00:52:44 +0200 (Fri, 12 Sep 2008)
New Revision: 27425
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=27425&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=27425&amp;view=rev</A>

Modified:
   haiku/trunk/src/apps/magnify/Magnify.cpp
Log:
* automatic whitespace cleanup



Modified: haiku/trunk/src/apps/magnify/Magnify.cpp
===================================================================
--- haiku/trunk/src/apps/magnify/Magnify.cpp	2008-09-11 22:45:17 UTC (rev 27424)
+++ haiku/trunk/src/apps/magnify/Magnify.cpp	2008-09-11 22:52:44 UTC (rev 27425)
@@ -8,7 +8,6 @@
  * This file may be used under the terms of the Be Sample Code License.
  */
 
-
 #include &quot;Magnify.h&quot;
 
 #include &lt;Alert.h&gt;
@@ -91,13 +90,13 @@
 static float
 FontHeight(BView* target, bool full)
 {
-	font_height finfo;		
+	font_height finfo;
 	target-&gt;GetFontHeight(&amp;finfo);
 	float h = ceil(finfo.ascent) + ceil(finfo.descent);
 
 	if (full)
 		h += ceil(finfo.leading);
-	
+
 	return h;
 }
 
@@ -167,7 +166,7 @@
 	menuItem = new BMenuItem(&quot;Freeze/Unfreeze image&quot;, new BMessage(msg_freeze),'F');
 	menu-&gt;AddItem(menuItem);
 	menu-&gt;AddSeparatorItem();
-	
+
 	menuItem = new BMenuItem(&quot;Make Square&quot;, new BMessage(msg_make_square),'/');
 	menu-&gt;AddItem(menuItem);
 	menuItem = new BMenuItem(&quot;Decrease Window Size&quot;, new BMessage(msg_shrink),'-');
@@ -177,7 +176,7 @@
 	menuItem = new BMenuItem(&quot;Decrease Pixel Size&quot;, new BMessage(msg_shrink_pixel),',');
 	menu-&gt;AddItem(menuItem);
 	menuItem = new BMenuItem(&quot;Increase Pixel Size&quot;, new BMessage(msg_grow_pixel),'.');
-	menu-&gt;AddItem(menuItem);	
+	menu-&gt;AddItem(menuItem);
 }
 
 
@@ -244,7 +243,7 @@
 	if (InfoIsShowing())
 		fbRect.OffsetBy(10, fInfoHeight);
 	fFatBits = new TMagnify(fbRect, this);
-	fInfo-&gt;AddChild(fFatBits);	
+	fInfo-&gt;AddChild(fFatBits);
 
 	fFatBits-&gt;SetSelection(fShowInfo);
 	fInfo-&gt;SetMagView(fFatBits);
@@ -276,26 +275,26 @@
 TWindow::MessageReceived(BMessage* m)
 {
 	bool active = fFatBits-&gt;Active();
-	
+
 	switch (m-&gt;what) {
 		case B_ABOUT_REQUESTED:
 			be_app-&gt;MessageReceived(m);
 			break;
-			
+
 		case msg_help:
 			ShowHelp();
 			break;
-			
+
 		case msg_show_info:
 			if (active)
 				ShowInfo(!fShowInfo);
 			break;
-			
+
 		case msg_toggle_grid:
 			if (active)
 				SetGrid(!fShowGrid);
 			break;
-			
+
 		case msg_grow:
 			if (active)
 				ResizeWindow(true);
@@ -312,7 +311,7 @@
 				ResizeWindow(big, big);
 			}
 			break;
-			
+
 		case msg_shrink_pixel:
 			if (active)
 				SetPixelSize(false);
@@ -321,7 +320,7 @@
 			if (active)
 				SetPixelSize(true);
 			break;
-			
+
 		case msg_add_cross_hair:
 			if (active &amp;&amp; fShowInfo)
 				AddCrossHair();
@@ -343,7 +342,7 @@
 		case msg_save:
 			// freeze the image here, unfreeze after dump or cancel
 			fFatBits-&gt;StartSave();
-			
+
 			fSavePanel = new BFilePanel(B_SAVE_PANEL, new BMessenger(NULL, this),
 				0, 0, false, new BMessage(msg_dump));
 			fSavePanel-&gt;SetSaveText(&quot;Bitmaps.h&quot;);
@@ -352,12 +351,12 @@
 		case msg_dump:
 			{
 				delete fSavePanel;
-				
+
 				entry_ref dirRef;
 				char* name;
 				m-&gt;FindRef(&quot;directory&quot;, &amp;dirRef);
 				m-&gt;FindString((const char*)&quot;name&quot;,(const char**) &amp;name);
-				
+
 				fFatBits-&gt;SaveImage(&amp;dirRef, name);
 			}
 			break;
@@ -365,14 +364,14 @@
 			//	image is frozen before the FilePanel is shown
 			fFatBits-&gt;EndSave();
 			break;
-			
+
 		case msg_copy_image:
 			fFatBits-&gt;CopyImage();
 			break;
 		default:
 			BWindow::MessageReceived(m);
 			break;
-	}	
+	}
 }
 
 
@@ -459,7 +458,7 @@
 			if (haveLoc &amp;&amp; BScreen(B_MAIN_SCREEN_ID).Frame().Contains(loc)) {
 				MoveTo(loc);
 				goto DONE;
-			}			
+			}
 		}
 	}
 
@@ -501,7 +500,7 @@
 			CrossHairsShowing(&amp;ch1, &amp;ch2);
 			write(ref, &amp;ch1, sizeof(bool));
 			write(ref, &amp;ch2, sizeof(bool));
-			
+
 			write(ref, &amp;fHPixelCount, sizeof(int32));
 			write(ref, &amp;fVPixelCount, sizeof(int32));
 			write(ref, &amp;fPixelSize, sizeof(int32));
@@ -516,12 +515,12 @@
 TWindow::FrameResized(float w, float h)
 {
 	CalcViewablePixels();
-	
+
 	float width;
 	float height;
-	GetPreferredSize(&amp;width, &amp;height);		
+	GetPreferredSize(&amp;width, &amp;height);
 	ResizeTo(width, height);
-	
+
 	fFatBits-&gt;InitBuffers(fHPixelCount, fVPixelCount, fPixelSize, ShowGrid());
 }
 
@@ -555,14 +554,14 @@
 {
 	float w = Bounds().Width();
 	float h = Bounds().Height();
-	
+
 	if (InfoIsShowing()) {
 		w -= 20;							// remove the gutter
 		h = h-fInfoHeight-10;				// remove info and gutter
 	}
 
 	bool ch1, ch2;
-	fFatBits-&gt;CrossHairsShowing(&amp;ch1, &amp;ch2);	
+	fFatBits-&gt;CrossHairsShowing(&amp;ch1, &amp;ch2);
 	if (ch1)
 		h -= fFontHeight;
 	if (ch2)
@@ -584,16 +583,16 @@
 	*width = fHPixelCount * fPixelSize;			// calc window width
 	*height = fVPixelCount * fPixelSize;		// calc window height
 	if (InfoIsShowing()) {
-		*width += 20;			
+		*width += 20;
 		*height += fInfoHeight + 10;
 	}
-		
+
 	bool ch1, ch2;
-	fFatBits-&gt;CrossHairsShowing(&amp;ch1, &amp;ch2);	
+	fFatBits-&gt;CrossHairsShowing(&amp;ch1, &amp;ch2);
 	if (ch1)
 		*height += fFontHeight;
 	if (ch2)
-		*height += fFontHeight + 5;		
+		*height += fFontHeight + 5;
 }
 
 
@@ -602,10 +601,10 @@
 {
 	fHPixelCount = hPixelCount;
 	fVPixelCount = vPixelCount;
-			
+
 	float width, height;
 	GetPreferredSize(&amp;width, &amp;height);
-	
+
 	ResizeTo(width, height);
 }
 
@@ -615,7 +614,7 @@
 {
 	int32 x = fHPixelCount;
 	int32 y = fVPixelCount;
-	
+
 	if (direction) {
 		x += 4;
 		y += 4;
@@ -630,7 +629,7 @@
 	if (y &lt; 4)
 		y = 4;
 
-	ResizeWindow(x, y);	
+	ResizeWindow(x, y);
 }
 
 
@@ -639,7 +638,7 @@
 {
 	if (s == fShowGrid)
 		return;
-	
+
 	fShowGrid = s;
 	fFatBits-&gt;SetUpdate(true);
 }
@@ -657,7 +656,7 @@
 {
 	if (i == fShowInfo)
 		return;
-		
+
 	fShowInfo = i;
 
 	if (fShowInfo)
@@ -692,7 +691,7 @@
 	fFatBits-&gt;AddCrossHair();
 
 	// crosshair info needs to be added
-	// window resizes accordingly		
+	// window resizes accordingly
 	float width;
 	float height;
 	GetPreferredSize(&amp;width, &amp;height);
@@ -704,9 +703,9 @@
 TWindow::RemoveCrossHair()
 {
 	fFatBits-&gt;RemoveCrossHair();
-			
+
 	//	crosshair info needs to be removed
-	//	window resizes accordingly		
+	//	window resizes accordingly
 	float width;
 	float height;
 	GetPreferredSize(&amp;width, &amp;height);
@@ -734,7 +733,7 @@
 {
 	if (s == fPixelSize)
 		return;
-		
+
 	fPixelSize = s;
 	// resize window
 	// tell info that size has changed
@@ -762,7 +761,7 @@
 	float h = Bounds().Height();
 	CalcViewablePixels();
 	ResizeWindow(fHPixelCount, fVPixelCount);
-	
+
 	//	the window might not actually change in size
 	//	in that case force the buffers to the new dimension
 	if (w == Bounds().Width() &amp;&amp; h == Bounds().Height())
@@ -811,7 +810,7 @@
 	text-&gt;Insert(&quot;Info:\n&quot;);
 	text-&gt;Insert(&quot;  hide/show info - hides/shows all these new features\n&quot;);
 	text-&gt;Insert(&quot;    note: when showing, a red square will appear which signifies\n&quot;);
-	text-&gt;Insert(&quot;      which pixel's rgb values will be displayed\n&quot;);      		
+	text-&gt;Insert(&quot;      which pixel's rgb values will be displayed\n&quot;);
 	text-&gt;Insert(&quot;  add/remove crosshairs - 2 crosshairs can be added (or removed)\n&quot;);
 	text-&gt;Insert(&quot;    to aid in the alignment and placement of objects.\n&quot;);
 	text-&gt;Insert(&quot;    The crosshairs are represented by blue squares and blue lines.\n&quot;);
@@ -836,7 +835,7 @@
 	text-&gt;Insert(&quot;  option-arrow key - moves the mouse location 1 pixel at a time\n&quot;);
 	text-&gt;Insert(&quot;  x marks the selection - the current selection has an 'x' in it\n&quot;);
 
-	CenterWindowOnScreen(w);	
+	CenterWindowOnScreen(w);
 	w-&gt;Show();
 }
 
@@ -857,12 +856,12 @@
 		B_NO_BORDER)
 {
 	SetFont(be_plain_font);
-	fFontHeight = FontHeight(this, true);	
+	fFontHeight = FontHeight(this, true);
 	fMagView = NULL;
-	
+
 	fSelectionColor = kBlack;
 	fCH1Loc.x = fCH1Loc.y = fCH2Loc.x = fCH2Loc.y = 0;
-	
+
 	fInfoStr[0] = 0;
 	fRGBStr[0] = 0;
 	fCH1Str[0] = 0;
@@ -881,9 +880,9 @@
 	BBox::AttachedToWindow();
 
 	dynamic_cast&lt;TWindow*&gt;(Window())-&gt;PixelCount(&amp;fHPixelCount, &amp;fVPixelCount);
-	fPixelSize = dynamic_cast&lt;TWindow*&gt;(Window())-&gt;PixelSize();	
+	fPixelSize = dynamic_cast&lt;TWindow*&gt;(Window())-&gt;PixelSize();
 
-	AddMenu();	
+	AddMenu();
 }
 
 
@@ -927,14 +926,14 @@
 	SetHighColor(0,0,0,255);
 	strcpy(fRGBStr,str);
 	DrawString(fRGBStr);
-		
+
 	bool ch1Showing, ch2Showing;
 	dynamic_cast&lt;TWindow*&gt;(Window())-&gt;CrossHairsShowing(&amp;ch1Showing, &amp;ch2Showing);
-	
+
 	if (fMagView) {
 		BPoint pt1(fMagView-&gt;CrossHair1Loc());
 		BPoint pt2(fMagView-&gt;CrossHair2Loc());
-		
+
 		float h = Bounds().Height();
 		if (ch2Showing) {
 			MovePenTo(10, h-12);
@@ -947,7 +946,7 @@
 			strcpy(fCH2Str,str);
 			DrawString(fCH2Str);
 		}
-	
+
 		if (ch1Showing &amp;&amp; ch2Showing) {
 			MovePenTo(10, h-10-fFontHeight-2);
 			sprintf(str, &quot;1) x: %li  y: %li   x: %i&quot;, (int32)pt1.x, (int32)pt1.y,
@@ -969,7 +968,7 @@
 			DrawString(fCH1Str);
 		}
 	}
-	
+
 	PopState();
 }
 
@@ -1016,7 +1015,7 @@
 }
 
 
-void 
+void
 TMenu::AttachedToWindow()
 {
 	bool state = true;
@@ -1251,7 +1250,7 @@
 			BPopUpMenu *menu = new BPopUpMenu(&quot;Info&quot;);
 			menu-&gt;SetFont(be_plain_font);
 			BuildInfoMenu(menu);
-			
+
 			BMenuItem *selected = menu-&gt;Go(ConvertToScreen(where));
 			if (selected)
 				Window()-&gt;PostMessage(selected-&gt;Message()-&gt;what);
@@ -1261,13 +1260,13 @@
 
 		// add a mousedown looper here
 
-		int32 pixelSize = PixelSize();	
+		int32 pixelSize = PixelSize();
 		float x = where.x / pixelSize;
 		float y = where.y / pixelSize;
 
 		MoveSelectionTo(x, y);
 
-		// draw the frozen image	
+		// draw the frozen image
 		// update the info region
 
 		fNeedToUpdate = true;
@@ -1290,7 +1289,7 @@
 {
 	if (fShowSelection == state)
 		return;
-		
+
 	fShowSelection = state;
 	fSelection = 0;
 	Invalidate();
@@ -1659,10 +1658,10 @@
 	BFile file;
 	BDirectory parentDir(ref);
 	parentDir.CreateFile(name, &amp;file);
-	
+
 	// write off the bitmaps bits to the file
 	SaveBits(&amp;file, fImageView-&gt;Bitmap(), &quot;Data&quot;);
-	
+
 	// unfreeze the image, image was frozen before invoke of FilePanel
 	EndSave();
 }
@@ -1672,7 +1671,7 @@
 TMagnify::SaveBits(BFile* file, const BBitmap *bitmap, char* name) const
 {
 	int32 bytesPerPixel;
-	const char *kColorSpaceName;	
+	const char *kColorSpaceName;
 
 	switch (bitmap-&gt;ColorSpace()) {
 		case B_GRAY8:
@@ -1773,7 +1772,7 @@
 			fBytesPerPixel = 1;
 			break;
 		case B_RGB15:
- 		case B_RGBA15:
+		case B_RGBA15:
 		case B_RGB15_BIG:
 		case B_RGBA15_BIG:
 		case B_RGB16:
@@ -1880,7 +1879,7 @@
 
 			DrawBitmap(fBitmap, srcRect, destRect);
 
-			DrawGrid(width, height, destRect, pixelSize);		
+			DrawGrid(width, height, destRect, pixelSize);
 			DrawSelection();
 
 			Sync();
@@ -1931,7 +1930,7 @@
 		// horizontal lines
 		for (int32 i = pixelSize; i &lt; (height * pixelSize); i += pixelSize)
 			AddLine(BPoint(0, i), BPoint(destRect.right, i), kGridGray);
-			
+
 		// vertical lines
 		for (int32 i = pixelSize; i &lt; (width * pixelSize); i += pixelSize)
 			AddLine(BPoint(i, 0), BPoint(i, destRect.bottom), kGridGray);
@@ -1968,7 +1967,7 @@
 	if (selection == 0) {
 		StrokeLine(BPoint(x,y), BPoint(x+squareSize,y+squareSize));
 		StrokeLine(BPoint(x,y+squareSize), BPoint(x+squareSize,y));
-	}	
+	}
 
 	bool ch1Showing, ch2Showing;
 	fParent-&gt;CrossHairsShowing(&amp;ch1Showing, &amp;ch2Showing);
@@ -1992,7 +1991,7 @@
 		if (selection == 1) {
 			StrokeLine(BPoint(x,y), BPoint(x+squareSize,y+squareSize));
 			StrokeLine(BPoint(x,y+squareSize), BPoint(x+squareSize,y));
-		}	
+		}
 	}
 	if (ch2Showing) {
 		SetHighColor(kBlueColor);
@@ -2014,7 +2013,7 @@
 		if (selection == 2) {
 			StrokeLine(BPoint(x,y), BPoint(x+squareSize,y+squareSize));
 			StrokeLine(BPoint(x,y+squareSize), BPoint(x+squareSize,y));
-		}	
+		}
 	}
 
 	PopState();
@@ -2023,7 +2022,7 @@
 
 rgb_color
 TOSMagnify::ColorAtSelection()
-{			
+{
 	float x, y;
 	fParent-&gt;SelectionLoc(&amp;x, &amp;y);
 	BRect srcRect(x, y, x, y);
@@ -2033,7 +2032,7 @@
 	fPixelView-&gt;Sync();
 	fPixel-&gt;Unlock();
 
-	uint32 pixel = *((uint32*)fPixel-&gt;Bits());	
+	uint32 pixel = *((uint32*)fPixel-&gt;Bits());
 	rgb_color c;
 	c.alpha = pixel &gt;&gt; 24;
 	c.red = (pixel &gt;&gt; 16) &amp; 0xFF;
@@ -2073,6 +2072,6 @@
 	}
 
 	TApp app(pixelCount);
-	app.Run();	
+	app.Run();
 	return 0;
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011701.html">[Haiku-commits] r27424 - haiku/trunk/headers/posix
</A></li>
	<LI>Next message: <A HREF="011703.html">[Haiku-commits] r27426 - haiku/trunk/src/apps/magnify
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11702">[ date ]</a>
              <a href="thread.html#11702">[ thread ]</a>
              <a href="subject.html#11702">[ subject ]</a>
              <a href="author.html#11702">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
