<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r27258 - haiku/trunk/src/apps/deskbar
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27258%20-%20haiku/trunk/src/apps/deskbar&In-Reply-To=%3C1FBB57E6-3687-4DDB-96E2-B0BB09BB5DD7%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011422.html">
   <LINK REL="Next"  HREF="011427.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r27258 - haiku/trunk/src/apps/deskbar</H1>
    <B>Michael Pfeiffer</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27258%20-%20haiku/trunk/src/apps/deskbar&In-Reply-To=%3C1FBB57E6-3687-4DDB-96E2-B0BB09BB5DD7%40gmail.com%3E"
       TITLE="[Haiku-commits] r27258 - haiku/trunk/src/apps/deskbar">michael.w.pfeiffer at gmail.com
       </A><BR>
    <I>Mon Sep  1 13:49:35 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="011422.html">[Haiku-commits] r27258 - haiku/trunk/src/apps/deskbar
</A></li>
        <LI>Next message: <A HREF="011427.html">[Haiku-commits] r27258 - haiku/trunk/src/apps/deskbar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11423">[ date ]</a>
              <a href="thread.html#11423">[ thread ]</a>
              <a href="subject.html#11423">[ subject ]</a>
              <a href="author.html#11423">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Am 01.09.2008 um 13:07 schrieb Alexandre Deckner:

&gt;<i> Michael Pfeiffer wrote:
</I>&gt;&gt;<i> Am 31.08.2008 um 21:27 schrieb Alexandre Deckner:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> * Rewrote long click mouse tracking. This avoids busy looping in
</I>&gt;&gt;&gt;&gt;&gt;<i> TimeView::MouseDown and fixes
</I>&gt;&gt;&gt;&gt;&gt;<i> #591. The helper class could be reused for similar situations (ex:
</I>&gt;&gt;&gt;&gt;&gt;<i> Tracker context menu and
</I>&gt;&gt;&gt;&gt;&gt;<i> drag detection). See the brief doc in the code. Comments welcomed!
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hmm. This problem could be solved more elegantly by using a
</I>&gt;&gt;&gt;&gt;<i> BMessageRunner. This way the polling thread could be avoided
</I>&gt;&gt;&gt;&gt;<i> completely. IIRC src/apps/pairs/PairsWindow.cpp uses BMessageRunner
</I>&gt;&gt;&gt;&gt;<i> for a similar problem.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks for having a look, i talked about that with Ren&#233; and he  
</I>&gt;&gt;&gt;<i> told me
</I>&gt;&gt;&gt;<i> the same, but i didn't find my solution that ugly :) and still more
</I>&gt;&gt;&gt;<i> elegant than the previous impl!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I did not want to say it in my first my mail, but IMHO it is ugly ;)
</I>&gt;&gt;<i> 1) You need to poll, although that is not necessary.
</I>&gt;&gt;<i>
</I>&gt;<i> Ah? How can you know the duration of a mouse down otherwise?
</I>
You don't have to if you use a BMessageRunner. A brief outline of the  
algorithm I have in mind follows:
1) You have single pointer to BMesageRunner in your view initialized  
to NULL.
2) When the mouse button is clicked you start the one time message  
runner with the desired delay.
3) You stop the message runner when:
    - the mouse button is released
    - mouse moves outside the view (or restart it if mouse button is  
still pressed)
    - after the message runner message has been received
4) You perform the desired action when the message runner message  
receives.

&gt;&gt;<i> If you don't care, I can create an alternative implementation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> Yep, sincerely, go for it, i'm already on something else.
</I>
Hope I didn't step on your shoes. I have added an extra smile in the  
line with the word &quot;ugly&quot; on purpose :) Now that I am reading it a  
second time, I have to apologize, I am sorry, I should not have  
written it in the first place.
The rest of the mail was meant to be a constructive critique, though.

- Michael


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011422.html">[Haiku-commits] r27258 - haiku/trunk/src/apps/deskbar
</A></li>
	<LI>Next message: <A HREF="011427.html">[Haiku-commits] r27258 - haiku/trunk/src/apps/deskbar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11423">[ date ]</a>
              <a href="thread.html#11423">[ thread ]</a>
              <a href="subject.html#11423">[ subject ]</a>
              <a href="author.html#11423">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
