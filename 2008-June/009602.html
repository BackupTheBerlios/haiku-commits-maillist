<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r25952 - haiku/trunk/src/servers/app
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r25952%20-%20haiku/trunk/src/servers/app&In-Reply-To=%3Cf019d2f30806130701i4cd381dcia2c5d9050f784442%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009601.html">
   <LINK REL="Next"  HREF="009627.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r25952 - haiku/trunk/src/servers/app</H1>
    <B>Rene Gollent</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r25952%20-%20haiku/trunk/src/servers/app&In-Reply-To=%3Cf019d2f30806130701i4cd381dcia2c5d9050f784442%40mail.gmail.com%3E"
       TITLE="[Haiku-commits] r25952 - haiku/trunk/src/servers/app">anevilyak at gmail.com
       </A><BR>
    <I>Fri Jun 13 16:01:22 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009601.html">[Haiku-commits] r25952 - haiku/trunk/src/servers/app
</A></li>
        <LI>Next message: <A HREF="009627.html">[Haiku-commits] r25952 - haiku/trunk/src/servers/app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9602">[ date ]</a>
              <a href="thread.html#9602">[ thread ]</a>
              <a href="subject.html#9602">[ subject ]</a>
              <a href="author.html#9602">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jun 13, 2008 at 8:48 AM, mmlr at BerliOS &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">mmlr at mail.berlios.de</A>&gt; wrote:
&gt;<i> Author: mmlr
</I>&gt;<i> Date: 2008-06-13 15:48:33 +0200 (Fri, 13 Jun 2008)
</I>&gt;<i> New Revision: 25952
</I>&gt;<i> ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=25952&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=25952&amp;view=rev</A>
</I>&gt;<i>
</I>&gt;<i> Modified:
</I>&gt;<i>   haiku/trunk/src/servers/app/DefaultDecorator.cpp
</I>&gt;<i>   haiku/trunk/src/servers/app/DefaultDecorator.h
</I>&gt;<i> Log:
</I>&gt;<i> * Cache the close and zoom buttons in a blit-ready bitmap so the buttons don't
</I>&gt;<i>  need to be drawn each time an update occurs (switching focus/non-focus or
</I>&gt;<i>  pressed state, involving many graphics card blits and state updates in the
</I>&gt;<i>  drawing subsystem).
</I>&gt;<i> * Provide a shared list of already present bitmaps. All the default decorators
</I>&gt;<i>  now use the new _GetBitmapForButton static method to get a rendered bitmap
</I>&gt;<i>  of the button for the given size and state (focus, pressed). If a matching
</I>&gt;<i>  bitmap exists it is returned, otherwise a new one is created on demand using
</I>&gt;<i>  a shared BitmapDrawingEngine.
</I>&gt;<i> * Cache the colors of the tab and frame for both focus and non-focus states to
</I>&gt;<i>  avoid always looking them up.
</I>&gt;<i> * Added a todo that these bitmaps and the BitmapDrawingEngine are never freed.
</I>&gt;<i>  They should be freed on app_server quit, but as there are only like 12 of
</I>&gt;<i>  them anyway I didn't really bother.
</I>&gt;<i> * Some cleanup.
</I>&gt;<i>
</I>&gt;<i> This should reduce the waste of cycles for just drawing the default decorator
</I>&gt;<i> buttons quite a bit. Probably the whole tab should be pre-rendered though to
</I>&gt;<i> also safe the text rendering of the title.
</I>&gt;<i>
</I>
Nice work! I'm not so sure caching the entire tab is necessarily a
good idea though since the app can change the window title at will,
while it can't really change the decorator glyphs (that I'm aware of).
Also the glyphs will pretty much be shared among all apps, while the
titles won't, so caching the entire tab would definitely consume
noticeably more mem.

Regards,

Rene

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009601.html">[Haiku-commits] r25952 - haiku/trunk/src/servers/app
</A></li>
	<LI>Next message: <A HREF="009627.html">[Haiku-commits] r25952 - haiku/trunk/src/servers/app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9602">[ date ]</a>
              <a href="thread.html#9602">[ thread ]</a>
              <a href="subject.html#9602">[ subject ]</a>
              <a href="author.html#9602">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
