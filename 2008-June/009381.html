<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r25826 - haiku/trunk/src/apps/deskbar
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r25826%20-%20haiku/trunk/src/apps/deskbar&In-Reply-To=%3C200806061507.m56F7eqN019502%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009379.html">
   <LINK REL="Next"  HREF="009402.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r25826 - haiku/trunk/src/apps/deskbar</H1>
    <B>aldeck at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r25826%20-%20haiku/trunk/src/apps/deskbar&In-Reply-To=%3C200806061507.m56F7eqN019502%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r25826 - haiku/trunk/src/apps/deskbar">aldeck at mail.berlios.de
       </A><BR>
    <I>Fri Jun  6 17:07:40 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009379.html">[Haiku-commits] r25825 - haiku/trunk/src/kits/media
</A></li>
        <LI>Next message: <A HREF="009402.html">[Haiku-commits] r25826 - haiku/trunk/src/apps/deskbar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9381">[ date ]</a>
              <a href="thread.html#9381">[ thread ]</a>
              <a href="subject.html#9381">[ subject ]</a>
              <a href="author.html#9381">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: aldeck
Date: 2008-06-06 17:07:40 +0200 (Fri, 06 Jun 2008)
New Revision: 25826
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=25826&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=25826&amp;view=rev</A>

Modified:
   haiku/trunk/src/apps/deskbar/ExpandoMenuBar.cpp
Log:
- In vertical mode, TExpandoMenuBar used its own width to set the width of a newly added item. Removing the last item made the MenuBar resizes 
itself to (0,0), and broke further item width computation. We now use the parent view width (BarView) instead. This fixes #471 


Modified: haiku/trunk/src/apps/deskbar/ExpandoMenuBar.cpp
===================================================================
--- haiku/trunk/src/apps/deskbar/ExpandoMenuBar.cpp	2008-06-06 13:07:02 UTC (rev 25825)
+++ haiku/trunk/src/apps/deskbar/ExpandoMenuBar.cpp	2008-06-06 15:07:40 UTC (rev 25826)
@@ -488,7 +488,7 @@
 void
 TExpandoMenuBar::AddTeam(BList *team, BBitmap *icon, char *name, char *signature)
 {
-	float itemWidth = fVertical ? Frame().Width() : kMinimumWindowWidth;
+	float itemWidth = fVertical ? fBarView-&gt;Bounds().Width() : kMinimumWindowWidth;
 	float itemHeight = -1.0f;
 
 	desk_settings *settings = ((TBarApp *)be_app)-&gt;Settings();


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009379.html">[Haiku-commits] r25825 - haiku/trunk/src/kits/media
</A></li>
	<LI>Next message: <A HREF="009402.html">[Haiku-commits] r25826 - haiku/trunk/src/apps/deskbar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9381">[ date ]</a>
              <a href="thread.html#9381">[ thread ]</a>
              <a href="subject.html#9381">[ subject ]</a>
              <a href="author.html#9381">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
