<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r25875 - in	haiku/trunk/src/add-ons/kernel/drivers/graphics: . nvidia_gpgpu
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r25875%20-%20in%0A%09haiku/trunk/src/add-ons/kernel/drivers/graphics%3A%20.%20nvidia_gpgpu&In-Reply-To=%3C200806091454.m59EsXsO000242%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009465.html">
   <LINK REL="Next"  HREF="009467.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r25875 - in	haiku/trunk/src/add-ons/kernel/drivers/graphics: . nvidia_gpgpu</H1>
    <B>rudolfc at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r25875%20-%20in%0A%09haiku/trunk/src/add-ons/kernel/drivers/graphics%3A%20.%20nvidia_gpgpu&In-Reply-To=%3C200806091454.m59EsXsO000242%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r25875 - in	haiku/trunk/src/add-ons/kernel/drivers/graphics: . nvidia_gpgpu">rudolfc at mail.berlios.de
       </A><BR>
    <I>Mon Jun  9 16:54:33 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009465.html">[Haiku-commits] r25874 - in haiku/trunk/headers/private/graphics: .	nvidia_gpgpu
</A></li>
        <LI>Next message: <A HREF="009467.html">[Haiku-commits] r25876 -	haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9466">[ date ]</a>
              <a href="thread.html#9466">[ thread ]</a>
              <a href="subject.html#9466">[ subject ]</a>
              <a href="author.html#9466">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: rudolfc
Date: 2008-06-09 16:54:32 +0200 (Mon, 09 Jun 2008)
New Revision: 25875
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=25875&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=25875&amp;view=rev</A>

Added:
   haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/
Modified:
   haiku/trunk/src/add-ons/kernel/drivers/graphics/Jamfile
   haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/Jamfile
   haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/README.html
   haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/UPDATE.html
   haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/driver.c
Log:
kerneldriver for nvidia gpgpu driver

Modified: haiku/trunk/src/add-ons/kernel/drivers/graphics/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/drivers/graphics/Jamfile	2008-06-09 14:53:17 UTC (rev 25874)
+++ haiku/trunk/src/add-ons/kernel/drivers/graphics/Jamfile	2008-06-09 14:54:32 UTC (rev 25875)
@@ -6,6 +6,7 @@
 SubInclude HAIKU_TOP src add-ons kernel drivers graphics matrox ;
 SubInclude HAIKU_TOP src add-ons kernel drivers graphics neomagic ;
 SubInclude HAIKU_TOP src add-ons kernel drivers graphics nvidia ;
+SubInclude HAIKU_TOP src add-ons kernel drivers graphics nvidia_gpgpu ;
 SubInclude HAIKU_TOP src add-ons kernel drivers graphics radeon ;
 SubInclude HAIKU_TOP src add-ons kernel drivers graphics s3 ;
 SubInclude HAIKU_TOP src add-ons kernel drivers graphics tdfx ;

Copied: haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu (from rev 25872, haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia)

Modified: haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia/Jamfile	2008-06-09 13:01:58 UTC (rev 25872)
+++ haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/Jamfile	2008-06-09 14:54:32 UTC (rev 25875)
@@ -1,21 +1,21 @@
-SubDir HAIKU_TOP src add-ons kernel drivers graphics nvidia ;
+SubDir HAIKU_TOP src add-ons kernel drivers graphics nvidia_gpgpu ;
 
 SetSubDirSupportedPlatformsBeOSCompatible ;
 
 UsePrivateHeaders graphics ;
-UsePrivateHeaders [ FDirName graphics nvidia ] ;
+UsePrivateHeaders [ FDirName graphics nvidia_gpgpu ] ;
 
-KernelAddon nvidia :
+KernelAddon nvidia_gpgpu :
 	driver.c
 ;
 
-Package haiku-nvidia-cvs :
+Package haiku-nvidia_gpgpu-cvs :
 	README.html UPDATE.html ;
-Package haiku-nvidia-cvs :
-	nvidia : 
+Package haiku-nvidia_gpgpu-cvs :
+	nvidia_gpgpu : 
 	boot home config add-ons kernel drivers bin ;
-PackageDriverSymLink haiku-nvidia-cvs : graphics nvidia ;
-Package haiku-nvidia-cvs :
-	nvidia.settings :
+PackageDriverSymLink haiku-nvidia_gpgpu-cvs : graphics nvidia_gpgpu ;
+Package haiku-nvidia_gpgpu-cvs :
+	nvidia_gpgpu.settings :
 	boot home config settings kernel drivers ;
 

Modified: haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/README.html
===================================================================
--- haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia/README.html	2008-06-09 13:01:58 UTC (rev 25872)
+++ haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/README.html	2008-06-09 14:54:32 UTC (rev 25875)
@@ -2,247 +2,32 @@
 &lt;head&gt;
 	&lt;meta http-equiv=&quot;Content-Type&quot;	content=&quot;text/html; charset=iso-8859-1&quot;&gt;
 	&lt;meta name=&quot;GENERATOR&quot; content=&quot;The DarkSite&quot;&gt;
-	&lt;title&gt;Readme for Haiku Unified Nvidia graphics driver&lt;/title&gt;
+	&lt;title&gt;Readme for Haiku Unified Nvidia GPGPU graphics driver&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
-&lt;h2 align=&quot;center&quot;&gt;Unified Nvidia graphics driver for Haiku&lt;/h2&gt;&lt;/align&gt;&lt;br&gt;&lt;br&gt;
+&lt;h2 align=&quot;center&quot;&gt;Unified Nvidia GPGPU graphics driver for Haiku&lt;/h2&gt;&lt;/align&gt;&lt;br&gt;&lt;br&gt;
 &lt;hr&gt;
 &lt;h3&gt;&lt;strong&gt;NOTE PLEASE:&lt;/strong&gt;&lt;br&gt;
 You use this software at your own risk! Although I don't expect it to damage your PC, videocard or Monitor, I cannot guarantee this!&lt;/h3&gt;
 &lt;hr&gt;
 &lt;h2&gt;Supported cards (as far as is known):&lt;/h2&gt;
 &lt;ul&gt;
-	&lt;li&gt;TNT 1/2;
-	&lt;li&gt;TNT 2-M64;
-	&lt;li&gt;Vanta/Aladdin TNT2;
-	&lt;li&gt;GeForce 256;
-	&lt;li&gt;GeForce 2 MX/Ti/GTS/Go;
-	&lt;li&gt;GeForce 2 Integrated GPU (Nforce);
-	&lt;li&gt;GeForce 3 (Ti);
-	&lt;li&gt;GeForce 4 MX/Ti/Go;
-	&lt;li&gt;GeForce 4 Integrated GPU (Nforce 2);
-	&lt;li&gt;GeForce (4 MX) PCX 4300;
-	&lt;li&gt;GeForce FX/PCX 5xxx/Go;
-	&lt;li&gt;GeForce FX/PCX 6xxx/Go;
-	&lt;li&gt;GeForce FX/PCX 7xxx/Go;
-	&lt;li&gt;Quadro (2/4/FX/PCX/Go);
+	&lt;li&gt;None yet (will be G80+, I hope, also known as General Purpose GPU architecture cards);
 &lt;/ul&gt;
 &lt;br&gt;
 &lt;hr&gt;
 &lt;h2&gt;Features:&lt;/h2&gt;
 &lt;ul&gt;
-	&lt;li&gt;Hardware cursor support (on both heads on dualhead cards);
-	&lt;li&gt;Full 2D acceleration;
-	&lt;li&gt;Basic 3D acceleration for older cards: see the seperately available 3D accelerant's documentation for details;
-	&lt;li&gt;Full BWindowScreen support (used for hardware pageflipping, scrolling/panning and acceleration in applications/games);
-	&lt;li&gt;DPMS support for both DVI and most laptop panels, and for analog connected screens (on both heads on dualhead cards), &lt;strong&gt;but not (yet?)&lt;/strong&gt; for external DVI panels on laptops;
-	&lt;li&gt;B_YCbCr422 hardware overlay support on both TNT and GeForce series cards, &lt;strong&gt;except&lt;/strong&gt; for GeForce 6xxx and 7xxx series (GeForce 6800 works though). Overlay output 'follows head' in dualhead stretch/switch modes;
-	&lt;li&gt;Dualhead support on GeForce dualhead cards (use 'Dualhead Setup' from BeBits for now);
-	&lt;li&gt;DVI and laptop panel support;
-	&lt;li&gt;Widescreen mode support (&lt;strong&gt;all&lt;/strong&gt; screens must be widescreen type &lt;strong&gt;and&lt;/strong&gt; they must all be digitally connected);
-	&lt;li&gt;Basic AGP mode support on AGP cards, using the new (seperate) Haiku AGP busmanager;
-	&lt;li&gt;Basic ('legacy') PCIe support;
-	&lt;li&gt;Coldstart support for analog connected screens on most cards except TNT1, GeForce 6xxx and 7xxx series;
-	&lt;li&gt;TVout support on cards with Brooktree BT868/BT869 and Conexant CX25870/CX25871 encoders (use 'Dualhead Setup' &lt;strong&gt;0.04&lt;/strong&gt; from BeBits for now).
+	&lt;li&gt;None (yet?).
 &lt;/ul&gt;
 &lt;strong&gt;Known limitations:&lt;/strong&gt; 
 &lt;ul&gt;
-	&lt;li&gt;If you want BScreen 'Sync_to_Retrace' capability make sure you enabled 'assign IRQ to VGA card' in your system BIOS (if available);
-	&lt;li&gt;If the driver still seems to create 'random' trouble make sure you have a fully functional VGA BIOS, or system BIOS for embedded cards (check for updates on the manufacturor's site). Make sure you mail me if you still have trouble but also if this version fixed that!
-	&lt;li&gt;If on a laptop the internal panel doesn't work when you connect an external monitor, make sure you set 'output device selection' to 'internal' (instead of 'auto') in the system BIOS if it has such an option. If you have this symptom on a normal card, or on a laptop without that BIOS option then you are probably out of luck for dualhead support;
-	&lt;li&gt;&lt;strong&gt;NV40 architecture cards:&lt;/strong&gt; (GeForce 6xxx, but 6800 AGP seems to be OK)&lt;br&gt;
- 	Secondary analog monitor detection doesn't work and we can't control very well to which connector the card's output gets routed (lack of specs). This means you might have to experiment a bit with the way you connect your monitor to the card. A single analog or DVI screen should work OK, and two analog screens should be OK as well.
+	&lt;li&gt;Everything.
 &lt;/ul&gt;
 &lt;br&gt;
 &lt;hr&gt;
-&lt;h2&gt;Installation:&lt;/h2&gt;
-If you encounter bugs, please checkout the driver's &lt;a href=&quot;<A HREF="http://web.inter.nl.net/users/be-hold/BeOS/NVdriver/index.html">http://web.inter.nl.net/users/be-hold/BeOS/NVdriver/index.html</A>&quot;&gt;website&lt;/a&gt; to see if it's already on the todo list. You can also checkout the &lt;a href=&quot;UPDATE.html&quot;&gt;UPDATE&lt;/a&gt; file included with this driver to see if it should have been fixed. If you think it's prudent, or if you are unsure, then please fill out the &lt;a href=&quot;<A HREF="http://web.inter.nl.net/users/be-hold/BeOS/NVdriver/bugreport.html">http://web.inter.nl.net/users/be-hold/BeOS/NVdriver/bugreport.html</A>&quot;&gt;bugreport form&lt;/a&gt; on the site or send me an &lt;a href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">info.be-hold at inter.nl.net</A>&quot;&gt;Email&lt;/a&gt;. Make sure you are as precise as possible because that will make things easier to trackdown and fix...&lt;br&gt;
 &lt;br&gt;
-&lt;br&gt;
-OK, now that's all said let's get to it ;-)&lt;br&gt;
-&lt;br&gt;
-In contrary to what I have said before you don't need to de-install official Be drivers for this driver to work correctly. This driver will install in the user part of the BeOS, so not in the system part where the official drivers are.&lt;br&gt;
-BeOS first checks (during boot) if there are 'user-addons' that should be loaded for a device. If not, it loads it's own drivers (if any). You can select which driver should be loaded by hitting the spacebar as soon as the BeOS 'icons' screen appears. If you select &lt;strong&gt;disable user addons&lt;/strong&gt; the system will load it's own drivers. If you don't do anything, the system will load the Haiku Nvidia TNT/GeForce graphics driver.&lt;br&gt;
-&lt;br&gt;
-&lt;strong&gt;Note:&lt;/strong&gt; This might turn out to be handy if you run into trouble upon testing the driver, or if you are 'tweaking' the nv.settings file...&lt;br&gt;
-&lt;br&gt;&lt;br&gt;
-&lt;strong&gt;actual INSTALLATION:&lt;/strong&gt;&lt;br&gt;
-&lt;br&gt;
-Doubleclick on the install.sh file and follow the instructions. You have to reboot in order to load the driver. Make sure you read the &lt;strong&gt;Settings&lt;/strong&gt; information below before you do that...&lt;br&gt;
-&lt;br&gt;
-&lt;br&gt;
-&lt;strong&gt;alternate INSTALLATION method:&lt;/strong&gt;&lt;br&gt;
-&lt;br&gt;
-Unzip the zip file that contains the driver to the root folder. Now reboot and you should be using the new driver.&lt;br&gt;
-&lt;br&gt;
-&lt;br&gt;
-&lt;strong&gt;DE-INSTALLATION:&lt;/strong&gt;&lt;br&gt;
-&lt;br&gt;
-Currently there's no uninstall script included. Just do it manually:&lt;br&gt;
-&lt;br&gt;
-Delete the &lt;strong&gt;nv.accelerant&lt;/strong&gt; file in &lt;strong&gt;home/config/add-ons/accelerants/&lt;/strong&gt;&lt;br&gt;
-Delete the &lt;strong&gt;nv.driver&lt;/strong&gt; file in &lt;strong&gt;home/config/add-ons/kernel/drivers/bin/&lt;/strong&gt;&lt;br&gt;
-Delete the &lt;strong&gt;nv.settings&lt;/strong&gt; file in &lt;strong&gt;home/config/settings/kernel/drivers/&lt;/strong&gt;&lt;br&gt;
-Delete the &lt;strong&gt;nv.driver shortcut&lt;/strong&gt; in &lt;strong&gt;home/config/add-ons/kernel/drivers/dev/graphics/&lt;/strong&gt; which pointed to the file &lt;strong&gt;nv.driver&lt;/strong&gt;.&lt;br&gt;
-&lt;br&gt;
-You have to reboot in order to apply the original configuration.&lt;br&gt;
-&lt;br&gt;
-&lt;br&gt;
-&lt;hr&gt;
-&lt;a name=&quot;settings&quot;&gt;&lt;/a&gt;&lt;h2&gt;Settings:&lt;/h2&gt;&lt;br&gt;
-Please read this information carefully *before* installing and using the Haiku Nvidia TNT/GeForce graphics driver. It might spare you some trouble afterwards..&lt;br&gt;
-&lt;p&gt;The driver uses a file named &lt;strong&gt;nv.settings&lt;/strong&gt; to determine how to use your card. After installation this file will be located at &lt;strong&gt;home/config/settings/kernel/drivers/&lt;/strong&gt;. How you should setup this file depends on what you want to do with the driver. While it has a 'failsave' default configuration, you might be able to do better than that... Anyway, read the nifty details below.&lt;br&gt;
-&lt;br&gt;
-&lt;strong&gt;Note:&lt;/strong&gt; The driver only reads this file during it's initialisation. This means that you have to reboot in order to let changes take effect.&lt;br&gt;
-&lt;br&gt;
-&lt;br&gt;
-&lt;br&gt;
-&lt;strong&gt;nv.settings driver configuration:&lt;/strong&gt;&lt;br&gt;
-&lt;ul&gt;
-	&lt;li&gt;&lt;strong&gt;usebios:&lt;/strong&gt;&lt;br&gt;
-The name of this item may be somewhat misleading, it might be changed in the future. It actually tells the driver if it should coldstart the card or not. The driver will rely on the VGA BIOS to have coldstarted the card before BeOS booted if you specify 'true'.&lt;br&gt;
-To make things look even more complex the driver might actually use the BIOS to determine your cards specifications on *both* possible settings.
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;false:&lt;/strong&gt;&lt;br&gt;
-		If you specify &lt;strong&gt;usebios false&lt;/strong&gt; the driver will attempt to coldstart the card, which is the preferred way of doing it because of the better tuned setup if all is right. Unfortunately there's not enough info available to make this work reliably, so it's not used by default. This setting would enable you to use your nVidia card as a secondary card in your system. Be advised though that BeOS officially does not (yet) support multiple VGA cards, so you need special software in order to be able to actually use it (a video consumer node for instance).
-		&lt;li&gt;&lt;strong&gt;true:&lt;/strong&gt; (default setting)&lt;br&gt;
-		Specify &lt;strong&gt;usebios true&lt;/strong&gt; unless you want to try to use a nVidia card as a secondary card in your system.
-	&lt;/ul&gt;
-	&lt;strong&gt;Notes:&lt;/strong&gt;
- 	&lt;ul&gt;
- 		&lt;li&gt;On driverversion 0.23 and before usebios had no effect at all. The cards were never coldstarted;
-		&lt;li&gt;Coldstarting should work on most cards except TNT1, GeForce 6xxx and GeForce 7xxx;
-		&lt;li&gt;Coldstarting will not yet work with laptop- and DVI panels.
- 	&lt;/ul&gt; 
-	&lt;li&gt;&lt;strong&gt;memory:&lt;/strong&gt; (disabled by default)&lt;br&gt;
-		This option enables you to override the 'memory amount autodetection' of the driver. If autodetection is working incorrect, you can manually set the amount this way. You could also lower the amount of RAM to a lower value than actually there to test with for instance overlay use in applications. So this option is probably mostly of interest to developers. Specify the RAM amount in Mb (use only 'whole' numbers!).&lt;br&gt;
-This option is disabled by default (preceded by a '#').&lt;br&gt;
-&lt;li&gt;&lt;strong&gt;hardcursor:&lt;/strong&gt;&lt;br&gt;
-	A hardcursor is nessesary for DirectWindow windowed mode support.
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;false:&lt;/strong&gt;&lt;br&gt;
-		If you have trouble with the hardcursor (on one or both of the heads), select &lt;strong&gt;hardcursor false&lt;/strong&gt;. Make sure you let me know about the hardcursor trouble also: this should not happen!
-		&lt;li&gt;&lt;strong&gt;true:&lt;/strong&gt; (default setting)&lt;br&gt;
-		A software cursor 'flickers' a bit sometimes because it has to be redrawn constantly. So &lt;strong&gt;hardcursor true&lt;/strong&gt; is the preferred setting. For DirectWindow windowed mode functionality you need to use this setting also (Chart demo app for instance).
-	&lt;/ul&gt;
-&lt;li&gt;&lt;strong&gt;logmask:&lt;/strong&gt; (set to disabled by default)&lt;br&gt;
-The logmask option is very handy to track down trouble in the driver. You should only enable this if you are doing so, otherwise keep it turned off because it slows down your system. (All lines have a '#' preceding 'logmask' by default.) Logging creates a logfile called &lt;strong&gt;nv.(/dev/graphics name).0.log&lt;/strong&gt; in your &lt;strong&gt;~ (home)&lt;/strong&gt; folder. A second logfile may get created depending on how the driver is used (on cloning; for BWindowScreen for example). The second file is called &lt;strong&gt;nv.(/dev/graphics name).1.log&lt;/strong&gt;, and it will also be in your home folder.&lt;br&gt;
-&lt;strong&gt;Note:&lt;/strong&gt;
-&lt;ul&gt;
-&lt;li&gt;You may only enable *one* logmask-line. The value you place after it (hexadecimal 32bit) determines what will be logged. The first 7 digits determine the part of the driver that will be logging, the last single digit determines the level of logging (like 'all messages', or only 'error messages').
-&lt;/ul&gt;
-&lt;li&gt;&lt;strong&gt;dumprom:&lt;/strong&gt;&lt;br&gt;
-Dumprom is another 'tool' for bug-tracking purposes.
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;false:&lt;/strong&gt; (default setting)&lt;br&gt;
-		Keep it set to &lt;strong&gt;dumprom false&lt;/strong&gt;, unless you want the driver to dump the contents of your VGA BIOS ROM in a file.
-		&lt;li&gt;&lt;strong&gt;true:&lt;/strong&gt;&lt;br&gt;
-		&lt;strong&gt;dumprom true&lt;/strong&gt; lets the driver dump a copy of your VGA BIOS in a file called &lt;strong&gt;nv.(/dev/graphics name).rom&lt;/strong&gt; in your &lt;strong&gt;~ (home)&lt;/strong&gt; folder.
-	&lt;/ul&gt;
-&lt;li&gt;&lt;strong&gt;switchhead:&lt;/strong&gt;&lt;br&gt;
-The driver always autodetects which output should be used as primary one, but you can let the driver 'invert' the outcome of that detection with this option (only for dualhead cards).
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;false:&lt;/strong&gt; (default setting)&lt;br&gt;
-		Keep it set to &lt;strong&gt;switchhead false&lt;/strong&gt;, unless you feel you want the card's other output to be used as primary one. Note that if a single connected screen is found, that screen will be the driver's primary output with this setting.
-		&lt;li&gt;&lt;strong&gt;true:&lt;/strong&gt;&lt;br&gt;
-		&lt;strong&gt;switchhead true&lt;/strong&gt; lets the driver 'invert' the output assignments for all modes. Use only when you have two screens connected, otherwise the one connected screen will remain black as the other (not connected) output is being used.&lt;br&gt;
-	&lt;/ul&gt;
-&lt;strong&gt;Note:&lt;/strong&gt;
-&lt;ul&gt;
-	&lt;li&gt;If the driver determines it cannot use a digital panel &lt;strong&gt;despite&lt;/strong&gt; it being physically connected and powered on, using the switchhead option will not fix this. This is no fault in your card or the panel, but happens only because the driver relies on certain functions inside your cards BIOS to behave in a certain way.
-&lt;/ul&gt;
-	&lt;li&gt;&lt;strong&gt;force_pci:&lt;/strong&gt;&lt;br&gt;
-On AGP cards you can block the use of AGP mode transfers.
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;false:&lt;/strong&gt; (default setting)&lt;br&gt;
-Keep this option set to &lt;strong&gt;force_pci false&lt;/strong&gt;, unless the graphics card or motherboard has trouble using AGP.
-		&lt;li&gt;&lt;strong&gt;true:&lt;/strong&gt;&lt;br&gt;
-&lt;strong&gt;force_pci true&lt;/strong&gt; prevents the graphicsdriver from activating AGP mode, so it will be using PCI mode like it has always been in the past. The downside of this is that this comes at a performance penalty if your motherboard supports the AGP 'fastwrite' (FW) option, which won't be utilized with this setting.
-	&lt;/ul&gt;
-&lt;strong&gt;Note:&lt;/strong&gt;
-&lt;ul&gt;
-	&lt;li&gt;If you have trouble using AGP mode, you should prefer tweaking the AGP busmanager settings file as it might well enable you to use a 'lesser' AGP mode instead of falling back to PCI mode alltogether. 
-&lt;/ul&gt;
-	&lt;li&gt;&lt;strong&gt;dma_acc:&lt;/strong&gt;&lt;br&gt;
-You can select one of two methods for (2D) acceleration here: PIO mode and DMA mode. DMA mode works 4-10 times as fast as PIO mode on modern CPU's (beyond 2Ghz or so), and should still be 2-3 times as fast as PIO mode on slower CPU's (below 500Mhz).
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;false:&lt;/strong&gt;&lt;br&gt;
-If the default setting does not work as expected, you can try falling back to PIO mode acceleration. Note however that PIO mode is currently not working on NV40 and higher GPU's (GeForce 6200, 6600, 6800 and 7800 like types). Also, chances are that this method of acceleration will be removed in future driverversions (so be sure to let me know if you are having trouble with DMA mode!).
-		&lt;li&gt;&lt;strong&gt;true:&lt;/strong&gt; (default setting)&lt;br&gt;
-&lt;strong&gt;dma_acc true&lt;/strong&gt; enables DMA cmd fetching by the GPU for (2D) acceleration instead of using the old PIO method (which directly programs acceleration commands inside the GPU). The DMA method works (much) faster than PIO mode depending on system CPU speed. Also the DMA method is the only method that works on NV40 and higher GPU's (GeForce 6xxx and 7xxx series) currently.
-	&lt;/ul&gt;
-	&lt;li&gt;&lt;strong&gt;tv_output:&lt;/strong&gt; (disabled by default: preceded by a '#')&lt;br&gt;
-		This option enables you to override the 'TV output signal cable autodetection' of the driver. If autodetection is working incorrect, you can manually select a signal type this way. Specify 0, 1 or 2 (if enabled).&lt;br&gt;
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;disabled or 0:&lt;/strong&gt; (default setting)&lt;br&gt;
-		With this setting the driver will autodetect which signal(s) to output for a TVout mode. Normally you can leave it at that: but it's possible that the manufacturor of your card and/or TVset made a mistake in their design concerning line 'impedance'. In this case the driver might detect incorrectly leaving you with a (almost) black-and-white or color-distorted TV picture. In such a case you would probably like to instruct the driver what signals to output, overruling the autodetection result.
-		&lt;li&gt;&lt;strong&gt;1:&lt;/strong&gt;&lt;br&gt;
-		Force Y/C (and CVBS if supported by hardware). Use this setting if you use a Y/C cable with or without a CVBS cable (some cards have both Y/C and CVBS outputs, so you can output a head to two sets at the same time).
-		&lt;li&gt;&lt;strong&gt;2:&lt;/strong&gt;&lt;br&gt;
-		Force CVBS on all outputs. Use this setting if you use CVBS cable(s) only.
-	&lt;/ul&gt;
-&lt;strong&gt;Notes:&lt;/strong&gt;
-&lt;ul&gt;
-&lt;li&gt;Y/C stands for Luminance/Chrominance, or S-VHS. This signal is transferred using a 4 (or more) pins mini-DIN connector: two pins carry the color-info, and two pins carry the intensity-info.
-&lt;li&gt;CVBS stands for 'Composite Video Baseband Signal' which means that '2 pins' carry both color- and intensity info 'frequency-multiplexed' (at the same time). This signal is transferred using a 'Tulip', 'Cinch' or RCA plugged cable (all the same thing).
-&lt;li&gt;Y/C connections deliver a better image quality than CVBS connections do. Originally, CVBS connections were used for VHS video recorders (about 300 'vertical lines' horizontal resolution), while Y/C connections were used for S-VHS recorders (about 400 'vertical lines' horizontal resolution).
-&lt;li&gt;Some cards only having a Y/C connector also have a seperate short cable with them which 'converts' the Y/C connector into a CVBS connector. If you use that you are in fact using a CVBS connection.
-&lt;li&gt;TVsets that do not have a RCA and/or mini-DIN video connector might still be useable: most sets have a SCART connector. SCART has settings that can accomodate RGB (some sets on some inputs), Y/C and CVBS signals. You can get Y/C and CVBS to/from (switched) SCART adaptors seperately from stores. You need to set the switch (if there) to 'input', and select the signal type you want to use on your TVset. A/V stands for CVBS, and Y/C stands for Y/C.
-&lt;li&gt;Turn the TVset on before setting a TVout mode if you use the driver's default 'autodetection' setting. You probably don't need to pre-select the correct TV input as turning the power on is mostly enough to enable all of the set's input 'impendances' enabling correct autodetection by the driver.
-&lt;/ul&gt;
-	&lt;li&gt;&lt;strong&gt;unhide_fw:&lt;/strong&gt;&lt;br&gt;
-This option is only used if your card is running in AGP mode. It's a real &lt;strong&gt;tweak&lt;/strong&gt; option. It's officially unsupported, and it's unknown if it can do harm to your card or system. It exists because using it &lt;strong&gt;can&lt;/strong&gt; speedup unaccelerated graphics &lt;strong&gt;a lot&lt;/strong&gt;. Think about video playback or playing quake2 in software rendering mode...
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;false:&lt;/strong&gt; (default setting)&lt;br&gt;
-Keep this option set to &lt;strong&gt;unhide_fw false&lt;/strong&gt; unless you are certain you want to try the 'unsupported' graphics speedup. NV15, NV18, NV28 and NV34 cards for example probably don't need it as they officially support the AGP FW (fastwrites) feature already. On cards supporting FW by default the unhide_fw option has no effect.
-		&lt;li&gt;&lt;strong&gt;true:&lt;/strong&gt;&lt;br&gt;
-If you have an older card that officially doesn't support the AGP FW feature, you could possibly get this feature anyway by setting &lt;strong&gt;unhide_fw true&lt;/strong&gt;. For instance (some) NV11 cards work nicely with AGP FW enabled this way and unaccelerated graphics speedup considerably. Please &lt;strong&gt;make sure&lt;/strong&gt; that at the first sign of trouble (system hanging, displaying artifacts, etc) you disable this feature here again, or you might risk &lt;strong&gt;destroying&lt;/strong&gt; your card and/or AGP slot.
-	&lt;/ul&gt;
-	&lt;li&gt;&lt;strong&gt;pgm_panel:&lt;/strong&gt;&lt;br&gt;
-This option only has an effect if you have a laptop panel or DVI panel connected. It's existing because it's currently impossible to setup the driver in a way every single panel outthere is happy about it.
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;false:&lt;/strong&gt;&lt;br&gt;
-If you select &lt;strong&gt;pgm_panel false&lt;/strong&gt; the driver will not program the panel's pixelclock (refreshrate). Instead it relies on your cardBIOS to have done that correctly. While this is probably the case, it might introduce some displaying errors every now and then.
-		&lt;li&gt;&lt;strong&gt;true:&lt;/strong&gt; (default setting)&lt;br&gt;
-With the &lt;strong&gt;pgm_panel true&lt;/strong&gt; setting, the driver will fix your panel's refreshrate to 60Hz. While this should be working on all panels outthere, some panels are particular picky about refreshrates below 60.0Hz (they shut off), and some other panels are particular picky about refreshrates above 60.0Hz (they shut off). While the driver requests the hardware to set 60.0Hz, this isn't exactly possible, so the actual setting is &lt;strong&gt;bound&lt;/strong&gt; to be a tiny bit below or above 60.0Hz.
-	&lt;/ul&gt;
-	&lt;li&gt;&lt;strong&gt;vga_on_tv:&lt;/strong&gt;&lt;br&gt;
-This option only has an effect if you have a card with supported TV encoder chip when you use TV out modes. When set to &lt;strong&gt;true&lt;/strong&gt; it provides a &lt;strong&gt;'tweaked'&lt;/strong&gt; dualhead clone mode for singlehead cards and dualhead cards using singlehead modes on TV. Because this special mode can possibly destroy old VGA monitors it's disabled by default.
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;false:&lt;/strong&gt; (default setting)&lt;br&gt;
-If you select &lt;strong&gt;vga_on_tv false&lt;/strong&gt; the driver will automatically shut-off your VGA (or DVI) monitor (by means of special internal DPMS settings) when a TVout mode is enabled on the head the monitor is connected to. This means that on singlehead cards and on dualhead cards using singlehead TV modes your only output will be on TV. This is the standard way of doing things.
-		&lt;li&gt;&lt;strong&gt;true:&lt;/strong&gt; With this setting VGA (or DVI) output on a head is enabled concurrent with TV output on that head: that is if you select a TVout mode. This setting is a 'tweak' because the modeline used to drive your monitor is the same modeline that is used for the TV output. This means that the monitor picture positioning is probably a bit odd, in some modes it might distort somewhat, and the refreshrate will be 50Hz for PAL modes, and 60Hz for NTSC modes. Make sure you only enable this tweak if you know your monitor supports down to 50Hz refreshrate, and preferably has a failsafe built in that blocks output when out-of-range signals are sent to it (almost every newer monitor has this feature).&lt;br&gt;
-	&lt;/ul&gt;
-	&lt;li&gt;&lt;strong&gt;force_sync:&lt;/strong&gt;&lt;br&gt;
-This option only has an effect on hardware accelerated 3D rendering. When set to &lt;strong&gt;true&lt;/strong&gt; it forces the 3D screen updates to be synchronized to your screen's vertical retraces, preventing 'tearing' to occur.
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;false:&lt;/strong&gt; (default setting)&lt;br&gt;
-If you select &lt;strong&gt;force_sync false&lt;/strong&gt; the driver's 3D accelerant will render 3D scenes as fast as it can, without paying attention to the actual screen's refreshrate. The upside of this setting is that you can measure the actual rendering power your card has in a specific mode for a specific application (if that application supports benchmarking). The downside is that you'll be able to witness 'tearing': the effect of seeing random horizontal distortion 'stripes' onscreen, especially when the view moves fast in a horizontal direction (like looking around in a room in Quake2). If you need the last bit of rendering power because you run a heavy app on a relatively 'slow' card, this setting might be your best option: it's a bit faster than using &lt;strong&gt;force_sync true&lt;/strong&gt;.
-		&lt;li&gt;&lt;strong&gt;true:&lt;/strong&gt; With this setting all tearing effects should be gone. Another reason to use this setting would be 'fixing' the driver's fps (frames per second) rendered. That is, when you are using a screen mode that your card can render at least at the speed your screen's refreshrate is set to: In this case the fps will be virtually independant of the complexity of the rendered scenes. Hardcore gamers amongst us really want this feature to get 'fixed' latencies so they can issue (firing) commands at the exact right time...&lt;br&gt;
-	&lt;/ul&gt;
-&lt;strong&gt;Note please:&lt;/strong&gt;
-&lt;ul&gt;
-&lt;li&gt;Forcing vertical retrace synchronisation using the force_sync option 'overrules' retrace sync settings done in your applications: all applications will be synchronized to the vertical retrace events.
-&lt;/ul&gt;
-	&lt;li&gt;&lt;strong&gt;force_ws:&lt;/strong&gt;&lt;br&gt;
-This option (if enabled) overrules the aspect ratio detection for screens inside the driver. When set to &lt;strong&gt;true&lt;/strong&gt; it forces all monitors to be treated as widescreen types.
-	&lt;ul&gt;
-		&lt;li&gt;&lt;strong&gt;false:&lt;/strong&gt; (default setting)&lt;br&gt;
-If you select &lt;strong&gt;force_ws false&lt;/strong&gt; the driver will autodetect the screen's aspect ratio if it can, otherwise it will force 4:3 aspect. Screens that are connected with a DVI cable and screens inside a laptop are autodetected (according to the cardBIOS presets done), but analog connected screens will always make the driver block widescreen modes. Connected analog TV sets are always treated like widescreen devices though.
-		&lt;li&gt;&lt;strong&gt;true:&lt;/strong&gt; With this setting all monitors are treated as being widescreen types. This setting should only be used if you are having trouble using a widescreen monitor, because on non-widescreen monitors there's a (small) chance of destroying them if used with a widescreen mode. So use this setting with care.
-	&lt;/ul&gt;
-&lt;li&gt;&lt;strong&gt;primary:&lt;/strong&gt; (set to disabled by default)&lt;br&gt;
-Primary lets you force a certain card to be used as primary card in your system if you have multiple graphics cards installed: so it will display your desktop. To enable this (hack) feature uncomment this item and fill in the exact name of the card that is to be primary (as exported by the kerneldriver in /dev/graphics/). If you are going to select a card other than the one displaying your system's POST messages at bootup, make sure you also set 'usebios false' as otherwise the card(s) aren't coldstarted by the driver.&lt;br&gt;
-&lt;strong&gt;Note please:&lt;/strong&gt;
-&lt;ul&gt;
-&lt;li&gt;DVI and laptop panels don't work yet with the 'usebios false' setting. Analog connected screens should work though. 
-&lt;li&gt;Coldstarting doesn't work on TNT1 and GeForce 6xxx/7xxx cards yet.
-&lt;li&gt;Primary forces the primary card by preceding the exported name by a minus-sign (-) for the selected device. This ensures that this device will be listed at the top in the /dev/graphics/ folder, which is alphabetically ordered. Please make sure you enable the 'primary' feature on just one graphics driver, otherwise it's effect isn't 'guaranteed'.
-&lt;/ul&gt;
-&lt;/ul&gt;
-&lt;hr&gt;
-&lt;br&gt;
 &lt;a href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">info.be-hold at inter.nl.net</A>&quot;&gt;Rudolf Cornelissen.&lt;/a&gt;
-&lt;p&gt;(Page last updated on April 11, 2006)&lt;/p&gt;
+&lt;p&gt;(Page last updated on June 9, 2008)&lt;/p&gt;
 &lt;/body&gt;
 &lt;/html&gt;

Modified: haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/UPDATE.html
===================================================================
--- haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia/UPDATE.html	2008-06-09 13:01:58 UTC (rev 25872)
+++ haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/UPDATE.html	2008-06-09 14:54:32 UTC (rev 25875)
@@ -4,245 +4,16 @@
 &lt;/head&gt;
 &lt;body&gt;
 &lt;p&gt;&lt;h2&gt;Changes done for each driverversion:&lt;/h2&gt;&lt;/p&gt;
-&lt;p&gt;&lt;h1&gt;head (SVN 0.84, Rudolf)&lt;/h1&gt;&lt;/p&gt;
+&lt;p&gt;&lt;h1&gt;head (SVN 0.00, Rudolf)&lt;/h1&gt;&lt;/p&gt;
 &lt;ul&gt;
-&lt;li&gt;Fixed driver assuming enabling AGP mode succeeded on some occasions if it did not block it itself. Blocking AGP mode completely via the AGP busmanager (option 'block_agp') resulted in a crashing acceleration engine because it was setup for AGP transfers instead of using PCI transfers. Error was solved with help from user kraton.
-&lt;li&gt;Fixed shared_info struct problem occuring when 3D 'accelerant' is used (tested Alpha 4.1): the TVencoder type definition list apparantly gets some memory assigned these days when done inside the definition of shared_info. Moved encoder list outside the shared_info definition.
-&lt;li&gt;Updated naming for some previous unknown cards, added 25 new cards for support/recognition in the kernel driver and accelerant, being GF 6xxx, 7xxx and 8xxx types. Also two more nforce 6100 4x0 cards are recognized now. All cards listed in nvidia's official april 2007 ID list are now recognized.&lt;br&gt;
 &lt;strong&gt;Note please:&lt;/strong&gt;&lt;br&gt;
 &lt;ul&gt;
-&lt;li&gt;GF8xxx is recognized, but not supported. It looks like nVidia's card architecture was revised in such an extensive way that we probably best create a seperate accelerant for these cards.
+&lt;li&gt;GF8xxx is recognized, but not supported. yet?
 &lt;/ul&gt;
 &lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.80 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-&lt;li&gt;Improved 3D speed related initialisation programming for NV11 and NV15: NV11 just gained 44% rendering speed, NV15 gained 21% speed. The GeForce2Ti (NV15) is the new winner: Quake 2 timedemo 1 runs at 28.3fps in 1024x768x32 mode @ 75Hz refreshrate (P4 2.8Ghz, fsb 533Mhz, AGP4x), while on the GeForce4MX (NV18) it keeps running at 26.3fps. The GeForce2MX (NV11) now runs at 18.9fps.
-&lt;li&gt;Improved 3D speed related initialisation programming again. This time confirmed for NV11, NV15 and NV18 (so works on probably all NV1x cards): NV11 just gained another 43% rendering speed, NV15 gained another 60% speed, and NV18 gained 41% speed. The GeForce2Ti (NV15) is the definate winner: Quake 2 timedemo 1 runs at 45.4fps in 1024x768x32 mode @ 75Hz refreshrate (P4 2.8Ghz, fsb 533Mhz, AGP4x), while on the GeForce4MX (NV18) it now runs at 37.0fps. The GeForce2MX (NV11) now runs at 27.1fps.
-&lt;li&gt;Improved 3D speed related initialisation programming for TNT2 and TNT2-M64 card types, TNT1 speed remains unchanged. The speed improvement depends on colorspace and exact card type: there's a 1-4% gain. TNT2 runs Quake 2 timedemo 1 at about 17fps in 1024x768x32 mode @ 75Hz refreshrate, while TNT2-M64 is at 10.2fps (P4 2.8Ghz, fsb 533Mhz, AGP mode).
-&lt;li&gt;Added new nv.setting called 'force_ws' that forces all your connected screens to be treated as being widescreen types. This enables listing of the widescreen modes in most screen preference panels and the use of these modes. Only use this new option if appropriate of course, non-widescreen monitors might not like them!
-&lt;li&gt;Added support for 23 new cards in the GeForce 6xxx and 7xxx range (7300 - G72; 7600 - G73; 7900 - G71), along with support for nVidia's latest IGP Nforce4 (GeForce 6100/6150 - NV44). All new ID's come from nVidia's own March 2006 ID release, except for one which was reported by a BeOS user.
-&lt;li&gt;Fixed coldstart trouble on a number of cards probably (confirmed GeForce4 MX4000): Coldstarting must be performed in PCI mode as some cards reset their AGP PLL during this action. The driver now forces PCI mode before attempting a coldstart; AGP mode is re-enabled after that (if used).&lt;br&gt;
-&lt;strong&gt;Note please:&lt;/strong&gt;&lt;br&gt;
-&lt;ul&gt;
-&lt;li&gt;Forcing PCI mode doesn't work reliably with AGP busmanager V0.01. Please upgrade to AGP busmanager V0.02!!
-&lt;/ul&gt;
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.74 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-&lt;li&gt;The overlay engine code now respects the B_OVERLAY_COLOR_KEY flag instead of forcing keying ON;
-&lt;li&gt;Hook GET_ACCELERANT_DEVICE_INFO now returns much more detailed info about the card in use;
-&lt;li&gt;Hooks INIT_ACCELERANT and CLONE_ACCELERANT now enforce their correct use; returning error B_NOT_ALLOWED in case of errors;
-&lt;li&gt;Improved coldstart RAM tests for NV10 and higher: they could fail to correctly program the card on 'high-voltage' AGP 1.0 slots (confirmed a NV11);
-&lt;li&gt;Added support for acceleration engine 2D command SCREEN_TO_SCREEN_SCALED_FILTERED_BLIT (as defined by Be) for all cards;
-&lt;li&gt;Fixed driver not always finding it's VGA BIOS when started and stopped more than once per system uptime 'session';
-&lt;li&gt;Fixed 'BScreen Sync-to-Retrace not working' bug that appeared on all dualhead cards when CRTC2 was used as primary CRTC. On some systems outthere this bug might have shown itself as a 'system (or app) hanging' error occuring while using apps that feature explicit retrace sync. Completely rewrote interrupt handling to now handle retrace syncs on both CRTC1 and CRTC2, although only the CRTC used as primary will be enabled (for now);
-&lt;li&gt;Modified hardware 3D rendering colorspace setting for 32bit depth: this gives us upto some 11% gain on accelerated 3D rendering speed using the 3D accelerant;
-&lt;li&gt;Added new nv.setting called 'force_sync': this option (if enabled) forces accelerated 3D rendering to be synchronized to the screen's vertical retrace (refreshrate). This option is disabled by default;
-&lt;li&gt;Added new nv.setting called 'gpu_clk': this TWEAK! option (if enabled) forces the requested GPU clockspeed, as long as it's within certain sanity limits. This option might be handy for 3D application developers for determining bottlenecks (via underclocking), and it might be handy for hardcore gamers to overclock their graphics card. Be carefull with overclocking though: it might DESTROY your computer!!
-&lt;li&gt;Added new nv.setting called 'ram_clk': this TWEAK! option (if enabled) forces the requested card-memory clockspeed, as long as it's within certain sanity limits. This option might be handy for 3D application developers for determining bottlenecks (via underclocking), and it might be handy for hardcore gamers to overclock their graphics card. Be carefull with overclocking though: it might DESTROY your computer!!
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.67 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-&lt;li&gt;Added capability to driver to run without an INT assigned. Driver will now automatically disable the 'Sync_to_Retrace' function if no INT was assigned instead of not loading/running at all;
-&lt;li&gt;Fixed PLL reference recognition (used for refreshrate calculations) and dualhead detection for a number of 'newer' cards: most notably for a lot of GeForce 6200 types! Code is rewritten so it's much less breakable when new cards are added to the supported list in the future;
-&lt;li&gt;Added TVout support for Brooktree BT868/BT869 and Conexant CX25870/CX25871 TV encoders: NTSC and PAL 640x480 and 800x600 Desktop modes are supported, NTSC VCD 640x480 and DVD 720x480 Video modes are supported, PAL VCD 768x576 and DVD 720x576 Video modes are supported;
-&lt;li&gt;Added 'force TV output signal type' (called tv_output) to nv.settings: Now you can select Y/C or CVBS output manually in case autodetection fails for your TV set. That might happen in case the TV and/or card manufacturor didn't adhere to the impedance specs that exist for these signals;
-&lt;li&gt;Added detection for some ten new cards being Geforce 6600/6800 and 7800 types;
-&lt;li&gt;Added 'force VGA output ON while TVout enabled' (called 'vga_on_tv') to nv.settings: Now the VGA (or DVI) screen is disabled by default for a head outputting to TV. You can turn it on however using this new preset setting. Note though: doing that is considered a tweak which might damage your screen (if it's an old one);
-&lt;li&gt;Added custom modeflag for users to be able to select TVout head on a 'per mode' basis. The Dualhead Setup preference panel needs to be updated (to a version newer than 0.03a) to correctly issue this flag;
-&lt;li&gt;Added rudimentary NV11 CRTC2 FIFO watermark/burst-size programming to remove/minimize vertical distortion stripes occuring on some cards due to data fetching errors (because of limited bandwidth);
-&lt;li&gt;Modified NV05M64 (TNT2-M64) watermark/burst-size programming to be executed independant of coldstart feature;
-&lt;li&gt;Updated acceleration engine DMA-mode initialisation code: This should fix trouble on some newer cards with acceleration, and also adds NV47 (G70) acceleration support;
-&lt;li&gt;Added preliminary laptop panel DPMS support (except for NV11): currently only in use when no external DVI panels are connected. Please provide feedback on this item if you have a laptop (send a logfile along): only then can this feature be expanded/finalized!
-&lt;li&gt;Added new nv.setting (&quot;primary&quot;) to force a certain card to be primary card in a system with multiple graphics cards: so it will display your desktop. To enable this (hack) feature uncomment this item and fill in the exact name of the card that is to be primary (as exported by the kerneldriver in /dev/graphics/). If you are going to select a card other than the one displaying your system's POST messages at bootup, make sure you also set 'usebios false' as otherwise the card(s) aren't coldstarted by the driver.&lt;br&gt;
-&lt;strong&gt;Note please:&lt;/strong&gt;
-&lt;ul&gt;
- &lt;li&gt;DVI and laptop panels don't work yet with the 'usebios false' setting. Analog connected screens should work though. 
- &lt;li&gt;Coldstarting doesn't work on TNT1 and GeForce 6xxx/7xxx cards yet.
-&lt;/ul&gt;
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.53 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-&lt;li&gt;Added recognition for 10-15 more newer cards: mostly GeForce 6200, 6600 and 6800 types;
-&lt;li&gt;Added 3D initialisation and updated 2D/3D command setup (defines and hash) for DMA acceleration (pre-NV40 only, 3D confirmed functional on TNT1 upto/including GeForce2Ti and GeForce4MX types: MX440 and MX4000 confirmed);
-&lt;li&gt;Moved the DMA command buffer from graphics memory to main system memory, plus expanded it's size from 32kB to 1Mb. Buffer is mapped using MTRR-WC where available (confirmed speedups for both modifications; pre-NV40 only). Note that all TNT1 cards will be much faster with DMA acceleration now: the new mode is 'officially' working on them, while the old mode used a 'nasty' workaround;
-&lt;li&gt;Graphics engine is now using AGP transfers for fetching commands from the DMA buffer where available. Note that direct memory accesses are used: GART and AGP aperture (scatter-gather) are not in use. (confirmed speedup for this modification);
-&lt;li&gt;Concurrent overlay and 3D acceleration are now possible: no more acceleration engine hangs should occur now;
-&lt;li&gt;Added shared_info flag to inform 3D add-on that it should reload it's rendering state whenever 2D commands are executed. This makes room for further speed improvements for 3D as it can minimize reloading rendering states;
-&lt;li&gt;Added more shared_info flags to support upto 32 3D accelerants in a simple fashion. Texture memory allocation sharing support isn't there yet though.
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.45 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-&lt;li&gt;Added recognition for one more card: a GeForce 6200 PCIe (ID 0x014f);
-&lt;li&gt;Fixed long-standing trouble with NV15 cards (GeForce 2 Ti/GTS/pro/ultra, Quadro 2 pro), and maybe also for other singlehead cards. RAM access trouble is now fixed so the screen output nolonger distorts and engine hangs are gone. This error was 'introduced' in nVidia driver V0.10: V0.09 was the last previous version working correctly on some of these cards!&lt;br&gt;
-Note please that this fix was only possible thanks to someone donating a 'malfunctioning' card. So: thanks again Atilla!!&lt;br&gt;
-Note also: with 3D add-on alpha 1-final these NV15 cards are the fastest supported ones ;-)
-&lt;li&gt;Fixed driver coldstart capability for pre-GeForce type cards using PINS V3-V5.15. Newer TNT2-M64 cards will now coldstart OK;
-&lt;li&gt;Added pre-PINS V5.16 coldstart RAM-size check and correction code. This feature was still lacking and possibly solves coldstart trouble on pre-GeForce type cards;
-&lt;li&gt;Added rudimentary CRTC1 FIFO watermark/burst-size programming for TNT2-M64 cards (if coldstarted). This minimizes output distortions on high resolutions. Note please that these distortions can't be completely removed: the RAM bandwidth these cards have is too limited: Bandwidth in increasing order: TNT2-M64, TNT1, TNT2 original, all GeForce types. With the TNT2-M64 watermark/burst-size programming in place it performs still less good than a TNT1 in this respect.
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.43 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;Updated 3D specific engine initialisation for PIO mode to make the 3D add-on work on pre-NV10 cards. It now works on NV04-NV18 (although NV18 is slow) if you select PIO mode acceleration;
-	&lt;li&gt;Added two shared_info 'flags' informing the 3D add-on about modeswitches when they happen.
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.41 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;Added new acceleration method using DMA command fetching. You can now choose beween (the old) PIO mode and (the new) DMA mode acceleration via a new switch in nv.settings (DMA mode is now the default). DMA acceleration is say 2-3 times as fast as PIO mode acceleration on systems with relative fast CPU's (above 2Ghz or so). On relative slow CPU's (500Mhz or lower) there is no speedgain left and both methods match about up.&lt;br&gt;
-	&lt;strong&gt;Note please:&lt;/strong&gt; On NV40 and higher only DMA mode acceleration currently works;
-	&lt;li&gt;Execution of acceleration commands (DMA mode) has been optimized (compared to PIO mode): now the top-level acceleration functions are incorporated in the engine, and the engine's command execution itself is also optimized. This further increases DMA mode acceleration with upto a factor of 2-3, independant of CPU speed; 
-	&lt;li&gt;Execution of acceleration commands (PIO mode) is re-setup. Now it should be possible to use more engine commands than there are FIFO channels for them, by doing on-the-fly reconfiguring (DMA mode can do this also). This should be especially usefull when 3D acceleration is going to be setup later on;
-	&lt;li&gt;Added recognition for 20 new cards: Most GeForce 6200, 6600 and 6800 types are now recognized, and some more other cards as well;
-	&lt;li&gt;Modified cursor to be hardware synchronized to the screen's vertical retrace. This fixes the high CPU load on moving the mouse especially while being on the bottom of the screen (all GeForce series cards);
-	&lt;li&gt;Added DPMS support for digital flatpanels connected via DVI;
-	&lt;li&gt;Updated 'extended PLL' VCO limits: this (could) fix PLL locking trouble (shivering image / too low refreshrate) on NV31 (FX 5600), NV36 (FX/PCX 57xx) and NV40 and up (FX/PCX 6200, 6600 and 6800). Confirmed NV36, on a PCX 5750 for PCIe.
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.30 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;Overlay fix for GeForce2 and GeForce4 MX Integrated GPU boards: updated RAM amount detection. The last 64Kb RAM is used for the card's BIOS or something so it's not available to the graphicsdriver;
-	&lt;li&gt;Enabled coldstart switch setting (called 'usebios' in nv.settings) in drivercode. Changed the default setting to keep the driver working in the same way it did before;
-	&lt;li&gt;Added recognition for 25 new cards including the first PCI-express (PCX) cards: FX/PCX 6800, FX 6600, PCX 5300/5750/5900, PCX Quadro. New 'old style' cards: Quadro FX 700, Quadro FX 1000 Go, FX 5100 and FX 5700 Go. While FX6800 still seems to be non-functional, a Quadro4 280 NVS PCIe (GeForce PCX 5300 PCIe) has been confirmed working OK already;
-	&lt;li&gt;Card coldstarts should now be operational (if enabled in nv.settings) on most cards, except TNT1, GeForce 6600 and GeForce 6800. Tested successfully on TNT2/TNT2-M64 (NV05), GeForce2 MX400 (NV11), GeForce4 MX440 (NV18), GeForce4 Ti4200 (NV28) and GeForce FX5200 (NV34). Note however that laptop panels and DVI panels will not work via coldstarting yet!
-	&lt;li&gt;The 'bandwidth trouble' existing on older cards, especially on some GeForce2 types, should be fixed now if you enable card coldstarting for these cards. Note that this problem existed because of a fault in these card's BIOSes (they missed some specific register programming). Confirmed a NV15 working OK now.
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.22 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;Added AGP mode capability on AGP cards along with the option to block it in nv.settings. No GART and AGP aperture support; but if your card and system AGP host bridge support the 'fastwrite' (FW) feature, you'll notice a nice speedup of unaccelerated graphics.
-	&lt;ul&gt;
- 	&lt;li&gt;Tested Quake 2 in software rendering mode over here using timedemo1 with demo1.dm2: framerates jumped up to 140% of the 'original' in  AGP2.0 4X mode!
-	&lt;li&gt;Also tested video playback using bitmap output mode: CPU load drops considerably depending on desktop colordepth and size of the video output window.&lt;br&gt;
-	&lt;li&gt;2D acceleration will not speedup because it's working 'local', so within the graphics cards engine and it's RAM only.
-	&lt;/ul&gt;
-&lt;strong&gt;Note please:&lt;/strong&gt;&lt;br&gt;
-	&lt;ul&gt;
-	&lt;li&gt;You need the new (seperate) Haiku AGP busmanager module that has been setup for this feature, without it you will remain using PCI mode as usual.
-	&lt;li&gt;If you have trouble with AGP, you have the option to shut it off by setting 'force_pci true' in nv.settings. You are adviced however to tweak the AGP busmanager settings file instead, as this might enable you to keep using AGP mode, be it in a slower setting.
-	&lt;/ul&gt;
-	&lt;li&gt;Updated CRTC modeline tuning for panels: this should fix the 'right-shifted' picture on some panels in their native modes;
-	&lt;li&gt;Fixed BIOS ROM dump (to file) option;
-	&lt;li&gt;Fixed GET_TIMING_CONSTRAINTS and GET_ACCELERANT_DEVICE_INFO accelerant hooks to return valid data; updated modeline checking and modification code (used by ProposeDisplayMode) to adhere to one more timing constraint
-	&lt;li&gt;Lowered fixed refreshrate setting for panels to be 60Hz now: it turns out panels exist that are picky 'on the high side' as well;
-	&lt;li&gt;Added option in nv.settings to block refreshrate programming if a flatpanel is active: this should enable support on picky panels;
-	&lt;li&gt;Added option in nv.settings to 'unhide' fastwrite support in AGP cards. Some older cards support FW even though normally they don't show it so it won't get activated (confirmed GeForce2 MX400, NV11).&lt;br&gt;
- 	&lt;strong&gt;NOTE please:&lt;/strong&gt;&lt;br&gt;
- 	This is a tweak that you &lt;strong&gt;can&lt;/strong&gt; enable, but you do so at your own risk (of course)!
- 	&lt;li&gt;Fixed RAM amount detection for GeForce2 and GeForce4 MX Integrated GPU boards.
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.10 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;Implemented laptop internal flatpanel presence and native resolution detection;
-	&lt;li&gt;Implemented external DVI flatpanel(s) presence and native resolution detection;
-	&lt;li&gt;Added flatpanel(s) refreshrate protection: it(they) is(are) always kept at 62Hz refresh (60Hz shuts off some panels);
-	&lt;li&gt;Added flatpanel specific CRTC modeline and DFP modeline tuning: DVI connected panels work now on both heads (if applicable);
-	&lt;li&gt;Added aspect correction programming for flatpanels: corrects if mode aspect differs too much from panel aspect;
-	&lt;li&gt;Fixed acceleration engine management regarding sync_to_token: no more updating glitches should occur now;
-	&lt;li&gt;Added recognition for GeForce4 MX 4000, GeForceFX 5700LE and GeForceFX 5700VE cards; also modified a few others to be more correct;
-	&lt;li&gt;Implemented virtualized CRTC1/DAC1 and CRTC2/DAC2 access: when one flatpanel is found on a card that panel is always primary output now;
-	&lt;li&gt;Dualhead switch mode is operational with flatpanels now (via the virtualized setup);
-	&lt;li&gt;The user has the option to select the primary output via nv.settings now (via the new 'switchhead' option);
-	&lt;li&gt;Modified analog type monitor detection to work the same as for digital panels (detect on bootup only);
-	&lt;li&gt;Added dualhead switch mode for NV11 (works via virtualized head access implemented now);
-	&lt;li&gt;Modified dualhead switch mode for all other cards to work via the virtualized head access also;
-	&lt;li&gt;Modified overlay to work correctly with the virtualized setup;
-	&lt;li&gt;Added output-devices/heads matrix setup: the driver now selects the right head for primary output and dualhead should work for all cards with all monitor-types now (if connected before boot);
-	&lt;li&gt;Updated head selection code for register programming: NV11 needs a special treatment (again); NV11 dualhead modes are finally OK now, including switch mode;
-	&lt;li&gt;Updated secondary head specs: they are improved for nview cards (like GeForce4 and FX) in comparison to twinview cards (like GeForce2);
-	&lt;li&gt;Added move_overlay() so overlay (finally) works correctly in virtualscreens;
-	&lt;li&gt;You can now select upto one more 4:3 aspect, and 6 new 16:10 aspect modes by just selecting them from the Screenprefs app, &lt;strong&gt;except&lt;/strong&gt; if you use the native R5 one. Use Dualhead setup instead (for example):
-		&lt;ul&gt;
-			&lt;li&gt;Added standard (4:3 aspect) mode 1400x1050 for panels and analog monitors to the modelist exported by the driver;
-			&lt;li&gt;Added widescreen (16:10 aspect) modes 800x500, 1024x640, 1280x800, 1440x900, 1680x1050 and 1920x1200 for panel(s) to the modelist exported by the driver if only widescreen panel(s) is (are) connected (so also no analog monitors may be connected!);
-			&lt;li&gt;Added blocking of modes above panel (with lowest) native resotution: this includes blocking of all widescreen modes if a non-widescreen (analog) screen is detected.
-		&lt;/ul&gt;	
-	&lt;li&gt;Cursor update for dualhead cards: when the 'softcursor' is used, the hardcursors are &lt;strong&gt;both&lt;/strong&gt; actually turned off now.
-&lt;/ul&gt;
-&lt;br&gt;
-&lt;strong&gt;NOTE:&lt;/strong&gt;&lt;br&gt;
-The features below are shutdown because they are possibly dangerous without feedback: No documentation on this exists, so this was setup by me tested on my cards only. Feedback (&lt;strong&gt;logfiles!&lt;/strong&gt;) you might send to me might help me gain more info about &lt;strong&gt;IF&lt;/strong&gt; we can use (or need) this, and &lt;strong&gt;IF&lt;/strong&gt; it's OK to use it for a later driver release. 
-&lt;ul&gt;
-	&lt;li&gt;Added flatpanel LVDS and TMDS transmitters powerup if a panel is detected (not finished: needs more feedback);
-	&lt;li&gt;Added flatpanel DPMS support for both heads via powerup/powerdown of LVDS and TMDS transmitters (not finished: needs more feedback).
-
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.09 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;Fixed NV11 trouble with repeating screen(s) on the right side of the monitor;
-	&lt;li&gt;Updated CRTC memory granularity code to work-around a hardware bug in older cards;
-	&lt;li&gt;Fixed fuzzy modes / no picture on GeForceFX 5700 cards: PLL discriminator restrictions updated.
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.08 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;Fixed GeForceFX 5600 and FX 5700 monitor 'refresh out of range' / shutoff fault. nVidia changed the pixelPLL for the NV31 and NV36;
-	&lt;li&gt;Fixed acceleration engine restrictions code to adhere to GeForceFX 5600 restrictions: those are still NV20 style for this card;
-	&lt;li&gt;Fixed overlay scaling restriction code to adhere to GeForceFX 5600 restrictions: engine is still the NV10/NV20 one, so it can downscale to 1/8 of the picture size;
-	&lt;li&gt;Kernel driver now signals abort on not being able to setup the INT routine instead of letting the machine freeze during accelerant initialisation;
-	&lt;li&gt;BWindowScreen R3-style function update for acceleration and page flipping/virtualscreens in apps ('Allegro' update): fixed cloning accelerants;
-	&lt;li&gt;Now only programming options head select register on dualhead cards. This fixes driver hanging on integrated GeForce2 cards (ID 0x01a0), and maybe also on some other cards;
-	&lt;li&gt;Expanded modelist to include suggested modes above 1600x1200 upto 2048x1536 resolution (if a card supports them): Done by Andrew Bachmann;
-	&lt;li&gt;Added card recognition for GeForceFX 5700, FX 5950 and some other (older) cards;
-	&lt;li&gt;Added 256Mb RAM detection;
-	&lt;li&gt;Improved startup code: this should (could) fix random trouble on some cards like for instance hardcursor trouble on especially laptops; 
-	&lt;li&gt;Added dualhead support (use Mark Watson's 'Dualhead Setup' from BeBits for now);
-	&lt;li&gt;Updated mode granularity and max virtual size checking/limiting;
-	&lt;li&gt;Added dualhead support for 8- and 15bit colordepths;
-	&lt;li&gt;Fixed move_display distortions in virtualscreens especially visible in 8-bit colordepth (for both heads);
-	&lt;li&gt;Added 'overlay follows head' for dualhead stretch and switch modes: if more than half the overlay output window is on a screen, that screen gets the overlay output;
-	&lt;li&gt;Added dualhead switch mode (except for NV11 cards as they do not have output connector switching capability);
-	&lt;li&gt;Added monitor presence detection for both monitor output connectors on dualhead cards (analog type signals only);
-	&lt;li&gt;Added 'output follows monitor' for all modes: it does not matter on which connector you connect your monitor, the output will go there after setting a mode; like the card's BIOS does (except for NV11 cards as they do not have output connector switching capability).
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.07 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;Added card recognition for some Nvidia GeForce4 Ti 4600 cards (ID 0x0252);
-	&lt;li&gt;GeForce overlay activation updated: hardware should respond to the first request instead of to the second ('stampTV' update);
-	&lt;li&gt;Included B_YCbCr422 hardware overlay for TNT 1/2 class cards (pre NV10 architecture).
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.06 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt; 
-	&lt;li&gt;Added full 2D acceleration for TNT1 - GeForce FX cards;
-	&lt;li&gt;Added card recognition for GeForce FX Go and some older laptop cards;
-	&lt;li&gt;Implemented retrace synchronisation (INT routine);
-	&lt;li&gt;Geforce overlay updated: turned off ints explicitly, corrected upscaling restriction to be 8x, small speed improvement;
-	&lt;li&gt;Vertical timing updated: missed a register on all GeForce cards, missed another register on older cards;
-	&lt;li&gt;Register unlocking updated: missed a register on all supported cards.
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.05 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;Update on cursor move routine: pointer will nolonger accept illegal left-top positions. As a result it will nolonger vanish on some cards;
-	&lt;li&gt;Fixed hardware overlay on GeForce4 MX and Go series cards: disabled the embedded MPEG2 decoder engine which exist on these cards only;
-	&lt;li&gt;Fixed driver to adhere to the downscaling limitations of the new overlay engine existing in the GeForceFX series cards.
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.04 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;New cursor_move sync_to_retrace for all supported cards: now all display distortions should be gone (GeForce4 for example);
-	&lt;li&gt;Added hardware overlay support for the entire GeForce series cards;
-	&lt;li&gt;Now powering up all card function blocks: dualhead cards should now switch to the connected head (by it's BIOS) instead of hanging the system on boot (tested on a dualhead GeForce4 with a DVI and a VGA connector).
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.03 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;Prevent system or video freeze on dragging files or so in tracker windows;
-	&lt;li&gt;Pre NV10 cursor sync_to_retrace: no more distortions in cursor bitmaps on moving it;
-	&lt;li&gt;Cursor bitmapadress setup modification for laptops: The cursor should be visible now also on 'Go' type of cards;
-	&lt;li&gt;BWindowScreen / Sync_to_retrace fix: prevent apps from crashing on endless waiting for retrace. Wait_for_retrace is temporary disabled now until it's actually implemented.
-&lt;/ul&gt;
-&lt;p&gt;&lt;h1&gt;nv_driver 0.02 (Rudolf)&lt;/h1&gt;&lt;/p&gt;
-&lt;ul&gt;
-	&lt;li&gt;hardcursor support;
-	&lt;li&gt;virtual screens / BWindowScreen support including panning/scrolling;
-	&lt;li&gt;colorspace selection;
-	&lt;li&gt;colorpalette setup;
-	&lt;li&gt;refreshrate selection;
-	&lt;li&gt;85 cards of 4 brands are detected now: These are all TNT1 - GeForce FX5900 Ultra cards as far as I know. Hopefully all those cards will actually work OK with the driver;
-	&lt;li&gt;DPMS support;
-	&lt;li&gt;resolution selection (CRTC setup);
-	&lt;li&gt;switch to 'enhanced mode' included: VESA is gone now!
-	&lt;li&gt;cardspecs are setup (faked PINS);
-	&lt;li&gt;several small fixes done to get the driver working correctly on all four of my cards: PCI TNT1, AGP TNT1, AGP TNT2 and AGP GeForce2MX400.
-&lt;/ul&gt;
 &lt;p&gt;&lt;h1&gt;Still todo:&lt;/h1&gt;&lt;/p&gt;
 &lt;ul&gt;
-	&lt;li&gt;Extend TVout feature to support more encoder-types (Chrontel, Philips);
-	&lt;li&gt;Improve/extend various stuff when/if possible (like adding DDC/EDID, GTF).
+	&lt;li&gt;Hmm, everything.
 &lt;/ul&gt;
 &lt;/p&gt;
 &lt;/body&gt;

Modified: haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/driver.c
===================================================================
--- haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia/driver.c	2008-06-09 13:01:58 UTC (rev 25872)
+++ haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu/driver.c	2008-06-09 14:54:32 UTC (rev 25875)
@@ -4,11 +4,10 @@
 
 	Other authors:
 	Mark Watson;
-	Rudolf Cornelissen 3/2002-10/2007.
+	Rudolf Cornelissen 3/2002-6/2008.
 */
 
 
-#include &quot;AGP.h&quot;
 #include &quot;DriverInterface.h&quot;
 #include &quot;nv_macros.h&quot;
 
@@ -76,7 +75,6 @@
 static DeviceData		*pd;
 static isa_module_info	*isa_bus = NULL;
 static pci_module_info	*pci_bus = NULL;
-static agp_gart_module_info *agp_bus = NULL;
 static device_hooks graphics_device_hooks = {
 	open_hook,
 	close_hook,
@@ -96,238 +94,10 @@
 #define VENDOR_ID_VARISYS	0x1888 /* Varisys Limited */
 
 static uint16 nvidia_device_list[] = {
-	0x0020, /* Nvidia TNT1 */
-	0x0028, /* Nvidia TNT2 (pro) */
-	0x0029, /* Nvidia TNT2 Ultra */
-	0x002a, /* Nvidia TNT2 */
-	0x002b, /* Nvidia TNT2 */
-	0x002c, /* Nvidia Vanta (Lt) */
-	0x002d, /* Nvidia TNT2-M64 (Pro) */
-	0x002e, /* Nvidia NV06 Vanta */
-	0x002f, /* Nvidia NV06 Vanta */
-	0x0040, /* Nvidia GeForce FX 6800 Ultra */
-	0x0041, /* Nvidia GeForce FX 6800 */
-	0x0042, /* Nvidia GeForce FX 6800LE */
-	0x0043, /* Nvidia GeForce 6800 XE */
-	0x0045, /* Nvidia GeForce FX 6800 GT */
-	0x0046, /* Nvidia GeForce FX 6800 GT */
-	0x0047, /* Nvidia GeForce 6800 GS */
-	0x0048, /* Nvidia GeForce FX 6800 XT */
-	0x0049, /* Nvidia unknown FX */
-	0x004d, /* Nvidia Quadro FX 4400 */
-	0x004e, /* Nvidia Quadro FX 4000 */
-	0x0091, /* Nvidia GeForce 7800 GTX PCIe */
-	0x0092, /* Nvidia Geforce 7800 GT PCIe */
-	0x0098, /* Nvidia Geforce 7800 Go PCIe */
-	0x0099, /* Nvidia Geforce 7800 GTX Go PCIe */
-	0x009d, /* Nvidia Quadro FX 4500 */
-	0x00a0, /* Nvidia Aladdin TNT2 */
-	0x00c0,	/* Nvidia GeForce 6800 GS */
-	0x00c1, /* Nvidia GeForce FX 6800 */
-	0x00c2, /* Nvidia GeForce FX 6800LE */
-	0x00c3, /* Nvidia GeForce FX 6800 XT */
-	0x00c8, /* Nvidia GeForce FX 6800 Go */
-	0x00c9, /* Nvidia GeForce FX 6800 Ultra Go */
-	0x00cc, /* Nvidia Quadro FX 1400 Go */
-	0x00cd, /* Nvidia Quadro FX 3450/4000 SDI */
-	0x00ce, /* Nvidia Quadro FX 1400 */
-	0x00f0, /* Nvidia GeForce FX 6800 (Ultra) AGP(?) */
-	0x00f1, /* Nvidia GeForce FX 6600 GT AGP */
-	0x00f2, /* Nvidia GeForce FX 6600 AGP */
-	0x00f3, /* Nvidia GeForce 6200 */
-	0x00f4, /* Nvidia GeForce 6600 LE */
-	0x00f5, /* Nvidia GeForce FX 7800 GS AGP */
-	0x00f6, /* Nvidia GeForce 6800 GS */
-	0x00f8, /* Nvidia Quadro FX 3400/4400 PCIe */
-	0x00f9,	/* Nvidia GeForce PCX 6800 PCIe */
-	0x00fa,	/* Nvidia GeForce PCX 5750 PCIe */
-	0x00fb,	/* Nvidia GeForce PCX 5900 PCIe */
-	0x00fc, /* Nvidia GeForce PCX 5300 PCIe */
-	0x00fd,	/* Nvidia Quadro PCX PCIe */
-	0x00fe,	/* Nvidia Quadro FX 1300 PCIe(?) */
-	0x00ff, /* Nvidia GeForce PCX 4300 PCIe */
-	0x0100, /* Nvidia GeForce256 SDR */
-	0x0101, /* Nvidia GeForce256 DDR */
-	0x0102, /* Nvidia GeForce256 Ultra */
-	0x0103, /* Nvidia Quadro */
-	0x0110, /* Nvidia GeForce2 MX/MX400 */
-	0x0111, /* Nvidia GeForce2 MX100/MX200 DDR */
-	0x0112, /* Nvidia GeForce2 Go */
-	0x0113, /* Nvidia Quadro2 MXR/EX/Go */
-	0x0140, /* Nvidia GeForce FX 6600 GT */
 #if 0
-	// TODO: investigate! Other cards might be affected, see tickets #1530
-	//	and #1712.
-	0x0141, /* Nvidia GeForce FX 6600 */
-#endif
-	0x0142, /* Nvidia GeForce FX 6600LE */
-	0x0143, /* Nvidia GeForce 6600 VE */
-	0x0144, /* Nvidia GeForce FX 6600 Go */
-	0x0145, /* Nvidia GeForce FX 6610 XL */
-	0x0146, /* Nvidia GeForce FX 6600 TE Go / 6200 TE Go */
-	0x0147, /* Nvidia GeForce FX 6700 XL */
-	0x0148, /* Nvidia GeForce FX 6600 Go */
-	0x0149, /* Nvidia GeForce FX 6600 GT Go */
-	0x014b, /* Nvidia unknown FX */
-	0x014c, /* Nvidia Quadro FX 540 MXM */
-	0x014d, /* Nvidia unknown FX */
-	0x014e, /* Nvidia Quadro FX 540 */
-	0x014f, /* Nvidia GeForce 6200 PCIe (128Mb) */
-	0x0150, /* Nvidia GeForce2 GTS/Pro */
-	0x0151, /* Nvidia GeForce2 Ti DDR */
-	0x0152, /* Nvidia GeForce2 Ultra */
-	0x0153, /* Nvidia Quadro2 Pro */
-	0x0160, /* Nvidia GeForce 6500 Go */
-	0x0161, /* Nvidia GeForce 6200 TurboCache */
-	0x0162, /* Nvidia GeForce 6200SE TurboCache */
-	0x0163, /* Nvidia GeForce 6200LE */
-	0x0164, /* Nvidia GeForce FX 6200 Go */
-	0x0165, /* Nvidia Quadro FX NVS 285 */
-	0x0166, /* Nvidia GeForce 6400 Go */
-	0x0167, /* Nvidia GeForce 6200 Go */
-	0x0168, /* Nvidia GeForce 6400 Go */
-	0x0169, /* Nvidia GeForce 6250 Go */
-	0x016a, /* Nvidia Geforce 7100 GS */
-	0x016b, /* Nvidia unknown FX Go */
-	0x016c, /* Nvidia unknown FX Go */
-	0x016d, /* Nvidia unknown FX Go */
-	0x016e, /* Nvidia unknown FX */
-	0x0170, /* Nvidia GeForce4 MX 460 */
-	0x0171, /* Nvidia GeForce4 MX 440 */
-	0x0172, /* Nvidia GeForce4 MX 420 */ 
-	0x0173, /* Nvidia GeForce4 MX 440SE */ 
-	0x0174, /* Nvidia GeForce4 440 Go */ 
-	0x0175, /* Nvidia GeForce4 420 Go */
-	0x0176, /* Nvidia GeForce4 420 Go 32M */
-	0x0177, /* Nvidia GeForce4 460 Go */
-	0x0178, /* Nvidia Quadro4 500 XGL/550 XGL */
-	0x0179, /* Nvidia GeForce4 440 Go 64M (PPC: GeForce4 MX) */
-	0x017a, /* Nvidia Quadro4 200 NVS/400 NVS */
-	0x017c, /* Nvidia Quadro4 500 GoGL */
-	0x017d, /* Nvidia GeForce4 410 Go 16M */
-	0x0181, /* Nvidia GeForce4 MX 440 AGP8X */
-	0x0182, /* Nvidia GeForce4 MX 440SE AGP8X */
-	0x0183, /* Nvidia GeForce4 MX 420 AGP8X */
-	0x0185, /* Nvidia GeForce4 MX 4000 AGP8X */
-	0x0186, /* Nvidia GeForce4 448 Go */
-	0x0187, /* Nvidia GeForce4 488 Go */
-	0x0188, /* Nvidia Quadro4 580 XGL */
-	0x0189,	/* Nvidia GeForce4 MX AGP8X (PPC) */
-	0x018a, /* Nvidia Quadro4 280 NVS AGP8X */
-	0x018b, /* Nvidia Quadro4 380 XGL */
-	0x018c, /* Nvidia Quadro4 NVS 50 PCI */
-	0x018d, /* Nvidia GeForce4 448 Go */
+	// TODO: these cards are not yet supported
 	0x0191, /* Nvidia GeForce 8800 GTX */
 	0x0193, /* Nvidia GeForce 8800 GTS */
-	0x01a0, /* Nvidia GeForce2 Integrated GPU */
-	0x01d1, /* Nvidia GeForce 7300 LE */
-	0x01d3, /* Nvidia GeForce 7300 SE */
-	0x01d8,	/* Nvidia GeForce 7400 GO */
-	0x01dd, /* Nvidia GeForce 7500 LE */
-	0x01df, /* Nvidia GeForce 7300 GS */
-	0x01f0, /* Nvidia GeForce4 MX Integrated GPU */
-	0x0200, /* Nvidia GeForce3 */
-	0x0201, /* Nvidia GeForce3 Ti 200 */
-	0x0202, /* Nvidia GeForce3 Ti 500 */
-	0x0203, /* Nvidia Quadro DCC */
-	0x0211, /* Nvidia GeForce FX 6800 */
-	0x0212, /* Nvidia GeForce FX 6800LE */
-	0x0215, /* Nvidia GeForce FX 6800 GT */
-	0x0218, /* Nvidia GeForce 6800 XT */
-	0x0220, /* Nvidia unknown FX */
-	0x0221, /* Nvidia GeForce 6200 AGP (256Mb - 128bit) */
-	0x0222, /* Nvidia unknown FX */
-	0x0228, /* Nvidia unknown FX Go */
-	0x0240, /* Nvidia GeForce 6150 (NFORCE4 Integr.GPU) */
-	0x0241, /* Nvidia GeForce 6150 LE (NFORCE4 Integr.GPU) */
-	0x0242, /* Nvidia GeForce 6100 (NFORCE4 Integr.GPU) */
-	0x0245, /* Nvidia Quadro NVS 210S / GeForce 6150LE */
-	0x0250, /* Nvidia GeForce4 Ti 4600 */
-	0x0251, /* Nvidia GeForce4 Ti 4400 */
-	0x0252, /* Nvidia GeForce4 Ti 4600 */
-	0x0253, /* Nvidia GeForce4 Ti 4200 */
-	0x0258, /* Nvidia Quadro4 900 XGL */
-	0x0259, /* Nvidia Quadro4 750 XGL */
-	0x025b, /* Nvidia Quadro4 700 XGL */
-	0x0280, /* Nvidia GeForce4 Ti 4800 AGP8X */
-	0x0281, /* Nvidia GeForce4 Ti 4200 AGP8X */
-	0x0282, /* Nvidia GeForce4 Ti 4800SE */
-	0x0286, /* Nvidia GeForce4 4200 Go */
-	0x0288, /* Nvidia Quadro4 980 XGL */
-	0x0289, /* Nvidia Quadro4 780 XGL */
-	0x028c, /* Nvidia Quadro4 700 GoGL */
-	0x0290, /* Nvidia GeForce 7900 GTX */
-	0x0291, /* Nvidia GeForce 7900 GT */
-	0x0293, /* Nvidia GeForce 7900 GX2 */
-	0x0294, /* Nvidia GeForce 7950 GX2 */
-	0x0295, /* Nvidia GeForce 7950 GT */
-	0x0298, /* Nvidia GeForce Go 7900 GS */
-	0x0299, /* Nvidia GeForce Go 7900 GTX */
-	0x029c, /* Nvidia Quadro FX 5500 */
-	0x029f, /* Nvidia Quadro FX 4500 X2 */
-	0x02a0, /* Nvidia GeForce3 Integrated GPU */
-	0x02e1,	/* Nvidia GeForce 7600 GS */
-	0x0301, /* Nvidia GeForce FX 5800 Ultra */
-	0x0302, /* Nvidia GeForce FX 5800 */
-	0x0308, /* Nvidia Quadro FX 2000 */
-	0x0309, /* Nvidia Quadro FX 1000 */
-	0x0311, /* Nvidia GeForce FX 5600 Ultra */
-	0x0312, /* Nvidia GeForce FX 5600 */
-	0x0313, /* Nvidia unknown FX */
-	0x0314, /* Nvidia GeForce FX 5600XT */
-	0x0316, /* Nvidia unknown FX Go */
-	0x0317, /* Nvidia unknown FX Go */
-	0x031a, /* Nvidia GeForce FX 5600 Go */
-	0x031b, /* Nvidia GeForce FX 5650 Go */
-	0x031c, /* Nvidia Quadro FX 700 Go */
-	0x031d, /* Nvidia unknown FX Go */
-	0x031e, /* Nvidia unknown FX Go */
-	0x031f, /* Nvidia unknown FX Go */
-	0x0320, /* Nvidia GeForce FX 5200 */
-	0x0321, /* Nvidia GeForce FX 5200 Ultra */
-	0x0322, /* Nvidia GeForce FX 5200 */
-	0x0323, /* Nvidia GeForce FX 5200LE */
-	0x0324, /* Nvidia GeForce FX 5200 Go */
-	0x0325, /* Nvidia GeForce FX 5250 Go */
-	0x0326, /* Nvidia GeForce FX 5500 */
-	0x0327, /* Nvidia GeForce FX 5100 */
-	0x0328, /* Nvidia GeForce FX 5200 Go 32M/64M */
-	0x0329, /* Nvidia GeForce FX 5200 (PPC) */
-	0x032a, /* Nvidia Quadro NVS 280 PCI */
-	0x032b, /* Nvidia Quadro FX 500/600 PCI */
-	0x032c, /* Nvidia GeForce FX 5300 Go */
-	0x032d, /* Nvidia GeForce FX 5100 Go */
-	0x032e, /* Nvidia unknown FX Go */
-	0x032f, /* Nvidia unknown FX Go */
-	0x0330, /* Nvidia GeForce FX 5900 Ultra */
-	0x0331, /* Nvidia GeForce FX 5900 */
-	0x0332, /* Nvidia GeForce FX 5900 XT */
-	0x0333, /* Nvidia GeForce FX 5950 Ultra */
-	0x0334, /* Nvidia GeForce FX 5900 ZT */
-	0x0338, /* Nvidia Quadro FX 3000 */
-	0x033f, /* Nvidia Quadro FX 700 */
-	0x0341, /* Nvidia GeForce FX 5700 Ultra */
-	0x0342, /* Nvidia GeForce FX 5700 */
-	0x0343, /* Nvidia GeForce FX 5700LE */
-	0x0344, /* Nvidia GeForce FX 5700VE */
-	0x0345, /* Nvidia unknown FX */
-	0x0347, /* Nvidia GeForce FX 5700 Go */
-	0x0348, /* Nvidia GeForce FX 5700 Go */
-	0x0349, /* Nvidia unknown FX Go */
-	0x034b, /* Nvidia unknown FX Go */
-	0x034c, /* Nvidia Quadro FX 1000 Go */
-	0x034e, /* Nvidia Quadro FX 1100 */
-	0x034f, /* Nvidia unknown FX */
-	0x0391, /* Nvidia GeForce 7600 GT */
-	0x0392, /* Nvidia GeForce 7600 GS */
-	0x0393, /* Nvidia GeForce 7300 GT */
-	0x0394, /* Nvidia GeForce 7600 LE */
-	0x0398, /* Nvidia GeForce 7600 GO */
-	0x03d0, /* Nvidia GeForce 6100 nForce 430 */
-	0x03d1, /* Nvidia GeForce 6100 nForce 405 */
-	0x03d2, /* Nvidia GeForce 6100 nForce 400 */
-#if 0
-	// TODO: these cards are not yet supported
 	0x0400, /* Nvidia GeForce 8600 GTS */
 	0x0402, /* Nvidia GeForce 8600 GT */
 	0x0407, /* Nvidia GeForce 8600M GT */
@@ -338,43 +108,15 @@
 	0
 };
 
-static uint16 elsa_device_list[] = {
-	0x0c60, /* Elsa Gladiac Geforce2 MX */
-	0
-};
-
-static uint16 nvstbsgs_device_list[] = {
-	0x0020, /* Nvidia STB/SGS-Thompson TNT1 */
-	0x0028, /* Nvidia STB/SGS-Thompson TNT2 (pro) */
-	0x0029, /* Nvidia STB/SGS-Thompson TNT2 Ultra */
-	0x002a, /* Nvidia STB/SGS-Thompson TNT2 */
-	0x002b, /* Nvidia STB/SGS-Thompson TNT2 */
-	0x002c, /* Nvidia STB/SGS-Thompson Vanta (Lt) */
-	0x002d, /* Nvidia STB/SGS-Thompson TNT2-M64 (Pro) */
-	0x002e, /* Nvidia STB/SGS-Thompson NV06 Vanta */
-	0x002f, /* Nvidia STB/SGS-Thompson NV06 Vanta */
-	0x00a0, /* Nvidia STB/SGS-Thompson Aladdin TNT2 */
-	0
-};
-
-static uint16 varisys_device_list[] = {
-	0x3503, /* Varisys GeForce4 MX440 */
-	0x3505, /* Varisys GeForce4 Ti 4200 */
-	0
-};
-
 static struct {
 	uint16	vendor;
 	uint16	*devices;
 } SupportedDevices[] = {
 	{VENDOR_ID_NVIDIA, nvidia_device_list},
-	{VENDOR_ID_ELSA, elsa_device_list},
-	{VENDOR_ID_NVSTBSGS, nvstbsgs_device_list},
-	{VENDOR_ID_VARISYS, varisys_device_list},
 	{0x0000, NULL}
 };
 
-static nv_settings sSettings = { // see comments in nvidia.settings 
+static nv_settings sSettings = { // see comments in nvidia_gpgpu.settings 
 	/* for driver */
 	DRIVER_PREFIX &quot;.accelerant&quot;,
 	&quot;none&quot;,					// primary
@@ -386,8 +128,6 @@
 	true,       			// usebios
 	true,       			// hardcursor
 	false,					// switchhead
-	false,					// force_pci
-	false,					// unhide_fw
 	true,					// pgm_panel
 	true,					// dma_acc
 	false,					// vga_on_tv
@@ -1234,39 +974,6 @@
 			break;
 		}
 
-		case NV_GET_NTH_AGP_INFO:
-		{
-			nv_nth_agp_info *nai = (nv_nth_agp_info *)buf;
-			if (nai-&gt;magic == NV_PRIVATE_DATA_MAGIC) {
-				nai-&gt;exist = false;
-				nai-&gt;agp_bus = false;
-				if (agp_bus) {
-					nai-&gt;agp_bus = true;
-					if ((*agp_bus-&gt;get_nth_agp_info)(nai-&gt;index, &amp;(nai-&gt;agpi)) == B_NO_ERROR) {
-						nai-&gt;exist = true;
-					}
-				}
-				result = B_OK;
-			}
-			break;
-		}
-
-		case NV_ENABLE_AGP:
-		{
-			nv_cmd_agp *nca = (nv_cmd_agp *)buf;
-			if (nca-&gt;magic == NV_PRIVATE_DATA_MAGIC) {
-				if (agp_bus) {
-					nca-&gt;agp_bus = true;
-					nca-&gt;cmd = agp_bus-&gt;set_agp_mode(nca-&gt;cmd);
-				} else {
-					nca-&gt;agp_bus = false;
-					nca-&gt;cmd = 0;
-				}
-				result = B_OK;
-			}
-			break;
-		}
-
 		case NV_ISA_OUT:
 		{
 			nv_in_out_isa *io_isa = (nv_in_out_isa *)buf;
@@ -1437,10 +1144,6 @@
 			&quot;usebios&quot;, false, false);
 		sSettings.switchhead = get_driver_boolean_parameter(settings,
 			&quot;switchhead&quot;, false, false);
-		sSettings.force_pci = get_driver_boolean_parameter(settings,
-			&quot;force_pci&quot;, false, false);
-		sSettings.unhide_fw = get_driver_boolean_parameter(settings,
-			&quot;unhide_fw&quot;, false, false);
 		sSettings.pgm_panel = get_driver_boolean_parameter(settings,
 			&quot;pgm_panel&quot;, false, false);
 		sSettings.dma_acc = get_driver_boolean_parameter(settings,
@@ -1475,9 +1178,6 @@
 		return B_ERROR;
 	}
 
-	/* get a handle for the agp bus if it exists */
-	get_module(B_AGP_GART_MODULE_NAME, (module_info **)&amp;agp_bus);
-
 	/* driver private data */
 	pd = (DeviceData *)calloc(1, sizeof(DeviceData));
 	if (!pd) {
@@ -1525,9 +1225,5 @@
 	/* put the pci module away */
 	put_module(B_PCI_MODULE_NAME);
 	put_module(B_ISA_MODULE_NAME);
-
-	/* put the agp module away if it's there */
-	if (agp_bus)
-		put_module(B_AGP_GART_MODULE_NAME);
 }
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009465.html">[Haiku-commits] r25874 - in haiku/trunk/headers/private/graphics: .	nvidia_gpgpu
</A></li>
	<LI>Next message: <A HREF="009467.html">[Haiku-commits] r25876 -	haiku/trunk/src/add-ons/kernel/drivers/graphics/nvidia_gpgpu
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9466">[ date ]</a>
              <a href="thread.html#9466">[ thread ]</a>
              <a href="subject.html#9466">[ subject ]</a>
              <a href="author.html#9466">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
