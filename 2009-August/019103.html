<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r32298 -	haiku/trunk/src/system/kernel/disk_device_manager
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r32298%20-%0A%09haiku/trunk/src/system/kernel/disk_device_manager&In-Reply-To=%3C200908130838.n7D8cxPO026652%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019102.html">
   <LINK REL="Next"  HREF="019106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r32298 -	haiku/trunk/src/system/kernel/disk_device_manager</H1>
    <B>bgroff at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r32298%20-%0A%09haiku/trunk/src/system/kernel/disk_device_manager&In-Reply-To=%3C200908130838.n7D8cxPO026652%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r32298 -	haiku/trunk/src/system/kernel/disk_device_manager">bgroff at mail.berlios.de
       </A><BR>
    <I>Thu Aug 13 10:38:59 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="019102.html">[Haiku-commits] r32297 - in haiku/trunk: headers/private/shared	src/kits/shared
</A></li>
        <LI>Next message: <A HREF="019106.html">[Haiku-commits] r32299 - haiku/trunk/src/apps/powerstatus
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19103">[ date ]</a>
              <a href="thread.html#19103">[ thread ]</a>
              <a href="subject.html#19103">[ subject ]</a>
              <a href="author.html#19103">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: bgroff
Date: 2009-08-13 10:38:58 +0200 (Thu, 13 Aug 2009)
New Revision: 32298
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=32298&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=32298&amp;view=rev</A>

Modified:
   haiku/trunk/src/system/kernel/disk_device_manager/disk_device_manager.cpp
Log:
* Cleaned up pointer style
* Added new line that was missing from previous commit.


Modified: haiku/trunk/src/system/kernel/disk_device_manager/disk_device_manager.cpp
===================================================================
--- haiku/trunk/src/system/kernel/disk_device_manager/disk_device_manager.cpp	2009-08-13 07:30:48 UTC (rev 32297)
+++ haiku/trunk/src/system/kernel/disk_device_manager/disk_device_manager.cpp	2009-08-13 08:38:58 UTC (rev 32298)
@@ -18,11 +18,11 @@
 
 
 // write_lock_disk_device
-disk_device_data *
+disk_device_data*
 write_lock_disk_device(partition_id partitionID)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	if (KDiskDevice *device = manager-&gt;RegisterDevice(partitionID, false)) {
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	if (KDiskDevice* device = manager-&gt;RegisterDevice(partitionID, false)) {
 		if (device-&gt;WriteLock())
 			return device-&gt;DeviceData();
 		// Only unregister, when the locking fails. The guarantees, that the
@@ -37,8 +37,8 @@
 void
 write_unlock_disk_device(partition_id partitionID)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	if (KDiskDevice *device = manager-&gt;RegisterDevice(partitionID, false)) {
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	if (KDiskDevice* device = manager-&gt;RegisterDevice(partitionID, false)) {
 		bool isLocked = device-&gt;IsWriteLocked();
 		if (isLocked) {
 			device-&gt;WriteUnlock();
@@ -50,11 +50,11 @@
 
 
 // read_lock_disk_device
-disk_device_data *
+disk_device_data*
 read_lock_disk_device(partition_id partitionID)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	if (KDiskDevice *device = manager-&gt;RegisterDevice(partitionID, false)) {
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	if (KDiskDevice* device = manager-&gt;RegisterDevice(partitionID, false)) {
 		if (device-&gt;ReadLock())
 			return device-&gt;DeviceData();
 		// Only unregister, when the locking fails. The guarantees, that the
@@ -69,8 +69,8 @@
 void
 read_unlock_disk_device(partition_id partitionID)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	if (KDiskDevice *device = manager-&gt;RegisterDevice(partitionID, false)) {
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	if (KDiskDevice* device = manager-&gt;RegisterDevice(partitionID, false)) {
 		bool isLocked = device-&gt;IsReadLocked(false);
 		if (isLocked) {
 			device-&gt;ReadUnlock();
@@ -83,11 +83,11 @@
 
 // find_disk_device
 int32
-find_disk_device(const char *path)
+find_disk_device(const char* path)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
 	partition_id id = -1;
-	if (KDiskDevice *device = manager-&gt;RegisterDevice(path)) {
+	if (KDiskDevice* device = manager-&gt;RegisterDevice(path)) {
 		id = device-&gt;ID();
 		device-&gt;Unregister();
 	}
@@ -97,11 +97,11 @@
 
 // find_partition
 int32
-find_partition(const char *path)
+find_partition(const char* path)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
 	partition_id id = -1;
-	if (KPartition *partition = manager-&gt;RegisterPartition(path)) {
+	if (KPartition* partition = manager-&gt;RegisterPartition(path)) {
 		id = partition-&gt;ID();
 		partition-&gt;Unregister();
 	}
@@ -110,31 +110,31 @@
 
 
 // get_disk_device
-disk_device_data *
+disk_device_data*
 get_disk_device(partition_id partitionID)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	KDiskDevice *device = manager-&gt;FindDevice(partitionID, false);
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	KDiskDevice* device = manager-&gt;FindDevice(partitionID, false);
 	return (device ? device-&gt;DeviceData() : NULL);
 }
 
 
 // get_partition
-partition_data *
+partition_data*
 get_partition(partition_id partitionID)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	KPartition *partition = manager-&gt;FindPartition(partitionID);
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	KPartition* partition = manager-&gt;FindPartition(partitionID);
 	return (partition ? partition-&gt;PartitionData() : NULL);
 }
 
 
 // get_parent_partition
-partition_data *
+partition_data*
 get_parent_partition(partition_id partitionID)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	KPartition *partition = manager-&gt;FindPartition(partitionID);
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	KPartition* partition = manager-&gt;FindPartition(partitionID);
 	if (partition &amp;&amp; partition-&gt;Parent())
 		return partition-&gt;Parent()-&gt;PartitionData();
 	return NULL;
@@ -142,12 +142,12 @@
 
 
 // get_child_partition
-partition_data *
+partition_data*
 get_child_partition(partition_id partitionID, int32 index)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	if (KPartition *partition = manager-&gt;FindPartition(partitionID)) {
-		if (KPartition *child = partition-&gt;ChildAt(index))
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	if (KPartition* partition = manager-&gt;FindPartition(partitionID)) {
+		if (KPartition* child = partition-&gt;ChildAt(index))
 			return child-&gt;PartitionData();
 	}
 	return NULL;
@@ -157,8 +157,8 @@
 int
 open_partition(partition_id partitionID, int openMode)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	KPartition *partition = manager-&gt;FindPartition(partitionID);
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	KPartition* partition = manager-&gt;FindPartition(partitionID);
 	if (partition == NULL)
 		return B_BAD_VALUE;
 
@@ -170,14 +170,15 @@
 	return fd;
 }
 
+
 // create_child_partition
-partition_data *
+partition_data*
 create_child_partition(partition_id partitionID, int32 index, off_t offset,
 	off_t size, partition_id childID)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	if (KPartition *partition = manager-&gt;FindPartition(partitionID)) {
-		KPartition *child = NULL;
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	if (KPartition* partition = manager-&gt;FindPartition(partitionID)) {
+		KPartition* child = NULL;
 		if (partition-&gt;CreateChild(childID, index, offset, size, &amp;child)
 				== B_OK) {
 			return child-&gt;PartitionData();
@@ -196,9 +197,9 @@
 bool
 delete_partition(partition_id partitionID)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	if (KPartition *partition = manager-&gt;FindPartition(partitionID)) {
-		if (KPartition *parent = partition-&gt;Parent())
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	if (KPartition* partition = manager-&gt;FindPartition(partitionID)) {
+		if (KPartition* parent = partition-&gt;Parent())
 			return parent-&gt;RemoveChild(partition);
 	}
 	return false;
@@ -234,8 +235,8 @@
 get_default_partition_content_name(partition_id partitionID,
 	const char* fileSystemName, char* buffer, size_t bufferSize)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
-	KPartition *partition = manager-&gt;RegisterPartition(partitionID);
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
+	KPartition* partition = manager-&gt;RegisterPartition(partitionID);
 	if (partition == NULL)
 		return B_ENTRY_NOT_FOUND;
 
@@ -265,11 +266,11 @@
 
 // find_disk_system
 disk_system_id
-find_disk_system(const char *name)
+find_disk_system(const char* name)
 {
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
 	if (ManagerLocker locker = manager) {
-		if (KDiskSystem *diskSystem = manager-&gt;FindDiskSystem(name))
+		if (KDiskSystem* diskSystem = manager-&gt;FindDiskSystem(name))
 			return diskSystem-&gt;ID();
 	}
 	return -1;
@@ -281,9 +282,9 @@
 update_disk_device_job_progress(disk_job_id jobID, float progress)
 {
 #if 0
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
 	if (ManagerLocker locker = manager) {
-		if (KDiskDeviceJob *job = manager-&gt;FindJob(jobID)) {
+		if (KDiskDeviceJob* job = manager-&gt;FindJob(jobID)) {
 			job-&gt;UpdateProgress(progress);
 			return true;
 		}
@@ -295,12 +296,12 @@
 
 // update_disk_device_job_extra_progress
 bool
-update_disk_device_job_extra_progress(disk_job_id jobID, const char *info)
+update_disk_device_job_extra_progress(disk_job_id jobID, const char* info)
 {
 #if 0
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
 	if (ManagerLocker locker = manager) {
-		if (KDiskDeviceJob *job = manager-&gt;FindJob(jobID)) {
+		if (KDiskDeviceJob* job = manager-&gt;FindJob(jobID)) {
 			job-&gt;UpdateExtraProgress(info);
 			return true;
 		}
@@ -312,12 +313,12 @@
 
 // set_disk_device_job_error_message
 bool
-set_disk_device_job_error_message(disk_job_id jobID, const char *message)
+set_disk_device_job_error_message(disk_job_id jobID, const char* message)
 {
 #if 0
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
 	if (ManagerLocker locker = manager) {
-		if (KDiskDeviceJob *job = manager-&gt;FindJob(jobID)) {
+		if (KDiskDeviceJob* job = manager-&gt;FindJob(jobID)) {
 			job-&gt;SetErrorMessage(message);
 			return true;
 		}
@@ -334,13 +335,13 @@
 {
 #if 0
 	bool paused = false;
-	KDiskDeviceManager *manager = KDiskDeviceManager::Default();
+	KDiskDeviceManager* manager = KDiskDeviceManager::Default();
 	do {
 		sem_id pauseSemaphore = -1;
 		if (ManagerLocker locker = manager) {
 			// get the job and the respective job queue
-			if (KDiskDeviceJob *job = manager-&gt;FindJob(jobID)) {
-				if (KDiskDeviceJobQueue *jobQueue = job-&gt;JobQueue()) {
+			if (KDiskDeviceJob* job = manager-&gt;FindJob(jobID)) {
+				if (KDiskDeviceJobQueue* jobQueue = job-&gt;JobQueue()) {
 					// terminate if canceled.
 					if (jobQueue-&gt;IsCanceled()) {
 						if (jobQueue-&gt;ShallReverse())


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="019102.html">[Haiku-commits] r32297 - in haiku/trunk: headers/private/shared	src/kits/shared
</A></li>
	<LI>Next message: <A HREF="019106.html">[Haiku-commits] r32299 - haiku/trunk/src/apps/powerstatus
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19103">[ date ]</a>
              <a href="thread.html#19103">[ thread ]</a>
              <a href="subject.html#19103">[ subject ]</a>
              <a href="author.html#19103">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
