<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r32188 - in	haiku/trunk/src/add-ons/media/plugins/ffmpeg: . libavcodec/x86
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r32188%20-%20in%0A%09haiku/trunk/src/add-ons/media/plugins/ffmpeg%3A%20.%20libavcodec/x86&In-Reply-To=%3C200908071454.n77EsJsc014517%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018899.html">
   <LINK REL="Next"  HREF="018901.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r32188 - in	haiku/trunk/src/add-ons/media/plugins/ffmpeg: . libavcodec/x86</H1>
    <B>stippi at mail.berlios.de</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r32188%20-%20in%0A%09haiku/trunk/src/add-ons/media/plugins/ffmpeg%3A%20.%20libavcodec/x86&In-Reply-To=%3C200908071454.n77EsJsc014517%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r32188 - in	haiku/trunk/src/add-ons/media/plugins/ffmpeg: . libavcodec/x86">stippi at mail.berlios.de
       </A><BR>
    <I>Fri Aug  7 16:54:19 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018899.html">[Haiku-commits] r32187 - haiku/trunk/src/kits/app
</A></li>
        <LI>Next message: <A HREF="018901.html">[Haiku-commits] r32189 - in	haiku/trunk/src/add-ons/media/plugins/ffmpeg: . libavcodec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18900">[ date ]</a>
              <a href="thread.html#18900">[ thread ]</a>
              <a href="subject.html#18900">[ subject ]</a>
              <a href="author.html#18900">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: stippi
Date: 2009-08-07 16:54:17 +0200 (Fri, 07 Aug 2009)
New Revision: 32188
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=32188&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=32188&amp;view=rev</A>

Modified:
   haiku/trunk/src/add-ons/media/plugins/ffmpeg/MuxerTable.cpp
   haiku/trunk/src/add-ons/media/plugins/ffmpeg/config.h
   haiku/trunk/src/add-ons/media/plugins/ffmpeg/libavcodec/x86/Jamfile
Log:
* Disabled GPL H.264 ASM code
* Enabled WAV muxer.
* Updated configure line in config.h to be closer to what it could have been
  to produce the current config.h, but a lot of encoders and muxers are enabled
  manually at the moment, so this line wouldn't produce the config.h as is.


Modified: haiku/trunk/src/add-ons/media/plugins/ffmpeg/MuxerTable.cpp
===================================================================
--- haiku/trunk/src/add-ons/media/plugins/ffmpeg/MuxerTable.cpp	2009-08-07 14:39:15 UTC (rev 32187)
+++ haiku/trunk/src/add-ons/media/plugins/ffmpeg/MuxerTable.cpp	2009-08-07 14:54:17 UTC (rev 32188)
@@ -55,6 +55,19 @@
 //		&quot;ogg&quot;,
 //		{ 0 }
 //	},
+	{
+		media_file_format::B_WRITABLE
+			| media_file_format::B_KNOWS_ENCODED_AUDIO,
+		{ 0 },
+		B_WAV_FORMAT_FAMILY,
+		100,
+		{ 0 },
+		&quot;audio/x-wav&quot;,
+		&quot;WAV Format&quot;,
+		&quot;wav&quot;,
+		&quot;wav&quot;,
+		{ 0 }
+	},
 };
 
 const size_t gMuxerCount = sizeof(gMuxerTable) / sizeof(media_file_format);

Modified: haiku/trunk/src/add-ons/media/plugins/ffmpeg/config.h
===================================================================
--- haiku/trunk/src/add-ons/media/plugins/ffmpeg/config.h	2009-08-07 14:39:15 UTC (rev 32187)
+++ haiku/trunk/src/add-ons/media/plugins/ffmpeg/config.h	2009-08-07 14:54:17 UTC (rev 32188)
@@ -1,7 +1,7 @@
 /* Automatically generated by configure - do not modify! */
 #ifndef FFMPEG_CONFIG_H
 #define FFMPEG_CONFIG_H
-#define FFMPEG_CONFIGURATION &quot;--prefix=/boot/common/ --enable-shared --enable-gpl --disable-debug --disable-mmx --disable-demuxer=audio-beos --disable-muxer=audio-beos --disable-encoders --disable-parsers --disable-demuxers --disable-muxers&quot;
+#define FFMPEG_CONFIGURATION &quot;--prefix=/boot/common/ --enable-shared --disable-debug --disable-mmx --disable-demuxer=audio-beos --disable-muxer=audio-beos&quot;
 #define FFMPEG_DATADIR &quot;/boot/common//share/ffmpeg&quot;
 #define ARCH_ALPHA 0
 #define ARCH_ARM 0
@@ -717,7 +717,7 @@
 #define CONFIG_TGP_MUXER 0
 #define CONFIG_VC1T_MUXER 0
 #define CONFIG_VOC_MUXER 0
-#define CONFIG_WAV_MUXER 0
+#define CONFIG_WAV_MUXER 1
 #define CONFIG_YUV4MPEGPIPE_MUXER 0
 #define CONFIG_LIBNUT_MUXER 0
 #define CONFIG_CROP_FILTER 1

Modified: haiku/trunk/src/add-ons/media/plugins/ffmpeg/libavcodec/x86/Jamfile
===================================================================
--- haiku/trunk/src/add-ons/media/plugins/ffmpeg/libavcodec/x86/Jamfile	2009-08-07 14:39:15 UTC (rev 32187)
+++ haiku/trunk/src/add-ons/media/plugins/ffmpeg/libavcodec/x86/Jamfile	2009-08-07 14:54:17 UTC (rev 32188)
@@ -44,8 +44,8 @@
 		idct_sse2_xvid.c
 		vp3dsp_sse2.c
 		vp6dsp_sse2.c
-		h264_idct_sse2.nasm
-		h264_deblock_sse2.nasm
+#		h264_idct_sse2.nasm # GPL
+#		h264_deblock_sse2.nasm # GPL
 	;
 }
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018899.html">[Haiku-commits] r32187 - haiku/trunk/src/kits/app
</A></li>
	<LI>Next message: <A HREF="018901.html">[Haiku-commits] r32189 - in	haiku/trunk/src/add-ons/media/plugins/ffmpeg: . libavcodec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18900">[ date ]</a>
              <a href="thread.html#18900">[ thread ]</a>
              <a href="subject.html#18900">[ subject ]</a>
              <a href="author.html#18900">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
