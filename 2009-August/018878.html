<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r32174 - in haiku/trunk: headers/os/interface	src/kits/interface
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r32174%20-%20in%20haiku/trunk%3A%20headers/os/interface%0A%09src/kits/interface&In-Reply-To=%3C200908070801.n7781SZL010585%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018893.html">
   <LINK REL="Next"  HREF="018879.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r32174 - in haiku/trunk: headers/os/interface	src/kits/interface</H1>
    <B>axeld at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r32174%20-%20in%20haiku/trunk%3A%20headers/os/interface%0A%09src/kits/interface&In-Reply-To=%3C200908070801.n7781SZL010585%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r32174 - in haiku/trunk: headers/os/interface	src/kits/interface">axeld at mail.berlios.de
       </A><BR>
    <I>Fri Aug  7 10:01:28 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018893.html">[Haiku-commits] r32173 - haiku/trunk/src/kits/interface
</A></li>
        <LI>Next message: <A HREF="018879.html">[Haiku-commits] r32175 - haiku/trunk/src/preferences/joysticks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18878">[ date ]</a>
              <a href="thread.html#18878">[ thread ]</a>
              <a href="subject.html#18878">[ subject ]</a>
              <a href="author.html#18878">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: axeld
Date: 2009-08-07 10:01:27 +0200 (Fri, 07 Aug 2009)
New Revision: 32174
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=32174&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=32174&amp;view=rev</A>

Modified:
   haiku/trunk/headers/os/interface/MenuField.h
   haiku/trunk/src/kits/interface/BMCPrivate.cpp
   haiku/trunk/src/kits/interface/Menu.cpp
   haiku/trunk/src/kits/interface/MenuBar.cpp
   haiku/trunk/src/kits/interface/MenuField.cpp
   haiku/trunk/src/kits/interface/MenuWindow.cpp
Log:
* Cleanup, no functional change.
* Remove superfluous operator=() implementations.


Modified: haiku/trunk/headers/os/interface/MenuField.h
===================================================================
--- haiku/trunk/headers/os/interface/MenuField.h	2009-08-07 07:22:56 UTC (rev 32173)
+++ haiku/trunk/headers/os/interface/MenuField.h	2009-08-07 08:01:27 UTC (rev 32174)
@@ -1,34 +1,36 @@
 /*
- * Copyright 2006-2008, Haiku, Inc. All Rights Reserved.
+ * Copyright 2006-2009, Haiku, Inc. All Rights Reserved.
  * Distributed under the terms of the MIT License.
  */
-
 #ifndef _MENU_FIELD_H
 #define _MENU_FIELD_H
 
+
 #include &lt;BeBuild.h&gt;
-#include &lt;Menu.h&gt;		/* For convenience */
+#include &lt;Menu.h&gt;
 #include &lt;View.h&gt;
 
+
 class BMenuBar;
 
+
 class BMenuField : public BView {
- public:
+public:
 							BMenuField(BRect frame, const char* name,
 								const char* label, BMenu* menu,
 								uint32 resize = B_FOLLOW_LEFT|B_FOLLOW_TOP,
-								uint32 flags = B_WILL_DRAW | B_NAVIGABLE); 
+								uint32 flags = B_WILL_DRAW | B_NAVIGABLE);
 							BMenuField(BRect frame, const char* name,
 								const char* label, BMenu* menu,
 								bool fixed_size,
 								uint32 resize = B_FOLLOW_LEFT|B_FOLLOW_TOP,
-								uint32 flags = B_WILL_DRAW | B_NAVIGABLE); 
+								uint32 flags = B_WILL_DRAW | B_NAVIGABLE);
 							BMenuField(const char* name,
 								const char* label, BMenu* menu,
 								BMessage* message,
-								uint32 flags = B_WILL_DRAW | B_NAVIGABLE); 
+								uint32 flags = B_WILL_DRAW | B_NAVIGABLE);
 							BMenuField(const char* label,
-								BMenu* menu, BMessage* message = NULL); 
+								BMenu* menu, BMessage* message = NULL);
 							BMenuField(BMessage* data);
 	virtual					~BMenuField();
 
@@ -57,7 +59,7 @@
 
 	virtual	void			SetLabel(const char* label);
 			const char*		Label() const;
-		
+
 	virtual void			SetEnabled(bool on);
 			bool			IsEnabled() const;
 
@@ -86,7 +88,7 @@
 			BLayoutItem*	CreateLabelLayoutItem();
 			BLayoutItem*	CreateMenuBarLayoutItem();
 
-	
+
 	/*----- Private or reserved -----------------------------------------*/
 	virtual status_t		Perform(perform_code d, void* arg);
 
@@ -107,17 +109,16 @@
 	virtual	void			_ReservedMenuField2();
 	virtual	void			_ReservedMenuField3();
 
-			BMenuField		&amp;operator=(const BMenuField&amp;);
+			BMenuField&amp;		operator=(const BMenuField&amp; other);
 
-
 			void			InitObject(const char* label);
 			void			InitObject2();
 			void			DrawLabel(BRect bounds, BRect update);
 	static	void			InitMenu(BMenu* menu);
-	
+
 			int32			_MenuTask();
 	static	int32			_thread_entry(void *arg);
-	
+
 			void			_UpdateFrame();
 			void			_InitMenuBar(BMenu* menu,
 								BRect frame, bool fixedSize);

Modified: haiku/trunk/src/kits/interface/BMCPrivate.cpp
===================================================================
--- haiku/trunk/src/kits/interface/BMCPrivate.cpp	2009-08-07 07:22:56 UTC (rev 32173)
+++ haiku/trunk/src/kits/interface/BMCPrivate.cpp	2009-08-07 08:01:27 UTC (rev 32174)
@@ -22,7 +22,7 @@
 #include &lt;Window.h&gt;
 
 
-_BMCFilter_::_BMCFilter_(BMenuField *menuField, uint32 what)
+_BMCFilter_::_BMCFilter_(BMenuField* menuField, uint32 what)
 	:
 	BMessageFilter(B_ANY_DELIVERY, B_ANY_SOURCE, what),
 	fMenuField(menuField)
@@ -36,10 +36,10 @@
 
 
 filter_result
-_BMCFilter_::Filter(BMessage *message, BHandler **handler)
+_BMCFilter_::Filter(BMessage* message, BHandler** handler)
 {
 	if (message-&gt;what == B_MOUSE_DOWN) {
-		if (BView *view = dynamic_cast&lt;BView *&gt;(*handler)) {
+		if (BView* view = dynamic_cast&lt;BView*&gt;(*handler)) {
 			BPoint point;
 			message-&gt;FindPoint(&quot;be:view_where&quot;, &amp;point);
 			view-&gt;ConvertToParent(&amp;point);
@@ -52,13 +52,6 @@
 }
 
 
-_BMCFilter_ &amp;
-_BMCFilter_::operator=(const _BMCFilter_ &amp;)
-{
-	return *this;
-}
-
-
 // #pragma mark -
 
 
@@ -87,7 +80,7 @@
 }
 
 
-_BMCMenuBar_::_BMCMenuBar_(BMessage *data)
+_BMCMenuBar_::_BMCMenuBar_(BMessage* data)
 	:	BMenuBar(data),
 	fMenuField(NULL),
 	fFixedSize(true),
@@ -108,8 +101,8 @@
 }
 
 
-BArchivable *
-_BMCMenuBar_::Instantiate(BMessage *data)
+BArchivable*
+_BMCMenuBar_::Instantiate(BMessage* data)
 {
 	if (validate_instantiation(data, &quot;_BMCMenuBar_&quot;))
 		return new _BMCMenuBar_(data);
@@ -121,10 +114,10 @@
 void
 _BMCMenuBar_::AttachedToWindow()
 {
-	fMenuField = static_cast&lt;BMenuField *&gt;(Parent());
+	fMenuField = static_cast&lt;BMenuField*&gt;(Parent());
 
 	// Don't cause the KeyMenuBar to change by being attached
-	BMenuBar *menuBar = Window()-&gt;KeyMenuBar();
+	BMenuBar* menuBar = Window()-&gt;KeyMenuBar();
 	BMenuBar::AttachedToWindow();
 	Window()-&gt;SetKeyMenuBar(menuBar);
 
@@ -307,12 +300,12 @@
 
 
 void
-_BMCMenuBar_::MessageReceived(BMessage *msg)
+_BMCMenuBar_::MessageReceived(BMessage* msg)
 {
 	switch (msg-&gt;what) {
 		case 'TICK':
 		{
-			BMenuItem *item = ItemAt(0);
+			BMenuItem* item = ItemAt(0);
 
 			if (item &amp;&amp; item-&gt;Submenu() &amp;&amp;  item-&gt;Submenu()-&gt;Window()) {
 				BMessage message(B_KEY_DOWN);
@@ -389,13 +382,6 @@
 }
 
 
-_BMCMenuBar_
-&amp;_BMCMenuBar_::operator=(const _BMCMenuBar_ &amp;)
-{
-	return *this;
-}
-
-
 void
 _BMCMenuBar_::_Init(bool setMaxContentWidth)
 {

Modified: haiku/trunk/src/kits/interface/Menu.cpp
===================================================================
--- haiku/trunk/src/kits/interface/Menu.cpp	2009-08-07 07:22:56 UTC (rev 32173)
+++ haiku/trunk/src/kits/interface/Menu.cpp	2009-08-07 08:01:27 UTC (rev 32174)
@@ -8,6 +8,7 @@
  *		Rene Gollent (<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">anevilyak at gmail.com</A>)
  */
 
+
 #include &lt;Menu.h&gt;
 
 #include &lt;new&gt;
@@ -65,10 +66,10 @@
 
 class ExtraMenuData {
 public:
-	menu_tracking_hook trackingHook;
-	void *trackingState;
+	menu_tracking_hook	trackingHook;
+	void*				trackingState;
 
-	ExtraMenuData(menu_tracking_hook func, void *state)
+	ExtraMenuData(menu_tracking_hook func, void* state)
 	{
 		trackingHook = func;
 		trackingState = state;
@@ -173,7 +174,7 @@
 };
 
 
-const char *BPrivate::kEmptyMenuLabel = &quot;&lt;empty&gt;&quot;;
+const char* BPrivate::kEmptyMenuLabel = &quot;&lt;empty&gt;&quot;;
 
 
 struct BMenu::LayoutData {
@@ -182,7 +183,7 @@
 };
 
 
-BMenu::BMenu(const char *name, menu_layout layout)
+BMenu::BMenu(const char* name, menu_layout layout)
 	: BView(BRect(0, 0, 0, 0), name, 0, B_WILL_DRAW),
 	fChosenItem(NULL),
 	fPad(14.0f, 2.0f, 20.0f, 0.0f),
@@ -216,7 +217,7 @@
 }
 
 
-BMenu::BMenu(const char *name, float width, float height)
+BMenu::BMenu(const char* name, float width, float height)
 	: BView(BRect(0.0f, width, 0.0f, height), name, 0, B_WILL_DRAW),
 	fChosenItem(NULL),
 	fSelected(NULL),
@@ -261,7 +262,7 @@
 }
 
 
-BMenu::BMenu(BMessage *archive)
+BMenu::BMenu(BMessage* archive)
 	: BView(archive),
 	fChosenItem(NULL),
 	fPad(14.0f, 2.0f, 20.0f, 0.0f),
@@ -306,7 +307,7 @@
 
 
 status_t
-BMenu::Archive(BMessage *data, bool deep) const
+BMenu::Archive(BMessage* data, bool deep) const
 {
 	status_t err = BView::Archive(data, deep);
 
@@ -325,7 +326,7 @@
 	if (err == B_OK)
 		err = data-&gt;AddFloat(&quot;_maxwidth&quot;, fMaxContentWidth);
 	if (err == B_OK &amp;&amp; deep) {
-		BMenuItem *item = NULL;
+		BMenuItem* item = NULL;
 		int32 index = 0;
 		while ((item = ItemAt(index++)) != NULL) {
 			BMessage itemData;
@@ -353,17 +354,17 @@
 	// when called there. Probably because the BApplication isn't yet
 	// initialized, or running.
 	BMenu::sAltAsCommandKey = true;
-	key_map *keys = NULL;
-	char *chars = NULL;
+	key_map* keys = NULL;
+	char* chars = NULL;
 	get_key_map(&amp;keys, &amp;chars);
 	if (keys == NULL || keys-&gt;left_command_key != 0x5d
 		|| keys-&gt;left_control_key != 0x5c)
 		BMenu::sAltAsCommandKey = false;
 	free(chars);
 	free(keys);
-	
-	BMenuItem *superItem = Superitem();
-	BMenu *superMenu = Supermenu();
+
+	BMenuItem* superItem = Superitem();
+	BMenu* superMenu = Supermenu();
 	if (AddDynamicItem(B_INITIAL_ADD)) {
 		do {
 			if (superMenu != NULL &amp;&amp; !superMenu-&gt;_OkToProceed(superItem)) {
@@ -390,18 +391,19 @@
 
 
 bool
-BMenu::AddItem(BMenuItem *item)
+BMenu::AddItem(BMenuItem* item)
 {
 	return AddItem(item, CountItems());
 }
 
 
 bool
-BMenu::AddItem(BMenuItem *item, int32 index)
+BMenu::AddItem(BMenuItem* item, int32 index)
 {
-	if (fLayout == B_ITEMS_IN_MATRIX)
-		debugger(&quot;BMenu::AddItem(BMenuItem *, int32) this method can only &quot;
-				&quot;be called if the menu layout is not B_ITEMS_IN_MATRIX&quot;);
+	if (fLayout == B_ITEMS_IN_MATRIX) {
+		debugger(&quot;BMenu::AddItem(BMenuItem*, int32) this method can only &quot;
+			&quot;be called if the menu layout is not B_ITEMS_IN_MATRIX&quot;);
+	}
 
 	if (!item || !_AddItem(item, index))
 		return false;
@@ -420,11 +422,12 @@
 
 
 bool
-BMenu::AddItem(BMenuItem *item, BRect frame)
+BMenu::AddItem(BMenuItem* item, BRect frame)
 {
-	if (fLayout != B_ITEMS_IN_MATRIX)
-		debugger(&quot;BMenu::AddItem(BMenuItem *, BRect) this method can only &quot;
+	if (fLayout != B_ITEMS_IN_MATRIX) {
+		debugger(&quot;BMenu::AddItem(BMenuItem*, BRect) this method can only &quot;
 			&quot;be called if the menu layout is B_ITEMS_IN_MATRIX&quot;);
+	}
 
 	if (!item)
 		return false;
@@ -449,9 +452,9 @@
 
 
 bool
-BMenu::AddItem(BMenu *submenu)
+BMenu::AddItem(BMenu* submenu)
 {
-	BMenuItem *item = new (nothrow) BMenuItem(submenu);
+	BMenuItem* item = new (nothrow) BMenuItem(submenu);
 	if (!item)
 		return false;
 
@@ -466,13 +469,14 @@
 
 
 bool
-BMenu::AddItem(BMenu *submenu, int32 index)
+BMenu::AddItem(BMenu* submenu, int32 index)
 {
-	if (fLayout == B_ITEMS_IN_MATRIX)
-		debugger(&quot;BMenu::AddItem(BMenuItem *, int32) this method can only &quot;
-				&quot;be called if the menu layout is not B_ITEMS_IN_MATRIX&quot;);
+	if (fLayout == B_ITEMS_IN_MATRIX) {
+		debugger(&quot;BMenu::AddItem(BMenuItem*, int32) this method can only &quot;
+			&quot;be called if the menu layout is not B_ITEMS_IN_MATRIX&quot;);
+	}
 
-	BMenuItem *item = new (nothrow) BMenuItem(submenu);
+	BMenuItem* item = new (nothrow) BMenuItem(submenu);
 	if (!item)
 		return false;
 
@@ -487,13 +491,14 @@
 
 
 bool
-BMenu::AddItem(BMenu *submenu, BRect frame)
+BMenu::AddItem(BMenu* submenu, BRect frame)
 {
-	if (fLayout != B_ITEMS_IN_MATRIX)
-		debugger(&quot;BMenu::AddItem(BMenu *, BRect) this method can only &quot;
+	if (fLayout != B_ITEMS_IN_MATRIX) {
+		debugger(&quot;BMenu::AddItem(BMenu*, BRect) this method can only &quot;
 			&quot;be called if the menu layout is B_ITEMS_IN_MATRIX&quot;);
+	}
 
-	BMenuItem *item = new (nothrow) BMenuItem(submenu);
+	BMenuItem* item = new (nothrow) BMenuItem(submenu);
 	if (!item)
 		return false;
 
@@ -508,7 +513,7 @@
 
 
 bool
-BMenu::AddList(BList *list, int32 index)
+BMenu::AddList(BList* list, int32 index)
 {
 	// TODO: test this function, it's not documented in the bebook.
 	if (list == NULL)
@@ -518,7 +523,7 @@
 
 	int32 numItems = list-&gt;CountItems();
 	for (int32 i = 0; i &lt; numItems; i++) {
-		BMenuItem *item = static_cast&lt;BMenuItem *&gt;(list-&gt;ItemAt(i));
+		BMenuItem* item = static_cast&lt;BMenuItem*&gt;(list-&gt;ItemAt(i));
 		if (item != NULL) {
 			if (!_AddItem(item, index + i))
 				break;
@@ -543,7 +548,7 @@
 bool
 BMenu::AddSeparatorItem()
 {
-	BMenuItem *item = new (nothrow) BSeparatorItem();
+	BMenuItem* item = new (nothrow) BSeparatorItem();
 	if (!item || !AddItem(item, CountItems())) {
 		delete item;
 		return false;
@@ -554,16 +559,16 @@
 
 
 bool
-BMenu::RemoveItem(BMenuItem *item)
+BMenu::RemoveItem(BMenuItem* item)
 {
 	return _RemoveItems(0, 0, item, false);
 }
 
 
-BMenuItem *
+BMenuItem*
 BMenu::RemoveItem(int32 index)
 {
-	BMenuItem *item = ItemAt(index);
+	BMenuItem* item = ItemAt(index);
 	if (item != NULL)
 		_RemoveItems(0, 0, item, false);
 	return item;
@@ -578,10 +583,10 @@
 
 
 bool
-BMenu::RemoveItem(BMenu *submenu)
+BMenu::RemoveItem(BMenu* submenu)
 {
 	for (int32 i = 0; i &lt; fItems.CountItems(); i++) {
-		if (static_cast&lt;BMenuItem *&gt;(fItems.ItemAtFast(i))-&gt;Submenu() == submenu)
+		if (static_cast&lt;BMenuItem*&gt;(fItems.ItemAtFast(i))-&gt;Submenu() == submenu)
 			return _RemoveItems(i, 1, NULL, false);
 	}
 
@@ -596,30 +601,30 @@
 }
 
 
-BMenuItem *
+BMenuItem*
 BMenu::ItemAt(int32 index) const
 {
-	return static_cast&lt;BMenuItem *&gt;(fItems.ItemAt(index));
+	return static_cast&lt;BMenuItem*&gt;(fItems.ItemAt(index));
 }
 
 
-BMenu *
+BMenu*
 BMenu::SubmenuAt(int32 index) const
 {
-	BMenuItem *item = static_cast&lt;BMenuItem *&gt;(fItems.ItemAt(index));
-	return (item != NULL) ? item-&gt;Submenu() : NULL;
+	BMenuItem* item = static_cast&lt;BMenuItem*&gt;(fItems.ItemAt(index));
+	return item != NULL ? item-&gt;Submenu() : NULL;
 }
 
 
 int32
-BMenu::IndexOf(BMenuItem *item) const
+BMenu::IndexOf(BMenuItem* item) const
 {
 	return fItems.IndexOf(item);
 }
 
 
 int32
-BMenu::IndexOf(BMenu *submenu) const
+BMenu::IndexOf(BMenu* submenu) const
 {
 	for (int32 i = 0; i &lt; fItems.CountItems(); i++) {
 		if (ItemAt(i)-&gt;Submenu() == submenu)
@@ -630,10 +635,10 @@
 }
 
 
-BMenuItem *
-BMenu::FindItem(const char *label) const
+BMenuItem*
+BMenu::FindItem(const char* label) const
 {
-	BMenuItem *item = NULL;
+	BMenuItem* item = NULL;
 
 	for (int32 i = 0; i &lt; CountItems(); i++) {
 		item = ItemAt(i);
@@ -652,10 +657,10 @@
 }
 
 
-BMenuItem *
+BMenuItem*
 BMenu::FindItem(uint32 command) const
 {
-	BMenuItem *item = NULL;
+	BMenuItem* item = NULL;
 
 	for (int32 i = 0; i &lt; CountItems(); i++) {
 		item = ItemAt(i);
@@ -675,7 +680,7 @@
 
 
 status_t
-BMenu::SetTargetForItems(BHandler *handler)
+BMenu::SetTargetForItems(BHandler* handler)
 {
 	status_t status = B_OK;
 	for (int32 i = 0; i &lt; fItems.CountItems(); i++) {
@@ -792,11 +797,11 @@
 }
 
 
-BMenuItem *
+BMenuItem*
 BMenu::FindMarked()
 {
 	for (int32 i = 0; i &lt; fItems.CountItems(); i++) {
-		BMenuItem *item = ItemAt(i);
+		BMenuItem* item = ItemAt(i);
 		if (item-&gt;IsMarked())
 			return item;
 	}
@@ -805,14 +810,14 @@
 }
 
 
-BMenu *
+BMenu*
 BMenu::Supermenu() const
 {
 	return fSuper;
 }
 
 
-BMenuItem *
+BMenuItem*
 BMenu::Superitem() const
 {
 	return fSuperitem;
@@ -820,7 +825,7 @@
 
 
 void
-BMenu::MessageReceived(BMessage *msg)
+BMenu::MessageReceived(BMessage* msg)
 {
 	switch (msg-&gt;what) {
 		case B_MOUSE_WHEEL_CHANGED:
@@ -830,7 +835,7 @@
 			if (deltaY == 0)
 				return;
 
-			BMenuWindow *window = dynamic_cast&lt;BMenuWindow *&gt;(Window());
+			BMenuWindow* window = dynamic_cast&lt;BMenuWindow*&gt;(Window());
 			if (window == NULL)
 				return;
 
@@ -847,7 +852,7 @@
 
 
 void
-BMenu::KeyDown(const char *bytes, int32 numBytes)
+BMenu::KeyDown(const char* bytes, int32 numBytes)
 {
 	// TODO: Test how it works on beos and implement it correctly
 	switch (bytes[0]) {
@@ -866,9 +871,9 @@
 				_SelectNextItem(fSelected, false);
 			else {
 				// this case has to be handled a bit specially.
-				BMenuItem *item = Superitem();
+				BMenuItem* item = Superitem();
 				if (item) {
-					if (dynamic_cast&lt;BMenuBar *&gt;(Supermenu())) {
+					if (dynamic_cast&lt;BMenuBar*&gt;(Supermenu())) {
 						// if we're at the top menu below the menu bar, pass the keypress to
 						// the menu bar so we can move to another top level menu
 						BMessenger msgr(Supermenu());
@@ -885,7 +890,7 @@
 			else {
 				if (fSelected &amp;&amp; fSelected-&gt;Submenu()) {
 					_SelectItem(fSelected, true, true);
-				} else if (dynamic_cast&lt;BMenuBar *&gt;(Supermenu())) {
+				} else if (dynamic_cast&lt;BMenuBar*&gt;(Supermenu())) {
 					// if we have no submenu and we're an
 					// item in the top menu below the menubar,
 					// pass the keypress to the menubar
@@ -899,7 +904,7 @@
 		case B_PAGE_UP:
 		case B_PAGE_DOWN:
 		{
-			BMenuWindow *window = dynamic_cast&lt;BMenuWindow *&gt;(Window());
+			BMenuWindow* window = dynamic_cast&lt;BMenuWindow*&gt;(Window());
 			if (window == NULL || !window-&gt;HasScrollers())
 				break;
 
@@ -988,7 +993,7 @@
 
 
 void
-BMenu::GetPreferredSize(float *_width, float *_height)
+BMenu::GetPreferredSize(float* _width, float* _height)
 {
 	_ValidatePreferredSize();
 
@@ -1052,12 +1057,12 @@
 }
 
 
-BHandler *
-BMenu::ResolveSpecifier(BMessage *msg, int32 index, BMessage *specifier,
-						int32 form, const char *property)
+BHandler*
+BMenu::ResolveSpecifier(BMessage* msg, int32 index, BMessage* specifier,
+	int32 form, const char* property)
 {
 	BPropertyInfo propInfo(sPropList);
-	BHandler *target = NULL;
+	BHandler* target = NULL;
 
 	switch (propInfo.FindMatch(msg, 0, specifier, form, property)) {
 		case B_ERROR:
@@ -1098,7 +1103,7 @@
 
 
 status_t
-BMenu::GetSupportedSuites(BMessage *data)
+BMenu::GetSupportedSuites(BMessage* data)
 {
 	if (data == NULL)
 		return B_BAD_VALUE;
@@ -1195,7 +1200,7 @@
 }
 
 
-BMenu::BMenu(BRect frame, const char *name, uint32 resizingMode, uint32 flags,
+BMenu::BMenu(BRect frame, const char* name, uint32 resizingMode, uint32 flags,
 		menu_layout layout, bool resizeToFit)
 	: BView(frame, name, resizingMode, flags),
 	fChosenItem(NULL),
@@ -1237,8 +1242,8 @@
 
 
 void
-BMenu::GetItemMargins(float *left, float *top, float *right,
-	float *bottom) const
+BMenu::GetItemMargins(float* left, float* top, float* right,
+	float* bottom) const
 {
 	if (left != NULL)
 		*left = fPad.left;
@@ -1281,8 +1286,8 @@
 }
 
 
-BMenuItem *
-BMenu::Track(bool sticky, BRect *clickToOpenRect)
+BMenuItem*
+BMenu::Track(bool sticky, BRect* clickToOpenRect)
 {
 	if (sticky &amp;&amp; LockLooper()) {
 		//RedrawAfterSticky(Bounds());
@@ -1299,7 +1304,7 @@
 	_SetStickyMode(sticky);
 
 	int action;
-	BMenuItem *menuItem = _Track(&amp;action);
+	BMenuItem* menuItem = _Track(&amp;action);
 
 	fExtraRect = NULL;
 
@@ -1351,7 +1356,7 @@
 
 
 void
-BMenu::SetTrackingHook(menu_tracking_hook func, void *state)
+BMenu::SetTrackingHook(menu_tracking_hook func, void* state)
 {
 	delete fExtraMenuData;
 	fExtraMenuData = new (nothrow) BPrivate::ExtraMenuData(func, state);
@@ -1364,13 +1369,6 @@
 void BMenu::_ReservedMenu6() {}
 
 
-BMenu &amp;
-BMenu::operator=(const BMenu &amp;)
-{
-	return *this;
-}
-
-
 void
 BMenu::_InitData(BMessage* archive)
 {
@@ -1389,7 +1387,7 @@
 	fTriggerEnabled = sMenuInfo.triggers_always_shown;
 
 	if (archive != NULL) {
-		archive-&gt;FindInt32(&quot;_layout&quot;, (int32 *)&amp;fLayout);
+		archive-&gt;FindInt32(&quot;_layout&quot;, (int32*)&amp;fLayout);
 		archive-&gt;FindBool(&quot;_rsize_to_fit&quot;, &amp;fResizeToFit);
 		bool disabled;
 		if (archive-&gt;FindBool(&quot;_disable&quot;, &amp;disabled) == B_OK)
@@ -1405,8 +1403,8 @@
 
 		BMessage msg;
 			for (int32 i = 0; archive-&gt;FindMessage(&quot;_items&quot;, i, &amp;msg) == B_OK; i++) {
-			BArchivable *object = instantiate_object(&amp;msg);
-			if (BMenuItem *item = dynamic_cast&lt;BMenuItem *&gt;(object)) {
+			BArchivable* object = instantiate_object(&amp;msg);
+			if (BMenuItem* item = dynamic_cast&lt;BMenuItem*&gt;(object)) {
 				BRect bounds;
 				if (fLayout == B_ITEMS_IN_MATRIX
 					&amp;&amp; archive-&gt;FindRect(&quot;_i_frames&quot;, i, &amp;bounds) == B_OK)
@@ -1424,7 +1422,7 @@
 {
 	// See if the supermenu has a cached menuwindow,
 	// and use that one if possible.
-	BMenuWindow *window = NULL;
+	BMenuWindow* window = NULL;
 	bool ourWindow = false;
 	if (fSuper != NULL) {
 		fSuperbounds = fSuper-&gt;ConvertToScreen(fSuper-&gt;Bounds());
@@ -1481,7 +1479,7 @@
 void
 BMenu::_Hide()
 {
-	BMenuWindow *window = dynamic_cast&lt;BMenuWindow *&gt;(Window());
+	BMenuWindow* window = dynamic_cast&lt;BMenuWindow*&gt;(Window());
 	if (window == NULL || !window-&gt;Lock())
 		return;
 
@@ -1513,11 +1511,11 @@
 	// TODO: Same as above. Actually, we could get rid of the kHysteresis
 
 
-BMenuItem *
-BMenu::_Track(int *action, long start)
+BMenuItem*
+BMenu::_Track(int* action, long start)
 {
 	// TODO: cleanup
-	BMenuItem *item = NULL;
+	BMenuItem* item = NULL;
 	BRect navAreaRectAbove, navAreaRectBelow;
 	bigtime_t selectedTime = system_time();
 	bigtime_t navigationAreaTime = 0;
@@ -1543,7 +1541,7 @@
 		if (!LockLooper())
 			break;
 
-		BMenuWindow *window = static_cast&lt;BMenuWindow *&gt;(Window());
+		BMenuWindow* window = static_cast&lt;BMenuWindow*&gt;(Window());
 		BPoint screenLocation = ConvertToScreen(location);
 		if (window-&gt;CheckForScrolling(screenLocation)) {
 			UnlockLooper();
@@ -1567,14 +1565,14 @@
 			// redraw itself
 			UnlockLooper();
 			int submenuAction = MENU_STATE_TRACKING;
-			BMenu *submenu = fSelected-&gt;Submenu();
+			BMenu* submenu = fSelected-&gt;Submenu();
 			submenu-&gt;_SetStickyMode(_IsStickyMode());
 
 			// The following call blocks until the submenu
 			// gives control back to us, either because the mouse
 			// pointer goes out of the submenu's bounds, or because
 			// the user closes the menu
-			BMenuItem *submenuItem = submenu-&gt;_Track(&amp;submenuAction);
+			BMenuItem* submenuItem = submenu-&gt;_Track(&amp;submenuAction);
 			if (submenuAction == MENU_STATE_CLOSED) {
 				item = submenuItem;
 				fState = MENU_STATE_CLOSED;
@@ -1627,7 +1625,8 @@
 			// mouseSpeed in px per ms
 			// (actually point_distance returns the square of the distance,
 			// so it's more px^2 per ms)
-			mouseSpeed = (int32)(point_distance(newLocation, location) * 1000 / (newPollTime - pollTime));
+			mouseSpeed = (int32)(point_distance(newLocation, location) * 1000
+				/ (newPollTime - pollTime));
 			pollTime = newPollTime;
 
 			if (newLocation != location || newButtons != buttons) {
@@ -1698,7 +1697,7 @@
 	if (fSelected == NULL)
 		return;
 
-	BMenu *submenu = fSelected-&gt;Submenu();
+	BMenu* submenu = fSelected-&gt;Submenu();
 
 	if (submenu != NULL) {
 		BRect menuBounds = ConvertToScreen(Bounds());
@@ -1857,7 +1856,7 @@
 
 
 bool
-BMenu::_AddItem(BMenuItem *item, int32 index)
+BMenu::_AddItem(BMenuItem* item, int32 index)
 {
 	ASSERT(item != NULL);
 	if (index &lt; 0 || index &gt; fItems.CountItems())
@@ -1885,13 +1884,13 @@
 
 
 bool
-BMenu::_RemoveItems(int32 index, int32 count, BMenuItem *item, bool deleteItems)
+BMenu::_RemoveItems(int32 index, int32 count, BMenuItem* item, bool deleteItems)
 {
 	bool success = false;
 	bool invalidateLayout = false;
 
 	bool locked = LockLooper();
-	BWindow *window = Window();
+	BWindow* window = Window();
 
 	// The plan is simple: If we're given a BMenuItem directly, we use it
 	// and ignore index and count. Otherwise, we use them instead.
@@ -2060,7 +2059,7 @@
 		frame.Set(0, 0, 0, -1);
 
 	for (; index &lt; fItems.CountItems(); index++) {
-		BMenuItem *item = ItemAt(index);
+		BMenuItem* item = ItemAt(index);
 
 		float width, height;
 		item-&gt;GetContentSize(&amp;width, &amp;height);
@@ -2121,7 +2120,7 @@
 		+ fPad.bottom));
 
 	for (int32 i = 0; i &lt; fItems.CountItems(); i++) {
-		BMenuItem *item = ItemAt(i);
+		BMenuItem* item = ItemAt(i);
 
 		float width, height;
 		item-&gt;GetContentSize(&amp;width, &amp;height);
@@ -2152,7 +2151,7 @@
 {
 	frame.Set(0, 0, 0, 0);
 	for (int32 i = 0; i &lt; CountItems(); i++) {
-		BMenuItem *item = ItemAt(i);
+		BMenuItem* item = ItemAt(i);
 		if (item != NULL) {
 			frame.left = min_c(frame.left, item-&gt;Frame().left);
 			frame.right = max_c(frame.right, item-&gt;Frame().right);
@@ -2167,8 +2166,8 @@
 BPoint
 BMenu::ScreenLocation()
 {
-	BMenu *superMenu = Supermenu();
-	BMenuItem *superItem = Superitem();
+	BMenu* superMenu = Supermenu();
+	BMenuItem* superItem = Superitem();
 
 	if (superMenu == NULL || superItem == NULL) {
 		debugger(&quot;BMenu can't determine where to draw.&quot;
@@ -2188,7 +2187,7 @@
 
 
 BRect
-BMenu::_CalcFrame(BPoint where, bool *scrollOn)
+BMenu::_CalcFrame(BPoint where, bool* scrollOn)
 {
 	// TODO: Improve me
 	BRect bounds = Bounds();
@@ -2197,15 +2196,15 @@
 	BScreen screen(Window());
 	BRect screenFrame = screen.Frame();
 
-	BMenu *superMenu = Supermenu();
-	BMenuItem *superItem = Superitem();
+	BMenu* superMenu = Supermenu();
+	BMenuItem* superItem = Superitem();
 
 	bool scroll = false;
 	// TODO: Horrible hack:
 	// When added to a BMenuField, a BPopUpMenu is the child of
 	// a _BMCMenuBar_ to &quot;fake&quot; the menu hierarchy
 	if (superMenu == NULL || superItem == NULL
-		|| dynamic_cast&lt;_BMCMenuBar_ *&gt;(superMenu) != NULL) {
+		|| dynamic_cast&lt;_BMCMenuBar_*&gt;(superMenu) != NULL) {
 		// just move the window on screen
 
 		if (frame.bottom &gt; screenFrame.bottom)
@@ -2217,7 +2216,6 @@
 			frame.OffsetBy(screenFrame.right - frame.right, 0);
 		else if (frame.left &lt; screenFrame.left)
 			frame.OffsetBy(-frame.left, 0);
-
 	} else if (superMenu-&gt;Layout() == B_ITEMS_IN_COLUMN) {
 		if (frame.right &gt; screenFrame.right)
 			frame.OffsetBy(-superItem-&gt;Frame().Width() - frame.Width() - 2, 0);
@@ -2230,7 +2228,7 @@
 	} else {
 		if (frame.bottom &gt; screenFrame.bottom) {
 			if (scrollOn != NULL &amp;&amp; superMenu != NULL
-				&amp;&amp; dynamic_cast&lt;BMenuBar *&gt;(superMenu) != NULL
+				&amp;&amp; dynamic_cast&lt;BMenuBar*&gt;(superMenu) != NULL
 				&amp;&amp; frame.top &lt; (screenFrame.bottom - 80)) {
 				scroll = true;
 			} else {
@@ -2262,7 +2260,7 @@
 {
 	int32 itemCount = fItems.CountItems();
 	for (int32 i = 0; i &lt; itemCount; i++) {
-		BMenuItem *item = ItemAt(i);
+		BMenuItem* item = ItemAt(i);
 		if (item-&gt;Frame().Intersects(updateRect))
 			item-&gt;Draw();
 	}
@@ -2270,7 +2268,7 @@
 
 
 int
-BMenu::_State(BMenuItem **item) const
+BMenu::_State(BMenuItem** item) const
 {
 	if (fState == MENU_STATE_TRACKING || fState == MENU_STATE_CLOSED)
 		return fState;
@@ -2283,7 +2281,7 @@
 
 
 void
-BMenu::_InvokeItem(BMenuItem *item, bool now)
+BMenu::_InvokeItem(BMenuItem* item, bool now)
 {
 	if (!item-&gt;IsEnabled())
 		return;
@@ -2308,8 +2306,8 @@
 	}
 
 	// Lock the root menu window before calling BMenuItem::Invoke()
-	BMenu *parent = this;
-	BMenu *rootMenu = NULL;
+	BMenu* parent = this;
+	BMenu* rootMenu = NULL;
 	do {
 		rootMenu = parent;
 		parent = rootMenu-&gt;Supermenu();
@@ -2333,12 +2331,12 @@
 
 
 bool
-BMenu::_OverSubmenu(BMenuItem *item, BPoint loc)
+BMenu::_OverSubmenu(BMenuItem* item, BPoint loc)
 {
 	if (item == NULL)
 		return false;
 
-	BMenu *subMenu = item-&gt;Submenu();
+	BMenu* subMenu = item-&gt;Submenu();
 	if (subMenu == NULL || subMenu-&gt;Window() == NULL)
 		return false;
 
@@ -2350,7 +2348,7 @@
 }
 
 
-BMenuWindow *
+BMenuWindow*
 BMenu::_MenuWindow()
 {
 #if USE_CACHED_MENUWINDOW
@@ -2375,7 +2373,7 @@
 }
 
 
-BMenuItem *
+BMenuItem*
 BMenu::_HitTestItems(BPoint where, BPoint slop) const
 {
 	// TODO: Take &quot;slop&quot; into account ?
@@ -2387,7 +2385,7 @@
 
 	int32 itemCount = CountItems();
 	for (int32 i = 0; i &lt; itemCount; i++) {
-		BMenuItem *item = ItemAt(i);
+		BMenuItem* item = ItemAt(i);
 		if (item-&gt;Frame().Contains(where))
 			return item;
 	}
@@ -2415,7 +2413,7 @@
 
 
 void
-BMenu::_ItemMarked(BMenuItem *item)
+BMenu::_ItemMarked(BMenuItem* item)
 {

[... truncated: 974 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018893.html">[Haiku-commits] r32173 - haiku/trunk/src/kits/interface
</A></li>
	<LI>Next message: <A HREF="018879.html">[Haiku-commits] r32175 - haiku/trunk/src/preferences/joysticks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18878">[ date ]</a>
              <a href="thread.html#18878">[ thread ]</a>
              <a href="subject.html#18878">[ subject ]</a>
              <a href="author.html#18878">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
