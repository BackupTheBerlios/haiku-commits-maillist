<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r32107 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r32107%20-%0A%09haiku/trunk/src/add-ons/media/plugins/ffmpeg&In-Reply-To=%3C200908040721.n747LQLC013616%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018756.html">
   <LINK REL="Next"  HREF="018763.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r32107 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg</H1>
    <B>stippi at mail.berlios.de</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r32107%20-%0A%09haiku/trunk/src/add-ons/media/plugins/ffmpeg&In-Reply-To=%3C200908040721.n747LQLC013616%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r32107 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg">stippi at mail.berlios.de
       </A><BR>
    <I>Tue Aug  4 09:21:26 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="018756.html">[Haiku-commits] r32106 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg
</A></li>
        <LI>Next message: <A HREF="018763.html">[Haiku-commits] r32107 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18759">[ date ]</a>
              <a href="thread.html#18759">[ thread ]</a>
              <a href="subject.html#18759">[ subject ]</a>
              <a href="author.html#18759">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: stippi
Date: 2009-08-04 09:21:22 +0200 (Tue, 04 Aug 2009)
New Revision: 32107
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=32107&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=32107&amp;view=rev</A>

Modified:
   haiku/trunk/src/add-ons/media/plugins/ffmpeg/AVCodecDecoder.cpp
Log:
I have no idea how that ended up there... set the decoded audio format correctly
again. Should fix playback of any file where the ffmpeg plugin was responsible
for sound. (The symptoms were a crash into the debugger because of an unspecified
audio format...)


Modified: haiku/trunk/src/add-ons/media/plugins/ffmpeg/AVCodecDecoder.cpp
===================================================================
--- haiku/trunk/src/add-ons/media/plugins/ffmpeg/AVCodecDecoder.cpp	2009-08-03 22:59:23 UTC (rev 32106)
+++ haiku/trunk/src/add-ons/media/plugins/ffmpeg/AVCodecDecoder.cpp	2009-08-04 07:21:22 UTC (rev 32107)
@@ -334,7 +334,7 @@
 		= fInputFormat.u.encoded_audio.output.frame_rate;
 	outputAudioFormat.channel_count
 		= fInputFormat.u.encoded_audio.output.channel_count;
-	outputAudioFormat.format = fInputFormat.u.encoded_audio.output.format;
+	outputAudioFormat.format = media_raw_audio_format::B_AUDIO_SHORT;
 	outputAudioFormat.buffer_size
 		= 1024 * fInputFormat.u.encoded_audio.output.channel_count;
 	inOutFormat-&gt;type = B_MEDIA_RAW_AUDIO;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="018756.html">[Haiku-commits] r32106 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg
</A></li>
	<LI>Next message: <A HREF="018763.html">[Haiku-commits] r32107 -	haiku/trunk/src/add-ons/media/plugins/ffmpeg
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18759">[ date ]</a>
              <a href="thread.html#18759">[ thread ]</a>
              <a href="subject.html#18759">[ subject ]</a>
              <a href="author.html#18759">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
