<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r32742 - haiku/trunk/src/servers/app
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r32742%20-%20haiku/trunk/src/servers/app&In-Reply-To=%3C19958936927-BeMail%40zon%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020053.html">
   <LINK REL="Next"  HREF="020045.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r32742 - haiku/trunk/src/servers/app</H1>
    <B>Axel D&#246;rfler</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r32742%20-%20haiku/trunk/src/servers/app&In-Reply-To=%3C19958936927-BeMail%40zon%3E"
       TITLE="[Haiku-commits] r32742 - haiku/trunk/src/servers/app">axeld at pinc-software.de
       </A><BR>
    <I>Thu Aug 27 14:20:39 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020053.html">[Haiku-commits] r32742 - haiku/trunk/src/servers/app
</A></li>
        <LI>Next message: <A HREF="020045.html">[Haiku-commits] r32743 - haiku/trunk/src/servers/app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20057">[ date ]</a>
              <a href="thread.html#20057">[ thread ]</a>
              <a href="subject.html#20057">[ subject ]</a>
              <a href="author.html#20057">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Stephan Assmus &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">superstippi at gmx.de</A>&gt; wrote:
&gt;<i> On 2009-08-27 at 10:50:49 [+0200], axeld at BerliOS &lt;
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at mail.berlios.de</A>&gt; 
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; Log:
</I>&gt;<i> &gt; * Changed AS_GET_SCREEN_ID_FROM_WINDOW as well as 
</I>&gt;<i> &gt; AS_SCREEN_GET_MODE to no
</I>&gt;<i> &gt;   longer hold the window lock. There is now a lock that guards 
</I>&gt;<i> &gt; screen 
</I>&gt;<i> &gt;   changes in particular. This fixes the deadlocks seen in apps 
</I>&gt;<i> &gt; using 
</I>&gt;<i> &gt;   BDirectWindow.
</I>&gt;<i> The HWInterface multilock was supposed to take care of that, but it 
</I>&gt;<i> should 
</I>&gt;<i> not hurt to guard everything client&lt;-&gt;server mode switching related. 
</I>&gt;<i> The 
</I>&gt;<i> DrawingEngine instances use the HWInterface lock at least to guard 
</I>&gt;<i> themselves for mode switches. Didn't read your patch, and I have no 
</I>&gt;<i> idea if 
</I>&gt;<i> you changed that or if it would be a pain to do so, just noting.
</I>
I thought that would mainly be for drawing accelerated vs. drawing 
directly.

In the long term, that screen lock might become what HWInterface does 
now - the switch of graphics drivers/monitors etc. requires that we 
only access the HWInterface while holding a lock.
This could be done by introducing a multiplexing HWInterface that can 
change its children as required (while holding the lock), or by always 
only giving out locked HWInterfaces on demand.
While the multiplexing HWInterface would be needed with multi monitors 
anyway, I'd guess, it will also introduce further overhead that could 
be avoided in a single head situation.

Bye,
   Axel.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020053.html">[Haiku-commits] r32742 - haiku/trunk/src/servers/app
</A></li>
	<LI>Next message: <A HREF="020045.html">[Haiku-commits] r32743 - haiku/trunk/src/servers/app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20057">[ date ]</a>
              <a href="thread.html#20057">[ thread ]</a>
              <a href="subject.html#20057">[ subject ]</a>
              <a href="author.html#20057">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
