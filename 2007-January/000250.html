<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r19840 - in haiku/trunk: headers/build/os/drivers/bus/scsi  headers/os/drivers/bus/scsi src/add-ons/kernel/drivers/disk/scsi/scsi_dsk  src/add-ons/kernel/generic/scsi_periph src/apps/midiplayer src/apps/people src/apps/showimage src/apps/soundrecorder
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%0A%20%3D%3Fiso-8859-15%3Fq%3Fr19840_-_in_haiku/trunk%3D3A_header%3F%3D%0A%20%3D%3Fiso-8859-15%3Fq%3Fs/build/os/drivers/bus/scsi__headers/os/drivers/bus/scsi_%3F%3D%0A%20%3D%3Fiso-8859-15%3Fq%3Fsrc/add-ons/kernel/drivers/disk/scsi/scsi%3D5Fdsk__src/add-%3F%3D%0A%20%3D%3Fiso-8859-15%3Fq%3Fons/kernel/generic/scsi%3D5Fperiph_src/apps/midiplayer_src/%3F%3D%0A%20%3D%3Fiso-8859-15%3Fq%3Fapps/people_src/apps/showimage_src/apps/soundrecorder%3F%3D&In-Reply-To=%3C11775920226-BeMail%40guglielmo%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000249.html">
   <LINK REL="Next"  HREF="000251.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r19840 - in haiku/trunk: headers/build/os/drivers/bus/scsi  headers/os/drivers/bus/scsi src/add-ons/kernel/drivers/disk/scsi/scsi_dsk  src/add-ons/kernel/generic/scsi_periph src/apps/midiplayer src/apps/people src/apps/showimage src/apps/soundrecorder</H1>
    <B>Bruno G. Albuquerque</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%0A%20%3D%3Fiso-8859-15%3Fq%3Fr19840_-_in_haiku/trunk%3D3A_header%3F%3D%0A%20%3D%3Fiso-8859-15%3Fq%3Fs/build/os/drivers/bus/scsi__headers/os/drivers/bus/scsi_%3F%3D%0A%20%3D%3Fiso-8859-15%3Fq%3Fsrc/add-ons/kernel/drivers/disk/scsi/scsi%3D5Fdsk__src/add-%3F%3D%0A%20%3D%3Fiso-8859-15%3Fq%3Fons/kernel/generic/scsi%3D5Fperiph_src/apps/midiplayer_src/%3F%3D%0A%20%3D%3Fiso-8859-15%3Fq%3Fapps/people_src/apps/showimage_src/apps/soundrecorder%3F%3D&In-Reply-To=%3C11775920226-BeMail%40guglielmo%3E"
       TITLE="[Haiku-commits] r19840 - in haiku/trunk: headers/build/os/drivers/bus/scsi  headers/os/drivers/bus/scsi src/add-ons/kernel/drivers/disk/scsi/scsi_dsk  src/add-ons/kernel/generic/scsi_periph src/apps/midiplayer src/apps/people src/apps/showimage src/apps/soundrecorder">bga at bug-br.org.br
       </A><BR>
    <I>Wed Jan 17 02:46:13 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000249.html">[Haiku-commits] r19840 - in haiku/trunk:	headers/build/os/drivers/bus/scsi headers/os/drivers/bus/scsi	src/add-ons/kernel/drivers/disk/scsi/scsi_dsk	src/add-ons/kernel/generic/scsi_periph src/apps/midiplayer	src/apps/people src/apps/showimage src/apps/soundrecorder
</A></li>
        <LI>Next message: <A HREF="000251.html">[Haiku-commits] r19840 - in haiku/trunk: headers/build/os/drivers/bus/scsi headers/os/drivers/bus/scsi src/add-ons/kernel/drivers/disk/scsi/scsi_dsk src/add-ons/kernel/generic/scsi_periph src/apps/midiplayer src/apps/people src/apps/showimage src/apps/soundrecorder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#250">[ date ]</a>
              <a href="thread.html#250">[ thread ]</a>
              <a href="subject.html#250">[ subject ]</a>
              <a href="author.html#250">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ops. It included some other stuff I was working on by mistake. But 
should be harmless anyway. Let me know if you find it cause havoc for 
you. :P

Anyway, it would be great if Axel and Marcus could review the code. For 
everyone else, let me know if you have any kind of problems after this 
chage.

And, while we are at it, why the hell do we have 2 scsi_periph.h files? 
Just to be on the safe side, I changed both.

-Bruno

On Wed, 17 Jan 2007 02:40:02 +0100, bga at BerliOS said:

&gt;<i> Author: bga
</I>&gt;<i> Date: 2007-01-17 02:39:59 +0100 (Wed, 17 Jan 2007)
</I>&gt;<i> New Revision: 19840
</I>&gt;<i> ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=19840&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=19840&amp;view=rev</A>
</I>&gt;<i> 
</I>&gt;<i> Added:
</I>&gt;<i>    haiku/trunk/src/add-ons/kernel/generic/scsi_periph/sync.c
</I>&gt;<i> Modified:
</I>&gt;<i>    haiku/trunk/headers/build/os/drivers/bus/scsi/scsi_periph.h
</I>&gt;<i>    haiku/trunk/headers/os/drivers/bus/scsi/scsi_cmds.h
</I>&gt;<i>    haiku/trunk/headers/os/drivers/bus/scsi/scsi_periph.h
</I>&gt;<i>    haiku/trunk/src/add-ons/kernel/drivers/disk/scsi/scsi_dsk/
</I>&gt;<i> scsi_dsk.c
</I>&gt;<i>    haiku/trunk/src/add-ons/kernel/generic/scsi_periph/Jamfile
</I>&gt;<i>    haiku/trunk/src/add-ons/kernel/generic/scsi_periph/scsi_periph.c
</I>&gt;<i>    haiku/trunk/src/add-ons/kernel/generic/scsi_periph/
</I>&gt;<i> scsi_periph_int.h
</I>&gt;<i>    haiku/trunk/src/apps/midiplayer/MidiPlayer.rdef
</I>&gt;<i>    haiku/trunk/src/apps/people/People.rdef
</I>&gt;<i>    haiku/trunk/src/apps/showimage/ShowImage.rdef
</I>&gt;<i>    haiku/trunk/src/apps/soundrecorder/SoundRecorder.rdef
</I>&gt;<i> Log:
</I>&gt;<i> Implemented support for hardware cache flush. This is based on code I 
</I>&gt;<i> originally 
</I>&gt;<i> did for yellowTAB GmbH when I worked for then and is being used under 
</I>&gt;<i> permission.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Modified: haiku/trunk/headers/build/os/drivers/bus/scsi/scsi_periph.h
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/headers/build/os/drivers/bus/scsi/scsi_periph.h	2007-
</I>&gt;<i> 01-17 01:11:19 UTC (rev 19839)
</I>&gt;<i> +++ haiku/trunk/headers/build/os/drivers/bus/scsi/scsi_periph.h	2007-
</I>&gt;<i> 01-17 01:39:59 UTC (rev 19840)
</I>&gt;<i> @@ -154,7 +154,9 @@
</I>&gt;<i>  		
</I>&gt;<i>  	// fill data with icon (for B_GET_ICON ioctl)
</I>&gt;<i>  	status_t (*get_icon)( icon_type type, device_icon *data );
</I>&gt;<i> -	
</I>&gt;<i> +
</I>&gt;<i> +	// synchronizes (flush) the device cache
</I>&gt;<i> +	err_res(*synchronize_cache)(scsi_periph_device device, scsi_ccb *
</I>&gt;<i> request);	
</I>&gt;<i>  } scsi_periph_interface;
</I>&gt;<i>  
</I>&gt;<i>  #define SCSI_PERIPH_MODULE_NAME &quot;generic/scsi_periph/v1&quot;
</I>&gt;<i> 
</I>&gt;<i> Modified: haiku/trunk/headers/os/drivers/bus/scsi/scsi_cmds.h
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/headers/os/drivers/bus/scsi/scsi_cmds.h	2007-01-17 
</I>&gt;<i> 01:11:19 UTC (rev 19839)
</I>&gt;<i> +++ haiku/trunk/headers/os/drivers/bus/scsi/scsi_cmds.h	2007-01-17 
</I>&gt;<i> 01:39:59 UTC (rev 19840)
</I>&gt;<i> @@ -1023,4 +1023,21 @@
</I>&gt;<i>  												// and 
</I>&gt;<i> Mechanism status page
</I>&gt;<i>  } scsi_read_cd_sub_channel_selection;
</I>&gt;<i>  
</I>&gt;<i> +// SYNCHRONIZE CACHE (10)
</I>&gt;<i> +
</I>&gt;<i> +typedef struct scsi_cmd_sync_cache {
</I>&gt;<i> +	uint8 opcode;
</I>&gt;<i> +	LBITFIELD8_4(
</I>&gt;<i> +		RelAddr : 1,
</I>&gt;<i> +		immed : 1,		// 1 - return immediately, 0 - return on 
</I>&gt;<i> completion
</I>&gt;<i> +		res1_1 : 3,
</I>&gt;<i> +		LUN : 3
</I>&gt;<i> +	);
</I>&gt;<i> +	scsi_cd_lba lba;
</I>&gt;<i> +	uint8 res2;	
</I>&gt;<i> +	uint8 nblocks_high;
</I>&gt;<i> +	uint8 nblocks_low;
</I>&gt;<i> +	uint8 control;
</I>&gt;<i> +} scsi_cmd_sync_cache;
</I>&gt;<i> +
</I>&gt;<i>  #endif
</I>&gt;<i> 
</I>&gt;<i> Modified: haiku/trunk/headers/os/drivers/bus/scsi/scsi_periph.h
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/headers/os/drivers/bus/scsi/scsi_periph.h	2007-01-17 
</I>&gt;<i> 01:11:19 UTC (rev 19839)
</I>&gt;<i> +++ haiku/trunk/headers/os/drivers/bus/scsi/scsi_periph.h	2007-01-17 
</I>&gt;<i> 01:39:59 UTC (rev 19840)
</I>&gt;<i> @@ -154,7 +154,9 @@
</I>&gt;<i>  		
</I>&gt;<i>  	// fill data with icon (for B_GET_ICON ioctl)
</I>&gt;<i>  	status_t (*get_icon)( icon_type type, device_icon *data );
</I>&gt;<i> -	
</I>&gt;<i> +
</I>&gt;<i> +	// synchronizes (flush) the device cache
</I>&gt;<i> +	err_res(*synchronize_cache)(scsi_periph_device device, scsi_ccb *
</I>&gt;<i> request);		
</I>&gt;<i>  } scsi_periph_interface;
</I>&gt;<i>  
</I>&gt;<i>  #define SCSI_PERIPH_MODULE_NAME &quot;generic/scsi_periph/v1&quot;
</I>&gt;<i> 
</I>&gt;<i> Modified: haiku/trunk/src/add-ons/kernel/drivers/disk/scsi/scsi_dsk/
</I>&gt;<i> scsi_dsk.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/src/add-ons/kernel/drivers/disk/scsi/scsi_dsk/
</I>&gt;<i> scsi_dsk.c	2007-01-17 01:11:19 UTC (rev 19839)
</I>&gt;<i> +++ haiku/trunk/src/add-ons/kernel/drivers/disk/scsi/scsi_dsk/
</I>&gt;<i> scsi_dsk.c	2007-01-17 01:39:59 UTC (rev 19840)
</I>&gt;<i> @@ -130,6 +130,23 @@
</I>&gt;<i>  }
</I>&gt;<i>  
</I>&gt;<i>  
</I>&gt;<i> +static status_t
</I>&gt;<i> +synchronize_cache(das_device_info *device)
</I>&gt;<i> +{
</I>&gt;<i> +	scsi_ccb *ccb;
</I>&gt;<i> +	err_res res;
</I>&gt;<i> +	
</I>&gt;<i> +	SHOW_FLOW0( 0, &quot;&quot; );
</I>&gt;<i> +		
</I>&gt;<i> +	ccb = device-&gt;scsi-&gt;alloc_ccb(device-&gt;scsi_device);
</I>&gt;<i> +
</I>&gt;<i> +	res = scsi_periph-&gt;synchronize_cache(device-&gt;scsi_periph_device, 
</I>&gt;<i> ccb);
</I>&gt;<i> +		
</I>&gt;<i> +	device-&gt;scsi-&gt;free_ccb(ccb);
</I>&gt;<i> +	
</I>&gt;<i> +	return res.error_code;
</I>&gt;<i> +}
</I>&gt;<i> +
</I>&gt;<i>  static int
</I>&gt;<i>  log2(uint32 x)
</I>&gt;<i>  {
</I>&gt;<i> @@ -214,6 +231,10 @@
</I>&gt;<i>  			res = load_eject(device, true);
</I>&gt;<i>  			break;
</I>&gt;<i>  
</I>&gt;<i> +	case B_FLUSH_DRIVE_CACHE:
</I>&gt;<i> +		res = synchronize_cache(device);
</I>&gt;<i> +		break;
</I>&gt;<i> +
</I>&gt;<i>  		default:
</I>&gt;<i>  			res = scsi_periph-&gt;ioctl(handle-&gt;scsi_periph_handle, op, 
</I>&gt;<i> buf, len);
</I>&gt;<i>  	}
</I>&gt;<i> 
</I>&gt;<i> Modified: haiku/trunk/src/add-ons/kernel/generic/scsi_periph/Jamfile
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/src/add-ons/kernel/generic/scsi_periph/Jamfile	2007-
</I>&gt;<i> 01-17 01:11:19 UTC (rev 19839)
</I>&gt;<i> +++ haiku/trunk/src/add-ons/kernel/generic/scsi_periph/Jamfile	2007-
</I>&gt;<i> 01-17 01:39:59 UTC (rev 19840)
</I>&gt;<i> @@ -16,4 +16,5 @@
</I>&gt;<i>  	io.c
</I>&gt;<i>  	removable.c
</I>&gt;<i>  	scsi_periph.c
</I>&gt;<i> +	sync.c
</I>&gt;<i>  	;
</I>&gt;<i> 
</I>&gt;<i> Modified: haiku/trunk/src/add-ons/kernel/generic/scsi_periph/
</I>&gt;<i> scsi_periph.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/src/add-ons/kernel/generic/scsi_periph/scsi_periph.c	
</I>&gt;<i> 2007-01-17 01:11:19 UTC (rev 19839)
</I>&gt;<i> +++ haiku/trunk/src/add-ons/kernel/generic/scsi_periph/scsi_periph.c	
</I>&gt;<i> 2007-01-17 01:39:59 UTC (rev 19840)
</I>&gt;<i> @@ -161,7 +161,9 @@
</I>&gt;<i>  	periph_get_media_status,
</I>&gt;<i>  	
</I>&gt;<i>  	periph_compose_device_name,
</I>&gt;<i> -	periph_get_icon
</I>&gt;<i> +	periph_get_icon,
</I>&gt;<i> +	
</I>&gt;<i> +	periph_synchronize_cache
</I>&gt;<i>  };
</I>&gt;<i>  
</I>&gt;<i>  scsi_periph_interface *modules[] = {
</I>&gt;<i> 
</I>&gt;<i> Modified: haiku/trunk/src/add-ons/kernel/generic/scsi_periph/
</I>&gt;<i> scsi_periph_int.h
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/src/add-ons/kernel/generic/scsi_periph/
</I>&gt;<i> scsi_periph_int.h	2007-01-17 01:11:19 UTC (rev 19839)
</I>&gt;<i> +++ haiku/trunk/src/add-ons/kernel/generic/scsi_periph/
</I>&gt;<i> scsi_periph_int.h	2007-01-17 01:39:59 UTC (rev 19840)
</I>&gt;<i> @@ -109,4 +109,9 @@
</I>&gt;<i>  
</I>&gt;<i>  status_t periph_get_icon(icon_type type, device_icon *data);
</I>&gt;<i>  	
</I>&gt;<i> +// sync.c
</I>&gt;<i> +
</I>&gt;<i> +err_res periph_synchronize_cache(scsi_periph_device_info *device,
</I>&gt;<i> +	scsi_ccb *request);
</I>&gt;<i> +
</I>&gt;<i>  #endif	/* __SCSI_PERIPH_INT_H__ */
</I>&gt;<i> 
</I>&gt;<i> Added: haiku/trunk/src/add-ons/kernel/generic/scsi_periph/sync.c
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/src/add-ons/kernel/generic/scsi_periph/sync.c	2007-
</I>&gt;<i> 01-17 01:11:19 UTC (rev 19839)
</I>&gt;<i> +++ haiku/trunk/src/add-ons/kernel/generic/scsi_periph/sync.c	2007-
</I>&gt;<i> 01-17 01:39:59 UTC (rev 19840)
</I>&gt;<i> @@ -0,0 +1,47 @@
</I>&gt;<i> +/*
</I>&gt;<i> + * Copyright 2007, Haiku, Inc. All Rights Reserved.
</I>&gt;<i> + * Distributed under the terms of the MIT License.
</I>&gt;<i> + *
</I>&gt;<i> + * Authors:
</I>&gt;<i> + *              Bruno Albuquerque, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bga at bug-br.org.br</A>
</I>&gt;<i> + *
</I>&gt;<i> + * Copyright 2004-2006 yellowTAB GMbH. This file is
</I>&gt;<i> + * based on work I did for ZETA while employed by
</I>&gt;<i> + * yellowTAB and is used under permission.
</I>&gt;<i> + *  
</I>&gt;<i> + */    
</I>&gt;<i> +
</I>&gt;<i> +#include &quot;scsi_periph_int.h&quot;
</I>&gt;<i> +
</I>&gt;<i> +#include &lt;bus/scsi/scsi_cmds.h&gt;
</I>&gt;<i> +
</I>&gt;<i> +#include &lt;string.h&gt;
</I>&gt;<i> +
</I>&gt;<i> +err_res
</I>&gt;<i> +periph_synchronize_cache(scsi_periph_device_info *device, scsi_ccb *
</I>&gt;<i> request)
</I>&gt;<i> +{
</I>&gt;<i> +	scsi_cmd_sync_cache* cmd = (scsi_cmd_sync_cache*)request-&gt;cdb;
</I>&gt;<i> +	
</I>&gt;<i> +	request-&gt;flags = SCSI_DIR_NONE;
</I>&gt;<i> +	
</I>&gt;<i> +	request-&gt;data = NULL;
</I>&gt;<i> +	request-&gt;sg_list = NULL;
</I>&gt;<i> +	request-&gt;data_len = 0;
</I>&gt;<i> +	request-&gt;timeout = device-&gt;std_timeout;
</I>&gt;<i> +	request-&gt;sort = -1;
</I>&gt;<i> +	
</I>&gt;<i> +	memset(cmd, 0, sizeof(*cmd));
</I>&gt;<i> +	
</I>&gt;<i> +	cmd-&gt;opcode	= SCSI_OP_SYNCHRONIZE_CACHE;
</I>&gt;<i> +	cmd-&gt;immed = 0;
</I>&gt;<i> +	
</I>&gt;<i> +	// TODO(bga): Maybe we will actually want to set those one day...
</I>&gt;<i> +	cmd-&gt;nblocks_high = 0;
</I>&gt;<i> +	cmd-&gt;nblocks_low = 0;
</I>&gt;<i> +	
</I>&gt;<i> +	request-&gt;cdb_len = sizeof(*cmd);
</I>&gt;<i> +	
</I>&gt;<i> +	device-&gt;scsi-&gt;sync_io(request);
</I>&gt;<i> +
</I>&gt;<i> +	return periph_check_error(device, request);
</I>&gt;<i> +}
</I>&gt;<i> 
</I>&gt;<i> Modified: haiku/trunk/src/apps/midiplayer/MidiPlayer.rdef
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/src/apps/midiplayer/MidiPlayer.rdef	2007-01-17 
</I>&gt;<i> 01:11:19 UTC (rev 19839)
</I>&gt;<i> +++ haiku/trunk/src/apps/midiplayer/MidiPlayer.rdef	2007-01-17 
</I>&gt;<i> 01:39:59 UTC (rev 19840)
</I>&gt;<i> @@ -11,12 +11,12 @@
</I>&gt;<i>  	long_info  = &quot;MidiPlayer &#169;2004-2007 Haiku, Inc.&quot;
</I>&gt;<i>  };
</I>&gt;<i>  
</I>&gt;<i> +resource app_flags B_SINGLE_LAUNCH;
</I>&gt;<i> +
</I>&gt;<i>  resource file_types message {
</I>&gt;<i>  	&quot;types&quot; = &quot;audio/x-midi&quot;
</I>&gt;<i>  };
</I>&gt;<i>  
</I>&gt;<i> -resource app_flags B_SINGLE_LAUNCH;
</I>&gt;<i> -
</I>&gt;<i>  resource large_icon array {
</I>&gt;<i>  	$&quot;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF&quot;
</I>&gt;<i>  	$&quot;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF&quot;
</I>&gt;<i> 
</I>&gt;<i> Modified: haiku/trunk/src/apps/people/People.rdef
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/src/apps/people/People.rdef	2007-01-17 01:11:19 UTC 
</I>&gt;<i> (rev 19839)
</I>&gt;<i> +++ haiku/trunk/src/apps/people/People.rdef	2007-01-17 01:39:59 UTC 
</I>&gt;<i> (rev 19840)
</I>&gt;<i> @@ -1,10 +1,6 @@
</I>&gt;<i>  
</I>&gt;<i>  resource(1, &quot;BEOS:APP_SIG&quot;) #'MIMS' &quot;application/x-vnd.Be-PEPL&quot;;
</I>&gt;<i>  
</I>&gt;<i> -resource(1, &quot;BEOS:FILE_TYPES&quot;) message {
</I>&gt;<i> -	&quot;types&quot; = &quot;application/x-person&quot;
</I>&gt;<i> -};
</I>&gt;<i> -
</I>&gt;<i>  resource app_version {
</I>&gt;<i>  	major  = 1,
</I>&gt;<i>  	middle = 0,
</I>&gt;<i> @@ -19,6 +15,10 @@
</I>&gt;<i>  
</I>&gt;<i>  resource app_flags B_SINGLE_LAUNCH;
</I>&gt;<i>  
</I>&gt;<i> +resource(1, &quot;BEOS:FILE_TYPES&quot;) message {
</I>&gt;<i> +	&quot;types&quot; = &quot;application/x-person&quot;
</I>&gt;<i> +};
</I>&gt;<i> +
</I>&gt;<i>  #ifdef HAIKU_TARGET_PLATFORM_HAIKU
</I>&gt;<i>  
</I>&gt;<i>  resource vector_icon {
</I>&gt;<i> 
</I>&gt;<i> Modified: haiku/trunk/src/apps/showimage/ShowImage.rdef
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/src/apps/showimage/ShowImage.rdef	2007-01-17 01:11:19 
</I>&gt;<i> UTC (rev 19839)
</I>&gt;<i> +++ haiku/trunk/src/apps/showimage/ShowImage.rdef	2007-01-17 01:39:59 
</I>&gt;<i> UTC (rev 19840)
</I>&gt;<i> @@ -4,10 +4,6 @@
</I>&gt;<i>  
</I>&gt;<i>  resource app_signature &quot;application/x-vnd.Haiku-ShowImage&quot;;
</I>&gt;<i>  
</I>&gt;<i> -resource file_types message {
</I>&gt;<i> -	&quot;types&quot; = &quot;image&quot;
</I>&gt;<i> -};
</I>&gt;<i> -
</I>&gt;<i>  resource app_version {
</I>&gt;<i>  	major  = 0, 
</I>&gt;<i>  	middle = 0,
</I>&gt;<i> @@ -22,6 +18,10 @@
</I>&gt;<i>  
</I>&gt;<i>  resource app_flags B_SINGLE_LAUNCH;
</I>&gt;<i>  
</I>&gt;<i> +resource file_types message {
</I>&gt;<i> +	&quot;types&quot; = &quot;image&quot;
</I>&gt;<i> +};
</I>&gt;<i> +
</I>&gt;<i>  #ifdef HAIKU_TARGET_PLATFORM_HAIKU
</I>&gt;<i>  
</I>&gt;<i>  resource vector_icon {
</I>&gt;<i> 
</I>&gt;<i> Modified: haiku/trunk/src/apps/soundrecorder/SoundRecorder.rdef
</I>&gt;<i> ===================================================================
</I>&gt;<i> --- haiku/trunk/src/apps/soundrecorder/SoundRecorder.rdef	2007-01-17 
</I>&gt;<i> 01:11:19 UTC (rev 19839)
</I>&gt;<i> +++ haiku/trunk/src/apps/soundrecorder/SoundRecorder.rdef	2007-01-17 
</I>&gt;<i> 01:39:59 UTC (rev 19840)
</I>&gt;<i> @@ -11,6 +11,8 @@
</I>&gt;<i>  	long_info  = &quot;SoundRecorder &#169;2005-2007 Haiku, Inc.&quot;
</I>&gt;<i>  };
</I>&gt;<i>  
</I>&gt;<i> +resource app_flags B_SINGLE_LAUNCH;
</I>&gt;<i> +
</I>&gt;<i>  resource file_types message {
</I>&gt;<i>  	&quot;types&quot; = &quot;audio/basic&quot;,
</I>&gt;<i>  	&quot;types&quot; = &quot;audio/x-wav&quot;,
</I>&gt;<i> @@ -22,8 +24,6 @@
</I>&gt;<i>  	&quot;types&quot; = &quot;audio/riff&quot;
</I>&gt;<i>  };
</I>&gt;<i>  
</I>&gt;<i> -resource app_flags B_SINGLE_LAUNCH;
</I>&gt;<i> -
</I>&gt;<i>  #ifdef HAIKU_TARGET_PLATFORM_HAIKU
</I>&gt;<i>  
</I>&gt;<i>  resource vector_icon {
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Haiku-commits mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">Haiku-commits at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">https://lists.berlios.de/mailman/listinfo/haiku-commits</A>
</I>

--
Fortune Cookie Says:

Skinner's Constant (or Flannagan's Finagling Factor):
	That quantity which, when multiplied by, divided by, added to,
or subtracted from the answer you get, gives you the answer you should
have gotten.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000249.html">[Haiku-commits] r19840 - in haiku/trunk:	headers/build/os/drivers/bus/scsi headers/os/drivers/bus/scsi	src/add-ons/kernel/drivers/disk/scsi/scsi_dsk	src/add-ons/kernel/generic/scsi_periph src/apps/midiplayer	src/apps/people src/apps/showimage src/apps/soundrecorder
</A></li>
	<LI>Next message: <A HREF="000251.html">[Haiku-commits] r19840 - in haiku/trunk: headers/build/os/drivers/bus/scsi headers/os/drivers/bus/scsi src/add-ons/kernel/drivers/disk/scsi/scsi_dsk src/add-ons/kernel/generic/scsi_periph src/apps/midiplayer src/apps/people src/apps/showimage src/apps/soundrecorder
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#250">[ date ]</a>
              <a href="thread.html#250">[ thread ]</a>
              <a href="subject.html#250">[ subject ]</a>
              <a href="author.html#250">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
