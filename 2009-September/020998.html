<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r33343 - in haiku/trunk/src/add-ons/media/plugins/theora: . libtheora libtheora/theora libtheora/x86
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33343%20-%20in%0A%20haiku/trunk/src/add-ons/media/plugins/theora%3A%20.%20libtheora%20libtheora/theora%0A%20libtheora/x86&In-Reply-To=%3C20090929154627.6384.8%40bepc.1254209430.fake%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020994.html">
   <LINK REL="Next"  HREF="021002.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r33343 - in haiku/trunk/src/add-ons/media/plugins/theora: . libtheora libtheora/theora libtheora/x86</H1>
    <B>Stephan Assmus</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33343%20-%20in%0A%20haiku/trunk/src/add-ons/media/plugins/theora%3A%20.%20libtheora%20libtheora/theora%0A%20libtheora/x86&In-Reply-To=%3C20090929154627.6384.8%40bepc.1254209430.fake%3E"
       TITLE="[Haiku-commits] r33343 - in haiku/trunk/src/add-ons/media/plugins/theora: . libtheora libtheora/theora libtheora/x86">superstippi at gmx.de
       </A><BR>
    <I>Tue Sep 29 15:46:27 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020994.html">[Haiku-commits] r33343 - in haiku/trunk/src/add-ons/media/plugins/theora: . libtheora libtheora/theora libtheora/x86
</A></li>
        <LI>Next message: <A HREF="021002.html">[Haiku-commits] r33343 - in	haiku/trunk/src/add-ons/media/plugins/theora: . libtheora	libtheora/theora libtheora/x86
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20998">[ date ]</a>
              <a href="thread.html#20998">[ thread ]</a>
              <a href="subject.html#20998">[ subject ]</a>
              <a href="author.html#20998">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi David,

On 2009-09-29 at 11:55:02 [+0200], David McPaul &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">dlmcpaul at gmail.com</A>&gt; wrote:
&gt;<i> 2009/9/29 Stephan Assmus &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">superstippi at gmx.de</A>&gt;:
</I>&gt;<i> &gt; On 2009-09-29 at 09:51:52 [+0200], David McPaul &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">dlmcpaul at gmail.com</A>&gt; 
</I>&gt;<i> &gt; wrote:
</I>&gt;<i> &gt;&gt; 2009/9/29 Stephan Assmus &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">superstippi at gmx.de</A>&gt;:
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; On 2009-09-29 at 02:43:15 [+0200], David McPaul &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">dlmcpaul at gmail.com</A>&gt; 
</I>&gt;<i> &gt;&gt; &gt; wrote:
</I>&gt;<i> &gt;&gt; &gt;&gt; How familiar are you with the OGG reader plugin source?
</I>&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt;&gt; I started looking at Ticket 4653.  From my initial analysis it 
</I>&gt;<i> &gt;&gt; &gt;&gt; needs a TheoraSeek class written although it has a TheoraStream 
</I>&gt;<i> &gt;&gt; &gt;&gt; class it does not handle video from what I can see.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; The FFmpeg plug-in is far from working perfectly, yet, but would it 
</I>&gt;<i> &gt;&gt; &gt; be worth a consideration to re-use the FFmpeg internal Theora 
</I>&gt;<i> &gt;&gt; &gt; wrappers? I know it would make a whole lot of code obsolete. In the 
</I>&gt;<i> &gt;&gt; &gt; mid-term, I would like to see very good Xiph support in Haiku, as 
</I>&gt;<i> &gt;&gt; &gt; the officially endorsed video/audio standards, because they aim to 
</I>&gt;<i> &gt;&gt; &gt; be patent-free. I am just not sure what the best option is for that.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I am rather against using ffmpeg for all our AV needs.  We have no 
</I>&gt;<i> &gt;&gt; choice for codecs, especially for encoding but readers are simple 
</I>&gt;<i> &gt;&gt; enough and if we have manageable code for them I would rather we kept 
</I>&gt;<i> &gt;&gt; it.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I don't understand what you mean. My concern is with manageable code as 
</I>&gt;<i> &gt; well. Compared to the code that wraps around the Xiph codecs in our 
</I>&gt;<i> &gt; repository, our FFmpeg wrapper is very little code. I consider that 
</I>&gt;<i> &gt; more manageable. So I was looking for other compelling arguments.
</I>&gt;<i> 
</I>&gt;<i> We could just drop the whole plugin concept and use ffmpeg for 
</I>&gt;<i> everything.  There is no plugin we have that ffmpeg has not got covered.
</I>&gt;<i> 
</I>&gt;<i> Where do we draw the line?
</I>
To be honest, I see this more practical. IMHO, the plugin concept is nice, 
we should definitely keep that. But that doesn't mean we can't drop most of 
the plugins if there is a more maintainable way to support all those 
formats and codecs. To give a concrete example, I am having problems with 
some .wmv files I tested with, and by switching to the ASF demuxer in 
FFmpeg, all the problems go away. Can you give me a good reason why I 
should dig into the ASF demuxer code to find the problems when I have a 
much simpler solution right in front of me? Haiku is not about maintaining 
two code-bases for the very same purpose. I just don't see the point of it 
and until now, I have not heard a good argument pro maintaining our own 
codec and demuxer implementations, especially when all but two maintainers 
have pretty much no time for Haiku anymore.

&gt;<i> &gt;&gt; I think all that is missing from the ogg reader is some support for 
</I>&gt;<i> &gt;&gt; passing theora data to the theora codec.  I think the work was just 
</I>&gt;<i> &gt;&gt; unfinished as there seems to be some level of support for it.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Ok. If I understand correctly, the Vorbis plug-in is actually mixed up 
</I>&gt;<i> &gt; with the Ogg plug-in. I don't know if the Theora plug-in would be the 
</I>&gt;<i> &gt; same. In any case, it sounds a bit as if all this should be one 
</I>&gt;<i> &gt; plug-in, if the codecs depend on Ogg anyway. I would combine all this 
</I>&gt;<i> &gt; and call the plug-in &quot;xiph&quot;. My second concern is why the Ogg plug-in 
</I>&gt;<i> &gt; has all the code it has, I don't understand that as of yet. It looks a 
</I>&gt;<i> &gt; bit like it replicates a whole lot of functionality which should 
</I>&gt;<i> &gt; already be in libogg, but I may be missing something.
</I>&gt;<i> 
</I>&gt;<i> Ogg is the container format that can contain various codecs. theora, 
</I>&gt;<i> vorbis are codecs that can be put in containers
</I>&gt;<i> 
</I>&gt;<i> Just like mp4 containers can have many different codecs in them an ogg 
</I>&gt;<i> container can also.
</I>&gt;<i> 
</I>&gt;<i> It just so happens that no-one has bothered but if the codecs do get used 
</I>&gt;<i> more then we might see them in mp4.
</I>&gt;<i> 
</I>&gt;<i> So our ogg reader detects ogg files and splits out the codecs as tracks. 
</I>&gt;<i> The vorbis and theora plugins should not care if they were in an ogg 
</I>&gt;<i> container or not, they just decode chunks of data as fed to them.
</I>
Please don't take this the wrong way, but all that was obvious to me. What 
I am wondering is why there is libogg as well as -- as it seems -- our own 
code replicating it. I saw places in the code that had a comment &quot;copied 
from this and that in libogg&quot;. But I may be missing something.

&gt;<i> I think that theora and vorbis plugins are just wrappers over the libs
</I>
Yes.

&gt;<i> The Ogg reader code seems more complex but I don't know anything about 
</I>&gt;<i> the ogg container format to decide.
</I>&gt;<i> The original author looks to have created a track subclass for each type 
</I>&gt;<i> of stream available in the container.
</I>&gt;<i> 
</I>&gt;<i> So to fix the issue raised we just need to create a new subclass for the 
</I>&gt;<i> missing codec.
</I>
So you are saying we are better off when you (or someone else) spends his 
valuable time to try to dig into the OggReader source code to add the 
missing features, as well as fixing any issues that may pop up, when all we 
have to do is configure FFmpeg with Ogg support and be done with it? 
Especially when that would also take care of encoding for free?

It may seem like I have made up my own opinion on this subject, but I am 
actually trying to hear good arguments pro keeping the code we have. After 
all, it was hard work to create it. That a lot of the maintainers don't 
have time to keep working on their code is one thing. But if there are no 
other compelling arguments, like for example the Haiku code is 
multi-threaded, while FFmpeg is not... (which is not the case), or other 
technical reasons, I just don't see the point.

Best regards,
-Stephan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020994.html">[Haiku-commits] r33343 - in haiku/trunk/src/add-ons/media/plugins/theora: . libtheora libtheora/theora libtheora/x86
</A></li>
	<LI>Next message: <A HREF="021002.html">[Haiku-commits] r33343 - in	haiku/trunk/src/add-ons/media/plugins/theora: . libtheora	libtheora/theora libtheora/x86
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20998">[ date ]</a>
              <a href="thread.html#20998">[ thread ]</a>
              <a href="subject.html#20998">[ subject ]</a>
              <a href="author.html#20998">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
