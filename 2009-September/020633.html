<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r33138 - in haiku/vendor/acpica/current: common	compiler debugger disassembler dispatcher events executer	hardware include include/platform namespace parser resources	tables utilities
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33138%20-%20in%20haiku/vendor/acpica/current%3A%20common%0A%09compiler%20debugger%20disassembler%20dispatcher%20events%20executer%0A%09hardware%20include%20include/platform%20namespace%20parser%20resources%0A%09tables%20utilities&In-Reply-To=%3C200909142110.n8ELADv3017197%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020632.html">
   <LINK REL="Next"  HREF="020634.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r33138 - in haiku/vendor/acpica/current: common	compiler debugger disassembler dispatcher events executer	hardware include include/platform namespace parser resources	tables utilities</H1>
    <B>korli at mail.berlios.de</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33138%20-%20in%20haiku/vendor/acpica/current%3A%20common%0A%09compiler%20debugger%20disassembler%20dispatcher%20events%20executer%0A%09hardware%20include%20include/platform%20namespace%20parser%20resources%0A%09tables%20utilities&In-Reply-To=%3C200909142110.n8ELADv3017197%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r33138 - in haiku/vendor/acpica/current: common	compiler debugger disassembler dispatcher events executer	hardware include include/platform namespace parser resources	tables utilities">korli at mail.berlios.de
       </A><BR>
    <I>Mon Sep 14 23:10:13 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020632.html">[Haiku-commits] r33137 -	haiku/trunk/src/add-ons/kernel/drivers/midi/usb_midi
</A></li>
        <LI>Next message: <A HREF="020634.html">[Haiku-commits] r33139 - haiku/vendor/acpica
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20633">[ date ]</a>
              <a href="thread.html#20633">[ thread ]</a>
              <a href="subject.html#20633">[ subject ]</a>
              <a href="author.html#20633">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: korli
Date: 2009-09-14 23:08:33 +0200 (Mon, 14 Sep 2009)
New Revision: 33138
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=33138&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=33138&amp;view=rev</A>

Added:
   haiku/vendor/acpica/current/hardware/hwvalid.c
   haiku/vendor/acpica/current/hardware/hwxface.c
   haiku/vendor/acpica/current/include/accommon.h
   haiku/vendor/acpica/current/include/acpredef.h
   haiku/vendor/acpica/current/include/acrestyp.h
   haiku/vendor/acpica/current/include/platform/accygwin.h
   haiku/vendor/acpica/current/include/platform/acos2.h
   haiku/vendor/acpica/current/namespace/nspredef.c
   haiku/vendor/acpica/current/namespace/nsrepair.c
   haiku/vendor/acpica/current/utilities/utids.c
   haiku/vendor/acpica/current/utilities/utlock.c
Removed:
   haiku/vendor/acpica/current/common/16bit.h
   haiku/vendor/acpica/current/common/a16find.c
   haiku/vendor/acpica/current/common/a16utils.asm
   haiku/vendor/acpica/current/common/a16utils.obj
Modified:
   haiku/vendor/acpica/current/common/adfile.c
   haiku/vendor/acpica/current/common/adisasm.c
   haiku/vendor/acpica/current/common/adwalk.c
   haiku/vendor/acpica/current/common/dmrestag.c
   haiku/vendor/acpica/current/common/dmtable.c
   haiku/vendor/acpica/current/common/dmtbdump.c
   haiku/vendor/acpica/current/common/dmtbinfo.c
   haiku/vendor/acpica/current/common/getopt.c
   haiku/vendor/acpica/current/compiler/Makefile
   haiku/vendor/acpica/current/compiler/aslanalyze.c
   haiku/vendor/acpica/current/compiler/aslcodegen.c
   haiku/vendor/acpica/current/compiler/aslcompile.c
   haiku/vendor/acpica/current/compiler/aslcompiler.h
   haiku/vendor/acpica/current/compiler/aslcompiler.l
   haiku/vendor/acpica/current/compiler/aslcompiler.y
   haiku/vendor/acpica/current/compiler/asldefine.h
   haiku/vendor/acpica/current/compiler/aslerror.c
   haiku/vendor/acpica/current/compiler/aslfiles.c
   haiku/vendor/acpica/current/compiler/aslfold.c
   haiku/vendor/acpica/current/compiler/aslglobal.h
   haiku/vendor/acpica/current/compiler/asllength.c
   haiku/vendor/acpica/current/compiler/asllisting.c
   haiku/vendor/acpica/current/compiler/aslload.c
   haiku/vendor/acpica/current/compiler/asllookup.c
   haiku/vendor/acpica/current/compiler/aslmain.c
   haiku/vendor/acpica/current/compiler/aslmap.c
   haiku/vendor/acpica/current/compiler/aslopcodes.c
   haiku/vendor/acpica/current/compiler/asloperands.c
   haiku/vendor/acpica/current/compiler/aslopt.c
   haiku/vendor/acpica/current/compiler/aslresource.c
   haiku/vendor/acpica/current/compiler/aslrestype1.c
   haiku/vendor/acpica/current/compiler/aslrestype2.c
   haiku/vendor/acpica/current/compiler/aslstartup.c
   haiku/vendor/acpica/current/compiler/aslstubs.c
   haiku/vendor/acpica/current/compiler/asltransform.c
   haiku/vendor/acpica/current/compiler/asltree.c
   haiku/vendor/acpica/current/compiler/asltypes.h
   haiku/vendor/acpica/current/compiler/aslutils.c
   haiku/vendor/acpica/current/debugger/dbcmds.c
   haiku/vendor/acpica/current/debugger/dbdisply.c
   haiku/vendor/acpica/current/debugger/dbexec.c
   haiku/vendor/acpica/current/debugger/dbfileio.c
   haiku/vendor/acpica/current/debugger/dbhistry.c
   haiku/vendor/acpica/current/debugger/dbinput.c
   haiku/vendor/acpica/current/debugger/dbstats.c
   haiku/vendor/acpica/current/debugger/dbutils.c
   haiku/vendor/acpica/current/debugger/dbxface.c
   haiku/vendor/acpica/current/disassembler/dmbuffer.c
   haiku/vendor/acpica/current/disassembler/dmnames.c
   haiku/vendor/acpica/current/disassembler/dmobject.c
   haiku/vendor/acpica/current/disassembler/dmopcode.c
   haiku/vendor/acpica/current/disassembler/dmresrc.c
   haiku/vendor/acpica/current/disassembler/dmresrcl.c
   haiku/vendor/acpica/current/disassembler/dmresrcs.c
   haiku/vendor/acpica/current/disassembler/dmutils.c
   haiku/vendor/acpica/current/disassembler/dmwalk.c
   haiku/vendor/acpica/current/dispatcher/dsfield.c
   haiku/vendor/acpica/current/dispatcher/dsinit.c
   haiku/vendor/acpica/current/dispatcher/dsmethod.c
   haiku/vendor/acpica/current/dispatcher/dsmthdat.c
   haiku/vendor/acpica/current/dispatcher/dsobject.c
   haiku/vendor/acpica/current/dispatcher/dsopcode.c
   haiku/vendor/acpica/current/dispatcher/dsutils.c
   haiku/vendor/acpica/current/dispatcher/dswexec.c
   haiku/vendor/acpica/current/dispatcher/dswload.c
   haiku/vendor/acpica/current/dispatcher/dswscope.c
   haiku/vendor/acpica/current/dispatcher/dswstate.c
   haiku/vendor/acpica/current/events/evevent.c
   haiku/vendor/acpica/current/events/evgpe.c
   haiku/vendor/acpica/current/events/evgpeblk.c
   haiku/vendor/acpica/current/events/evmisc.c
   haiku/vendor/acpica/current/events/evregion.c
   haiku/vendor/acpica/current/events/evrgnini.c
   haiku/vendor/acpica/current/events/evsci.c
   haiku/vendor/acpica/current/events/evxface.c
   haiku/vendor/acpica/current/events/evxfevnt.c
   haiku/vendor/acpica/current/events/evxfregn.c
   haiku/vendor/acpica/current/executer/exconfig.c
   haiku/vendor/acpica/current/executer/exconvrt.c
   haiku/vendor/acpica/current/executer/excreate.c
   haiku/vendor/acpica/current/executer/exdump.c
   haiku/vendor/acpica/current/executer/exfield.c
   haiku/vendor/acpica/current/executer/exfldio.c
   haiku/vendor/acpica/current/executer/exmisc.c
   haiku/vendor/acpica/current/executer/exmutex.c
   haiku/vendor/acpica/current/executer/exnames.c
   haiku/vendor/acpica/current/executer/exoparg1.c
   haiku/vendor/acpica/current/executer/exoparg2.c
   haiku/vendor/acpica/current/executer/exoparg3.c
   haiku/vendor/acpica/current/executer/exoparg6.c
   haiku/vendor/acpica/current/executer/exprep.c
   haiku/vendor/acpica/current/executer/exregion.c
   haiku/vendor/acpica/current/executer/exresnte.c
   haiku/vendor/acpica/current/executer/exresolv.c
   haiku/vendor/acpica/current/executer/exresop.c
   haiku/vendor/acpica/current/executer/exstore.c
   haiku/vendor/acpica/current/executer/exstoren.c
   haiku/vendor/acpica/current/executer/exstorob.c
   haiku/vendor/acpica/current/executer/exsystem.c
   haiku/vendor/acpica/current/executer/exutils.c
   haiku/vendor/acpica/current/hardware/hwacpi.c
   haiku/vendor/acpica/current/hardware/hwgpe.c
   haiku/vendor/acpica/current/hardware/hwregs.c
   haiku/vendor/acpica/current/hardware/hwsleep.c
   haiku/vendor/acpica/current/hardware/hwtimer.c
   haiku/vendor/acpica/current/include/acapps.h
   haiku/vendor/acpica/current/include/acconfig.h
   haiku/vendor/acpica/current/include/acdebug.h
   haiku/vendor/acpica/current/include/acdisasm.h
   haiku/vendor/acpica/current/include/acdispat.h
   haiku/vendor/acpica/current/include/acevents.h
   haiku/vendor/acpica/current/include/acexcep.h
   haiku/vendor/acpica/current/include/acglobal.h
   haiku/vendor/acpica/current/include/achware.h
   haiku/vendor/acpica/current/include/acinterp.h
   haiku/vendor/acpica/current/include/aclocal.h
   haiku/vendor/acpica/current/include/acmacros.h
   haiku/vendor/acpica/current/include/acnames.h
   haiku/vendor/acpica/current/include/acnamesp.h
   haiku/vendor/acpica/current/include/acobject.h
   haiku/vendor/acpica/current/include/acopcode.h
   haiku/vendor/acpica/current/include/acoutput.h
   haiku/vendor/acpica/current/include/acparser.h
   haiku/vendor/acpica/current/include/acpi.h
   haiku/vendor/acpica/current/include/acpiosxf.h
   haiku/vendor/acpica/current/include/acpixf.h
   haiku/vendor/acpica/current/include/acresrc.h
   haiku/vendor/acpica/current/include/acstruct.h
   haiku/vendor/acpica/current/include/actables.h
   haiku/vendor/acpica/current/include/actbl.h
   haiku/vendor/acpica/current/include/actbl1.h
   haiku/vendor/acpica/current/include/actbl2.h
   haiku/vendor/acpica/current/include/actypes.h
   haiku/vendor/acpica/current/include/acutils.h
   haiku/vendor/acpica/current/include/amlcode.h
   haiku/vendor/acpica/current/include/amlresrc.h
   haiku/vendor/acpica/current/include/platform/acefi.h
   haiku/vendor/acpica/current/include/platform/acenv.h
   haiku/vendor/acpica/current/include/platform/acfreebsd.h
   haiku/vendor/acpica/current/include/platform/acgcc.h
   haiku/vendor/acpica/current/include/platform/acintel.h
   haiku/vendor/acpica/current/include/platform/aclinux.h
   haiku/vendor/acpica/current/include/platform/acmsvc.h
   haiku/vendor/acpica/current/include/platform/acnetbsd.h
   haiku/vendor/acpica/current/include/platform/acwin.h
   haiku/vendor/acpica/current/include/platform/acwin64.h
   haiku/vendor/acpica/current/namespace/nsaccess.c
   haiku/vendor/acpica/current/namespace/nsalloc.c
   haiku/vendor/acpica/current/namespace/nsdump.c
   haiku/vendor/acpica/current/namespace/nsdumpdv.c
   haiku/vendor/acpica/current/namespace/nseval.c
   haiku/vendor/acpica/current/namespace/nsinit.c
   haiku/vendor/acpica/current/namespace/nsload.c
   haiku/vendor/acpica/current/namespace/nsnames.c
   haiku/vendor/acpica/current/namespace/nsobject.c
   haiku/vendor/acpica/current/namespace/nsparse.c
   haiku/vendor/acpica/current/namespace/nssearch.c
   haiku/vendor/acpica/current/namespace/nsutils.c
   haiku/vendor/acpica/current/namespace/nswalk.c
   haiku/vendor/acpica/current/namespace/nsxfeval.c
   haiku/vendor/acpica/current/namespace/nsxfname.c
   haiku/vendor/acpica/current/namespace/nsxfobj.c
   haiku/vendor/acpica/current/parser/psargs.c
   haiku/vendor/acpica/current/parser/psloop.c
   haiku/vendor/acpica/current/parser/psopcode.c
   haiku/vendor/acpica/current/parser/psparse.c
   haiku/vendor/acpica/current/parser/psscope.c
   haiku/vendor/acpica/current/parser/pstree.c
   haiku/vendor/acpica/current/parser/psutils.c
   haiku/vendor/acpica/current/parser/pswalk.c
   haiku/vendor/acpica/current/parser/psxface.c
   haiku/vendor/acpica/current/resources/rsaddr.c
   haiku/vendor/acpica/current/resources/rscalc.c
   haiku/vendor/acpica/current/resources/rscreate.c
   haiku/vendor/acpica/current/resources/rsdump.c
   haiku/vendor/acpica/current/resources/rsinfo.c
   haiku/vendor/acpica/current/resources/rsio.c
   haiku/vendor/acpica/current/resources/rsirq.c
   haiku/vendor/acpica/current/resources/rslist.c
   haiku/vendor/acpica/current/resources/rsmemory.c
   haiku/vendor/acpica/current/resources/rsmisc.c
   haiku/vendor/acpica/current/resources/rsutils.c
   haiku/vendor/acpica/current/resources/rsxface.c
   haiku/vendor/acpica/current/tables/tbfadt.c
   haiku/vendor/acpica/current/tables/tbfind.c
   haiku/vendor/acpica/current/tables/tbinstal.c
   haiku/vendor/acpica/current/tables/tbutils.c
   haiku/vendor/acpica/current/tables/tbxface.c
   haiku/vendor/acpica/current/tables/tbxfroot.c
   haiku/vendor/acpica/current/utilities/utalloc.c
   haiku/vendor/acpica/current/utilities/utcache.c
   haiku/vendor/acpica/current/utilities/utclib.c
   haiku/vendor/acpica/current/utilities/utcopy.c
   haiku/vendor/acpica/current/utilities/utdebug.c
   haiku/vendor/acpica/current/utilities/utdelete.c
   haiku/vendor/acpica/current/utilities/uteval.c
   haiku/vendor/acpica/current/utilities/utglobal.c
   haiku/vendor/acpica/current/utilities/utinit.c
   haiku/vendor/acpica/current/utilities/utmath.c
   haiku/vendor/acpica/current/utilities/utmisc.c
   haiku/vendor/acpica/current/utilities/utmutex.c
   haiku/vendor/acpica/current/utilities/utobject.c
   haiku/vendor/acpica/current/utilities/utresrc.c
   haiku/vendor/acpica/current/utilities/utstate.c
   haiku/vendor/acpica/current/utilities/uttrack.c
   haiku/vendor/acpica/current/utilities/utxface.c
Log:
updated acpica with version 20090903


Deleted: haiku/vendor/acpica/current/common/16bit.h

Deleted: haiku/vendor/acpica/current/common/a16find.c

Deleted: haiku/vendor/acpica/current/common/a16utils.asm

Deleted: haiku/vendor/acpica/current/common/a16utils.obj

Modified: haiku/vendor/acpica/current/common/adfile.c
===================================================================
--- haiku/vendor/acpica/current/common/adfile.c	2009-09-14 19:57:14 UTC (rev 33137)
+++ haiku/vendor/acpica/current/common/adfile.c	2009-09-14 21:08:33 UTC (rev 33138)
@@ -1,7 +1,6 @@
 /******************************************************************************
  *
  * Module Name: adfile - Application-level disassembler file support routines
- *              $Revision: 1.4 $
  *
  *****************************************************************************/
 
@@ -9,7 +8,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2009, Intel Corp.
  * All rights reserved.
  *
  * 2. License
@@ -116,6 +115,7 @@
 
 
 #include &quot;acpi.h&quot;
+#include &quot;accommon.h&quot;
 #include &quot;acapps.h&quot;
 
 #include &lt;stdio.h&gt;
@@ -125,7 +125,14 @@
 #define _COMPONENT          ACPI_TOOLS
         ACPI_MODULE_NAME    (&quot;adfile&quot;)
 
+/* Local prototypes */
 
+INT32
+AdWriteBuffer (
+    char                    *Filename,
+    char                    *Buffer,
+    UINT32                  Length);
+
 char                        FilenameBuf[20];
 
 /******************************************************************************
@@ -185,12 +192,12 @@
 
 INT32
 AdWriteBuffer (
-    char                *Filename,
-    char                *Buffer,
-    UINT32              Length)
+    char                    *Filename,
+    char                    *Buffer,
+    UINT32                  Length)
 {
-    FILE                *fp;
-    ACPI_SIZE           Actual;
+    FILE                    *fp;
+    ACPI_SIZE               Actual;
 
 
     fp = fopen (Filename, &quot;wb&quot;);

Modified: haiku/vendor/acpica/current/common/adisasm.c
===================================================================
--- haiku/vendor/acpica/current/common/adisasm.c	2009-09-14 19:57:14 UTC (rev 33137)
+++ haiku/vendor/acpica/current/common/adisasm.c	2009-09-14 21:08:33 UTC (rev 33138)
@@ -1,7 +1,6 @@
 /******************************************************************************
  *
  * Module Name: adisasm - Application-level disassembler routines
- *              $Revision: 1.112 $
  *
  *****************************************************************************/
 
@@ -9,7 +8,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2009, Intel Corp.
  * All rights reserved.
  *
  * 2. License
@@ -116,6 +115,7 @@
 
 
 #include &quot;acpi.h&quot;
+#include &quot;accommon.h&quot;
 #include &quot;acparser.h&quot;
 #include &quot;amlcode.h&quot;
 #include &quot;acdebug.h&quot;
@@ -153,9 +153,27 @@
 AdDisassemblerHeader (
     char                    *Filename);
 
-ACPI_PARSE_OBJECT       *AcpiGbl_ParseOpRoot;
+void
+AdAddExternalsToNamespace (
+    void);
 
+UINT32
+AdMethodExternalCount (
+    void);
 
+ACPI_STATUS
+AdDeferredParse (
+    ACPI_PARSE_OBJECT       *Op,
+    UINT8                   *Aml,
+    UINT32                  AmlLength);
+
+ACPI_STATUS
+AdParseDeferredOps (
+    ACPI_PARSE_OBJECT       *Root);
+
+ACPI_PARSE_OBJECT           *AcpiGbl_ParseOpRoot;
+
+
 /* Stubs for ASL compiler */
 
 #ifndef ACPI_ASL_COMPILER
@@ -245,18 +263,27 @@
     /* ACPI CA subsystem initialization */
 
     Status = AcpiOsInitialize ();
-    AcpiUtInitGlobals ();
+    if (ACPI_FAILURE (Status))
+    {
+        return (Status);
+    }
 
+    Status = AcpiUtInitGlobals ();
+    if (ACPI_FAILURE (Status))
+    {
+        return (Status);
+    }
+
     Status = AcpiUtMutexInitialize ();
     if (ACPI_FAILURE (Status))
     {
-        return Status;
+        return (Status);
     }
 
     Status = AcpiNsRootInitialize ();
     if (ACPI_FAILURE (Status))
     {
-        return Status;
+        return (Status);
     }
 
     /* Setup the Table Manager (cheat - there is no RSDT) */
@@ -265,7 +292,7 @@
     AcpiGbl_RootTableList.Count = 0;
     AcpiGbl_RootTableList.Tables = LocalTables;
 
-    return Status;
+    return (Status);
 }
 
 
@@ -275,7 +302,7 @@
  *
  * PARAMETERS:
  *
- * RETURN:      Status
+ * RETURN:      None
  *
  * DESCRIPTION:
  *
@@ -371,14 +398,17 @@
 {
     ACPI_STATUS             Status;
     char                    *DisasmFilename = NULL;
+    char                    *ExternalFilename;
     FILE                    *File = NULL;
     ACPI_TABLE_HEADER       *Table = NULL;
     ACPI_TABLE_HEADER       *ExternalTable;
+    ACPI_OWNER_ID           OwnerId;
+    ACPI_EXTERNAL_LIST      *NextExternal;
 
 
     /*
-     * Input:  AML Code from either a file,
-     *         or via GetTables (memory or registry)
+     * Input: AML Code from either a file,
+     *        or via GetTables (memory or registry)
      */
     if (Filename)
     {
@@ -388,13 +418,57 @@
             return Status;
         }
 
+        /*
+         * External filenames separated by commas
+         * Example: iasl -e file1,file2,file3 -d xxx.aml
+         */
         if (Gbl_ExternalFilename)
         {
-            Status = AcpiDbGetTableFromFile (Gbl_ExternalFilename, &amp;ExternalTable);
-            if (ACPI_FAILURE (Status))
+            ExternalFilename = strtok (Gbl_ExternalFilename, &quot;,&quot;);
+
+            while (ExternalFilename)
             {
-                return Status;
+                Status = AcpiDbGetTableFromFile (ExternalFilename, &amp;ExternalTable);
+                if (ACPI_FAILURE (Status))
+                {
+                    return Status;
+                }
+
+                /* Load external table for symbol resolution */
+
+                if (ExternalTable)
+                {
+                    Status = AdParseTable (ExternalTable, &amp;OwnerId, TRUE, TRUE);
+                    if (ACPI_FAILURE (Status))
+                    {
+                        AcpiOsPrintf (&quot;Could not parse external ACPI tables, %s\n&quot;,
+                            AcpiFormatException (Status));
+                        return Status;
+                    }
+
+                    /*
+                     * Load namespace from names created within control methods
+                     * Set owner id of nodes in external table
+                     */
+                    AcpiDmFinishNamespaceLoad (AcpiGbl_ParseOpRoot,
+                        AcpiGbl_RootNode, OwnerId);
+                    AcpiPsDeleteParseTree (AcpiGbl_ParseOpRoot);
+                }
+
+                /* Next external file name */
+
+                ExternalFilename = strtok (NULL, &quot;,&quot;);
             }
+
+            /* Clear external list generated by Scope in external tables */
+
+            while (AcpiGbl_ExternalList)
+            {
+                NextExternal = AcpiGbl_ExternalList-&gt;Next;
+                ACPI_FREE (AcpiGbl_ExternalList-&gt;Path);
+                ACPI_FREE (AcpiGbl_ExternalList);
+                AcpiGbl_ExternalList = NextExternal;
+            }
         }
     }
     else
@@ -470,7 +544,7 @@
     {
         /* Always parse the tables, only option is what to display */
 
-        Status = AdParseTable (Table, TRUE);
+        Status = AdParseTable (Table, &amp;OwnerId, TRUE, FALSE);
         if (ACPI_FAILURE (Status))
         {
             AcpiOsPrintf (&quot;Could not parse ACPI tables, %s\n&quot;,
@@ -490,12 +564,12 @@
         /*
          * Load namespace from names created within control methods
          */
-        AcpiDmFinishNamespaceLoad (AcpiGbl_ParseOpRoot, AcpiGbl_RootNode);
+        AcpiDmFinishNamespaceLoad (AcpiGbl_ParseOpRoot, AcpiGbl_RootNode, OwnerId);
 
         /*
          * Cross reference the namespace here, in order to generate External() statements
          */
-        AcpiDmCrossReferenceNamespace (AcpiGbl_ParseOpRoot, AcpiGbl_RootNode);
+        AcpiDmCrossReferenceNamespace (AcpiGbl_ParseOpRoot, AcpiGbl_RootNode, OwnerId);
 
         if (AslCompilerdebug)
         {
@@ -510,14 +584,6 @@
 
         AcpiDmConvertResourceIndexes (AcpiGbl_ParseOpRoot, AcpiGbl_RootNode);
 
-        if (AslCompilerdebug)
-        {
-            AcpiOsPrintf (&quot;/**** After second load and resource conversion\n&quot;);
-            LsSetupNsList (File);
-            LsDisplayNamespace ();
-            AcpiOsPrintf (&quot;*****/\n&quot;);
-        }
-
         /*
          * If we found any external control methods, we must reparse the entire
          * tree with the new information (namely, the number of arguments per
@@ -549,7 +615,7 @@
 
             /* Parse table. No need to reload it, however (FALSE) */
 
-            Status = AdParseTable (Table, FALSE);
+            Status = AdParseTable (Table, NULL, FALSE, FALSE);
             if (ACPI_FAILURE (Status))
             {
                 AcpiOsPrintf (&quot;Could not parse ACPI tables, %s\n&quot;,
@@ -559,6 +625,11 @@
 
             if (AslCompilerdebug)
             {
+                AcpiOsPrintf (&quot;/**** After second load and resource conversion\n&quot;);
+                LsSetupNsList (File);
+                LsDisplayNamespace ();
+                AcpiOsPrintf (&quot;*****/\n&quot;);
+
                 AcpiDmDumpTree (AcpiGbl_ParseOpRoot);
             }
         }
@@ -1015,6 +1086,11 @@
             fprintf (stderr, &quot;Could not obtain RSDT\n&quot;);
             return AE_NO_ACPI_TABLES;
         }
+        else
+        {
+            AdWriteTable (NewTable, NewTable-&gt;Length,
+                ACPI_SIG_RSDT, NewTable-&gt;OemTableId);
+        }
 
         if (ACPI_COMPARE_NAME (NewTable-&gt;Signature, ACPI_SIG_RSDT))
         {
@@ -1094,6 +1170,9 @@
  * FUNCTION:    AdParseTable
  *
  * PARAMETERS:  Table           - Pointer to the raw table
+ *              OwnerId         - Returned OwnerId of the table
+ *              LoadTable       - If add table to the global table list
+ *              External        - If this is an external table
  *
  * RETURN:      Status
  *
@@ -1104,7 +1183,9 @@
 ACPI_STATUS
 AdParseTable (
     ACPI_TABLE_HEADER       *Table,
-    BOOLEAN                 LoadTable)
+    ACPI_OWNER_ID           *OwnerId,
+    BOOLEAN                 LoadTable,
+    BOOLEAN                 External)
 {
     ACPI_STATUS             Status = AE_OK;
     ACPI_WALK_STATE         *WalkState;
@@ -1158,6 +1239,10 @@
         return Status;
     }
 
+    /* If LoadTable is FALSE, we are parsing the last loaded table */
+
+    TableIndex = AcpiGbl_RootTableList.Count - 1;
+
     /* Pass 2 */
 
     if (LoadTable)
@@ -1168,16 +1253,36 @@
         {
             return Status;
         }
+        Status = AcpiTbAllocateOwnerId (TableIndex);
+        if (ACPI_FAILURE (Status))
+        {
+            return Status;
+        }
+        if (OwnerId)
+        {
+            Status = AcpiTbGetOwnerId (TableIndex, OwnerId);
+            if (ACPI_FAILURE (Status))
+            {
+                return Status;
+            }
+        }
     }
 
     fprintf (stderr, &quot;Pass 2 parse of [%4.4s]\n&quot;, (char *) Table-&gt;Signature);
 
-    Status = AcpiNsOneCompleteParse (ACPI_IMODE_LOAD_PASS2, 0, NULL);
+    Status = AcpiNsOneCompleteParse (ACPI_IMODE_LOAD_PASS2, TableIndex, NULL);
     if (ACPI_FAILURE (Status))
     {
         return (Status);
     }
 
+    /* No need to parse control methods of external table */
+
+    if (External)
+    {
+        return AE_OK;
+    }
+
     /* Pass 3: Parse control methods and link their parse trees into the main parse tree */
 
     Status = AdParseDeferredOps (AcpiGbl_ParseOpRoot);

Modified: haiku/vendor/acpica/current/common/adwalk.c
===================================================================
--- haiku/vendor/acpica/current/common/adwalk.c	2009-09-14 19:57:14 UTC (rev 33137)
+++ haiku/vendor/acpica/current/common/adwalk.c	2009-09-14 21:08:33 UTC (rev 33138)
@@ -1,7 +1,6 @@
 /******************************************************************************
  *
  * Module Name: adwalk - Application-level disassembler parse tree walk routines
- *              $Revision: 1.7 $
  *
  *****************************************************************************/
 
@@ -9,7 +8,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2009, Intel Corp.
  * All rights reserved.
  *
  * 2. License
@@ -116,6 +115,7 @@
 
 
 #include &quot;acpi.h&quot;
+#include &quot;accommon.h&quot;
 #include &quot;acparser.h&quot;
 #include &quot;amlcode.h&quot;
 #include &quot;acdebug.h&quot;
@@ -252,6 +252,7 @@
  *
  * PARAMETERS:  ParseTreeRoot       - Root of the parse tree
  *              NamespaceRoot       - Root of the internal namespace
+ *              OwnerId             - OwnerId of the table to be disassembled
  *
  * RETURN:      None
  *
@@ -263,7 +264,8 @@
 void
 AcpiDmFinishNamespaceLoad (
     ACPI_PARSE_OBJECT       *ParseTreeRoot,
-    ACPI_NAMESPACE_NODE     *NamespaceRoot)
+    ACPI_NAMESPACE_NODE     *NamespaceRoot,
+    ACPI_OWNER_ID           OwnerId)
 {
     ACPI_STATUS             Status;
     ACPI_OP_WALK_INFO       Info;
@@ -277,7 +279,7 @@
 
     /* Create and initialize a new walk state */
 
-    WalkState = AcpiDsCreateWalkState (0, ParseTreeRoot, NULL, NULL);
+    WalkState = AcpiDsCreateWalkState (OwnerId, ParseTreeRoot, NULL, NULL);
     if (!WalkState)
     {
         return;
@@ -304,6 +306,7 @@
  *
  * PARAMETERS:  ParseTreeRoot       - Root of the parse tree
  *              NamespaceRoot       - Root of the internal namespace
+ *              OwnerId             - OwnerId of the table to be disassembled
  *
  * RETURN:      None
  *
@@ -314,7 +317,8 @@
 void
 AcpiDmCrossReferenceNamespace (
     ACPI_PARSE_OBJECT       *ParseTreeRoot,
-    ACPI_NAMESPACE_NODE     *NamespaceRoot)
+    ACPI_NAMESPACE_NODE     *NamespaceRoot,
+    ACPI_OWNER_ID           OwnerId)
 {
     ACPI_STATUS             Status;
     ACPI_OP_WALK_INFO       Info;
@@ -328,7 +332,7 @@
 
     /* Create and initialize a new walk state */
 
-    WalkState = AcpiDsCreateWalkState (0, ParseTreeRoot, NULL, NULL);
+    WalkState = AcpiDsCreateWalkState (OwnerId, ParseTreeRoot, NULL, NULL);
     if (!WalkState)
     {
         return;
@@ -470,6 +474,9 @@
     case AML_INT_NAMEDFIELD_OP:
         AcpiOsPrintf (&quot;%4.4s&quot;, &amp;Op-&gt;Named.Name);
         break;
+
+    default:
+        break;
     }
 
     AcpiOsPrintf (&quot;\n&quot;);
@@ -618,6 +625,9 @@
 
         }
         break;
+
+    default:
+        break;
     }
 
     return (AE_OK);
@@ -650,6 +660,9 @@
     char                    *Path = NULL;
     ACPI_PARSE_OBJECT       *NextOp;
     ACPI_NAMESPACE_NODE     *Node;
+    char                    FieldPath[5];
+    BOOLEAN                 PreDefined = FALSE;
+    UINT8                   PreDefineIndex = 0;
 
 
     WalkState = Info-&gt;WalkState;
@@ -672,6 +685,13 @@
         /* For all named operators, get the new name */
 
         Path = (char *) Op-&gt;Named.Path;
+
+        if (!Path &amp;&amp; Op-&gt;Common.AmlOpcode == AML_INT_NAMEDFIELD_OP)
+        {
+            *ACPI_CAST_PTR (UINT32, &amp;FieldPath[0]) = Op-&gt;Named.Name;
+            FieldPath[4] = 0;
+            Path = FieldPath;
+        }
     }
     else if (OpInfo-&gt;Flags &amp; AML_CREATE)
     {
@@ -699,7 +719,37 @@
 
     Op-&gt;Common.Node = Node;
 
+    if (ACPI_SUCCESS (Status))
+    {
+        /* Check if it's a predefined node */
 
+        while (AcpiGbl_PreDefinedNames[PreDefineIndex].Name)
+        {
+            if (!ACPI_STRNCMP (Node-&gt;Name.Ascii,
+                AcpiGbl_PreDefinedNames[PreDefineIndex].Name, 4))
+            {
+                PreDefined = TRUE;
+                break;
+            }
+
+            PreDefineIndex++;
+        }
+
+        /*
+         * Set node owner id if it satisfies all the following conditions:
+         * 1) Not a predefined node, _SB_ etc
+         * 2) Not the root node
+         * 3) Not a node created by Scope
+         */
+
+        if (!PreDefined &amp;&amp; Node != AcpiGbl_RootNode &amp;&amp;
+            Op-&gt;Common.AmlOpcode != AML_SCOPE_OP)
+        {
+            Node-&gt;OwnerId = WalkState-&gt;OwnerId;
+        }
+    }
+
+
 Exit:
 
     if (AcpiNsOpensScope (ObjectType))
@@ -740,10 +790,12 @@
     const ACPI_OPCODE_INFO  *OpInfo;
     ACPI_WALK_STATE         *WalkState;
     ACPI_OBJECT_TYPE        ObjectType;
+    ACPI_OBJECT_TYPE        ObjectType2;
     ACPI_STATUS             Status;
     char                    *Path = NULL;
     ACPI_PARSE_OBJECT       *NextOp;
     ACPI_NAMESPACE_NODE     *Node;
+    ACPI_OPERAND_OBJECT     *Object;
 
 
     WalkState = Info-&gt;WalkState;
@@ -819,6 +871,33 @@
 #endif
         }
     }
+
+    /*
+     * Found the node in external table, add it to external list
+     * Node-&gt;OwnerId == 0 indicates built-in ACPI Names, _OS_ etc
+     */
+    else if (Node-&gt;OwnerId &amp;&amp; WalkState-&gt;OwnerId != Node-&gt;OwnerId)
+    {
+        ObjectType2 = ObjectType;
+
+        Object = AcpiNsGetAttachedObject (Node);
+        if (Object)
+        {
+            ObjectType2 = Object-&gt;Common.Type;
+        }
+
+        if (ObjectType2 == ACPI_TYPE_METHOD)
+        {
+            AcpiDmAddToExternalList (Path, ACPI_TYPE_METHOD,
+                Object-&gt;Method.ParamCount);
+        }
+        else
+        {
+            AcpiDmAddToExternalList (Path, (UINT8) ObjectType2, 0);
+        }
+
+        Op-&gt;Common.Node = Node;
+    }
     else
     {
         Op-&gt;Common.Node = Node;

Modified: haiku/vendor/acpica/current/common/dmrestag.c
===================================================================
--- haiku/vendor/acpica/current/common/dmrestag.c	2009-09-14 19:57:14 UTC (rev 33137)
+++ haiku/vendor/acpica/current/common/dmrestag.c	2009-09-14 21:08:33 UTC (rev 33138)
@@ -1,7 +1,6 @@
 /******************************************************************************
  *
  * Module Name: dmrestag - Add tags to resource descriptors (Application-level)
- *              $Revision: 1.12 $
  *
  *****************************************************************************/
 
@@ -9,7 +8,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2009, Intel Corp.
  * All rights reserved.
  *
  * 2. License
@@ -116,6 +115,7 @@
 
 
 #include &quot;acpi.h&quot;
+#include &quot;accommon.h&quot;
 #include &quot;acparser.h&quot;
 #include &quot;acdisasm.h&quot;
 #include &quot;acnamesp.h&quot;
@@ -387,7 +387,7 @@
 
 static UINT32                   AcpiGbl_NextResourceId = 0;
 static UINT8                    AcpiGbl_NextPrefix = 0;
-static UINT8                    AcpiGbl_Prefix[ACPI_NUM_RES_PREFIX] =
+static char                     AcpiGbl_Prefix[ACPI_NUM_RES_PREFIX] =
                                     {'Y','Z','J','K','X'};
 
 
@@ -636,13 +636,22 @@
     /* Get the full pathname to the parent buffer */
 
     RequiredSize = AcpiNsGetPathnameLength (BufferNode);
+    if (!RequiredSize)
+    {
+        return (NULL);
+    }
+
     Pathname = ACPI_ALLOCATE_ZEROED (RequiredSize + ACPI_PATH_SEGMENT_LENGTH);
     if (!Pathname)
     {
         return (NULL);
     }
 
-    AcpiNsBuildExternalPath (BufferNode, RequiredSize, Pathname);
+    Status = AcpiNsBuildExternalPath (BufferNode, RequiredSize, Pathname);
+    if (ACPI_FAILURE (Status))
+    {
+        return (NULL);
+    }
 
     /*
      * Create the full path to the resource and tag by: remove the buffer name,
@@ -720,7 +729,7 @@
 
     /* Change the resource descriptor name */
 
-    ResourceNode-&gt;Name.Integer = *(UINT32 *) Name;
+    ResourceNode-&gt;Name.Integer = *ACPI_CAST_PTR (UINT32, &amp;Name[0]);
 }
 
 

Modified: haiku/vendor/acpica/current/common/dmtable.c
===================================================================
--- haiku/vendor/acpica/current/common/dmtable.c	2009-09-14 19:57:14 UTC (rev 33137)
+++ haiku/vendor/acpica/current/common/dmtable.c	2009-09-14 21:08:33 UTC (rev 33138)
@@ -1,7 +1,6 @@
 /******************************************************************************
  *
  * Module Name: dmtable - Support for ACPI tables that contain no AML code
- *              $Revision: 1.16 $
  *
  *****************************************************************************/
 
@@ -9,7 +8,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2009, Intel Corp.
  * All rights reserved.
  *
  * 2. License
@@ -115,6 +114,7 @@
  *****************************************************************************/
 
 #include &quot;acpi.h&quot;
+#include &quot;accommon.h&quot;
 #include &quot;acdisasm.h&quot;
 #include &quot;actables.h&quot;
 
@@ -132,9 +132,14 @@
 static void
 AcpiDmCheckAscii (
     UINT8                   *Target,
+    char                    *RepairedName,
     UINT32                  Count);
 
+UINT8
+AcpiTbGenerateChecksum (
+    ACPI_TABLE_HEADER       *Table);
 
+
 /* These tables map a subtable type to a description string */
 
 static const char           *AcpiDmAsfSubnames[] =
@@ -152,20 +157,21 @@
     &quot;Hardware Unit Definition&quot;,
     &quot;Reserved Memory Region&quot;,
     &quot;Root Port ATS Capability&quot;,
+    &quot;Remapping Hardware Static Affinity&quot;,
     &quot;Unknown SubTable Type&quot;         /* Reserved */
 };
 
 static const char           *AcpiDmHestSubnames[] =
 {
-    &quot;XPF Machine Check Exception&quot;,
-    &quot;XPF Corrected Machine Check&quot;,
-    &quot;NOT USED???&quot;,
-    &quot;XPF Non-Maskable Interrupt&quot;,
-    &quot;IPF Corrected Machine Check&quot;,
-    &quot;IPF Corrected Platform Error&quot;,
+    &quot;IA-32 Machine Check Exception&quot;,
+    &quot;IA-32 Corrected Machine Check&quot;,
+    &quot;IA-32 Non-Maskable Interrupt&quot;,
+    &quot;Unknown SubTable Type&quot;,        /* 3 - Reserved */
+    &quot;Unknown SubTable Type&quot;,        /* 4 - Reserved */
+    &quot;Unknown SubTable Type&quot;,        /* 5 - Reserved */
     &quot;PCI Express Root Port AER&quot;,
     &quot;PCI Express AER (AER Endpoint)&quot;,
-    &quot;PCI Express/PCI-X Bridge AERn&quot;,
+    &quot;PCI Express/PCI-X Bridge AER&quot;,
     &quot;Generic Hardware Error Source&quot;,
     &quot;Unknown SubTable Type&quot;         /* Reserved */
 };
@@ -191,6 +197,8 @@
     &quot;I/O SAPIC&quot;,                    /* ACPI_MADT_TYPE_IO_SAPIC */
     &quot;Local SAPIC&quot;,                  /* ACPI_MADT_TYPE_LOCAL_SAPIC */
     &quot;Platform Interrupt Sources&quot;,   /* ACPI_MADT_TYPE_INTERRUPT_SOURCE */
+    &quot;Processor Local x2APIC&quot;,       /* ACPI_MADT_TYPE_LOCAL_X2APIC */
+    &quot;Local x2APIC NMI&quot;,             /* ACPI_MADT_TYPE_LOCAL_X2APIC_NMI */
     &quot;Unknown SubTable Type&quot;         /* Reserved */
 };
 
@@ -198,14 +206,40 @@
 {
     &quot;Processor Local APIC/SAPIC Affinity&quot;,
     &quot;Memory Affinity&quot;,
+    &quot;Processor Local x2APIC Affinity&quot;,
     &quot;Unknown SubTable Type&quot;         /* Reserved */
 };
 
+static const char           *AcpiDmIvrsSubnames[] =
+{
+    &quot;Hardware Definition Block&quot;,
+    &quot;Memory Definition Block&quot;,
+    &quot;Unknown SubTable Type&quot;         /* Reserved */
+};
 
+
+
+#define ACPI_FADT_PM_RESERVED       8
+
+static const char           *AcpiDmFadtProfiles[] =
+{
+    &quot;Unspecified&quot;,
+    &quot;Desktop&quot;,
+    &quot;Mobile&quot;,
+    &quot;Workstation&quot;,
+    &quot;Enterprise Server&quot;,
+    &quot;SOHO Server&quot;,
+    &quot;Appliance PC&quot;,
+    &quot;Performance Server&quot;,
+    &quot;Unknown Profile Type&quot;
+};
+
 /*******************************************************************************
  *
  * ACPI Table Data, indexed by signature.
  *
+ * Each entry contains: Signature, Table Info, Handler, Description
+ *
  * Simple tables have only a TableInfo structure, complex tables have a handler.
  * This table must be NULL terminated. RSDP and FACS are special-cased
  * elsewhere.
@@ -226,8 +260,10 @@
     {ACPI_SIG_FADT, NULL,                   AcpiDmDumpFadt, &quot;Fixed ACPI Description Table&quot;},
     {ACPI_SIG_HEST, NULL,                   AcpiDmDumpHest, &quot;Hardware Error Source Table&quot;},
     {ACPI_SIG_HPET, AcpiDmTableInfoHpet,    NULL,           &quot;High Precision Event Timer table&quot;},
+    {ACPI_SIG_IVRS, NULL,                   AcpiDmDumpIvrs, &quot;I/O Virtualization Reporting Structure&quot;},
     {ACPI_SIG_MADT, NULL,                   AcpiDmDumpMadt, &quot;Multiple APIC Description Table&quot;},
     {ACPI_SIG_MCFG, NULL,                   AcpiDmDumpMcfg, &quot;Memory Mapped Configuration table&quot;},
+    {ACPI_SIG_MSCT, NULL,                   AcpiDmDumpMsct, &quot;Maximum System Characteristics Table&quot;},
     {ACPI_SIG_RSDT, NULL,                   AcpiDmDumpRsdt, &quot;Root System Description Table&quot;},
     {ACPI_SIG_SBST, AcpiDmTableInfoSbst,    NULL,           &quot;Smart Battery Specification Table&quot;},
     {ACPI_SIG_SLIC, AcpiDmTableInfoSlic,    NULL,           &quot;Software Licensing Description Table&quot;},
@@ -236,6 +272,9 @@
     {ACPI_SIG_SPMI, AcpiDmTableInfoSpmi,    NULL,           &quot;Server Platform Management Interface table&quot;},
     {ACPI_SIG_SRAT, NULL,                   AcpiDmDumpSrat, &quot;System Resource Affinity Table&quot;},
     {ACPI_SIG_TCPA, AcpiDmTableInfoTcpa,    NULL,           &quot;Trusted Computing Platform Alliance table&quot;},
+    {ACPI_SIG_UEFI, AcpiDmTableInfoUefi,    NULL,           &quot;UEFI Boot Optimization Table&quot;},
+    {ACPI_SIG_WAET, AcpiDmTableInfoWaet,    NULL,           &quot;Windows ACPI Emulated Devices Table&quot;},
+    {ACPI_SIG_WDAT, NULL,                   AcpiDmDumpWdat, &quot;Watchdog Action Table&quot;},
     {ACPI_SIG_WDRT, AcpiDmTableInfoWdrt,    NULL,           &quot;Watchdog Resource Table&quot;},
     {ACPI_SIG_XSDT, NULL,                   AcpiDmDumpXsdt, &quot;Extended System Description Table&quot;},
     {NULL,          NULL,                   NULL,           NULL}
@@ -426,12 +465,12 @@
 
     if (ByteLength)
     {
-        AcpiOsPrintf (&quot;[%3.3Xh %3.3d% 3d] %28s : &quot;,
+        AcpiOsPrintf (&quot;[%3.3Xh %4.4d% 3d] %28s : &quot;,
             Offset, Offset, ByteLength, Name);
     }
     else
     {
-        AcpiOsPrintf (&quot;%42s : &quot;,
+        AcpiOsPrintf (&quot;%43s : &quot;,
             Name);
     }
 }
@@ -446,12 +485,12 @@
 
     if (ByteLength)
     {
-        AcpiOsPrintf (&quot;[%3.3Xh %3.3d% 3d] %24s % 3d : &quot;,
+        AcpiOsPrintf (&quot;[%3.3Xh %4.4d% 3d] %24s % 3d : &quot;,
             Offset, Offset, ByteLength, Name, Value);
     }
     else
     {
-        AcpiOsPrintf (&quot;[%3.3Xh %3.3d   ] %24s % 3d : &quot;,
+        AcpiOsPrintf (&quot;[%3.3Xh %4.4d   ] %24s % 3d : &quot;,
             Offset, Offset, Name, Value);
     }
 }
@@ -488,7 +527,9 @@
     UINT8                   Temp8;
     UINT16                  Temp16;
     ACPI_DMTABLE_DATA       *TableData;
+    const char              *Name;
     BOOLEAN                 LastOutputBlankLine = FALSE;
+    char                    RepairedName[8];
 
 
     if (!Info)
@@ -524,10 +565,12 @@
         case ACPI_DMT_UINT8:
         case ACPI_DMT_CHKSUM:
         case ACPI_DMT_SPACEID:
+        case ACPI_DMT_IVRS:
         case ACPI_DMT_MADT:
         case ACPI_DMT_SRAT:
         case ACPI_DMT_ASF:
         case ACPI_DMT_HESTNTYP:
+        case ACPI_DMT_FADTPM:
             ByteLength = 1;
             break;
         case ACPI_DMT_UINT16:
@@ -553,6 +596,9 @@
         case ACPI_DMT_NAME8:
             ByteLength = 8;
             break;
+        case ACPI_DMT_BUF16:
+            ByteLength = 16;
+            break;
         case ACPI_DMT_STRING:
             ByteLength = ACPI_STRLEN (ACPI_CAST_PTR (char, Target)) + 1;
             break;
@@ -653,17 +699,28 @@
                 ACPI_FORMAT_UINT64 (ACPI_GET64 (Target)));
             break;
 
+        case ACPI_DMT_BUF16:
+
+            /* Buffer of length 16 */
+
+            for (Temp8 = 0; Temp8 &lt; 16; Temp8++)
+            {
+                AcpiOsPrintf (&quot;%2.2X,&quot;, Target[Temp8]);
+            }
+            AcpiOsPrintf (&quot;\n&quot;);
+            break;
+
         case ACPI_DMT_STRING:
 
-            AcpiOsPrintf (&quot;%s\n&quot;, ACPI_CAST_PTR (char, Target));
+            AcpiOsPrintf (&quot;\&quot;%s\&quot;\n&quot;, ACPI_CAST_PTR (char, Target));
             break;
 
         /* Fixed length ASCII name fields */
 
         case ACPI_DMT_SIG:
 
-            AcpiDmCheckAscii (Target, 4);
-            AcpiOsPrintf (&quot;\&quot;%4.4s\&quot;    &quot;, Target);
+            AcpiDmCheckAscii (Target, RepairedName, 4);
+            AcpiOsPrintf (&quot;\&quot;%.4s\&quot;    &quot;, RepairedName);
             TableData = AcpiDmGetTableData (ACPI_CAST_PTR (char, Target));
             if (TableData)
             {
@@ -674,20 +731,20 @@
 
         case ACPI_DMT_NAME4:
 
-            AcpiDmCheckAscii (Target, 4);
-            AcpiOsPrintf (&quot;\&quot;%4.4s\&quot;\n&quot;, Target);
+            AcpiDmCheckAscii (Target, RepairedName, 4);
+            AcpiOsPrintf (&quot;\&quot;%.4s\&quot;\n&quot;, RepairedName);
             break;
 
         case ACPI_DMT_NAME6:
 
-            AcpiDmCheckAscii (Target, 6);
-            AcpiOsPrintf (&quot;\&quot;%6.6s\&quot;\n&quot;, Target);
+            AcpiDmCheckAscii (Target, RepairedName, 6);
+            AcpiOsPrintf (&quot;\&quot;%.6s\&quot;\n&quot;, RepairedName);
             break;
 
         case ACPI_DMT_NAME8:
 
-            AcpiDmCheckAscii (Target, 8);
-            AcpiOsPrintf (&quot;\&quot;%8.8s\&quot;\n&quot;, Target);
+            AcpiDmCheckAscii (Target, RepairedName, 8);
+            AcpiOsPrintf (&quot;\&quot;%.8s\&quot;\n&quot;, RepairedName);
             break;
 
         /* Special Data Types */
@@ -718,8 +775,8 @@
             /* Generic Address Structure */
 
             AcpiOsPrintf (&quot;&lt;Generic Address Structure&gt;\n&quot;);
-            AcpiDmDumpTable (ACPI_CAST_PTR (ACPI_TABLE_HEADER, Table)-&gt;Length,
-                CurrentOffset, Target, 0, AcpiDmTableInfoGas);
+            AcpiDmDumpTable (TableLength, CurrentOffset, Target,
+                sizeof (ACPI_GENERIC_ADDRESS), AcpiDmTableInfoGas);
             AcpiOsPrintf (&quot;\n&quot;);
             LastOutputBlankLine = TRUE;
             break;
@@ -741,33 +798,33 @@
 
             /* DMAR subtable types */
 
-            Temp16 = *Target;
+            Temp16 = ACPI_GET16 (Target);
             if (Temp16 &gt; ACPI_DMAR_TYPE_RESERVED)
             {
                 Temp16 = ACPI_DMAR_TYPE_RESERVED;
             }
 
-            AcpiOsPrintf (&quot;%4.4X &lt;%s&gt;\n&quot;, *Target, AcpiDmDmarSubnames[Temp16]);
+            AcpiOsPrintf (&quot;%4.4X &lt;%s&gt;\n&quot;, ACPI_GET16 (Target), AcpiDmDmarSubnames[Temp16]);
             break;
 
         case ACPI_DMT_HEST:
 
             /* HEST subtable types */
 
-            Temp16 = *Target;
+            Temp16 = ACPI_GET16 (Target);
             if (Temp16 &gt; ACPI_HEST_TYPE_RESERVED)
             {
                 Temp16 = ACPI_HEST_TYPE_RESERVED;
             }
 
-            AcpiOsPrintf (&quot;%4.4X (%s)\n&quot;, *Target, AcpiDmHestSubnames[Temp16]);
+            AcpiOsPrintf (&quot;%4.4X (%s)\n&quot;, ACPI_GET16 (Target), AcpiDmHestSubnames[Temp16]);
             break;
 
         case ACPI_DMT_HESTNTFY:
 
             AcpiOsPrintf (&quot;&lt;Hardware Error Notification Structure&gt;\n&quot;);
-            AcpiDmDumpTable (ACPI_CAST_PTR (ACPI_TABLE_HEADER, Table)-&gt;Length,
-                CurrentOffset, Target, 0, AcpiDmTableInfoHestNotify);
+            AcpiDmDumpTable (TableLength, CurrentOffset, Target,

[... truncated: 35919 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020632.html">[Haiku-commits] r33137 -	haiku/trunk/src/add-ons/kernel/drivers/midi/usb_midi
</A></li>
	<LI>Next message: <A HREF="020634.html">[Haiku-commits] r33139 - haiku/vendor/acpica
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20633">[ date ]</a>
              <a href="thread.html#20633">[ thread ]</a>
              <a href="subject.html#20633">[ subject ]</a>
              <a href="author.html#20633">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
