<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r33302 - in haiku/branches/components/gallium3d: headers/os/opengl/GL src/add-ons/opengl/softpipe src/libs/mesa/gallium/auxiliary/cso_cache src/libs/mesa/gallium/auxiliary/draw src/libs/mesa/gallium/auxiliary/pipebuffer src/libs/mesa/gallium/auxiliary/rbug src/libs/mesa/gallium/auxiliary/rtasm src/libs/mesa/gallium/auxiliary/sct src/libs/mesa/gallium/auxiliary/tgsi src/libs/mesa/gallium/auxiliary/translate src/libs/mesa/gallium/auxiliary/util src/libs/mesa/gallium/drivers/failover src/libs/mesa/gallium/drivers/i915simple src/libs/mesa/gallium/drivers/i915simple/gem src/libs/mesa/gallium/drivers/softpipe src/libs/mesa/gallium/drivers/trace src/libs/mesa/gallium/include/pipe src/libs/mesa/gallium/state_trackers/dri src/libs/mesa/mesa src/libs/mesa/mesa/drivers/common src/libs/mesa/mesa/drivers/dri/common src/libs/mesa/mesa/glapi src/libs/mesa/mesa/main src/libs/mesa/mesa/shader src/libs/mesa/mesa/shader/slang src/libs/mesa/mesa/sparc src/libs/mesa/mesa/state_tracker s! rc/libs/mesa/mesa/swrast src/libs/mesa/mesa/vbo src/libs/mesa/mesa/x86 src/libs/mesa/mesa/x86-64
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33302%20-%20in%20haiku/branches/components/gallium3d%3A%0A%20headers/os/opengl/GL%20src/add-ons/opengl/softpipe%0A%20src/libs/mesa/gallium/auxiliary/cso_cache%0A%20src/libs/mesa/gallium/auxiliary/draw%0A%20src/libs/mesa/gallium/auxiliary/pipebuffer%0A%20src/libs/mesa/gallium/auxiliary/rbug%20src/libs/mesa/gallium/auxiliary/rtasm%0A%20src/libs/mesa/gallium/auxiliary/sct%20src/libs/mesa/gallium/auxiliary/tgsi%0A%20src/libs/mesa/gallium/auxiliary/translate%0A%20src/libs/mesa/gallium/auxiliary/util%20src/libs/mesa/gallium/drivers/failover%0A%20src/libs/mesa/gallium/drivers/i915simple%0A%20src/libs/mesa/gallium/drivers/i915simple/gem%0A%20src/libs/mesa/gallium/drivers/softpipe%20src/libs/mesa/gallium/drivers/trace%0A%20src/libs/mesa/gallium/include/pipe%20src/libs/mesa/gallium/state_trackers/dri%0A%20src/libs/mesa/mesa%20src/libs/mesa/mesa/drivers/common%0A%20src/libs/mesa/mesa/drivers/dri/common%20src/libs/mesa/mesa/glapi%0A%20src/libs/mesa/mesa/main%20src/libs/mesa/mesa/shader%0A%20src/libs/mesa/mesa/shader/slang%20src/libs/mesa/mesa/sparc%0A%20src/libs/mesa/mesa/state_tracker%20s%21%20rc/libs/mesa/mesa/swrast%0A%20src/libs/mesa/mesa/vbo%20src/libs/mesa/mesa/x86%20src/libs/mesa/mesa/x86-64&In-Reply-To=%3C200909261520.n8QFKZ72023738%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020917.html">
   <LINK REL="Next"  HREF="020920.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r33302 - in haiku/branches/components/gallium3d: headers/os/opengl/GL src/add-ons/opengl/softpipe src/libs/mesa/gallium/auxiliary/cso_cache src/libs/mesa/gallium/auxiliary/draw src/libs/mesa/gallium/auxiliary/pipebuffer src/libs/mesa/gallium/auxiliary/rbug src/libs/mesa/gallium/auxiliary/rtasm src/libs/mesa/gallium/auxiliary/sct src/libs/mesa/gallium/auxiliary/tgsi src/libs/mesa/gallium/auxiliary/translate src/libs/mesa/gallium/auxiliary/util src/libs/mesa/gallium/drivers/failover src/libs/mesa/gallium/drivers/i915simple src/libs/mesa/gallium/drivers/i915simple/gem src/libs/mesa/gallium/drivers/softpipe src/libs/mesa/gallium/drivers/trace src/libs/mesa/gallium/include/pipe src/libs/mesa/gallium/state_trackers/dri src/libs/mesa/mesa src/libs/mesa/mesa/drivers/common src/libs/mesa/mesa/drivers/dri/common src/libs/mesa/mesa/glapi src/libs/mesa/mesa/main src/libs/mesa/mesa/shader src/libs/mesa/mesa/shader/slang src/libs/mesa/mesa/sparc src/libs/mesa/mesa/state_tracker s! rc/libs/mesa/mesa/swrast src/libs/mesa/mesa/vbo src/libs/mesa/mesa/x86 src/libs/mesa/mesa/x86-64</H1>
    <B>aljen at mail.berlios.de</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33302%20-%20in%20haiku/branches/components/gallium3d%3A%0A%20headers/os/opengl/GL%20src/add-ons/opengl/softpipe%0A%20src/libs/mesa/gallium/auxiliary/cso_cache%0A%20src/libs/mesa/gallium/auxiliary/draw%0A%20src/libs/mesa/gallium/auxiliary/pipebuffer%0A%20src/libs/mesa/gallium/auxiliary/rbug%20src/libs/mesa/gallium/auxiliary/rtasm%0A%20src/libs/mesa/gallium/auxiliary/sct%20src/libs/mesa/gallium/auxiliary/tgsi%0A%20src/libs/mesa/gallium/auxiliary/translate%0A%20src/libs/mesa/gallium/auxiliary/util%20src/libs/mesa/gallium/drivers/failover%0A%20src/libs/mesa/gallium/drivers/i915simple%0A%20src/libs/mesa/gallium/drivers/i915simple/gem%0A%20src/libs/mesa/gallium/drivers/softpipe%20src/libs/mesa/gallium/drivers/trace%0A%20src/libs/mesa/gallium/include/pipe%20src/libs/mesa/gallium/state_trackers/dri%0A%20src/libs/mesa/mesa%20src/libs/mesa/mesa/drivers/common%0A%20src/libs/mesa/mesa/drivers/dri/common%20src/libs/mesa/mesa/glapi%0A%20src/libs/mesa/mesa/main%20src/libs/mesa/mesa/shader%0A%20src/libs/mesa/mesa/shader/slang%20src/libs/mesa/mesa/sparc%0A%20src/libs/mesa/mesa/state_tracker%20s%21%20rc/libs/mesa/mesa/swrast%0A%20src/libs/mesa/mesa/vbo%20src/libs/mesa/mesa/x86%20src/libs/mesa/mesa/x86-64&In-Reply-To=%3C200909261520.n8QFKZ72023738%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r33302 - in haiku/branches/components/gallium3d: headers/os/opengl/GL src/add-ons/opengl/softpipe src/libs/mesa/gallium/auxiliary/cso_cache src/libs/mesa/gallium/auxiliary/draw src/libs/mesa/gallium/auxiliary/pipebuffer src/libs/mesa/gallium/auxiliary/rbug src/libs/mesa/gallium/auxiliary/rtasm src/libs/mesa/gallium/auxiliary/sct src/libs/mesa/gallium/auxiliary/tgsi src/libs/mesa/gallium/auxiliary/translate src/libs/mesa/gallium/auxiliary/util src/libs/mesa/gallium/drivers/failover src/libs/mesa/gallium/drivers/i915simple src/libs/mesa/gallium/drivers/i915simple/gem src/libs/mesa/gallium/drivers/softpipe src/libs/mesa/gallium/drivers/trace src/libs/mesa/gallium/include/pipe src/libs/mesa/gallium/state_trackers/dri src/libs/mesa/mesa src/libs/mesa/mesa/drivers/common src/libs/mesa/mesa/drivers/dri/common src/libs/mesa/mesa/glapi src/libs/mesa/mesa/main src/libs/mesa/mesa/shader src/libs/mesa/mesa/shader/slang src/libs/mesa/mesa/sparc src/libs/mesa/mesa/state_tracker s! rc/libs/mesa/mesa/swrast src/libs/mesa/mesa/vbo src/libs/mesa/mesa/x86 src/libs/mesa/mesa/x86-64">aljen at mail.berlios.de
       </A><BR>
    <I>Sat Sep 26 17:20:35 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020917.html">[Haiku-commits] r33301 -	haiku/trunk/src/add-ons/kernel/drivers/input/wacom
</A></li>
        <LI>Next message: <A HREF="020920.html">[Haiku-commits] r33303 - haiku/trunk/build/jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20919">[ date ]</a>
              <a href="thread.html#20919">[ thread ]</a>
              <a href="subject.html#20919">[ subject ]</a>
              <a href="author.html#20919">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: aljen
Date: 2009-09-26 17:17:29 +0200 (Sat, 26 Sep 2009)
New Revision: 33302
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=33302&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=33302&amp;view=rev</A>

Added:
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/u_format_access.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/u_format_table.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_tex_tile_cache.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_tex_tile_cache.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/drivers/common/meta.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/drivers/common/meta.h
Removed:
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_fs_llvm.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_prim_setup.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_prim_setup.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_alpha_test.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_bufloop.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_colormask.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_coverage.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_earlyz.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_occlusion.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_output.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_stencil.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/swrast/s_imaging.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/swrast/s_texstore.c
Modified:
   haiku/branches/components/gallium3d/headers/os/opengl/GL/gl.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/softpipe/hsp_context.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/cso_cache/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/draw/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/draw/draw_pt_post_vs.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/pb_buffer_fenced.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/pb_bufmgr_debug.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/rbug/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/rtasm/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/sct/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_scan.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_scan.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_sse2.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/translate/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/u_debug.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/u_math.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/failover/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/i915simple/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/i915simple/gem/intel_drm_api.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/i915simple/i915_context.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/i915simple/i915_screen.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/i915simple/i915_state.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_context.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_context.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_flush.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_fs_exec.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_fs_sse.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_prim_vbuf.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_prim_vbuf.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_blend.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_depth_test.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_fs.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_pipe.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_pipe.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_quad_stipple.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_screen.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_setup.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_state.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_state_blend.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_state_derived.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_state_fs.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_state_sampler.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_state_surface.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_tex_sample.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_tex_sample.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_texture.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_texture.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_tile_cache.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/softpipe/sp_tile_cache.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/trace/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/drivers/trace/tr_context.c
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/include/pipe/p_defines.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/include/pipe/p_inlines.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/include/pipe/p_state.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/include/pipe/p_thread.h
   haiku/branches/components/gallium3d/src/libs/mesa/gallium/state_trackers/dri/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/Jamfile
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/drivers/common/driverfuncs.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/drivers/dri/common/extension_helper.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/glapi/glapitemp.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/glapi/glprocs.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/api_exec.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/api_validate.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/api_validate.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/bufferobj.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/colortab.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/colortab.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/compiler.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/context.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/convolve.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/convolve.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/dlist.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/enable.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/enums.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/execmem.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/extensions.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/fbobject.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/mfeatures.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/mtypes.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/pixel.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/pixel.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/state.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/texenvprogram.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/texgen.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/teximage.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/texobj.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/texparam.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/texrender.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/texstate.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/main/texstore.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/lex.yy.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/nvprogram.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/nvprogram.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/nvvertparse.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/prog_execute.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/prog_parameter.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/program.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/program_lexer.l
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/program_parse.tab.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/program_parse.tab.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/program_parse.y
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/program_parse_extra.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/program_parser.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/shader_api.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/slang/slang_builtin.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/slang/slang_codegen.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/shader/slang/slang_link.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/sparc/glapi_sparc.S
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/state_tracker/st_cb_blit.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/state_tracker/st_cb_fbo.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/state_tracker/st_cb_program.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/state_tracker/st_cb_texture.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/state_tracker/st_draw.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/state_tracker/st_framebuffer.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/state_tracker/st_mesa_to_tgsi.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/state_tracker/st_mesa_to_tgsi.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/state_tracker/st_program.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/swrast/s_fragprog.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/swrast/s_texfilter.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/swrast/swrast.h
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/vbo/vbo_exec_array.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/vbo/vbo_rebase.c
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/x86-64/glapi_x86-64.S
   haiku/branches/components/gallium3d/src/libs/mesa/mesa/x86/glapi_x86.S
Log:
* Synched with mesa git master
* Rewritten hsp_make_current logic to avoid locking


Modified: haiku/branches/components/gallium3d/headers/os/opengl/GL/gl.h
===================================================================
--- haiku/branches/components/gallium3d/headers/os/opengl/GL/gl.h	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/headers/os/opengl/GL/gl.h	2009-09-26 15:17:29 UTC (rev 33302)
@@ -1740,8 +1740,11 @@
 GLAPI void GLAPIENTRY glGetSeparableFilter( GLenum target, GLenum format,
 	GLenum type, GLvoid *row, GLvoid *column, GLvoid *span );
 
+typedef void (APIENTRYP PFNGLBLENDCOLORPROC) (GLclampf red, GLclampf green, GLclampf blue, GLclampf alpha);
+typedef void (APIENTRYP PFNGLBLENDEQUATIONPROC) (GLenum mode);
 
 
+
 /*
  * OpenGL 1.3
  */
@@ -1945,6 +1948,18 @@
 GLAPI void GLAPIENTRY glSampleCoverage( GLclampf value, GLboolean invert );
 
 
+typedef void (APIENTRYP PFNGLACTIVETEXTUREPROC) (GLenum texture);
+typedef void (APIENTRYP PFNGLSAMPLECOVERAGEPROC) (GLclampf value, GLboolean invert);
+typedef void (APIENTRYP PFNGLCOMPRESSEDTEXIMAGE3DPROC) (GLenum target, GLint level, GLenum internalformat, GLsizei width, GLsizei height, GLsizei depth, GLint border, GLsizei imageSize, const GLvoid *data);
+typedef void (APIENTRYP PFNGLCOMPRESSEDTEXIMAGE2DPROC) (GLenum target, GLint level, GLenum internalformat, GLsizei width, GLsizei height, GLint border, GLsizei imageSize, const GLvoid *data);
+typedef void (APIENTRYP PFNGLCOMPRESSEDTEXIMAGE1DPROC) (GLenum target, GLint level, GLenum internalformat, GLsizei width, GLint border, GLsizei imageSize, const GLvoid *data);
+typedef void (APIENTRYP PFNGLCOMPRESSEDTEXSUBIMAGE3DPROC) (GLenum target, GLint level, GLint xoffset, GLint yoffset, GLint zoffset, GLsizei width, GLsizei height, GLsizei depth, GLenum format, GLsizei imageSize, const GLvoid *data);
+typedef void (APIENTRYP PFNGLCOMPRESSEDTEXSUBIMAGE2DPROC) (GLenum target, GLint level, GLint xoffset, GLint yoffset, GLsizei width, GLsizei height, GLenum format, GLsizei imageSize, const GLvoid *data);
+typedef void (APIENTRYP PFNGLCOMPRESSEDTEXSUBIMAGE1DPROC) (GLenum target, GLint level, GLint xoffset, GLsizei width, GLenum format, GLsizei imageSize, const GLvoid *data);
+typedef void (APIENTRYP PFNGLGETCOMPRESSEDTEXIMAGEPROC) (GLenum target, GLint level, GLvoid *img);
+
+
+
 /*
  * GL_ARB_multitexture (ARB extension 1 and OpenGL 1.2.1)
  */

Modified: haiku/branches/components/gallium3d/src/add-ons/opengl/softpipe/hsp_context.c
===================================================================
--- haiku/branches/components/gallium3d/src/add-ons/opengl/softpipe/hsp_context.c	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/add-ons/opengl/softpipe/hsp_context.c	2009-09-26 15:17:29 UTC (rev 33302)
@@ -309,13 +309,18 @@
 		return false;
 	}
 
+	if (!bitmap || ctxId == 0) {
+		TRACE(&quot;%s&gt; no bitmap or bad context id\n&quot;, __FUNCTION__);
+		st_make_current(NULL, NULL, NULL);
+		return false;
+	}
+
 	pipe_mutex_lock(hsp_dev-&gt;mutex);
 	ctx = hsp_lookup_context(ctxId);
 	pipe_mutex_unlock(hsp_dev-&gt;mutex);
 
-	if (!ctx || !bitmap || ctxId == 0) {
-		TRACE(&quot;%s&gt; bad context, bitmap or context id\n&quot;, __FUNCTION__);
-		st_make_current(NULL, NULL, NULL);
+	if (!ctx) {
+		TRACE(&quot;%s&gt; context not found\n&quot;, __FUNCTION__);
 		return false;
 	}
 
@@ -334,19 +339,6 @@
 	TRACE(&quot;%s&gt; found bitmap: %p with size: %ldx%ld\n&quot;, __FUNCTION__,
 		bitmap, width, height);
 
-	if (bitmap != ctx-&gt;bitmap) {
-		if (ctx-&gt;draw) {
-			framebuffer_destroy(ctx-&gt;draw);
-			ctx-&gt;draw = NULL;
-		}
-		if (ctx-&gt;read) {
-			framebuffer_destroy(ctx-&gt;read);
-			ctx-&gt;read = NULL;
-		}
-		ctx-&gt;bitmap = bitmap;
-		ctx-&gt;st-&gt;pipe-&gt;priv = ctx;
-	}
-
 	GLvisual *visual = &amp;ctx-&gt;st-&gt;ctx-&gt;Visual;
 	if (ctx-&gt;draw == NULL) {
 		TRACE(&quot;%s&gt; creating draw buffer...\n&quot;, __FUNCTION__);
@@ -359,19 +351,13 @@
 
 
 	if (ctx-&gt;draw &amp;&amp; ctx-&gt;read == NULL) {
-		pipe_mutex_lock(ctx-&gt;draw-&gt;mutex);
 		st_make_current(ctx-&gt;st, ctx-&gt;draw-&gt;stfb, ctx-&gt;draw-&gt;stfb);
 		st_resize_framebuffer(ctx-&gt;draw-&gt;stfb, width, height);
-		pipe_mutex_unlock(ctx-&gt;draw-&gt;mutex);
 		ctx-&gt;draw-&gt;bitmap = bitmap;
 	} else if (ctx &amp;&amp; ctx-&gt;draw &amp;&amp; ctx-&gt;read) {
-		pipe_mutex_lock(ctx-&gt;draw-&gt;mutex);
-		pipe_mutex_lock(ctx-&gt;read-&gt;mutex);
 		st_make_current(ctx-&gt;st, ctx-&gt;draw-&gt;stfb, ctx-&gt;read-&gt;stfb);
 		st_resize_framebuffer(ctx-&gt;draw-&gt;stfb, width, height);
 		st_resize_framebuffer(ctx-&gt;read-&gt;stfb, width, height);
-		pipe_mutex_unlock(ctx-&gt;draw-&gt;mutex);
-		pipe_mutex_unlock(ctx-&gt;read-&gt;mutex);
 		ctx-&gt;draw-&gt;bitmap = bitmap;
 		ctx-&gt;read-&gt;bitmap = bitmap;
 	}

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/cso_cache/Jamfile
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/cso_cache/Jamfile	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/cso_cache/Jamfile	2009-09-26 15:17:29 UTC (rev 33302)
@@ -12,8 +12,8 @@
 defines = HAVE_POSIX_MEMALIGN ;
 
 defines = [ FDefines $(defines) ] ;
-SubDirCcFlags $(defines) ;
-SubDirC++Flags $(defines) ;
+SubDirCcFlags $(defines) -ffast-math -Wmissing-field-initializers -std=c99 ;
+SubDirC++Flags $(defines) -ffast-math -Wmissing-field-initializers ;
 SubDirAsFlags $(defines) ;
 
 StaticLibrary &lt;gallium&gt;libcso_cache.a :

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/draw/Jamfile
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/draw/Jamfile	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/draw/Jamfile	2009-09-26 15:17:29 UTC (rev 33302)
@@ -12,8 +12,8 @@
 defines = HAVE_POSIX_MEMALIGN ;
 
 defines = [ FDefines $(defines) ] ;
-SubDirCcFlags $(defines) ;
-SubDirC++Flags $(defines) ;
+SubDirCcFlags $(defines) -ffast-math -Wmissing-field-initializers -std=c99 ;
+SubDirC++Flags $(defines) -ffast-math -Wmissing-field-initializers ;
 SubDirAsFlags $(defines) ;
 
 StaticLibrary &lt;gallium&gt;libdraw.a :

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/draw/draw_pt_post_vs.c
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/draw/draw_pt_post_vs.c	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/draw/draw_pt_post_vs.c	2009-09-26 15:17:29 UTC (rev 33302)
@@ -104,7 +104,7 @@
    unsigned clipped = 0;
    unsigned j;
 
-   if (0) debug_printf(&quot;%s\n&quot;);
+   if (0) debug_printf(&quot;%s\n&quot;, __FUNCTION__);
 
    for (j = 0; j &lt; count; j++) {
       float *position = out-&gt;data[pos];

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/Jamfile
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/Jamfile	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/Jamfile	2009-09-26 15:17:29 UTC (rev 33302)
@@ -12,8 +12,8 @@
 defines = HAVE_POSIX_MEMALIGN ;
 
 defines = [ FDefines $(defines) ] ;
-SubDirCcFlags $(defines) ;
-SubDirC++Flags $(defines) ;
+SubDirCcFlags $(defines) -ffast-math -Wmissing-field-initializers -std=c99 ;
+SubDirC++Flags $(defines) -ffast-math -Wmissing-field-initializers ;
 SubDirAsFlags $(defines) ;
 
 StaticLibrary &lt;gallium&gt;libpipebuffer.a :

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/pb_buffer_fenced.c
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/pb_buffer_fenced.c	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/pb_buffer_fenced.c	2009-09-26 15:17:29 UTC (rev 33302)
@@ -542,7 +542,7 @@
       debug_printf(&quot;%10p %7u %7u\n&quot;,
                    fenced_buf,
                    fenced_buf-&gt;base.base.size,
-                   fenced_buf-&gt;base.base.reference.count);
+                   p_atomic_read(&amp;fenced_buf-&gt;base.base.reference.count));
       curr = next; 
       next = curr-&gt;next;
    }
@@ -556,7 +556,7 @@
       debug_printf(&quot;%10p %7u %7u %10p %s\n&quot;,
                    fenced_buf,
                    fenced_buf-&gt;base.base.size,
-                   fenced_buf-&gt;base.base.reference.count,
+                   p_atomic_read(&amp;fenced_buf-&gt;base.base.reference.count),
                    fenced_buf-&gt;fence,
                    signaled == 0 ? &quot;y&quot; : &quot;n&quot;);
       curr = next; 

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/pb_bufmgr_debug.c
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/pb_bufmgr_debug.c	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/pipebuffer/pb_bufmgr_debug.c	2009-09-26 15:17:29 UTC (rev 33302)
@@ -350,7 +350,7 @@
       buf = LIST_ENTRY(struct pb_debug_buffer, curr, head);
 
       debug_printf(&quot;buffer = %p\n&quot;, buf);
-      debug_printf(&quot;    .size = %p\n&quot;, buf-&gt;base.base.size);
+      debug_printf(&quot;    .size = 0x%x\n&quot;, buf-&gt;base.base.size);
       debug_backtrace_dump(buf-&gt;create_backtrace, PB_DEBUG_CREATE_BACKTRACE);
       
       curr = next; 

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/rbug/Jamfile
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/rbug/Jamfile	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/rbug/Jamfile	2009-09-26 15:17:29 UTC (rev 33302)
@@ -12,8 +12,8 @@
 defines = HAVE_POSIX_MEMALIGN ;
 
 defines = [ FDefines $(defines) ] ;
-SubDirCcFlags $(defines) ;
-SubDirC++Flags $(defines) ;
+SubDirCcFlags $(defines) -ffast-math -Wmissing-field-initializers -std=c99 ;
+SubDirC++Flags $(defines) -ffast-math -Wmissing-field-initializers ;
 SubDirAsFlags $(defines) ;
 
 StaticLibrary &lt;gallium&gt;librbug.a :

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/rtasm/Jamfile
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/rtasm/Jamfile	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/rtasm/Jamfile	2009-09-26 15:17:29 UTC (rev 33302)
@@ -12,8 +12,8 @@
 defines = HAVE_POSIX_MEMALIGN ;
 
 defines = [ FDefines $(defines) ] ;
-SubDirCcFlags $(defines) ;
-SubDirC++Flags $(defines) ;
+SubDirCcFlags $(defines) -ffast-math -Wmissing-field-initializers -std=c99 ;
+SubDirC++Flags $(defines) -ffast-math -Wmissing-field-initializers ;
 SubDirAsFlags $(defines) ;
 
 if $(TARGET_ARCH) = x86 {

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/sct/Jamfile
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/sct/Jamfile	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/sct/Jamfile	2009-09-26 15:17:29 UTC (rev 33302)
@@ -12,8 +12,8 @@
 defines = HAVE_POSIX_MEMALIGN ;
 
 defines = [ FDefines $(defines) ] ;
-SubDirCcFlags $(defines) ;
-SubDirC++Flags $(defines) ;
+SubDirCcFlags $(defines) -ffast-math -Wmissing-field-initializers -std=c99 ;
+SubDirC++Flags $(defines) -ffast-math -Wmissing-field-initializers ;
 SubDirAsFlags $(defines) ;
 
 StaticLibrary &lt;gallium&gt;libsct.a :

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/Jamfile
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/Jamfile	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/Jamfile	2009-09-26 15:17:29 UTC (rev 33302)
@@ -12,8 +12,8 @@
 defines = HAVE_POSIX_MEMALIGN ;
 
 defines = [ FDefines $(defines) ] ;
-SubDirCcFlags $(defines) ;
-SubDirC++Flags $(defines) ;
+SubDirCcFlags $(defines) -ffast-math -Wmissing-field-initializers -std=c99 ;
+SubDirC++Flags $(defines) -ffast-math -Wmissing-field-initializers ;
 SubDirAsFlags $(defines) ;
 
 StaticLibrary &lt;gallium&gt;libtgsi.a :

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_scan.c
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_scan.c	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_scan.c	2009-09-26 15:17:29 UTC (rev 33302)
@@ -132,6 +132,7 @@
                if (file == TGSI_FILE_INPUT) {
                   info-&gt;input_semantic_name[reg] = (ubyte)fulldecl-&gt;Semantic.SemanticName;
                   info-&gt;input_semantic_index[reg] = (ubyte)fulldecl-&gt;Semantic.SemanticIndex;
+                  info-&gt;input_interpolate[reg] = (ubyte)fulldecl-&gt;Declaration.Interpolate;
                   info-&gt;num_inputs++;
                }
                else if (file == TGSI_FILE_OUTPUT) {

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_scan.h
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_scan.h	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_scan.h	2009-09-26 15:17:29 UTC (rev 33302)
@@ -45,6 +45,7 @@
    ubyte num_outputs;
    ubyte input_semantic_name[PIPE_MAX_SHADER_INPUTS]; /**&lt; TGSI_SEMANTIC_x */
    ubyte input_semantic_index[PIPE_MAX_SHADER_INPUTS];
+   ubyte input_interpolate[PIPE_MAX_SHADER_INPUTS];
    ubyte output_semantic_name[PIPE_MAX_SHADER_OUTPUTS]; /**&lt; TGSI_SEMANTIC_x */
    ubyte output_semantic_index[PIPE_MAX_SHADER_OUTPUTS];
 

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_sse2.c
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_sse2.c	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/tgsi/tgsi_sse2.c	2009-09-26 15:17:29 UTC (rev 33302)
@@ -1445,11 +1445,11 @@
    {
       float rgba[NUM_CHANNELS][QUAD_SIZE];
       (*sampler)-&gt;get_samples(*sampler, 
-                              &amp;store[0], 
-                              &amp;store[4], 
-                              &amp;store[8], 
-                              0.0f, /*store[12],  lodbias */
-                              rgba);
+                              &amp;store[0],  /* s */
+                              &amp;store[4],  /* t */
+                              &amp;store[8],  /* r */
+                              store[12],  /* lodbias */
+                              rgba);      /* results */
 
       memcpy( store, rgba, 16 * sizeof(float));
    }
@@ -1855,7 +1855,6 @@
       break;
 
    case TGSI_OPCODE_RCP:
-   /* TGSI_OPCODE_RECIP */
       FETCH( func, *inst, 0, 0, CHAN_X );
       emit_rcp( func, 0, 0 );
       FOR_EACH_DST0_ENABLED_CHANNEL( *inst, chan_index ) {
@@ -1864,7 +1863,6 @@
       break;
 
    case TGSI_OPCODE_RSQ:
-   /* TGSI_OPCODE_RECIPSQRT */
       FETCH( func, *inst, 0, 0, CHAN_X );
       emit_abs( func, 0 );
       emit_rsqrt( func, 1, 0 );
@@ -1962,7 +1960,6 @@
       break;
 
    case TGSI_OPCODE_DP3:
-   /* TGSI_OPCODE_DOT3 */
       FETCH( func, *inst, 0, 0, CHAN_X );
       FETCH( func, *inst, 1, 1, CHAN_X );
       emit_mul( func, 0, 1 );
@@ -1980,7 +1977,6 @@
       break;
 
    case TGSI_OPCODE_DP4:
-   /* TGSI_OPCODE_DOT4 */
       FETCH( func, *inst, 0, 0, CHAN_X );
       FETCH( func, *inst, 1, 1, CHAN_X );
       emit_mul( func, 0, 1 );
@@ -2051,17 +2047,14 @@
       break;
 
    case TGSI_OPCODE_SLT:
-   /* TGSI_OPCODE_SETLT */
       emit_setcc( func, inst, cc_LessThan );
       break;
 
    case TGSI_OPCODE_SGE:
-   /* TGSI_OPCODE_SETGE */
       emit_setcc( func, inst, cc_NotLessThan );
       break;
 
    case TGSI_OPCODE_MAD:
-   /* TGSI_OPCODE_MADD */
       FOR_EACH_DST0_ENABLED_CHANNEL( *inst, chan_index ) {
          FETCH( func, *inst, 0, 0, chan_index );
          FETCH( func, *inst, 1, 1, chan_index );
@@ -2291,7 +2284,7 @@
       break;
 
    case TGSI_OPCODE_SEQ:
-      return 0;
+      emit_setcc( func, inst, cc_Equal );
       break;
 
    case TGSI_OPCODE_SFL:
@@ -2299,7 +2292,7 @@
       break;
 
    case TGSI_OPCODE_SGT:
-      return 0;
+      emit_setcc( func, inst, cc_NotLessThanEqual );
       break;
 
    case TGSI_OPCODE_SIN:
@@ -2311,11 +2304,11 @@
       break;
 
    case TGSI_OPCODE_SLE:
-      return 0;
+      emit_setcc( func, inst, cc_LessThanEqual );
       break;
 
    case TGSI_OPCODE_SNE:
-      return 0;
+      emit_setcc( func, inst, cc_NotEqual );
       break;
 
    case TGSI_OPCODE_STR:
@@ -2379,7 +2372,6 @@
       break;
 
    case TGSI_OPCODE_SSG:
-   /* TGSI_OPCODE_SGN */
       FOR_EACH_DST0_ENABLED_CHANNEL( *inst, chan_index ) {
          FETCH( func, *inst, 0, 0, chan_index );
          emit_sgn( func, 0, 0 );

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/translate/Jamfile
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/translate/Jamfile	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/translate/Jamfile	2009-09-26 15:17:29 UTC (rev 33302)
@@ -12,8 +12,8 @@
 defines = HAVE_POSIX_MEMALIGN ;
 
 defines = [ FDefines $(defines) ] ;
-SubDirCcFlags $(defines) ;
-SubDirC++Flags $(defines) ;
+SubDirCcFlags $(defines) -ffast-math -Wmissing-field-initializers -std=c99 ;
+SubDirC++Flags $(defines) -ffast-math -Wmissing-field-initializers ;
 SubDirAsFlags $(defines) ;
 
 StaticLibrary &lt;gallium&gt;libtranslate.a :

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/Jamfile
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/Jamfile	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/Jamfile	2009-09-26 15:17:29 UTC (rev 33302)
@@ -12,8 +12,8 @@
 defines = HAVE_POSIX_MEMALIGN ;
 
 defines = [ FDefines $(defines) ] ;
-SubDirCcFlags $(defines) ;
-SubDirC++Flags $(defines) ;
+SubDirCcFlags $(defines) -ffast-math -Wmissing-field-initializers -std=c99 ;
+SubDirC++Flags $(defines) -ffast-math -Wmissing-field-initializers ;
 SubDirAsFlags $(defines) ;
 
 StaticLibrary &lt;gallium&gt;libutil.a :
@@ -29,6 +29,8 @@
 	u_debug_symbol.c
 	u_draw_quad.c
 	u_format.c
+	u_format_access.c
+	u_format_table.c
 	u_gen_mipmap.c
 	u_handle_table.c
 	u_hash.c

Modified: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/u_debug.h
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/u_debug.h	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/u_debug.h	2009-09-26 15:17:29 UTC (rev 33302)
@@ -65,6 +65,11 @@
 #define __FUNCTION__ &quot;???&quot;
 #endif
 
+#if defined(__GNUC__)
+#define _util_printf_format(fmt, list) __attribute__ ((format (printf, fmt, list)))
+#else
+#define _util_printf_format(fmt, list)
+#endif
 
 void _debug_vprintf(const char *format, va_list ap);
    
@@ -82,14 +87,17 @@
 /**
  * Print debug messages.
  *
- * The actual channel used to output debug message is platform specific. To 
- * avoid misformating or truncation, follow these rules of thumb:   
+ * The actual channel used to output debug message is platform specific. To
+ * avoid misformating or truncation, follow these rules of thumb:
  * - output whole lines
- * - avoid outputing large strings (512 bytes is the current maximum length 
+ * - avoid outputing large strings (512 bytes is the current maximum length
  * that is guaranteed to be printed in all platforms)
  */
 #if !defined(PIPE_OS_HAIKU)
 static INLINE void
+debug_printf(const char *format, ...) _util_printf_format(1,2);
+
+static INLINE void
 debug_printf(const char *format, ...)
 {
 #ifdef DEBUG

Added: haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/u_format_access.c
===================================================================
--- haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/u_format_access.c	2009-09-26 10:33:18 UTC (rev 33301)
+++ haiku/branches/components/gallium3d/src/libs/mesa/gallium/auxiliary/util/u_format_access.c	2009-09-26 15:17:29 UTC (rev 33302)
@@ -0,0 +1,5386 @@
+/* This file is autogenerated by u_format_access.py from u_format.csv. Do not edit directly. */
+
+/**************************************************************************
+ *
+ * Copyright 2009 VMware, Inc.
+ * All Rights Reserved.
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the
+ * &quot;Software&quot;), to deal in the Software without restriction, including
+ * without limitation the rights to use, copy, modify, merge, publish,
+ * distribute, sub license, and/or sell copies of the Software, and to
+ * permit persons to whom the Software is furnished to do so, subject to
+ * the following conditions:
+ *
+ * The above copyright notice and this permission notice (including the
+ * next paragraph) shall be included in all copies or substantial portions
+ * of the Software.
+ *
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
+ * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT.
+ * IN NO EVENT SHALL VMWARE AND/OR ITS SUPPLIERS BE LIABLE FOR
+ * ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+ * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+ * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+ *
+ **************************************************************************/
+
+/**
+ * @file
+ * Pixel format accessor functions.
+ *
+ * @author Jose Fonseca &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">jfonseca at vmware.com</A>&gt;
+ */
+
+#include &quot;pipe/p_compiler.h&quot;
+#include &quot;u_format.h&quot;
+#include &quot;u_math.h&quot;
+
+static INLINE double
+clamp(double value, double lbound, double ubound)
+{
+   if(value &lt; lbound)
+      return lbound;
+   if(value &gt; ubound)
+      return ubound;
+   return value;
+}
+
+static INLINE float
+clampf(float value, float lbound, float ubound)
+{
+   if(value &lt; lbound)
+      return lbound;
+   if(value &gt; ubound)
+      return ubound;
+   return value;
+}
+
+static INLINE unsigned int
+clampui(unsigned int value, unsigned int lbound, unsigned int ubound)
+{
+   if(value &lt; lbound)
+      return lbound;
+   if(value &gt; ubound)
+      return ubound;
+   return value;
+}
+
+static INLINE int
+clampsi(int value, int lbound, int ubound)
+{
+   if(value &lt; lbound)
+      return lbound;
+   if(value &gt; ubound)
+      return ubound;
+   return value;
+}
+
+static void
+util_format_a8r8g8b8_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint32_t *src_pixel = (const uint32_t *)(src_row + x0*4);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint32_t pixel = *src_pixel++;
+         float b = (float)((pixel &amp; 0xff) * (1.0f/0xff));
+         float g = (float)(((pixel &gt;&gt; 8) &amp; 0xff) * (1.0f/0xff));
+         float r = (float)(((pixel &gt;&gt; 16) &amp; 0xff) * (1.0f/0xff));
+         float a = (float)((pixel &gt;&gt; 24) * (1.0f/0xff));
+         *dst_pixel++ = r; /* r */
+         *dst_pixel++ = g; /* g */
+         *dst_pixel++ = b; /* b */
+         *dst_pixel++ = a; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_x8r8g8b8_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint32_t *src_pixel = (const uint32_t *)(src_row + x0*4);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint32_t pixel = *src_pixel++;
+         float b = (float)((pixel &amp; 0xff) * (1.0f/0xff));
+         float g = (float)(((pixel &gt;&gt; 8) &amp; 0xff) * (1.0f/0xff));
+         float r = (float)(((pixel &gt;&gt; 16) &amp; 0xff) * (1.0f/0xff));
+         *dst_pixel++ = r; /* r */
+         *dst_pixel++ = g; /* g */
+         *dst_pixel++ = b; /* b */
+         *dst_pixel++ = 1; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_b8g8r8a8_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint32_t *src_pixel = (const uint32_t *)(src_row + x0*4);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint32_t pixel = *src_pixel++;
+         float a = (float)((pixel &amp; 0xff) * (1.0f/0xff));
+         float r = (float)(((pixel &gt;&gt; 8) &amp; 0xff) * (1.0f/0xff));
+         float g = (float)(((pixel &gt;&gt; 16) &amp; 0xff) * (1.0f/0xff));
+         float b = (float)((pixel &gt;&gt; 24) * (1.0f/0xff));
+         *dst_pixel++ = r; /* r */
+         *dst_pixel++ = g; /* g */
+         *dst_pixel++ = b; /* b */
+         *dst_pixel++ = a; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_b8g8r8x8_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint32_t *src_pixel = (const uint32_t *)(src_row + x0*4);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint32_t pixel = *src_pixel++;
+         float r = (float)(((pixel &gt;&gt; 8) &amp; 0xff) * (1.0f/0xff));
+         float g = (float)(((pixel &gt;&gt; 16) &amp; 0xff) * (1.0f/0xff));
+         float b = (float)((pixel &gt;&gt; 24) * (1.0f/0xff));
+         *dst_pixel++ = r; /* r */
+         *dst_pixel++ = g; /* g */
+         *dst_pixel++ = b; /* b */
+         *dst_pixel++ = 1; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_a1r5g5b5_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint16_t *src_pixel = (const uint16_t *)(src_row + x0*2);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint16_t pixel = *src_pixel++;
+         float b = (float)((pixel &amp; 0x1f) * (1.0f/0x1f));
+         float g = (float)(((pixel &gt;&gt; 5) &amp; 0x1f) * (1.0f/0x1f));
+         float r = (float)(((pixel &gt;&gt; 10) &amp; 0x1f) * (1.0f/0x1f));
+         float a = (float)((pixel &gt;&gt; 15) * (1.0f/0x1));
+         *dst_pixel++ = r; /* r */
+         *dst_pixel++ = g; /* g */
+         *dst_pixel++ = b; /* b */
+         *dst_pixel++ = a; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_a4r4g4b4_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint16_t *src_pixel = (const uint16_t *)(src_row + x0*2);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint16_t pixel = *src_pixel++;
+         float b = (float)((pixel &amp; 0xf) * (1.0f/0xf));
+         float g = (float)(((pixel &gt;&gt; 4) &amp; 0xf) * (1.0f/0xf));
+         float r = (float)(((pixel &gt;&gt; 8) &amp; 0xf) * (1.0f/0xf));
+         float a = (float)((pixel &gt;&gt; 12) * (1.0f/0xf));
+         *dst_pixel++ = r; /* r */
+         *dst_pixel++ = g; /* g */
+         *dst_pixel++ = b; /* b */
+         *dst_pixel++ = a; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_r5g6b5_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint16_t *src_pixel = (const uint16_t *)(src_row + x0*2);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint16_t pixel = *src_pixel++;
+         float b = (float)((pixel &amp; 0x1f) * (1.0f/0x1f));
+         float g = (float)(((pixel &gt;&gt; 5) &amp; 0x3f) * (1.0f/0x3f));
+         float r = (float)((pixel &gt;&gt; 11) * (1.0f/0x1f));
+         *dst_pixel++ = r; /* r */
+         *dst_pixel++ = g; /* g */
+         *dst_pixel++ = b; /* b */
+         *dst_pixel++ = 1; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_a2b10g10r10_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint32_t *src_pixel = (const uint32_t *)(src_row + x0*4);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint32_t pixel = *src_pixel++;
+         float r = (float)((pixel &amp; 0x3ff) * (1.0f/0x3ff));
+         float g = (float)(((pixel &gt;&gt; 10) &amp; 0x3ff) * (1.0f/0x3ff));
+         float b = (float)(((pixel &gt;&gt; 20) &amp; 0x3ff) * (1.0f/0x3ff));
+         float a = (float)((pixel &gt;&gt; 30) * (1.0f/0x3));
+         *dst_pixel++ = r; /* r */
+         *dst_pixel++ = g; /* g */
+         *dst_pixel++ = b; /* b */
+         *dst_pixel++ = a; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_l8_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint8_t *src_pixel = (const uint8_t *)(src_row + x0*1);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint8_t pixel = *src_pixel++;
+         float rgb = (float)(pixel * (1.0f/0xff));
+         *dst_pixel++ = rgb; /* r */
+         *dst_pixel++ = rgb; /* g */
+         *dst_pixel++ = rgb; /* b */
+         *dst_pixel++ = 1; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_a8_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint8_t *src_pixel = (const uint8_t *)(src_row + x0*1);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint8_t pixel = *src_pixel++;
+         float a = (float)(pixel * (1.0f/0xff));
+         *dst_pixel++ = 0; /* r */
+         *dst_pixel++ = 0; /* g */
+         *dst_pixel++ = 0; /* b */
+         *dst_pixel++ = a; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_i8_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint8_t *src_pixel = (const uint8_t *)(src_row + x0*1);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint8_t pixel = *src_pixel++;
+         float rgba = (float)(pixel * (1.0f/0xff));
+         *dst_pixel++ = rgba; /* r */
+         *dst_pixel++ = rgba; /* g */
+         *dst_pixel++ = rgba; /* b */
+         *dst_pixel++ = rgba; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_a8l8_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint16_t *src_pixel = (const uint16_t *)(src_row + x0*2);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint16_t pixel = *src_pixel++;
+         float rgb = (float)((pixel &amp; 0xff) * (1.0f/0xff));
+         float a = (float)((pixel &gt;&gt; 8) * (1.0f/0xff));
+         *dst_pixel++ = rgb; /* r */
+         *dst_pixel++ = rgb; /* g */
+         *dst_pixel++ = rgb; /* b */
+         *dst_pixel++ = a; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_l16_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint16_t *src_pixel = (const uint16_t *)(src_row + x0*2);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint16_t pixel = *src_pixel++;
+         float rgb = (float)(pixel * (1.0f/0xffff));
+         *dst_pixel++ = rgb; /* r */
+         *dst_pixel++ = rgb; /* g */
+         *dst_pixel++ = rgb; /* b */
+         *dst_pixel++ = 1; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_z16_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint16_t *src_pixel = (const uint16_t *)(src_row + x0*2);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         float z = (float)((*src_pixel++) * (1.0f/0xffff));
+         *dst_pixel++ = z; /* r */
+         *dst_pixel++ = z; /* g */
+         *dst_pixel++ = z; /* b */
+         *dst_pixel++ = 1; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_z32_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint32_t *src_pixel = (const uint32_t *)(src_row + x0*4);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         float z = (float)((*src_pixel++) * (1.0/0xffffffff));
+         *dst_pixel++ = z; /* r */
+         *dst_pixel++ = z; /* g */
+         *dst_pixel++ = z; /* b */
+         *dst_pixel++ = 1; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_z32_float_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const float *src_pixel = (const float *)(src_row + x0*4);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         float z = (*src_pixel++);
+         *dst_pixel++ = z; /* r */
+         *dst_pixel++ = z; /* g */
+         *dst_pixel++ = z; /* b */
+         *dst_pixel++ = 1; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_s8z24_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint32_t *src_pixel = (const uint32_t *)(src_row + x0*4);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint32_t pixel = *src_pixel++;
+         float z = (float)((pixel &amp; 0xffffff) * (1.0/0xffffff));
+         *dst_pixel++ = z; /* r */
+         *dst_pixel++ = z; /* g */
+         *dst_pixel++ = z; /* b */
+         *dst_pixel++ = 1; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_z24s8_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint32_t *src_pixel = (const uint32_t *)(src_row + x0*4);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint32_t pixel = *src_pixel++;
+         float z = (float)((pixel &gt;&gt; 8) * (1.0/0xffffff));
+         *dst_pixel++ = z; /* r */
+         *dst_pixel++ = z; /* g */
+         *dst_pixel++ = z; /* b */
+         *dst_pixel++ = 1; /* a */
+      }
+      src_row += src_stride;
+      dst_row += dst_stride/sizeof(float);
+   }
+}
+
+static void
+util_format_x8z24_unorm_read_4f(float *dst, unsigned dst_stride, const uint8_t *src, unsigned src_stride, unsigned x0, unsigned y0, unsigned w, unsigned h)
+{
+   unsigned x, y;
+   const uint8_t *src_row = src + y0*src_stride;
+   float *dst_row = dst;
+   for (y = 0; y &lt; h; ++y) {
+      const uint32_t *src_pixel = (const uint32_t *)(src_row + x0*4);
+      float *dst_pixel = dst_row;
+      for (x = 0; x &lt; w; ++x) {
+         uint32_t pixel = *src_pixel++;
+         float z = (float)((pixel &amp; 0xffffff) * (1.0/0xffffff));
+         *dst_pixel++ = z; /* r */
+         *dst_pixel++ = z; /* g */
+         *dst_pixel++ = z; /* b */
+         *dst_pixel++ = 1; /* a */
+      }

[... truncated: 37041 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020917.html">[Haiku-commits] r33301 -	haiku/trunk/src/add-ons/kernel/drivers/input/wacom
</A></li>
	<LI>Next message: <A HREF="020920.html">[Haiku-commits] r33303 - haiku/trunk/build/jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20919">[ date ]</a>
              <a href="thread.html#20919">[ thread ]</a>
              <a href="subject.html#20919">[ subject ]</a>
              <a href="author.html#20919">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
