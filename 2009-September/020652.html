<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r33155 - in haiku/trunk/src/tests/kits/net/preflet:	. DialUpAddOn DialUpAddOn/posix DialUpAddOn/posix/net	DialUpAddOn/posix/netinet DummyAddOn MultipleAddOns	ServicesAddOn StatusAddOn add-ons
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33155%20-%20in%20haiku/trunk/src/tests/kits/net/preflet%3A%0A%09.%20DialUpAddOn%20DialUpAddOn/posix%20DialUpAddOn/posix/net%0A%09DialUpAddOn/posix/netinet%20DummyAddOn%20MultipleAddOns%0A%09ServicesAddOn%20StatusAddOn%20add-ons&In-Reply-To=%3C200909161713.n8GHDjXO024781%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020793.html">
   <LINK REL="Next"  HREF="020653.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r33155 - in haiku/trunk/src/tests/kits/net/preflet:	. DialUpAddOn DialUpAddOn/posix DialUpAddOn/posix/net	DialUpAddOn/posix/netinet DummyAddOn MultipleAddOns	ServicesAddOn StatusAddOn add-ons</H1>
    <B>modeenf at mail.berlios.de</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33155%20-%20in%20haiku/trunk/src/tests/kits/net/preflet%3A%0A%09.%20DialUpAddOn%20DialUpAddOn/posix%20DialUpAddOn/posix/net%0A%09DialUpAddOn/posix/netinet%20DummyAddOn%20MultipleAddOns%0A%09ServicesAddOn%20StatusAddOn%20add-ons&In-Reply-To=%3C200909161713.n8GHDjXO024781%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r33155 - in haiku/trunk/src/tests/kits/net/preflet:	. DialUpAddOn DialUpAddOn/posix DialUpAddOn/posix/net	DialUpAddOn/posix/netinet DummyAddOn MultipleAddOns	ServicesAddOn StatusAddOn add-ons">modeenf at mail.berlios.de
       </A><BR>
    <I>Wed Sep 16 19:13:45 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020793.html">[Haiku-commits] r33154 - in haiku/trunk/src/add-ons/kernel/drivers/network: . attansic_l1 attansic_l1/dev attansic_l1/dev/age attansic_l1/dev/mii
</A></li>
        <LI>Next message: <A HREF="020653.html">[Haiku-commits] r33156 - in haiku/trunk/src/tests/kits/net/preflet:	. DummyAddOn MultipleAddOns ServicesAddOn StatusAddOn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20652">[ date ]</a>
              <a href="thread.html#20652">[ thread ]</a>
              <a href="subject.html#20652">[ subject ]</a>
              <a href="author.html#20652">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: modeenf
Date: 2009-09-16 19:12:22 +0200 (Wed, 16 Sep 2009)
New Revision: 33155
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=33155&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=33155&amp;view=rev</A>

Added:
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/AddOn.cpp
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/ConnectionOptionsAddon.cpp
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/ConnectionOptionsAddon.h
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DEVNOTES
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpAddOn.proj
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpAddon.h
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpApplication.cpp
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpPreflet.rdef
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpView.cpp
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpView.h
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/GeneralAddon.cpp
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/GeneralAddon.h
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/IPCPAddon.cpp
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/IPCPAddon.h
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/InterfaceUtils.cpp
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/InterfaceUtils.h
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/Jamfile
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/MessageDriverSettingsUtils.cpp
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/MessageDriverSettingsUtils.h
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/PPPoEAddon.cpp
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/PPPoEAddon.h
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/TODO
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/TextRequestDialog.cpp
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/TextRequestDialog.h
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/posix/
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/posix/net/
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/posix/net/if_arp.h
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/posix/netinet/
   haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/posix/netinet/if_ether.h
   haiku/trunk/src/tests/kits/net/preflet/DummyAddOn/
   haiku/trunk/src/tests/kits/net/preflet/DummyAddOn/AddOn.proj
   haiku/trunk/src/tests/kits/net/preflet/DummyAddOn/DummyAddOn.cpp
   haiku/trunk/src/tests/kits/net/preflet/DummyAddOn/_APP_
   haiku/trunk/src/tests/kits/net/preflet/MultipleAddOns/
   haiku/trunk/src/tests/kits/net/preflet/MultipleAddOns/MultipleAddOn.cpp
   haiku/trunk/src/tests/kits/net/preflet/MultipleAddOns/MultipleAddOn.proj
   haiku/trunk/src/tests/kits/net/preflet/MultipleAddOns/_APP_
   haiku/trunk/src/tests/kits/net/preflet/NetworkSetup.proj
   haiku/trunk/src/tests/kits/net/preflet/ServicesAddOn/
   haiku/trunk/src/tests/kits/net/preflet/ServicesAddOn/AddOn.proj
   haiku/trunk/src/tests/kits/net/preflet/ServicesAddOn/Jamfile
   haiku/trunk/src/tests/kits/net/preflet/ServicesAddOn/ServicesAddOn.cpp
   haiku/trunk/src/tests/kits/net/preflet/ServicesAddOn/_APP_
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/EthernetSettingsView.cpp
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/EthernetSettingsView.h
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/InterfaceStatusItem.cpp
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/InterfaceStatusItem.h
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/NetworkStatusAddOn.cpp
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/NetworkStatusAddOn.h
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/NetworkWindow.cpp
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/NetworkWindow.h
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/Resource.rsrc
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/Setting.cpp
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/Setting.h
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/StatusAddOn.proj
   haiku/trunk/src/tests/kits/net/preflet/StatusAddOn/macosx-networkstatus.jpg
   haiku/trunk/src/tests/kits/net/preflet/add-ons/
   haiku/trunk/src/tests/kits/net/preflet/add-ons/Dummy
   haiku/trunk/src/tests/kits/net/preflet/add-ons/Multiple
   haiku/trunk/src/tests/kits/net/preflet/add-ons/Overview
   haiku/trunk/src/tests/kits/net/preflet/add-ons/Services
   haiku/trunk/src/tests/kits/net/preflet/configure menu.gif
Removed:
   haiku/trunk/src/tests/kits/net/preflet/BoneyardAddOn.cpp
   haiku/trunk/src/tests/kits/net/preflet/BoneyardAddOn.h
   haiku/trunk/src/tests/kits/net/preflet/Network.cpp
   haiku/trunk/src/tests/kits/net/preflet/NetworkWindow.cpp
   haiku/trunk/src/tests/kits/net/preflet/NetworkWindow.h
Modified:
   haiku/trunk/src/tests/kits/net/preflet/Jamfile
   haiku/trunk/src/tests/kits/net/preflet/NetworkSetup.cpp
   haiku/trunk/src/tests/kits/net/preflet/NetworkSetupAddOn.cpp
   haiku/trunk/src/tests/kits/net/preflet/NetworkSetupAddOn.h
   haiku/trunk/src/tests/kits/net/preflet/NetworkSetupProfile.cpp
   haiku/trunk/src/tests/kits/net/preflet/NetworkSetupProfile.h
   haiku/trunk/src/tests/kits/net/preflet/NetworkSetupWindow.cpp
   haiku/trunk/src/tests/kits/net/preflet/NetworkSetupWindow.h
Log:
Code from Philippe Houdoin old machine :)
Fixed code style (not the PPP part)
Updated it with the current Network Pref.
the PPP add-on don't work.
This should work as much as the Network Pref does today.

Deleted: haiku/trunk/src/tests/kits/net/preflet/BoneyardAddOn.cpp

Deleted: haiku/trunk/src/tests/kits/net/preflet/BoneyardAddOn.h

Added: haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/AddOn.cpp
===================================================================
--- haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/AddOn.cpp	2009-09-16 12:47:30 UTC (rev 33154)
+++ haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/AddOn.cpp	2009-09-16 17:12:22 UTC (rev 33155)
@@ -0,0 +1,70 @@
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+
+#include &lt;sys/dirent.h&gt;
+#include &lt;sys/stat.h&gt;
+
+#include &lt;String.h&gt;
+#include &lt;ListView.h&gt;
+#include &lt;ListItem.h&gt;
+#include &lt;ScrollView.h&gt;
+#include &lt;Box.h&gt;
+#include &lt;Button.h&gt; 
+#include &lt;Bitmap.h&gt;
+#include &lt;Alert.h&gt;
+
+#include &lt;NetworkSetupAddOn.h&gt;
+
+#include &quot;DialUpView.h&quot;
+
+class AddOn : public NetworkSetupAddOn
+{
+public:
+		AddOn(image_id addon_image);
+		~AddOn();
+		
+		const char * 	Name();
+		BView * 		CreateView(BRect *bounds);
+};
+
+
+NetworkSetupAddOn * get_nth_addon(image_id image, int index)
+{
+	if (index == 0)
+		return new AddOn(image);
+	return NULL;
+}
+
+// #pragma mark -
+
+AddOn::AddOn(image_id image)
+	: 	NetworkSetupAddOn(image)
+{
+}
+
+
+AddOn::~AddOn()
+{
+}
+
+
+const char * AddOn::Name()
+{
+	return &quot;DialUp&quot;;
+}
+
+
+BView * AddOn::CreateView(BRect *bounds)
+{
+	BRect r = *bounds;
+	
+	if (r.Width() &lt; 200 || r.Height() &lt; 400)
+		r.Set(0, 0, 200, 400);
+
+	BView *view = new DialUpView(r);
+	*bounds = view-&gt;Bounds();
+
+	return view;
+}
+

Added: haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/ConnectionOptionsAddon.cpp
===================================================================
--- haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/ConnectionOptionsAddon.cpp	2009-09-16 12:47:30 UTC (rev 33154)
+++ haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/ConnectionOptionsAddon.cpp	2009-09-16 17:12:22 UTC (rev 33155)
@@ -0,0 +1,268 @@
+/* -----------------------------------------------------------------------
+ * Copyright (c) 2003-2004 Waldemar Kornewald, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">Waldemar.Kornewald at web.de</A>
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a 
+ * copy of this software and associated documentation files (the &quot;Software&quot;), 
+ * to deal in the Software without restriction, including without limitation 
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense, 
+ * and/or sell copies of the Software, and to permit persons to whom the 
+ * Software is furnished to do so, subject to the following conditions:
+ * 
+ * The above copyright notice and this permission notice shall be included in 
+ * all copies or substantial portions of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
+ * DEALINGS IN THE SOFTWARE.
+ * ----------------------------------------------------------------------- */
+
+//-----------------------------------------------------------------------
+// ConnectionOptionsAddon saves the loaded settings.
+// ConnectionOptionsView saves the current settings.
+//-----------------------------------------------------------------------
+
+#include &quot;ConnectionOptionsAddon.h&quot;
+
+#include &quot;MessageDriverSettingsUtils.h&quot;
+
+#include &lt;PPPDefs.h&gt;
+#include &lt;settings_tools.h&gt;
+
+
+// message constants
+static const uint32 kMsgUpdateControls = 'UCTL';
+
+// labels
+#ifdef LANG_GERMAN
+static const char *kLabelConnectionOptions = &quot;Optionen&quot;;
+static const char *kLabelDialOnDemand = &quot;Automatisch Verbinden Bei Zugriff Auf &quot;
+										&quot;Internet&quot;;
+static const char *kLabelAskBeforeDialing = &quot;Vor Dem Verbinden Fragen&quot;;
+static const char *kLabelAutoRedial = &quot;Verbindung Automatisch Wiederherstellen&quot;;
+#else
+static const char *kLabelConnectionOptions = &quot;Options&quot;;
+static const char *kLabelDialOnDemand = &quot;Connect Automatically When Needed&quot;;
+static const char *kLabelAskBeforeDialing = &quot;Ask Before Dialing&quot;;
+static const char *kLabelAutoRedial = &quot;Redial Automatically&quot;;
+#endif
+
+
+ConnectionOptionsAddon::ConnectionOptionsAddon(BMessage *addons)
+	: DialUpAddon(addons),
+	fSettings(NULL),
+	fProfile(NULL),
+	fConnectionOptionsView(NULL)
+{
+}
+
+
+ConnectionOptionsAddon::~ConnectionOptionsAddon()
+{
+}
+
+
+bool
+ConnectionOptionsAddon::LoadSettings(BMessage *settings, BMessage *profile, bool isNew)
+{
+	fIsNew = isNew;
+	fDoesDialOnDemand = fAskBeforeDialing = fDoesAutoRedial = false;
+	fSettings = settings;
+	fProfile = profile;
+	
+	if(fConnectionOptionsView)
+		fConnectionOptionsView-&gt;Reload();
+			// reset all views (empty settings)
+	
+	if(!settings || !profile || isNew)
+		return true;
+	
+	BMessage parameter;
+	int32 index = 0;
+	const char *value;
+	if(FindMessageParameter(PPP_DIAL_ON_DEMAND_KEY, *fSettings, &amp;parameter, &amp;index)
+			&amp;&amp; parameter.FindString(MDSU_VALUES, &amp;value) == B_OK) {
+		if(get_boolean_value(value, false))
+			fDoesDialOnDemand = true;
+		
+		parameter.AddBool(MDSU_VALID, true);
+		fSettings-&gt;ReplaceMessage(MDSU_PARAMETERS, index, &amp;parameter);
+	}
+	
+	index = 0;
+	if(FindMessageParameter(PPP_ASK_BEFORE_DIALING_KEY, *fSettings, &amp;parameter, &amp;index)
+			&amp;&amp; parameter.FindString(MDSU_VALUES, &amp;value) == B_OK) {
+		if(get_boolean_value(value, false))
+			fAskBeforeDialing = true;
+		
+		parameter.AddBool(MDSU_VALID, true);
+		fSettings-&gt;ReplaceMessage(MDSU_PARAMETERS, index, &amp;parameter);
+	}
+	
+	index = 0;
+	if(FindMessageParameter(PPP_AUTO_REDIAL_KEY, *fSettings, &amp;parameter, &amp;index)
+			&amp;&amp; parameter.FindString(MDSU_VALUES, &amp;value) == B_OK) {
+		if(get_boolean_value(value, false))
+			fDoesAutoRedial = true;
+		
+		parameter.AddBool(MDSU_VALID, true);
+		fSettings-&gt;ReplaceMessage(MDSU_PARAMETERS, index, &amp;parameter);
+	}
+	
+	if(fConnectionOptionsView)
+		fConnectionOptionsView-&gt;Reload();
+			// reload new settings
+	
+	return true;
+}
+
+
+void
+ConnectionOptionsAddon::IsModified(bool *settings, bool *profile) const
+{
+	*settings = *profile = false;
+	
+	if(!fSettings || !fConnectionOptionsView)
+		return;
+	
+	*settings = DoesDialOnDemand() != fConnectionOptionsView-&gt;DoesDialOnDemand()
+		|| AskBeforeDialing() != fConnectionOptionsView-&gt;AskBeforeDialing()
+		|| DoesAutoRedial() != fConnectionOptionsView-&gt;DoesAutoRedial();
+}
+
+
+bool
+ConnectionOptionsAddon::SaveSettings(BMessage *settings, BMessage *profile, bool saveTemporary)
+{
+	if(!fSettings || !settings)
+		return false;
+	
+	BMessage parameter;
+	if(fConnectionOptionsView-&gt;DoesDialOnDemand()) {
+		parameter.MakeEmpty();
+		parameter.AddString(MDSU_NAME, PPP_DIAL_ON_DEMAND_KEY);
+		parameter.AddString(MDSU_VALUES, &quot;enabled&quot;);
+		settings-&gt;AddMessage(MDSU_PARAMETERS, &amp;parameter);
+		
+		if(fConnectionOptionsView-&gt;AskBeforeDialing()) {
+			parameter.MakeEmpty();
+			parameter.AddString(MDSU_NAME, PPP_ASK_BEFORE_DIALING_KEY);
+			parameter.AddString(MDSU_VALUES, &quot;enabled&quot;);
+			settings-&gt;AddMessage(MDSU_PARAMETERS, &amp;parameter);
+		}
+	}
+	
+	if(fConnectionOptionsView-&gt;DoesAutoRedial()) {
+		parameter.MakeEmpty();
+		parameter.AddString(MDSU_NAME, PPP_AUTO_REDIAL_KEY);
+		parameter.AddString(MDSU_VALUES, &quot;enabled&quot;);
+		settings-&gt;AddMessage(MDSU_PARAMETERS, &amp;parameter);
+	}
+	
+	return true;
+}
+
+
+bool
+ConnectionOptionsAddon::GetPreferredSize(float *width, float *height) const
+{
+	BRect rect;
+	if(Addons()-&gt;FindRect(DUN_TAB_VIEW_RECT, &amp;rect) != B_OK)
+		rect.Set(0, 0, 200, 300);
+			// set default values
+	
+	if(width)
+		*width = rect.Width();
+	if(height)
+		*height = rect.Height();
+	
+	return true;
+}
+
+
+BView*
+ConnectionOptionsAddon::CreateView(BPoint leftTop)
+{
+	if(!fConnectionOptionsView) {
+		BRect rect;
+		Addons()-&gt;FindRect(DUN_TAB_VIEW_RECT, &amp;rect);
+		fConnectionOptionsView = new ConnectionOptionsView(this, rect);
+		fConnectionOptionsView-&gt;Reload();
+	}
+	
+	fConnectionOptionsView-&gt;MoveTo(leftTop);
+	return fConnectionOptionsView;
+}
+
+
+ConnectionOptionsView::ConnectionOptionsView(ConnectionOptionsAddon *addon, BRect frame)
+	: BView(frame, kLabelConnectionOptions, B_FOLLOW_NONE, 0),
+	fAddon(addon)
+{
+	BRect rect = Bounds();
+	rect.InsetBy(10, 10);
+	rect.bottom = rect.top + 15;
+	fDialOnDemand = new BCheckBox(rect, &quot;DialOnDemand&quot;, kLabelDialOnDemand,
+		new BMessage(kMsgUpdateControls));
+	rect.top = rect.bottom + 3;
+	rect.bottom = rect.top + 15;
+	rect.left += 20;
+	fAskBeforeDialing = new BCheckBox(rect, &quot;AskBeforeDialing&quot;, kLabelAskBeforeDialing,
+		NULL);
+	rect.left -= 20;
+	rect.top = rect.bottom + 20;
+	rect.bottom = rect.top + 15;
+	fAutoRedial = new BCheckBox(rect, &quot;AutoRedial&quot;, kLabelAutoRedial, NULL);
+	
+	AddChild(fDialOnDemand);
+	AddChild(fAskBeforeDialing);
+	AddChild(fAutoRedial);
+}
+
+
+void
+ConnectionOptionsView::Reload()
+{
+	fDialOnDemand-&gt;SetValue(Addon()-&gt;DoesDialOnDemand() || Addon()-&gt;IsNew());
+		// this is enabled by default
+	fAskBeforeDialing-&gt;SetValue(Addon()-&gt;AskBeforeDialing());
+	fAutoRedial-&gt;SetValue(Addon()-&gt;DoesAutoRedial());
+	
+	if(!Addon()-&gt;Settings())
+		return;
+	
+	UpdateControls();
+}
+
+
+void
+ConnectionOptionsView::AttachedToWindow()
+{
+	SetViewColor(Parent()-&gt;ViewColor());
+	fDialOnDemand-&gt;SetTarget(this);
+}
+
+
+void
+ConnectionOptionsView::MessageReceived(BMessage *message)
+{
+	switch(message-&gt;what) {
+		case kMsgUpdateControls:
+			UpdateControls();
+		break;
+		
+		default:
+			BView::MessageReceived(message);
+	}
+}
+
+
+void
+ConnectionOptionsView::UpdateControls()
+{
+	fAskBeforeDialing-&gt;SetEnabled(fDialOnDemand-&gt;Value());
+	fAskBeforeDialing-&gt;SetValue(fDialOnDemand-&gt;Value());
+}

Added: haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/ConnectionOptionsAddon.h
===================================================================
--- haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/ConnectionOptionsAddon.h	2009-09-16 12:47:30 UTC (rev 33154)
+++ haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/ConnectionOptionsAddon.h	2009-09-16 17:12:22 UTC (rev 33155)
@@ -0,0 +1,104 @@
+/* -----------------------------------------------------------------------
+ * Copyright (c) 2003-2004 Waldemar Kornewald, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">Waldemar.Kornewald at web.de</A>
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a 
+ * copy of this software and associated documentation files (the &quot;Software&quot;), 
+ * to deal in the Software without restriction, including without limitation 
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense, 
+ * and/or sell copies of the Software, and to permit persons to whom the 
+ * Software is furnished to do so, subject to the following conditions:
+ * 
+ * The above copyright notice and this permission notice shall be included in 
+ * all copies or substantial portions of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
+ * DEALINGS IN THE SOFTWARE.
+ * ----------------------------------------------------------------------- */
+
+//-----------------------------------------------------------------------
+// ConnectionOptionsAddon saves the loaded settings.
+// ConnectionOptionsView saves the current settings.
+//-----------------------------------------------------------------------
+
+#ifndef _CONNECTION_OPTIONS_ADDON__H
+#define _CONNECTION_OPTIONS_ADDON__H
+
+#include &lt;DialUpAddon.h&gt;
+
+#include &lt;CheckBox.h&gt;
+#include &lt;RadioButton.h&gt;
+
+class ConnectionOptionsView;
+
+
+class ConnectionOptionsAddon : public DialUpAddon {
+	public:
+		ConnectionOptionsAddon(BMessage *addons);
+		virtual ~ConnectionOptionsAddon();
+		
+		bool IsNew() const
+			{ return fIsNew; }
+		
+		bool DoesDialOnDemand() const
+			{ return fDoesDialOnDemand; }
+		bool AskBeforeDialing() const
+			{ return fAskBeforeDialing; }
+		bool DoesAutoRedial() const
+			{ return fDoesAutoRedial; }
+		
+		BMessage *Settings() const
+			{ return fSettings; }
+		BMessage *Profile() const
+			{ return fProfile; }
+		
+		virtual int32 Position() const
+			{ return 50; }
+		virtual bool LoadSettings(BMessage *settings, BMessage *profile, bool isNew);
+		virtual void IsModified(bool *settings, bool *profile) const;
+		virtual bool SaveSettings(BMessage *settings, BMessage *profile,
+			bool saveTemporary);
+		virtual bool GetPreferredSize(float *width, float *height) const;
+		virtual BView *CreateView(BPoint leftTop);
+
+	private:
+		bool fIsNew;
+		bool fDoesDialOnDemand, fAskBeforeDialing, fDoesAutoRedial;
+		BMessage *fSettings, *fProfile;
+			// saves last settings state
+		ConnectionOptionsView *fConnectionOptionsView;
+};
+
+
+class ConnectionOptionsView : public BView {
+	public:
+		ConnectionOptionsView(ConnectionOptionsAddon *addon, BRect frame);
+		
+		ConnectionOptionsAddon *Addon() const
+			{ return fAddon; }
+		void Reload();
+		
+		bool DoesDialOnDemand() const
+			{ return fDialOnDemand-&gt;Value(); }
+		bool AskBeforeDialing() const
+			{ return fAskBeforeDialing-&gt;Value(); }
+		bool DoesAutoRedial() const
+			{ return fAutoRedial-&gt;Value(); }
+		
+		virtual void AttachedToWindow();
+		virtual void MessageReceived(BMessage *message);
+
+	private:
+		void UpdateControls();
+
+	private:
+		ConnectionOptionsAddon *fAddon;
+		BCheckBox *fDialOnDemand, *fAskBeforeDialing, *fAutoRedial;
+};
+
+
+#endif

Added: haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DEVNOTES
===================================================================
--- haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DEVNOTES	2009-09-16 12:47:30 UTC (rev 33154)
+++ haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DEVNOTES	2009-09-16 17:12:22 UTC (rev 33155)
@@ -0,0 +1,34 @@
+--------------------------------------------------------------------------------------
+Notes for add-on developers:
+--------------------------------------------------------------------------------------
+All add-ons must add a &quot;Valid&quot; boolean value to every recognized parameter. The preflet will check if all values were recognized and if not it will ask the user if he wants to edit the interface anyway...
+
+--------------------------------------------------------------------------------------
+Add-on registration:
+--------------------------------------------------------------------------------------
+Tabs and Protocols (protocols are tabs):
+DUN_TAB_ADDON_TYPE : pointer to DialUpAddon object
+
+Authenticators:
+DUN_AUTHENTICATOR_ADDON_TYPE : BMessage with the following entries:
+{
+	&quot;KernelModule&quot; : string
+	&quot;TechnicalName&quot; : string
+	&quot;FriendlyName&quot; : string
+	&quot;Position&quot; : int32
+}
+
+Devices:
+DUN_DEVICE_ADDON_TYPE : pointer to DialUpAddon object
+
+Addons that must be deleted:
+DUN_DELETE_ON_QUIT : pointer to DialUpAddon object - this will be deleted when the preflet quits
+		(you should register all your addons here, too)
+
+
+--------------------------------------------------------------------------------------
+Additional data in the BMessage object for add-ons:
+--------------------------------------------------------------------------------------
+DUN_MESSENGER : BMessenger - This messenger can be used to send messages to the preflet
+DUN_TAB_VIEW_RECT : BRect - This rect should be used for tabs
+DUN_DEVICE_VIEW_WIDTH : float - Maximum width a device add-on's view may have

Added: haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpAddOn.proj
===================================================================
(Binary files differ)


Property changes on: haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpAddOn.proj
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpAddon.h
===================================================================
--- haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpAddon.h	2009-09-16 12:47:30 UTC (rev 33154)
+++ haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpAddon.h	2009-09-16 17:12:22 UTC (rev 33155)
@@ -0,0 +1,141 @@
+/* -----------------------------------------------------------------------
+ * Copyright (c) 2004 Waldemar Kornewald, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">Waldemar.Kornewald at web.de</A>
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a 
+ * copy of this software and associated documentation files (the &quot;Software&quot;), 
+ * to deal in the Software without restriction, including without limitation 
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense, 
+ * and/or sell copies of the Software, and to permit persons to whom the 
+ * Software is furnished to do so, subject to the following conditions:
+ * 
+ * The above copyright notice and this permission notice shall be included in 
+ * all copies or substantial portions of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
+ * DEALINGS IN THE SOFTWARE.
+ * ----------------------------------------------------------------------- */
+
+/*!	\class DialUpAddon
+	\brief Base class for DialUpPreflet add-ons.
+	
+	Dial-Up add-ons must export the following function: \n
+	bool register(BMessage *addons) \n
+	You should add your DialUpAddon object to the given BMessage. \n
+	\n
+	Most add-ons are simple pointers to a DialUpAddon object. \n
+	\n
+	Note for tab-addons: The BView object is deleted AFTER the DialUpAddon (except you
+	remove and delete it in the DialUpAddon destructor).
+*/
+
+#ifndef _DIAL_UP_ADDON__H
+#define _DIAL_UP_ADDON__H
+
+#include &lt;SupportDefs.h&gt;
+#include &lt;Point.h&gt;
+
+
+#define DUN_MAXIMUM_PRIORITY			50
+
+// add-on types
+#define DUN_TAB_ADDON_TYPE				&quot;Tab&quot;
+#define DUN_AUTHENTICATOR_ADDON_TYPE	&quot;Authenticator&quot;
+#define DUN_DEVICE_ADDON_TYPE			&quot;Device&quot;
+#define DUN_PROTOCOL_ADDON_TYPE			&quot;Protocol&quot;
+
+// other information contained in the add-ons BMessage object
+#define DUN_DELETE_ON_QUIT				&quot;DeleteMe&quot;
+	// the DialUpAddon objects in this list will be deleted when the preflet quits
+#define DUN_MESSENGER					&quot;Messenger&quot;
+#define DUN_TAB_VIEW_RECT				&quot;TabViewRect&quot;
+#define DUN_DEVICE_VIEW_WIDTH			&quot;DeviceViewWidth&quot;
+
+
+class DialUpAddon {
+		friend class DialUpView;
+
+	public:
+		//!	Constructor. The BMessage is the one passed to the \c register() function.
+		DialUpAddon(BMessage *addons) : fAddons(addons) {}
+		//!	Destructor. Does nothing.
+		virtual ~DialUpAddon() {}
+		
+		//!	Returns the BMessage object holding all add-ons.
+		BMessage *Addons() const
+			{ return fAddons; }
+		
+		//!	Returns a name readable by humans without much technical knowledge.
+		virtual const char *FriendlyName() const
+			{ return NULL; }
+		//!	Returns the technical name of this module.
+		virtual const char *TechnicalName() const
+			{ return NULL; }
+		//!	Returns the name of the associated kernel module or \c NULL.
+		virtual const char *KernelModuleName() const
+			{ return NULL; }
+		//!	Mostly used by tabs to describe where they should appear.
+		virtual int32 Position() const
+			{ return -1; }
+		//!	Allows setting an order in which modules are asked to add the settings.
+		virtual int32 Priority() const
+			{ return 0; }
+		
+		/*!	\brief Load the given settings and profile.
+			
+			\param isNew Specifies if this is a newly created interface.
+			
+			\return \c true if loading was successful or \c false otherwise.
+		*/
+		virtual bool LoadSettings(BMessage *settings, BMessage *profile, bool isNew)
+			{ return false; }
+		/*!	\brief Returns if this module has a temporary profile.
+			
+			A temporary profile is never stored on the hard-disk, but only passed
+			to the interface on connection. This can include passwords, for example.
+		*/
+		virtual bool HasTemporaryProfile() const
+			{ return false; }
+		//!	Are the settings or the profile modified?
+		virtual void IsModified(bool *settings, bool *profile) const
+			{ *settings = *profile = false; }
+		/*!	\brief Save the given settings and profile.
+			
+			\param saveTemporary Specifies if the temporary profile should be written.
+			
+			\return \c true if saving was successful or \c false otherwise.
+		*/
+		virtual bool SaveSettings(BMessage *settings, BMessage *profile,
+				bool saveTemporary)
+			{ return false; }
+		/*!	\brief Get the preferred view size.
+			
+			\return \c false if this module does not export a BView object.
+		*/
+		virtual bool GetPreferredSize(float *width, float *height) const
+			{ return false; }
+		/*!	\brief Returns the module's BView object.
+			
+			\param leftTop Specifies the view's left-top coordinates.
+		*/
+		virtual BView *CreateView(BPoint leftTop)
+			{ return NULL; }
+
+	private:
+		virtual void _Reserved1() {}
+		virtual void _Reserved2() {}
+		virtual void _Reserved3() {}
+		virtual void _Reserved4() {}
+
+	private:
+		BMessage *fAddons;
+		
+		int32 _reserved[7];
+};
+
+
+#endif

Added: haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpApplication.cpp
===================================================================
--- haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpApplication.cpp	2009-09-16 12:47:30 UTC (rev 33154)
+++ haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpApplication.cpp	2009-09-16 17:12:22 UTC (rev 33155)
@@ -0,0 +1,77 @@
+/* -----------------------------------------------------------------------
+ * Copyright (c) 2003-2004 Waldemar Kornewald, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">Waldemar.Kornewald at web.de</A>
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a 
+ * copy of this software and associated documentation files (the &quot;Software&quot;), 
+ * to deal in the Software without restriction, including without limitation 
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense, 
+ * and/or sell copies of the Software, and to permit persons to whom the 
+ * Software is furnished to do so, subject to the following conditions:
+ * 
+ * The above copyright notice and this permission notice shall be included in 
+ * all copies or substantial portions of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
+ * DEALINGS IN THE SOFTWARE.
+ * ----------------------------------------------------------------------- */
+
+#include &lt;Application.h&gt;
+#include &lt;Window.h&gt;
+
+#include &quot;InterfaceUtils.h&quot;
+
+#include &quot;DialUpView.h&quot;
+
+
+static const char *kSignature = &quot;application/x-vnd.haiku.dial-up-preflet&quot;;
+
+
+class DialUpApplication : public BApplication {
+	public:
+		DialUpApplication();
+};
+
+
+class DialUpWindow : public BWindow {
+	public:
+		DialUpWindow(BRect frame);
+		
+		virtual bool QuitRequested()
+			{ be_app-&gt;PostMessage(B_QUIT_REQUESTED); return true; }
+};
+
+
+int main()
+{
+	new DialUpApplication();
+	
+	be_app-&gt;Run();
+	
+	delete be_app;
+	
+	return 0;
+}
+
+
+DialUpApplication::DialUpApplication()
+	: BApplication(kSignature)
+{
+	BRect rect(150, 50, 450, 435);
+	DialUpWindow *window = new DialUpWindow(rect);
+	window-&gt;MoveTo(center_on_screen(rect, window));
+	window-&gt;Show();
+}
+
+
+DialUpWindow::DialUpWindow(BRect frame)
+	: BWindow(frame, &quot;DialUp&quot;, B_TITLED_WINDOW, B_NOT_RESIZABLE | B_NOT_ZOOMABLE)
+{
+	DialUpView *view = new DialUpView(Bounds());
+	
+	AddChild(view);
+}

Added: haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpPreflet.rdef
===================================================================
--- haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpPreflet.rdef	2009-09-16 12:47:30 UTC (rev 33154)
+++ haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpPreflet.rdef	2009-09-16 17:12:22 UTC (rev 33155)
@@ -0,0 +1,37 @@
+/*
+	DialUpPreflet.rdef
+*/
+
+resource app_signature &quot;application/x-vnd.haiku.dial-up-preflet&quot;;
+
+/* BEOS:APP_FLAGS :
+   00000000 = 							   SINGLE LAUNCH
+   00000001 = 							   MULTIPLE LAUNCH
+   00000002 = 							   EXCLUSIVE LAUNCH
+   00000004 = 			  BACKGROUND APP + SINGLE LAUNCH
+   00000005 = 			  BACKGROUND APP + MULTIPLE LAUNCH
+   00000006 = 			  BACKGROUND APP + EXCLUSIVE LAUNCH
+   00000008 = ARGV_ONLY + 				   SINGLE LAUNCH
+   00000009 = ARGV_ONLY + 				   MULTIPLE LAUNCH
+   0000000A = ARGV_ONLY + 				   EXCLUSIVE LAUNCH
+   0000000C = ARGV_ONLY + BACKGROUND APP + SINGLE LAUNCH
+   0000000D = ARGV_ONLY + BACKGROUND APP + MULTIPLE LAUNCH
+   0000000E = ARGV_ONLY + BACKGROUND APP + EXCLUSIVE LAUNCH
+*/
+
+resource app_flags 0x00000000;
+
+resource app_version {
+	major  = 0,
+	middle = 1,
+	minor  = 0,
+	
+	/* 0 = development	1 = alpha			2 = beta
+	   3 = gamma		4 = golden master	5 = final */
+	variety = 0,
+	
+	internal = 0,
+	
+	short_info = &quot;DialUpPreflet&quot;,
+	long_info = &quot;PPP interface configuration tool.&quot;
+};

Added: haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpView.cpp
===================================================================
--- haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpView.cpp	2009-09-16 12:47:30 UTC (rev 33154)
+++ haiku/trunk/src/tests/kits/net/preflet/DialUpAddOn/DialUpView.cpp	2009-09-16 17:12:22 UTC (rev 33155)
@@ -0,0 +1,906 @@
+/* -----------------------------------------------------------------------
+ * Copyright (c) 2003-2004 Waldemar Kornewald, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">Waldemar.Kornewald at web.de</A>
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a 
+ * copy of this software and associated documentation files (the &quot;Software&quot;), 
+ * to deal in the Software without restriction, including without limitation 
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense, 
+ * and/or sell copies of the Software, and to permit persons to whom the 
+ * Software is furnished to do so, subject to the following conditions:
+ * 
+ * The above copyright notice and this permission notice shall be included in 
+ * all copies or substantial portions of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
+ * DEALINGS IN THE SOFTWARE.
+ * ----------------------------------------------------------------------- */
+
+#include &quot;DialUpView.h&quot;
+#include &quot;DialUpAddon.h&quot;
+
+#include &lt;cstring&gt;
+#include &quot;InterfaceUtils.h&quot;
+#include &quot;MessageDriverSettingsUtils.h&quot;
+#include &quot;TextRequestDialog.h&quot;
+
+// built-in add-ons
+#include &quot;ConnectionOptionsAddon.h&quot;
+#include &quot;GeneralAddon.h&quot;
+#include &quot;IPCPAddon.h&quot;
+#include &quot;PPPoEAddon.h&quot;
+
+#include &lt;PPPInterface.h&gt;
+#include &lt;settings_tools.h&gt;
+#include &lt;TemplateList.h&gt;
+
+#include &lt;Application.h&gt;
+
+#include &lt;Alert.h&gt;
+#include &lt;Button.h&gt;
+#include &lt;MenuField.h&gt;
+#include &lt;MenuItem.h&gt;
+#include &lt;Messenger.h&gt;
+#include &lt;PopUpMenu.h&gt;
+#include &lt;StringView.h&gt;
+#include &lt;TabView.h&gt;
+
+#include &lt;Directory.h&gt;
+#include &lt;Entry.h&gt;
+#include &lt;File.h&gt;
+#include &lt;Path.h&gt;
+
+
+// message constants
+static const uint32 kMsgCreateNew = 'NEWI';
+static const uint32 kMsgFinishCreateNew = 'FNEW';
+static const uint32 kMsgDeleteCurrent = 'DELI';
+static const uint32 kMsgSelectInterface = 'SELI';
+static const uint32 kMsgConnectButton = 'CONI';
+
+// labels
+#ifdef LANG_GERMAN
+static const char *kLabelInterface = &quot;Verbindung: &quot;;
+static const char *kLabelInterfaceName = &quot;Verbindungs-Name: &quot;;
+static const char *kLabelCreateNewInterface = &quot;Neue Verbindung Erstellen&quot;;
+static const char *kLabelCreateNew = &quot;Neu...&quot;;
+static const char *kLabelDeleteCurrent = &quot;Auswahl L&#246;schen&quot;;
+static const char *kLabelConnect = &quot;Verbinden&quot;;
+static const char *kLabelDisconnect = &quot;Trennen&quot;;
+static const char *kLabelOK = &quot;OK&quot;;
+#else
+static const char *kLabelInterface = &quot;Interface: &quot;;
+static const char *kLabelInterfaceName = &quot;Interface Name: &quot;;
+static const char *kLabelCreateNewInterface = &quot;Create New Interface&quot;;
+static const char *kLabelCreateNew = &quot;Create New...&quot;;
+static const char *kLabelDeleteCurrent = &quot;Delete Current&quot;;
+static const char *kLabelConnect = &quot;Connect&quot;;
+static const char *kLabelDisconnect = &quot;Disconnect&quot;;
+static const char *kLabelOK = &quot;OK&quot;;
+#endif
+
+// connection status strings
+#ifdef LANG_GERMAN
+static const char *kTextConnecting = &quot;Verbinde...&quot;;
+static const char *kTextConnectionEstablished = &quot;Verbindung hergestellt.&quot;;
+static const char *kTextNotConnected = &quot;Nicht verbunden.&quot;;
+static const char *kTextDeviceUpFailed = &quot;Konnte Verbindung nicht aufbauen.&quot;;
+static const char *kTextAuthenticating = &quot;Authentifizierung...&quot;;
+static const char *kTextAuthenticationFailed = &quot;Authentifizierung fehlgeschlagen!&quot;;
+static const char *kTextConnectionLost = &quot;Verbindung verloren!&quot;;
+static const char *kTextCreationError = &quot;Fehler beim Initialisieren!&quot;;
+static const char *kTextNoInterfacesFound = &quot;Bitte erstellen Sie eine neue &quot;
+											&quot;Verbindung.&quot;;
+static const char *kTextChooseInterfaceName = &quot;Bitte denken Sie sich einen neuen &quot;
+											&quot;Namen f&#252;r diese Verbindung aus.&quot;;
+#else
+static const char *kTextConnecting = &quot;Connecting...&quot;;
+static const char *kTextConnectionEstablished = &quot;Connection established.&quot;;
+static const char *kTextNotConnected = &quot;Not connected.&quot;;
+static const char *kTextDeviceUpFailed = &quot;Failed to connect.&quot;;
+static const char *kTextAuthenticating = &quot;Authenticating...&quot;;
+static const char *kTextAuthenticationFailed = &quot;Authentication failed!&quot;;
+static const char *kTextConnectionLost = &quot;Connection lost!&quot;;
+static const char *kTextCreationError = &quot;Error creating interface!&quot;;
+static const char *kTextNoInterfacesFound = &quot;Please create a new interface...&quot;;
+static const char *kTextChooseInterfaceName = &quot;Please choose a new name for this &quot;
+											&quot;interface.&quot;;
+#endif
+
+// error strings for alerts
+#ifdef LANG_GERMAN
+static const char *kErrorTitle = &quot;Fehler&quot;;
+static const char *kErrorNoPPPStack = &quot;Fehler: Kein Zugriff auf den PPP Stack!&quot;;
+static const char *kErrorInterfaceExists = &quot;Fehler: Eine Verbindung mit diesem Namen &quot;
+										&quot;existiert bereits!&quot;;
+static const char *kErrorLoadingFailed = &quot;Fehler: Konfiguration ist fehlerhaft! Die &quot;
+										&quot;Einstellungen werden zur&#252;ckgesetzt.&quot;;
+static const char *kErrorSavingFailed = &quot;Fehler: Speichern der Einstellungen ist &quot;
+										&quot;fehlgeschlagen!&quot;;
+#else
+static const char *kErrorTitle = &quot;Error&quot;;
+static const char *kErrorNoPPPStack = &quot;Error: Could not access the PPP stack!&quot;;
+static const char *kErrorInterfaceExists = &quot;Error: An interface with this name &quot;
+										&quot;already exists!&quot;;
+static const char *kErrorLoadingFailed = &quot;Error: Failed loading interface! The &quot;
+										&quot;current settings will be deleted.&quot;;
+static const char *kErrorSavingFailed = &quot;Error: Failed saving interface settings!&quot;;
+#endif
+
+
+static
+status_t
+up_down_thread(void *data)
+{
+	static_cast&lt;DialUpView*&gt;(data)-&gt;UpDownThread();
+	return B_OK;
+}
+
+
+DialUpView::DialUpView(BRect frame)
+	: BView(frame, &quot;DialUpView&quot;, B_FOLLOW_ALL, 0),
+	fListener(this),
+	fUpDownThread(-1),
+	fDriverSettings(NULL),
+	fCurrentItem(NULL),
+	fWatching(PPP_UNDEFINED_INTERFACE_ID),
+	fKeepLabel(false)
+{
+	BRect bounds = Bounds();
+		// for caching
+	SetViewColor(ui_color(B_PANEL_BACKGROUND_COLOR));
+	
+	// add messenger to us so add-ons can contact us
+	BMessenger messenger(this);
+	fAddons.AddMessenger(DUN_MESSENGER, messenger);
+	
+	// create pop-up with all interfaces and &quot;New...&quot;/&quot;Delete current&quot; items
+	fInterfaceMenu = new BPopUpMenu(kLabelCreateNew);
+	BRect rect = bounds;
+	rect.InsetBy(5, 5);
+	rect.bottom = rect.top + 20;
+	fMenuField = new BMenuField(rect, &quot;Interfaces&quot;, kLabelInterface, fInterfaceMenu);
+	fMenuField-&gt;SetDivider(StringWidth(fMenuField-&gt;Label()) + 5);
+	
+	rect.top = rect.bottom + 10;
+	rect.bottom = bounds.bottom
+		- 20 // height of bottom controls
+		- 20; // space for bottom controls
+	fTabView = new BTabView(rect, &quot;TabView&quot;, B_WIDTH_FROM_LABEL);
+	BRect tabViewRect(fTabView-&gt;Bounds());
+	tabViewRect.bottom -= fTabView-&gt;TabHeight();
+	fAddons.AddRect(DUN_TAB_VIEW_RECT, tabViewRect);
+	
+	BRect tmpRect(rect);
+	tmpRect.top += (tmpRect.Height() - 15) / 2;
+	tmpRect.bottom = tmpRect.top + 15;
+	fStringView = new BStringView(tmpRect, &quot;NoInterfacesFound&quot;,
+		kTextNoInterfacesFound);
+	fStringView-&gt;SetAlignment(B_ALIGN_CENTER);
+	fStringView-&gt;Hide();
+	tmpRect.top = tmpRect.bottom + 10;
+	tmpRect.bottom = tmpRect.top + 25;
+	fCreateNewButton = new BButton(tmpRect, &quot;CreateNewButton&quot;,
+		kLabelCreateNewInterface, new BMessage(kMsgCreateNew));
+	fCreateNewButton-&gt;ResizeToPreferred();
+	tmpRect.left = (rect.Width() - fCreateNewButton-&gt;Bounds().Width()) / 2 + rect.left;
+	fCreateNewButton-&gt;MoveTo(tmpRect.left, tmpRect.top);
+	fCreateNewButton-&gt;Hide();
+	
+	rect.top = rect.bottom + 15;
+	rect.bottom = rect.top + 15;
+	rect.right = rect.left + 200;
+	fStatusView = new BStringView(rect, &quot;StatusView&quot;, kTextNotConnected, B_FOLLOW_BOTTOM);
+	
+	rect.InsetBy(0, -5);
+	rect.left = rect.right + 5;
+	rect.right = bounds.right - 5;
+	fConnectButton = new BButton(rect, &quot;ConnectButton&quot;, kLabelConnect,
+		new BMessage(kMsgConnectButton), B_FOLLOW_BOTTOM);
+	
+	AddChild(fMenuField);
+	AddChild(fTabView);
+	AddChild(fStringView);
+	AddChild(fCreateNewButton);

[... truncated: 6570 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020793.html">[Haiku-commits] r33154 - in haiku/trunk/src/add-ons/kernel/drivers/network: . attansic_l1 attansic_l1/dev attansic_l1/dev/age attansic_l1/dev/mii
</A></li>
	<LI>Next message: <A HREF="020653.html">[Haiku-commits] r33156 - in haiku/trunk/src/tests/kits/net/preflet:	. DummyAddOn MultipleAddOns ServicesAddOn StatusAddOn
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20652">[ date ]</a>
              <a href="thread.html#20652">[ thread ]</a>
              <a href="subject.html#20652">[ subject ]</a>
              <a href="author.html#20652">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
