<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r33343 - in haiku/trunk/src/add-ons/media/plugins/theora: . libtheora libtheora/theora libtheora/x86
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33343%20-%20in%0A%20haiku/trunk/src/add-ons/media/plugins/theora%3A%20.%20libtheora%20libtheora/theora%0A%20libtheora/x86&In-Reply-To=%3C20090929202608.10895.10%40bepc.1254209430.fake%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021002.html">
   <LINK REL="Next"  HREF="021025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r33343 - in haiku/trunk/src/add-ons/media/plugins/theora: . libtheora libtheora/theora libtheora/x86</H1>
    <B>Stephan Assmus</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33343%20-%20in%0A%20haiku/trunk/src/add-ons/media/plugins/theora%3A%20.%20libtheora%20libtheora/theora%0A%20libtheora/x86&In-Reply-To=%3C20090929202608.10895.10%40bepc.1254209430.fake%3E"
       TITLE="[Haiku-commits] r33343 - in haiku/trunk/src/add-ons/media/plugins/theora: . libtheora libtheora/theora libtheora/x86">superstippi at gmx.de
       </A><BR>
    <I>Tue Sep 29 20:26:08 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="021002.html">[Haiku-commits] r33343 - in	haiku/trunk/src/add-ons/media/plugins/theora: . libtheora	libtheora/theora libtheora/x86
</A></li>
        <LI>Next message: <A HREF="021025.html">[Haiku-commits] r33343 - in	haiku/trunk/src/add-ons/media/plugins/theora: . libtheora	libtheora/theora libtheora/x86
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21005">[ date ]</a>
              <a href="thread.html#21005">[ thread ]</a>
              <a href="subject.html#21005">[ subject ]</a>
              <a href="author.html#21005">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 2009-09-29 at 17:10:33 [+0200], David McPaul &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">dlmcpaul at gmail.com</A>&gt; wrote:
&gt;<i> 2009/9/29 Stephan Assmus &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">superstippi at gmx.de</A>&gt;:
</I>&gt;<i> &gt; On 2009-09-29 at 11:55:02 [+0200], David McPaul &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">dlmcpaul at gmail.com</A>&gt; 
</I>&gt;<i> &gt; wrote:
</I>&gt;<i> &gt;&gt; 2009/9/29 Stephan Assmus &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">superstippi at gmx.de</A>&gt;:
</I>&gt;<i> &gt;&gt; &gt; On 2009-09-29 at 09:51:52 [+0200], David McPaul &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">dlmcpaul at gmail.com</A>&gt; 
</I>&gt;<i> &gt;&gt; &gt; wrote:
</I>&gt;<i> &gt;&gt; &gt;&gt; 2009/9/29 Stephan Assmus &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">superstippi at gmx.de</A>&gt;:
</I>&gt;<i> &gt;&gt; &gt; I don't understand what you mean. My concern is with manageable code 
</I>&gt;<i> &gt;&gt; &gt; as well. Compared to the code that wraps around the Xiph codecs in 
</I>&gt;<i> &gt;&gt; &gt; our repository, our FFmpeg wrapper is very little code. I consider 
</I>&gt;<i> &gt;&gt; &gt; that more manageable. So I was looking for other compelling 
</I>&gt;<i> &gt;&gt; &gt; arguments.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; We could just drop the whole plugin concept and use ffmpeg for 
</I>&gt;<i> &gt;&gt; everything.  There is no plugin we have that ffmpeg has not got 
</I>&gt;<i> &gt;&gt; covered.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Where do we draw the line?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; To be honest, I see this more practical. IMHO, the plugin concept is 
</I>&gt;<i> &gt; nice, we should definitely keep that. But that doesn't mean we can't 
</I>&gt;<i> &gt; drop most of the plugins if there is a more maintainable way to support 
</I>&gt;<i> &gt; all those formats and codecs. To give a concrete example, I am having 
</I>&gt;<i> &gt; problems with some .wmv files I tested with
</I>&gt;<i> 
</I>&gt;<i> Ticket No?  :-)
</I>
I just found out today that it's actually the fault of the ASF reader, 
before I didn't even know where the problem was.

&gt;<i> &gt;, and by switching to the ASF demuxer in
</I>&gt;<i> &gt; FFmpeg, all the problems go away. Can you give me a good reason why I 
</I>&gt;<i> &gt; should dig into the ASF demuxer code to find the problems when I have a 
</I>&gt;<i> &gt; much simpler solution right in front of me? Haiku is not about 
</I>&gt;<i> &gt; maintaining two code-bases for the very same purpose. I just don't see 
</I>&gt;<i> &gt; the point of it and until now, I have not heard a good argument pro 
</I>&gt;<i> &gt; maintaining our own codec and demuxer implementations, especially when 
</I>&gt;<i> &gt; all but two maintainers have pretty much no time for Haiku anymore.
</I>&gt;<i> 
</I>&gt;<i> That same argument could be used for why are we building Haiku at all or 
</I>&gt;<i> the MediaPlayer app when we have VLC.
</I>
I think the comparison is not fair. It's like you tell me I shouldn't try 
to build a house if I am not interested in making my own stones.

&gt;<i> I like programming Haiku because I get to learn about media formats and 
</I>&gt;<i> codecs and the like and right now I seem to be the only person doing 
</I>&gt;<i> anything with that part of the system.  I wrote a SSE2 conversion routine 
</I>&gt;<i> for Haiku recently, it was difficult but rewarding.
</I>&gt;<i>  I learnt a lot and Haiku video got to be faster on VESA machines.
</I>
That is nice and I agree with the motive, but there will be friction as 
soon as another option becomes available to everyone just interested in the 
solution. For example, I thought to clean up the color conversion code that 
we use in the FFmpeg plugin, since I am using swscale for the encoder, and 
I was actually planning to use it for decoding as well. It does exactly 
what you have created. I have not tested it, but what if it's faster? The 
same problem would arise when somebody comes along with a better 
app_server. The app_server was my playing ground and I know there is a lot 
of room for improvements. The app_server is sufficiently complex and unique 
that it is unlikely that we can re-use something existing and maintained 
elsewhere, but suppose it were the case, then we'd have the same situation: 
app_server is my playground, but everybody is interested in it being as 
fast and robust as possible. So what should be done in such a situation?

&gt;<i> Yes, i don't have enough time to do everything or even enough knowledge 
</I>&gt;<i> to be able to but we have that problem all over Haiku
</I>
But that's exactly the reason why we should re-use simple blocks of 
functionality where possible. Such that the project doesn't overwhelm 
everybody. We've got to put some checkmarks at least somewhere.

&gt;<i> We need more developers and I think it is easier for a new developer to 
</I>&gt;<i> step up and work on our codebase and get changes done than it will be for 
</I>&gt;<i> someone to make changes to ffmpeg.
</I>
We can just keep the code in the repository and if someone comes along and 
is interested in picking up the work, then that's awesome. I am just 
interested in rock-solid media capabilities, because I find projects such 
as Clockwerk much more interesting to spend time on.

[...]
&gt;<i> &gt;&gt; The Ogg reader code seems more complex but I don't know anything about 
</I>&gt;<i> &gt;&gt; the ogg container format to decide.
</I>&gt;<i> &gt;&gt; The original author looks to have created a track subclass for each 
</I>&gt;<i> &gt;&gt; type of stream available in the container.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; So to fix the issue raised we just need to create a new subclass for 
</I>&gt;<i> &gt;&gt; the missing codec.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So you are saying we are better off when you (or someone else) spends 
</I>&gt;<i> &gt; his valuable time to try to dig into the OggReader source code to add 
</I>&gt;<i> &gt; the missing features, as well as fixing any issues that may pop up, 
</I>&gt;<i> &gt; when all we have to do is configure FFmpeg with Ogg support and be done 
</I>&gt;<i> &gt; with it? Especially when that would also take care of encoding for free?
</I>&gt;<i> 
</I>&gt;<i> Well, it is my time to spend.  There is not much else in Haiku that 
</I>&gt;<i> interests me so I doubt I would do much else.
</I>
I don't really know what to say to that, see below.

&gt;<i> &gt; It may seem like I have made up my own opinion on this subject, but I 
</I>&gt;<i> &gt; am actually trying to hear good arguments pro keeping the code we have. 
</I>&gt;<i> &gt; After all, it was hard work to create it. That a lot of the maintainers 
</I>&gt;<i> &gt; don't have time to keep working on their code is one thing. But if 
</I>&gt;<i> &gt; there are no other compelling arguments, like for example the Haiku 
</I>&gt;<i> &gt; code is multi-threaded, while FFmpeg is not... (which is not the case), 
</I>&gt;<i> &gt; or other technical reasons, I just don't see the point.
</I>&gt;<i> 
</I>&gt;<i> There is no argument, we need developers.  If we can attract developers 
</I>&gt;<i> who are interested in writing and maintaining media code then we should 
</I>&gt;<i> have the code.  If we cannot then we just become another user of ffmpeg.
</I>
But what is so bad about that?

&gt;<i> Certainly the last thing Haiku needs is to rely on me fixing Media issues.
</I>
You need to make up your mind. Either it's about experimenting and 
learning, or it is about implementing the best solution to a problem, even 
if that means to re-use existing code. One part of the equation is 
certainly the perceived progress. If you have enough time to spend on 
coding, such that everyone feels things are moving forward fast enough, 
then why would anyone look for other options? Do you want to work on the 
OggReader? Or do you want to maintain ASF, MOV and MP4? Personally, I am 
interested in reliable demuxing of the videos I happen to come across, and 
I am very interested in support for the Xiph codecs, especially also 
encoding. That just seems like a lot of work if it were to be based on our 
own plug-in.

Best regards,
-Stephan

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="021002.html">[Haiku-commits] r33343 - in	haiku/trunk/src/add-ons/media/plugins/theora: . libtheora	libtheora/theora libtheora/x86
</A></li>
	<LI>Next message: <A HREF="021025.html">[Haiku-commits] r33343 - in	haiku/trunk/src/add-ons/media/plugins/theora: . libtheora	libtheora/theora libtheora/x86
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21005">[ date ]</a>
              <a href="thread.html#21005">[ thread ]</a>
              <a href="subject.html#21005">[ subject ]</a>
              <a href="author.html#21005">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
