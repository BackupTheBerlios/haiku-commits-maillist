<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r33089 - in	haiku/branches/components/gallium3d/src/add-ons/opengl: . i915
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33089%20-%20in%0A%09haiku/branches/components/gallium3d/src/add-ons/opengl%3A%20.%20i915&In-Reply-To=%3C200909121116.n8CBGuBc006068%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020579.html">
   <LINK REL="Next"  HREF="020581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r33089 - in	haiku/branches/components/gallium3d/src/add-ons/opengl: . i915</H1>
    <B>aljen at mail.berlios.de</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r33089%20-%20in%0A%09haiku/branches/components/gallium3d/src/add-ons/opengl%3A%20.%20i915&In-Reply-To=%3C200909121116.n8CBGuBc006068%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r33089 - in	haiku/branches/components/gallium3d/src/add-ons/opengl: . i915">aljen at mail.berlios.de
       </A><BR>
    <I>Sat Sep 12 13:16:56 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="020579.html">[Haiku-commits] r33088 - in haiku/branches/components/gallium3d:	headers/libs/drm headers/private/opengl/GL/internal	src/kits/opengl/mesa src/kits/opengl/mesa/drivers	src/kits/opengl/mesa/drivers/dri	src/kits/opengl/mesa/drivers/dri/common	src/kits/opengl/mesa/drivers/dri/common/xmlpool	src/kits/opengl/mesa/gallium	src/kits/opengl/mesa/gallium/state_trackers	src/kits/opengl/mesa/gallium/state_trackers/dri
</A></li>
        <LI>Next message: <A HREF="020581.html">[Haiku-commits] r33090 - in	haiku/branches/components/gallium3d/src/add-ons/opengl/i915: . gem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20580">[ date ]</a>
              <a href="thread.html#20580">[ thread ]</a>
              <a href="subject.html#20580">[ subject ]</a>
              <a href="author.html#20580">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: aljen
Date: 2009-09-12 13:16:34 +0200 (Sat, 12 Sep 2009)
New Revision: 33089
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=33089&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=33089&amp;view=rev</A>

Added:
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/Jamfile
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_batch.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_blit.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_blit.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_buffer.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_buffer.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_clear.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_context.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_context.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_debug.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_debug.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_debug_fp.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_flush.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_fpc.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_fpc_emit.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_fpc_translate.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_prim_emit.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_prim_vbuf.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_reg.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_screen.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_screen.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_state.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_state.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_state_derived.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_state_dynamic.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_state_emit.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_state_immediate.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_state_inlines.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_state_sampler.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_surface.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_texture.c
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_texture.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/intel_batchbuffer.h
   haiku/branches/components/gallium3d/src/add-ons/opengl/i915/intel_winsys.h
Modified:
   haiku/branches/components/gallium3d/src/add-ons/opengl/Jamfile
Log:
Added gallium3d i915 driver (not working yet :) )


Modified: haiku/branches/components/gallium3d/src/add-ons/opengl/Jamfile
===================================================================
--- haiku/branches/components/gallium3d/src/add-ons/opengl/Jamfile	2009-09-12 11:09:08 UTC (rev 33088)
+++ haiku/branches/components/gallium3d/src/add-ons/opengl/Jamfile	2009-09-12 11:16:34 UTC (rev 33089)
@@ -1,3 +1,4 @@
 SubDir HAIKU_TOP src add-ons opengl ;
 
-SubInclude HAIKU_TOP src add-ons opengl softpipe ;
\ No newline at end of file
+SubInclude HAIKU_TOP src add-ons opengl i915 ;
+SubInclude HAIKU_TOP src add-ons opengl softpipe ;

Added: haiku/branches/components/gallium3d/src/add-ons/opengl/i915/Jamfile
===================================================================
--- haiku/branches/components/gallium3d/src/add-ons/opengl/i915/Jamfile	2009-09-12 11:09:08 UTC (rev 33088)
+++ haiku/branches/components/gallium3d/src/add-ons/opengl/i915/Jamfile	2009-09-12 11:16:34 UTC (rev 33089)
@@ -0,0 +1,51 @@
+SubDir HAIKU_TOP src add-ons opengl i915 ;
+
+local defines ;
+defines = BEOS_THREADS GNU_ASSEMBLER ;
+
+if $(TARGET_ARCH) = x86 {
+	defines += USE_X86_ASM USE_MMX_ASM USE_3DNOW_ASM USE_SSE_ASM ;
+} else {
+	# Not yet supported, as current Mesa3D PPC assembly is Linux-dependent!
+	# defines += USE_PPC_ASM ;
+}
+
+SubDirC++Flags [ FDefines $(defines) ] ;
+
+UsePrivateHeaders interface opengl ;
+
+UseHeaders [ FDirName $(HAIKU_TOP) src add-ons opengl trace ] ;
+UseHeaders [ FDirName $(HAIKU_TOP) src kits opengl hgl ] ;
+UseHeaders [ FDirName $(HAIKU_TOP) src kits opengl mesa ] ;
+UseHeaders [ FDirName $(HAIKU_TOP) src kits opengl mesa main ] ;
+UseHeaders [ FDirName $(HAIKU_TOP) src kits opengl mesa gallium include ] ;
+UseHeaders [ FDirName $(HAIKU_TOP) src kits opengl mesa gallium auxiliary ] ;
+UseHeaders [ FDirName $(HAIKU_TOP) src kits opengl mesa glapi ] ;
+UseHeaders [ FDirName $(HAIKU_TOP) src kits opengl mesa tnl ] ;
+UseHeaders [ FDirName $(HAIKU_TOP) src kits opengl mesa x86 ] ;
+UseHeaders [ FDirName $(HAIKU_TOP) src kits opengl mesa ppc ] ;
+
+Addon i915 :
+    i915_blit.c
+    i915_buffer.c
+    i915_clear.c
+    i915_context.c
+    i915_debug.c
+    i915_debug_fp.c
+    i915_flush.c
+    i915_fpc_emit.c
+    i915_fpc_translate.c
+    i915_prim_emit.c
+    i915_prim_vbuf.c
+    i915_screen.c
+    i915_state.c
+    i915_state_derived.c
+    i915_state_dynamic.c
+    i915_state_emit.c
+    i915_state_immediate.c
+    i915_state_sampler.c
+    i915_surface.c
+    i915_texture.c
+	: libGL.so libmesa.a be $(TARGET_LIBSUPC++)
+;
+

Added: haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_batch.h
===================================================================
--- haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_batch.h	2009-09-12 11:09:08 UTC (rev 33088)
+++ haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_batch.h	2009-09-12 11:16:34 UTC (rev 33089)
@@ -0,0 +1,47 @@
+/**************************************************************************
+ * 
+ * Copyright 2007 Tungsten Graphics, Inc., Cedar Park, Texas.
+ * All Rights Reserved.
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the
+ * &quot;Software&quot;), to deal in the Software without restriction, including
+ * without limitation the rights to use, copy, modify, merge, publish,
+ * distribute, sub license, and/or sell copies of the Software, and to
+ * permit persons to whom the Software is furnished to do so, subject to
+ * the following conditions:
+ * 
+ * The above copyright notice and this permission notice (including the
+ * next paragraph) shall be included in all copies or substantial portions
+ * of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
+ * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT.
+ * IN NO EVENT SHALL TUNGSTEN GRAPHICS AND/OR ITS SUPPLIERS BE LIABLE FOR
+ * ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+ * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+ * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+ * 
+ **************************************************************************/
+
+#ifndef I915_BATCH_H
+#define I915_BATCH_H
+
+#include &quot;intel_batchbuffer.h&quot;
+
+#define BEGIN_BATCH(dwords, relocs) \
+   (intel_batchbuffer_check(i915-&gt;batch, dwords, relocs))
+
+#define OUT_BATCH(dword) \
+   intel_batchbuffer_dword(i915-&gt;batch, dword)
+
+#define OUT_RELOC(buf, usage, offset) \
+   intel_batchbuffer_reloc(i915-&gt;batch, buf, usage, offset)
+
+#define FLUSH_BATCH(fence) do {                 \
+   intel_batchbuffer_flush(i915-&gt;batch, fence); \
+   i915-&gt;hardware_dirty = ~0;                   \
+} while (0)
+
+#endif

Added: haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_blit.c
===================================================================
--- haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_blit.c	2009-09-12 11:09:08 UTC (rev 33088)
+++ haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_blit.c	2009-09-12 11:16:34 UTC (rev 33089)
@@ -0,0 +1,151 @@
+/**************************************************************************
+ * 
+ * Copyright 2003 Tungsten Graphics, Inc., Cedar Park, Texas.
+ * All Rights Reserved.
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the
+ * &quot;Software&quot;), to deal in the Software without restriction, including
+ * without limitation the rights to use, copy, modify, merge, publish,
+ * distribute, sub license, and/or sell copies of the Software, and to
+ * permit persons to whom the Software is furnished to do so, subject to
+ * the following conditions:
+ * 
+ * The above copyright notice and this permission notice (including the
+ * next paragraph) shall be included in all copies or substantial portions
+ * of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
+ * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT.
+ * IN NO EVENT SHALL TUNGSTEN GRAPHICS AND/OR ITS SUPPLIERS BE LIABLE FOR
+ * ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+ * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+ * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+ * 
+ **************************************************************************/
+
+
+#include &quot;i915_blit.h&quot;
+#include &quot;i915_reg.h&quot;
+#include &quot;i915_batch.h&quot;
+#include &quot;i915_debug.h&quot;
+
+#define FILE_DEBUG_FLAG DEBUG_BLIT
+
+void
+i915_fill_blit(struct i915_context *i915,
+               unsigned cpp,
+               unsigned short dst_pitch,
+               struct intel_buffer *dst_buffer,
+               unsigned dst_offset,
+               short x, short y, 
+               short w, short h, 
+               unsigned color)
+{
+   unsigned BR13, CMD;
+
+
+   I915_DBG(i915,
+      &quot;%s dst:buf(%p)/%d+%d %d,%d sz:%dx%d\n&quot;,
+      __FUNCTION__,
+      dst_buffer, dst_pitch, dst_offset, x, y, w, h);
+
+   switch (cpp) {
+   case 1:
+   case 2:
+   case 3:
+      BR13 = (((int) dst_pitch) &amp; 0xffff) |
+         (0xF0 &lt;&lt; 16) | (1 &lt;&lt; 24);
+      CMD = XY_COLOR_BLT_CMD;
+      break;
+   case 4:
+      BR13 = (((int) dst_pitch) &amp; 0xffff) |
+         (0xF0 &lt;&lt; 16) | (1 &lt;&lt; 24) | (1 &lt;&lt; 25);
+      CMD = (XY_COLOR_BLT_CMD | XY_COLOR_BLT_WRITE_ALPHA |
+             XY_COLOR_BLT_WRITE_RGB);
+      break;
+   default:
+      return;
+   }
+
+   if (!BEGIN_BATCH(6, 1)) {
+      FLUSH_BATCH(NULL);
+      assert(BEGIN_BATCH(6, 1));
+   }
+   OUT_BATCH(CMD);
+   OUT_BATCH(BR13);
+   OUT_BATCH((y &lt;&lt; 16) | x);
+   OUT_BATCH(((y + h) &lt;&lt; 16) | (x + w));
+   OUT_RELOC(dst_buffer, INTEL_USAGE_2D_TARGET, dst_offset);
+   OUT_BATCH(color);
+   FLUSH_BATCH(NULL);
+}
+
+void
+i915_copy_blit(struct i915_context *i915,
+               unsigned do_flip,
+               unsigned cpp,
+               unsigned short src_pitch,
+               struct intel_buffer *src_buffer,
+               unsigned src_offset,
+               unsigned short dst_pitch,
+               struct intel_buffer *dst_buffer,
+               unsigned dst_offset,
+               short src_x, short src_y,
+               short dst_x, short dst_y, 
+               short w, short h)
+{
+   unsigned CMD, BR13;
+   int dst_y2 = dst_y + h;
+   int dst_x2 = dst_x + w;
+
+
+   I915_DBG(i915,
+      &quot;%s src:buf(%p)/%d+%d %d,%d dst:buf(%p)/%d+%d %d,%d sz:%dx%d\n&quot;,
+      __FUNCTION__,
+      src_buffer, src_pitch, src_offset, src_x, src_y,
+      dst_buffer, dst_pitch, dst_offset, dst_x, dst_y, w, h);
+
+   switch (cpp) {
+   case 1:
+   case 2:
+   case 3:
+      BR13 = (((int) dst_pitch) &amp; 0xffff) |
+         (0xCC &lt;&lt; 16) | (1 &lt;&lt; 24);
+      CMD = XY_SRC_COPY_BLT_CMD;
+      break;
+   case 4:
+      BR13 = (((int) dst_pitch) &amp; 0xffff) |
+             (0xCC &lt;&lt; 16) | (1 &lt;&lt; 24) | (1 &lt;&lt; 25);
+      CMD = (XY_SRC_COPY_BLT_CMD | XY_SRC_COPY_BLT_WRITE_ALPHA |
+            XY_SRC_COPY_BLT_WRITE_RGB);
+      break;
+   default:
+      return;
+   }
+
+   if (dst_y2 &lt; dst_y || dst_x2 &lt; dst_x) {
+      return;
+   }
+
+   /* Hardware can handle negative pitches but loses the ability to do
+    * proper overlapping blits in that case.  We don't really have a
+    * need for either at this stage.
+    */
+   assert (dst_pitch &gt; 0 &amp;&amp; src_pitch &gt; 0);
+
+   if (!BEGIN_BATCH(8, 2)) {
+      FLUSH_BATCH(NULL);
+      assert(BEGIN_BATCH(8, 2));
+   }
+   OUT_BATCH(CMD);
+   OUT_BATCH(BR13);
+   OUT_BATCH((dst_y &lt;&lt; 16) | dst_x);
+   OUT_BATCH((dst_y2 &lt;&lt; 16) | dst_x2);
+   OUT_RELOC(dst_buffer, INTEL_USAGE_2D_TARGET, dst_offset);
+   OUT_BATCH((src_y &lt;&lt; 16) | src_x);
+   OUT_BATCH(((int) src_pitch &amp; 0xffff));
+   OUT_RELOC(src_buffer, INTEL_USAGE_2D_SOURCE, src_offset);
+   FLUSH_BATCH(NULL);
+}

Added: haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_blit.h
===================================================================
--- haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_blit.h	2009-09-12 11:09:08 UTC (rev 33088)
+++ haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_blit.h	2009-09-12 11:16:34 UTC (rev 33089)
@@ -0,0 +1,55 @@
+/**************************************************************************
+ * 
+ * Copyright 2003 Tungsten Graphics, Inc., Cedar Park, Texas.
+ * All Rights Reserved.
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the
+ * &quot;Software&quot;), to deal in the Software without restriction, including
+ * without limitation the rights to use, copy, modify, merge, publish,
+ * distribute, sub license, and/or sell copies of the Software, and to
+ * permit persons to whom the Software is furnished to do so, subject to
+ * the following conditions:
+ * 
+ * The above copyright notice and this permission notice (including the
+ * next paragraph) shall be included in all copies or substantial portions
+ * of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
+ * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT.
+ * IN NO EVENT SHALL TUNGSTEN GRAPHICS AND/OR ITS SUPPLIERS BE LIABLE FOR
+ * ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+ * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+ * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+ * 
+ **************************************************************************/
+
+#ifndef I915_BLIT_H
+#define I915_BLIT_H
+
+#include &quot;i915_context.h&quot;
+
+extern void i915_copy_blit(struct i915_context *i915,
+                           unsigned do_flip,
+                           unsigned cpp,
+                           unsigned short src_pitch,
+                           struct intel_buffer *src_buffer,
+                           unsigned src_offset,
+                           unsigned short dst_pitch,
+                           struct intel_buffer *dst_buffer,
+                           unsigned dst_offset,
+                           short srcx, short srcy,
+                           short dstx, short dsty,
+                           short w, short h);
+
+extern void i915_fill_blit(struct i915_context *i915,
+                           unsigned cpp,
+                           unsigned short dst_pitch,
+                           struct intel_buffer *dst_buffer,
+                           unsigned dst_offset,
+                           short x, short y,
+                           short w, short h, unsigned color);
+
+
+#endif

Added: haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_buffer.c
===================================================================
--- haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_buffer.c	2009-09-12 11:09:08 UTC (rev 33088)
+++ haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_buffer.c	2009-09-12 11:16:34 UTC (rev 33089)
@@ -0,0 +1,136 @@
+/**************************************************************************
+ *
+ * Copyright &#169; 2009 Jakob Bornecrantz
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the &quot;Software&quot;),
+ * to deal in the Software without restriction, including without limitation
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ * and/or sell copies of the Software, and to permit persons to whom the
+ * Software is furnished to do so, subject to the following conditions:
+ *
+ * The above copyright notice and this permission notice (including the next
+ * paragraph) shall be included in all copies or substantial portions of the
+ * Software.
+ *
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
+ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+ * DEALINGS IN THE SOFTWARE.
+ *
+ **************************************************************************/
+
+#include &quot;util/u_memory.h&quot;
+#include &quot;i915_screen.h&quot;
+#include &quot;i915_buffer.h&quot;
+
+struct intel_buffer;
+
+struct i915_buffer
+{
+   struct pipe_buffer base;
+
+   struct intel_buffer *ibuf; /** hw buffer */
+
+   void *data; /**&lt; user and malloc data */
+   boolean own; /**&lt; we own the data incase of malloc */
+};
+
+static INLINE struct i915_buffer *
+i915_buffer(struct pipe_buffer *buffer)
+{
+   return (struct i915_buffer *)buffer;
+}
+
+static struct pipe_buffer *
+i915_buffer_create(struct pipe_screen *screen,
+                   unsigned alignment,
+                   unsigned usage,
+                   unsigned size)
+{
+   struct i915_buffer *buf = CALLOC_STRUCT(i915_buffer);
+
+   if (!buf)
+      return NULL;
+
+   pipe_reference_init(&amp;buf-&gt;base.reference, 1);
+   buf-&gt;base.alignment = alignment;
+   buf-&gt;base.screen = screen;
+   buf-&gt;base.usage = usage;
+   buf-&gt;base.size = size;
+   buf-&gt;data = MALLOC(size);
+   buf-&gt;own = TRUE;
+
+   if (!buf-&gt;data)
+      goto err;
+
+   return &amp;buf-&gt;base;
+
+err:
+   FREE(buf);
+   return NULL;
+}
+
+static struct pipe_buffer *
+i915_user_buffer_create(struct pipe_screen *screen,
+                        void *ptr,
+                        unsigned bytes)
+{
+   struct i915_buffer *buf = CALLOC_STRUCT(i915_buffer);
+
+   if (!buf)
+      return NULL;
+
+   pipe_reference_init(&amp;buf-&gt;base.reference, 1);
+   buf-&gt;base.alignment = 0;
+   buf-&gt;base.screen = screen;
+   buf-&gt;base.usage = 0;
+   buf-&gt;base.size = bytes;
+   buf-&gt;data = ptr;
+   buf-&gt;own = FALSE;
+
+   return &amp;buf-&gt;base;
+}
+
+static void *
+i915_buffer_map(struct pipe_screen *screen,
+                struct pipe_buffer *buffer,
+                unsigned usage)
+{
+   struct i915_buffer *buf = i915_buffer(buffer);
+   assert(!buf-&gt;ibuf);
+   return buf-&gt;data;
+}
+
+static void
+i915_buffer_unmap(struct pipe_screen *screen,
+                  struct pipe_buffer *buffer)
+{
+   struct i915_buffer *buf = i915_buffer(buffer);
+   assert(!buf-&gt;ibuf);
+}
+
+static void
+i915_buffer_destroy(struct pipe_buffer *buffer)
+{
+   struct i915_buffer *buf = i915_buffer(buffer);
+   assert(!buf-&gt;ibuf);
+
+   if (buf-&gt;own)
+      FREE(buf-&gt;data);
+   FREE(buf);
+}
+
+void i915_init_screen_buffer_functions(struct i915_screen *screen)
+{
+   screen-&gt;base.buffer_create = i915_buffer_create;
+   screen-&gt;base.user_buffer_create = i915_user_buffer_create;
+   screen-&gt;base.buffer_map = i915_buffer_map;
+   screen-&gt;base.buffer_map_range = NULL;
+   screen-&gt;base.buffer_flush_mapped_range = NULL;
+   screen-&gt;base.buffer_unmap = i915_buffer_unmap;
+   screen-&gt;base.buffer_destroy = i915_buffer_destroy;
+}

Added: haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_buffer.h
===================================================================
--- haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_buffer.h	2009-09-12 11:09:08 UTC (rev 33088)
+++ haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_buffer.h	2009-09-12 11:16:34 UTC (rev 33089)
@@ -0,0 +1,31 @@
+/**************************************************************************
+ *
+ * Copyright &#169; 2009 Jakob Bornecrantz
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the &quot;Software&quot;),
+ * to deal in the Software without restriction, including without limitation
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ * and/or sell copies of the Software, and to permit persons to whom the
+ * Software is furnished to do so, subject to the following conditions:
+ *
+ * The above copyright notice and this permission notice (including the next
+ * paragraph) shall be included in all copies or substantial portions of the
+ * Software.
+ *
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
+ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+ * DEALINGS IN THE SOFTWARE.
+ *
+ **************************************************************************/
+
+#ifndef I915_BUFFER_H
+#define I915_BUFFER_H
+
+void i915_init_screen_buffer_functions(struct i915_screen *screen);
+
+#endif

Added: haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_clear.c
===================================================================
--- haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_clear.c	2009-09-12 11:09:08 UTC (rev 33088)
+++ haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_clear.c	2009-09-12 11:16:34 UTC (rev 33089)
@@ -0,0 +1,48 @@
+/**************************************************************************
+ * 
+ * Copyright 2007 Tungsten Graphics, Inc., Cedar Park, Texas.
+ * All Rights Reserved.
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the
+ * &quot;Software&quot;), to deal in the Software without restriction, including
+ * without limitation the rights to use, copy, modify, merge, publish,
+ * distribute, sub license, and/or sell copies of the Software, and to
+ * permit persons to whom the Software is furnished to do so, subject to
+ * the following conditions:
+ * 
+ * The above copyright notice and this permission notice (including the
+ * next paragraph) shall be included in all copies or substantial portions
+ * of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
+ * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT.
+ * IN NO EVENT SHALL TUNGSTEN GRAPHICS AND/OR ITS SUPPLIERS BE LIABLE FOR
+ * ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+ * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+ * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+ * 
+ **************************************************************************/
+
+/* Authors:
+ *    Brian Paul
+ */
+
+
+#include &quot;util/u_clear.h&quot;
+#include &quot;i915_context.h&quot;
+#include &quot;i915_state.h&quot;
+
+
+/**
+ * Clear the given buffers to the specified values.
+ * No masking, no scissor (clear entire buffer).
+ */
+void
+i915_clear(struct pipe_context *pipe, unsigned buffers, const float *rgba,
+	   double depth, unsigned stencil)
+{
+   util_clear(pipe, &amp;i915_context(pipe)-&gt;framebuffer, buffers, rgba, depth,
+              stencil);
+}

Added: haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_context.c
===================================================================
--- haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_context.c	2009-09-12 11:09:08 UTC (rev 33088)
+++ haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_context.c	2009-09-12 11:16:34 UTC (rev 33089)
@@ -0,0 +1,237 @@
+/**************************************************************************
+ * 
+ * Copyright 2003 Tungsten Graphics, Inc., Cedar Park, Texas.
+ * All Rights Reserved.
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the
+ * &quot;Software&quot;), to deal in the Software without restriction, including
+ * without limitation the rights to use, copy, modify, merge, publish,
+ * distribute, sub license, and/or sell copies of the Software, and to
+ * permit persons to whom the Software is furnished to do so, subject to
+ * the following conditions:
+ * 
+ * The above copyright notice and this permission notice (including the
+ * next paragraph) shall be included in all copies or substantial portions
+ * of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
+ * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT.
+ * IN NO EVENT SHALL TUNGSTEN GRAPHICS AND/OR ITS SUPPLIERS BE LIABLE FOR
+ * ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+ * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+ * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+ * 
+ **************************************************************************/
+
+#include &quot;i915_context.h&quot;
+#include &quot;i915_state.h&quot;
+#include &quot;i915_screen.h&quot;
+#include &quot;i915_batch.h&quot;
+#include &quot;i915_texture.h&quot;
+#include &quot;i915_reg.h&quot;
+
+#include &quot;draw/draw_context.h&quot;
+#include &quot;pipe/p_defines.h&quot;
+#include &quot;pipe/internal/p_winsys_screen.h&quot;
+#include &quot;pipe/p_inlines.h&quot;
+#include &quot;util/u_memory.h&quot;
+#include &quot;pipe/p_screen.h&quot;
+
+
+/*
+ * Draw functions
+ */
+
+
+static boolean
+i915_draw_range_elements(struct pipe_context *pipe,
+                         struct pipe_buffer *indexBuffer,
+                         unsigned indexSize,
+                         unsigned min_index,
+                         unsigned max_index,
+                         unsigned prim, unsigned start, unsigned count)
+{
+   struct i915_context *i915 = i915_context(pipe);
+   struct draw_context *draw = i915-&gt;draw;
+   unsigned i;
+
+   if (i915-&gt;dirty)
+      i915_update_derived(i915);
+
+   /*
+    * Map vertex buffers
+    */
+   for (i = 0; i &lt; i915-&gt;num_vertex_buffers; i++) {
+      void *buf = pipe_buffer_map(pipe-&gt;screen, i915-&gt;vertex_buffer[i].buffer,
+                                  PIPE_BUFFER_USAGE_CPU_READ);
+      draw_set_mapped_vertex_buffer(draw, i, buf);
+   }
+
+   /*
+    * Map index buffer, if present
+    */
+   if (indexBuffer) {
+      void *mapped_indexes = pipe_buffer_map(pipe-&gt;screen, indexBuffer,
+                                             PIPE_BUFFER_USAGE_CPU_READ);
+      draw_set_mapped_element_buffer_range(draw, indexSize,
+                                           min_index,
+                                           max_index,
+                                           mapped_indexes);
+   } else {
+      draw_set_mapped_element_buffer(draw, 0, NULL);
+   }
+
+
+   draw_set_mapped_constant_buffer(draw,
+                                   i915-&gt;current.constants[PIPE_SHADER_VERTEX],
+                                   (i915-&gt;current.num_user_constants[PIPE_SHADER_VERTEX] * 
+                                      4 * sizeof(float)));
+
+   /*
+    * Do the drawing
+    */
+   draw_arrays(i915-&gt;draw, prim, start, count);
+
+   /*
+    * unmap vertex/index buffers
+    */
+   for (i = 0; i &lt; i915-&gt;num_vertex_buffers; i++) {
+      pipe_buffer_unmap(pipe-&gt;screen, i915-&gt;vertex_buffer[i].buffer);
+      draw_set_mapped_vertex_buffer(draw, i, NULL);
+   }
+
+   if (indexBuffer) {
+      pipe_buffer_unmap(pipe-&gt;screen, indexBuffer);
+      draw_set_mapped_element_buffer_range(draw, 0, start, start + count - 1, NULL);
+   }
+
+   return TRUE;
+}
+
+static boolean
+i915_draw_elements(struct pipe_context *pipe,
+                   struct pipe_buffer *indexBuffer,
+                   unsigned indexSize,
+                   unsigned prim, unsigned start, unsigned count)
+{
+   return i915_draw_range_elements(pipe, indexBuffer,
+                                   indexSize,
+                                   0, 0xffffffff,
+                                   prim, start, count);
+}
+
+static boolean
+i915_draw_arrays(struct pipe_context *pipe,
+                 unsigned prim, unsigned start, unsigned count)
+{
+   return i915_draw_elements(pipe, NULL, 0, prim, start, count);
+}
+
+
+/*
+ * Is referenced functions
+ */
+
+
+static unsigned int
+i915_is_texture_referenced(struct pipe_context *pipe,
+                           struct pipe_texture *texture,
+                           unsigned face, unsigned level)
+{
+   /**
+    * FIXME: Return the corrent result. We can't alays return referenced
+    *        since it causes a double flush within the vbo module.
+    */
+#if 0
+   return PIPE_REFERENCED_FOR_READ | PIPE_REFERENCED_FOR_WRITE;
+#else
+   return 0;
+#endif
+}
+
+static unsigned int
+i915_is_buffer_referenced(struct pipe_context *pipe,
+                          struct pipe_buffer *buf)
+{
+   /**
+    * FIXME: Return the corrent result. We can't alays return referenced
+    *        since it causes a double flush within the vbo module.
+    */
+#if 0
+   return PIPE_REFERENCED_FOR_READ | PIPE_REFERENCED_FOR_WRITE;
+#else
+   return 0;
+#endif
+}
+
+
+/*
+ * Generic context functions
+ */
+
+
+static void i915_destroy(struct pipe_context *pipe)
+{
+   struct i915_context *i915 = i915_context(pipe);
+
+   draw_destroy(i915-&gt;draw);
+   
+   if(i915-&gt;batch)
+      i915-&gt;iws-&gt;batchbuffer_destroy(i915-&gt;batch);
+
+   FREE(i915);
+}
+
+struct pipe_context *
+i915_create_context(struct pipe_screen *screen)
+{
+   struct i915_context *i915;
+
+   i915 = CALLOC_STRUCT(i915_context);
+   if (i915 == NULL)
+      return NULL;
+
+   i915-&gt;iws = i915_screen(screen)-&gt;iws;
+   i915-&gt;base.winsys = NULL;
+   i915-&gt;base.screen = screen;
+
+   i915-&gt;base.destroy = i915_destroy;
+
+   i915-&gt;base.clear = i915_clear;
+
+   i915-&gt;base.draw_arrays = i915_draw_arrays;
+   i915-&gt;base.draw_elements = i915_draw_elements;
+   i915-&gt;base.draw_range_elements = i915_draw_range_elements;
+
+   i915-&gt;base.is_texture_referenced = i915_is_texture_referenced;
+   i915-&gt;base.is_buffer_referenced = i915_is_buffer_referenced;
+
+   /*
+    * Create drawing context and plug our rendering stage into it.
+    */
+   i915-&gt;draw = draw_create();
+   assert(i915-&gt;draw);
+   if (!debug_get_bool_option(&quot;I915_NO_VBUF&quot;, FALSE)) {
+      draw_set_rasterize_stage(i915-&gt;draw, i915_draw_vbuf_stage(i915));
+   } else {
+      draw_set_rasterize_stage(i915-&gt;draw, i915_draw_render_stage(i915));
+   }
+
+   i915_init_surface_functions(i915);
+   i915_init_state_functions(i915);
+   i915_init_flush_functions(i915);
+
+   draw_install_aaline_stage(i915-&gt;draw, &amp;i915-&gt;base);
+   draw_install_aapoint_stage(i915-&gt;draw, &amp;i915-&gt;base);
+
+   i915-&gt;dirty = ~0;
+   i915-&gt;hardware_dirty = ~0;
+
+   /* Batch stream debugging is a bit hacked up at the moment:
+    */
+   i915-&gt;batch = i915-&gt;iws-&gt;batchbuffer_create(i915-&gt;iws);
+
+   return &amp;i915-&gt;base;
+}

Added: haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_context.h
===================================================================
--- haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_context.h	2009-09-12 11:09:08 UTC (rev 33088)
+++ haiku/branches/components/gallium3d/src/add-ons/opengl/i915/i915_context.h	2009-09-12 11:16:34 UTC (rev 33089)
@@ -0,0 +1,350 @@
+ /**************************************************************************
+ * 
+ * Copyright 2003 Tungsten Graphics, Inc., Cedar Park, Texas.
+ * All Rights Reserved.
+ * 
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the
+ * &quot;Software&quot;), to deal in the Software without restriction, including
+ * without limitation the rights to use, copy, modify, merge, publish,
+ * distribute, sub license, and/or sell copies of the Software, and to
+ * permit persons to whom the Software is furnished to do so, subject to
+ * the following conditions:
+ * 
+ * The above copyright notice and this permission notice (including the
+ * next paragraph) shall be included in all copies or substantial portions
+ * of the Software.
+ * 
+ * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
+ * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT.
+ * IN NO EVENT SHALL TUNGSTEN GRAPHICS AND/OR ITS SUPPLIERS BE LIABLE FOR
+ * ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
+ * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
+ * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+ * 
+ **************************************************************************/
+
+#ifndef I915_CONTEXT_H
+#define I915_CONTEXT_H
+
+
+#include &quot;pipe/p_context.h&quot;
+#include &quot;pipe/p_defines.h&quot;
+#include &quot;pipe/p_state.h&quot;
+
+#include &quot;draw/draw_vertex.h&quot;
+
+#include &quot;tgsi/tgsi_scan.h&quot;
+
+
+struct intel_winsys;
+struct intel_buffer;
+struct intel_batchbuffer;
+
+
+#define I915_TEX_UNITS 8
+
+#define I915_DYNAMIC_MODES4       0
+#define I915_DYNAMIC_DEPTHSCALE_0 1 /* just the header */
+#define I915_DYNAMIC_DEPTHSCALE_1 2 
+#define I915_DYNAMIC_IAB          3
+#define I915_DYNAMIC_BC_0         4 /* just the header */
+#define I915_DYNAMIC_BC_1         5
+#define I915_DYNAMIC_BFO_0        6 
+#define I915_DYNAMIC_BFO_1        7
+#define I915_DYNAMIC_STP_0        8 
+#define I915_DYNAMIC_STP_1        9 
+#define I915_DYNAMIC_SC_ENA_0     10 
+#define I915_DYNAMIC_SC_RECT_0    11 
+#define I915_DYNAMIC_SC_RECT_1    12 
+#define I915_DYNAMIC_SC_RECT_2    13 
+#define I915_MAX_DYNAMIC          14
+
+
+#define I915_IMMEDIATE_S0         0
+#define I915_IMMEDIATE_S1         1
+#define I915_IMMEDIATE_S2         2
+#define I915_IMMEDIATE_S3         3
+#define I915_IMMEDIATE_S4         4
+#define I915_IMMEDIATE_S5         5
+#define I915_IMMEDIATE_S6         6
+#define I915_IMMEDIATE_S7         7
+#define I915_MAX_IMMEDIATE        8
+
+/* These must mach the order of LI0_STATE_* bits, as they will be used
+ * to generate hardware packets:
+ */
+#define I915_CACHE_STATIC         0 
+#define I915_CACHE_DYNAMIC        1 /* handled specially */
+#define I915_CACHE_SAMPLER        2
+#define I915_CACHE_MAP            3
+#define I915_CACHE_PROGRAM        4
+#define I915_CACHE_CONSTANTS      5
+#define I915_MAX_CACHE            6
+
+#define I915_MAX_CONSTANT  32
+
+
+/** See constant_flags[] below */
+#define I915_CONSTFLAG_USER 0x1f
+
+
+/**
+ * Subclass of pipe_shader_state
+ */
+struct i915_fragment_shader
+{
+   struct pipe_shader_state state;
+
+   struct tgsi_shader_info info;
+
+   uint *program;
+   uint program_len;
+
+   /**
+    * constants introduced during translation.
+    * These are placed at the end of the constant buffer and grow toward
+    * the beginning (eg: slot 31, 30 29, ...)
+    * User-provided constants start at 0.
+    * This allows both types of constants to co-exist (until there's too many)
+    * and doesn't require regenerating/changing the fragment program to
+    * shuffle constants around.
+    */
+   uint num_constants;
+   float constants[I915_MAX_CONSTANT][4];
+
+   /**
+    * Status of each constant
+    * if I915_CONSTFLAG_PARAM, the value must be taken from the corresponding
+    * slot of the user's constant buffer. (set by pipe-&gt;set_constant_buffer())
+    * Else, the bitmask indicates which components are occupied by immediates.
+    */
+   ubyte constant_flags[I915_MAX_CONSTANT];
+};
+
+
+struct i915_cache_context;
+
+/* Use to calculate differences between state emitted to hardware and
+ * current driver-calculated state.  
+ */
+struct i915_state 
+{
+   unsigned immediate[I915_MAX_IMMEDIATE];
+   unsigned dynamic[I915_MAX_DYNAMIC];
+
+   float constants[PIPE_SHADER_TYPES][I915_MAX_CONSTANT][4];
+   /** number of constants passed in through a constant buffer */
+   uint num_user_constants[PIPE_SHADER_TYPES];
+
+   /* texture sampler state */
+   unsigned sampler[I915_TEX_UNITS][3];
+   unsigned sampler_enable_flags;
+   unsigned sampler_enable_nr;
+
+   /* texture image buffers */
+   unsigned texbuffer[I915_TEX_UNITS][2];
+
+   /** Describes the current hardware vertex layout */
+   struct vertex_info vertex_info;
+   
+   unsigned id;			/* track lost context events */
+};
+
+struct i915_blend_state {
+   unsigned iab;
+   unsigned modes4;
+   unsigned LIS5;
+   unsigned LIS6;
+};
+
+struct i915_depth_stencil_state {
+   unsigned stencil_modes4;
+   unsigned bfo[2];
+   unsigned stencil_LIS5;
+   unsigned depth_LIS6;
+};
+
+struct i915_rasterizer_state {
+   int light_twoside : 1;
+   unsigned st;
+   enum interp_mode color_interp;
+
+   unsigned LIS4;
+   unsigned LIS7;
+   unsigned sc[1];
+
+   const struct pipe_rasterizer_state *templ;
+

[... truncated: 9605 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="020579.html">[Haiku-commits] r33088 - in haiku/branches/components/gallium3d:	headers/libs/drm headers/private/opengl/GL/internal	src/kits/opengl/mesa src/kits/opengl/mesa/drivers	src/kits/opengl/mesa/drivers/dri	src/kits/opengl/mesa/drivers/dri/common	src/kits/opengl/mesa/drivers/dri/common/xmlpool	src/kits/opengl/mesa/gallium	src/kits/opengl/mesa/gallium/state_trackers	src/kits/opengl/mesa/gallium/state_trackers/dri
</A></li>
	<LI>Next message: <A HREF="020581.html">[Haiku-commits] r33090 - in	haiku/branches/components/gallium3d/src/add-ons/opengl/i915: . gem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20580">[ date ]</a>
              <a href="thread.html#20580">[ thread ]</a>
              <a href="subject.html#20580">[ subject ]</a>
              <a href="author.html#20580">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
