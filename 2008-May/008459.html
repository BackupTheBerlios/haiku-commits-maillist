<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r25283 - in haiku/trunk: headers/private/kernel headers/private/kernel/util src/add-ons/kernel/drivers/arch/x86/keyboard src/add-ons/kernel/drivers/tty src/add-ons/kernel/file_cache src/add-ons/kernel/network/protocols/tcp src/libs/compat/freebsd_network src/libs/compat/freebsd_network/compat/sys src/system/kernel src/system/kernel/arch/generic src/system/kernel/cache src/system/kernel/fs src/system/kernel/util src/system/kernel/vm src/system/libroot/os
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r25283%20-%20in%20haiku/trunk%3A%20headers/private/kernel%0A%20headers/private/kernel/util%20src/add-ons/kernel/drivers/arch/x86/keyboard%0A%20src/add-ons/kernel/drivers/tty%20src/add-ons/kernel/file_cache%0A%20src/add-ons/kernel/network/protocols/tcp%20src/libs/compat/freebsd_network%0A%20src/libs/compat/freebsd_network/compat/sys%20src/system/kernel%0A%20src/system/kernel/arch/generic%20src/system/kernel/cache%20src/system/kernel/fs%0A%20src/system/kernel/util%20src/system/kernel/vm%20src/system/libroot/os&In-Reply-To=%3C20080504022345.1388.5%40knochen-vm.1209818782.fake%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008439.html">
   <LINK REL="Next"  HREF="008465.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r25283 - in haiku/trunk: headers/private/kernel headers/private/kernel/util src/add-ons/kernel/drivers/arch/x86/keyboard src/add-ons/kernel/drivers/tty src/add-ons/kernel/file_cache src/add-ons/kernel/network/protocols/tcp src/libs/compat/freebsd_network src/libs/compat/freebsd_network/compat/sys src/system/kernel src/system/kernel/arch/generic src/system/kernel/cache src/system/kernel/fs src/system/kernel/util src/system/kernel/vm src/system/libroot/os</H1>
    <B>Ingo Weinhold</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r25283%20-%20in%20haiku/trunk%3A%20headers/private/kernel%0A%20headers/private/kernel/util%20src/add-ons/kernel/drivers/arch/x86/keyboard%0A%20src/add-ons/kernel/drivers/tty%20src/add-ons/kernel/file_cache%0A%20src/add-ons/kernel/network/protocols/tcp%20src/libs/compat/freebsd_network%0A%20src/libs/compat/freebsd_network/compat/sys%20src/system/kernel%0A%20src/system/kernel/arch/generic%20src/system/kernel/cache%20src/system/kernel/fs%0A%20src/system/kernel/util%20src/system/kernel/vm%20src/system/libroot/os&In-Reply-To=%3C20080504022345.1388.5%40knochen-vm.1209818782.fake%3E"
       TITLE="[Haiku-commits] r25283 - in haiku/trunk: headers/private/kernel headers/private/kernel/util src/add-ons/kernel/drivers/arch/x86/keyboard src/add-ons/kernel/drivers/tty src/add-ons/kernel/file_cache src/add-ons/kernel/network/protocols/tcp src/libs/compat/freebsd_network src/libs/compat/freebsd_network/compat/sys src/system/kernel src/system/kernel/arch/generic src/system/kernel/cache src/system/kernel/fs src/system/kernel/util src/system/kernel/vm src/system/libroot/os">ingo_weinhold at gmx.de
       </A><BR>
    <I>Sun May  4 02:23:45 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008439.html">[Haiku-commits] r25283 - in haiku/trunk: headers/private/kernel headers/private/kernel/util src/add-ons/kernel/drivers/arch/x86/keyboard src/add-ons/kernel/drivers/tty src/add-ons/kernel/file_cache src/add-ons/kernel/network/protocols/tcp src/libs/compat/freebsd_network src/libs/compat/freebsd_network/compat/sys src/system/kernel src/system/kernel/arch/generic src/system/kernel/cache src/system/kernel/fs src/system/kernel/util src/system/kernel/vm src/system/libroot/os
</A></li>
        <LI>Next message: <A HREF="008465.html">[Haiku-commits] r25283 - in haiku/trunk: headers/private/kernel headers/private/kernel/util src/add-ons/kernel/drivers/arch/x86/keyboard src/add-ons/kernel/drivers/tty src/add-ons/kernel/file_cache src/add-ons/kernel/network/protocols/tcp src/libs/compat/freebsd_network src/libs/compat/freebsd_network/compat/sys src/system/kernel src/system/kernel/arch/generic src/system/kernel/cache src/system/kernel/fs src/system/kernel/util src/system/kernel/vm src/system/libroot/os
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8459">[ date ]</a>
              <a href="thread.html#8459">[ thread ]</a>
              <a href="subject.html#8459">[ subject ]</a>
              <a href="author.html#8459">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2008-05-02 at 20:41:00 [+0200], Axel D&#246;rfler &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at pinc-software.de</A>&gt; 
wrote:
&gt;<i> Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">ingo_weinhold at gmx.de</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; However, what exactly happens with this test?
</I>&gt;<i> &gt; &gt; I had it wait for closing connections, but they were all left
</I>&gt;<i> &gt; &gt; established. Also, the open sockets used up more than 27 MB - which
</I>&gt;<i> &gt; &gt; doesn't really look good.
</I>&gt;<i> &gt; I don't know about that. At least one TCP connection and a few UNIX
</I>&gt;<i> &gt; socket
</I>&gt;<i> &gt; connections should stay open during the whole test. They are
</I>&gt;<i> &gt; associated
</I>&gt;<i> &gt; with the ssh connection that forwards the ports. I don't know exactly
</I>&gt;<i> &gt; how
</I>&gt;<i> &gt; port forwarding is implemented, but I think it just uses the one TCP
</I>&gt;<i> &gt; connection. Until the forwarded ports are used, of course.
</I>&gt;<i> 
</I>&gt;<i> It seems to use lots of connections. When I let the test run, it
</I>&gt;<i> eventually comes to a point where it wants to end (endless loop or
</I>&gt;<i> not); there might still be progress, the loop will just consume 100%
</I>&gt;<i> CPU time.
</I>&gt;<i> 
</I>&gt;<i> &gt; The problem I usually encounter is that an ssh and an sshd process
</I>&gt;<i> &gt; both
</I>&gt;<i> &gt; start to infinitely loop in TCPEndpoint::SendData() -&gt;
</I>&gt;<i> &gt; WaitList::Wait() at
</I>&gt;<i> &gt; some point. If they don't, the test will just pass. The test runs for
</I>&gt;<i> &gt; a
</I>&gt;<i> &gt; while and has no output (unless you enable it; cf. README.regress),
</I>&gt;<i> &gt; so it
</I>&gt;<i> &gt; helps to keep ProcessController's team menu open. The infinite loop
</I>&gt;<i> &gt; situation is easily recognizable.
</I>&gt;<i> 
</I>&gt;<i> If you had waited a bit more, it would have spilled out some data :-)
</I>
I had let the test run for quite a while (10 min at least) without any 
output. Also, the two busy threads couldn't be killed, as expected for 
threads busy-looping in the kernel.

&gt;<i> In any case, I haven't seen the high memory usage anymore, now. Before,
</I>&gt;<i> it would always happen when I let the test progress after TCP ate all
</I>&gt;<i> CPU power.
</I>
With r25300(+) I still have problems, though the test passes now. After a 
short while of running, it dumps a list of 20+ connections it is still 
waiting for to terminate. During that time an ssh process, an sshd process, 
and the &quot;loop consumer&quot; thread consume all CPU. After several minutes the 
test continues and succeeds. Before, when the test wouldn't hang, it would 
just pass after a much shorter time without dumping anything.

I also still have the problem with ssh'ing onto a SunSSH server. After 
successful authentication and interactive session setup the server would 
unexpectedly send an EOF message. Unfortunately I have no permission to 
look into the server logs to see what its problem is. I suspect some Haiku 
networking issue, though. The net server and BONE OpenSSH 3.9p1 packages 
have the same problem when running under Haiku.

So, unfortunately all is not well in networking land yet. :-/

CU, Ingo

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008439.html">[Haiku-commits] r25283 - in haiku/trunk: headers/private/kernel headers/private/kernel/util src/add-ons/kernel/drivers/arch/x86/keyboard src/add-ons/kernel/drivers/tty src/add-ons/kernel/file_cache src/add-ons/kernel/network/protocols/tcp src/libs/compat/freebsd_network src/libs/compat/freebsd_network/compat/sys src/system/kernel src/system/kernel/arch/generic src/system/kernel/cache src/system/kernel/fs src/system/kernel/util src/system/kernel/vm src/system/libroot/os
</A></li>
	<LI>Next message: <A HREF="008465.html">[Haiku-commits] r25283 - in haiku/trunk: headers/private/kernel headers/private/kernel/util src/add-ons/kernel/drivers/arch/x86/keyboard src/add-ons/kernel/drivers/tty src/add-ons/kernel/file_cache src/add-ons/kernel/network/protocols/tcp src/libs/compat/freebsd_network src/libs/compat/freebsd_network/compat/sys src/system/kernel src/system/kernel/arch/generic src/system/kernel/cache src/system/kernel/fs src/system/kernel/util src/system/kernel/vm src/system/libroot/os
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8459">[ date ]</a>
              <a href="thread.html#8459">[ thread ]</a>
              <a href="subject.html#8459">[ subject ]</a>
              <a href="author.html#8459">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
