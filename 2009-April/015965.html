<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r30253 - haiku/trunk/src/add-ons/kernel/bus_managers/ata
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%0A%20%3D%3Fwindows-1252%3Fq%3Fr30253_-_haiku/trunk/src/add-ons%3F%3D%0A%20%3D%3Fwindows-1252%3Fq%3F/kernel/bus%3D5Fmanagers/ata%3F%3D&In-Reply-To=%3C45557918457-BeMail%40haiku%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015963.html">
   <LINK REL="Next"  HREF="015964.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r30253 - haiku/trunk/src/add-ons/kernel/bus_managers/ata</H1>
    <B>Michael Lotz</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%0A%20%3D%3Fwindows-1252%3Fq%3Fr30253_-_haiku/trunk/src/add-ons%3F%3D%0A%20%3D%3Fwindows-1252%3Fq%3F/kernel/bus%3D5Fmanagers/ata%3F%3D&In-Reply-To=%3C45557918457-BeMail%40haiku%3E"
       TITLE="[Haiku-commits] r30253 - haiku/trunk/src/add-ons/kernel/bus_managers/ata">mmlr at mlotz.ch
       </A><BR>
    <I>Sun Apr 19 01:31:34 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="015963.html">[Haiku-commits] r30253 -	haiku/trunk/src/add-ons/kernel/bus_managers/ata
</A></li>
        <LI>Next message: <A HREF="015964.html">[Haiku-commits] r30254 -	haiku/trunk/src/add-ons/kernel/bus_managers/ata
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15965">[ date ]</a>
              <a href="thread.html#15965">[ thread ]</a>
              <a href="subject.html#15965">[ subject ]</a>
              <a href="author.html#15965">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On Sat, Apr 18, 2009 at 5:37 PM,  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">mmlr at mail.berlios.de</A>&gt; wrote:
</I>&gt;<i> &gt; Author: mmlr
</I>&gt;<i> &gt; Date: 2009-04-19 00:37:04 +0200 (Sun, 19 Apr 2009)
</I>&gt;<i> &gt; New Revision: 30253
</I>&gt;<i> &gt; ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=30253&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=30253&amp;view=rev</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Modified:
</I>&gt;<i> &gt; &#160; haiku/trunk/src/add-ons/kernel/bus_managers/ata/ATAChannel.cpp
</I>&gt;<i> &gt; &#160; haiku/trunk/src/add-ons/kernel/bus_managers/ata/ATAPIDevice.cpp
</I>&gt;<i> &gt; &#160; haiku/trunk/src/add-ons/kernel/bus_managers/ata/ATAPrivate.h
</I>&gt;<i> &gt; Log:
</I>&gt;<i> &gt; For packet devices we want to actually return a check condition 
</I>&gt;<i> &gt; when the device
</I>&gt;<i> &gt; indicates an error. Also we then need to pass through the request 
</I>&gt;<i> &gt; sense command
</I>&gt;<i> &gt; to the device. This should fix media status reporting for ATAPI.
</I>&gt;<i> 
</I>&gt;<i> FYI, the previous reworked device detection doesn't seem to go so 
</I>&gt;<i> well
</I>&gt;<i> here on nforce SATA...end result:
</I>
That's fixed already with exactly the commit you replied to. It's not 
the detection though but the handling of media change events. Since the 
error would be eaten away by the emulated request sense handling it 
would fall into a loop and overflow provoking the double fault.

Regards
Michael

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015963.html">[Haiku-commits] r30253 -	haiku/trunk/src/add-ons/kernel/bus_managers/ata
</A></li>
	<LI>Next message: <A HREF="015964.html">[Haiku-commits] r30254 -	haiku/trunk/src/add-ons/kernel/bus_managers/ata
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15965">[ date ]</a>
              <a href="thread.html#15965">[ thread ]</a>
              <a href="subject.html#15965">[ subject ]</a>
              <a href="author.html#15965">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
