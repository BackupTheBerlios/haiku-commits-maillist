<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r29876 - in haiku/trunk: build/jam build/scripts	data/system/boot headers/os/storage src/apps/aboutsystem	src/apps/processcontroller src/bin/bash src/bin/gdb/gdb	src/bin/grep/src src/bin/make src/bin/vim/src	src/kits/tracker src/preferences/joysticks	src/preferences/keymap src/preferences/time src/servers/debug	src/servers/registrar src/system/boot src/system/boot/loader	src/system/boot/platform/atari_m68k	src/system/boot/platform/bios_ia32	src/system/boot/platform/generic src/system/kernel/fs	src/system/libroot/os src/system/runtime_loader
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r29876%20-%20in%20haiku/trunk%3A%20build/jam%20build/scripts%0A%09data/system/boot%20headers/os/storage%20src/apps/aboutsystem%0A%09src/apps/processcontroller%20src/bin/bash%20src/bin/gdb/gdb%0A%09src/bin/grep/src%20src/bin/make%20src/bin/vim/src%0A%09src/kits/tracker%20src/preferences/joysticks%0A%09src/preferences/keymap%20src/preferences/time%20src/servers/debug%0A%09src/servers/registrar%20src/system/boot%20src/system/boot/loader%0A%09src/system/boot/platform/atari_m68k%0A%09src/system/boot/platform/bios_ia32%0A%09src/system/boot/platform/generic%20src/system/kernel/fs%0A%09src/system/libroot/os%20src/system/runtime_loader&In-Reply-To=%3C200904030902.n3392mKv021542%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015389.html">
   <LINK REL="Next"  HREF="015393.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r29876 - in haiku/trunk: build/jam build/scripts	data/system/boot headers/os/storage src/apps/aboutsystem	src/apps/processcontroller src/bin/bash src/bin/gdb/gdb	src/bin/grep/src src/bin/make src/bin/vim/src	src/kits/tracker src/preferences/joysticks	src/preferences/keymap src/preferences/time src/servers/debug	src/servers/registrar src/system/boot src/system/boot/loader	src/system/boot/platform/atari_m68k	src/system/boot/platform/bios_ia32	src/system/boot/platform/generic src/system/kernel/fs	src/system/libroot/os src/system/runtime_loader</H1>
    <B>axeld at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r29876%20-%20in%20haiku/trunk%3A%20build/jam%20build/scripts%0A%09data/system/boot%20headers/os/storage%20src/apps/aboutsystem%0A%09src/apps/processcontroller%20src/bin/bash%20src/bin/gdb/gdb%0A%09src/bin/grep/src%20src/bin/make%20src/bin/vim/src%0A%09src/kits/tracker%20src/preferences/joysticks%0A%09src/preferences/keymap%20src/preferences/time%20src/servers/debug%0A%09src/servers/registrar%20src/system/boot%20src/system/boot/loader%0A%09src/system/boot/platform/atari_m68k%0A%09src/system/boot/platform/bios_ia32%0A%09src/system/boot/platform/generic%20src/system/kernel/fs%0A%09src/system/libroot/os%20src/system/runtime_loader&In-Reply-To=%3C200904030902.n3392mKv021542%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r29876 - in haiku/trunk: build/jam build/scripts	data/system/boot headers/os/storage src/apps/aboutsystem	src/apps/processcontroller src/bin/bash src/bin/gdb/gdb	src/bin/grep/src src/bin/make src/bin/vim/src	src/kits/tracker src/preferences/joysticks	src/preferences/keymap src/preferences/time src/servers/debug	src/servers/registrar src/system/boot src/system/boot/loader	src/system/boot/platform/atari_m68k	src/system/boot/platform/bios_ia32	src/system/boot/platform/generic src/system/kernel/fs	src/system/libroot/os src/system/runtime_loader">axeld at mail.berlios.de
       </A><BR>
    <I>Fri Apr  3 11:02:48 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="015389.html">[Haiku-commits] r29875 - haiku/trunk/src/system/kernel
</A></li>
        <LI>Next message: <A HREF="015393.html">[Haiku-commits] r29876 - in haiku/trunk: build/jam build/scripts data/system/boot headers/os/storage src/apps/aboutsystem src/apps/processcontroller src/bin/bash src/bin/gdb/gdb src/bin/grep/src src/bin/make src/bin/vim/src src/kits/tracker src/preferences/joysticks src/preferences/keymap src/preferences/time src/servers/debug src/servers/registrar  src/system/boot src/system/boot/loader src/system/boot/platform/atari_m68k src/system/boot/platform/bios_ia32 src/system/boot/platform/generic src/system/kernel/fs src/system/libroot/os  src/system/runtime_loader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15390">[ date ]</a>
              <a href="thread.html#15390">[ thread ]</a>
              <a href="subject.html#15390">[ subject ]</a>
              <a href="author.html#15390">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: axeld
Date: 2009-04-03 11:02:44 +0200 (Fri, 03 Apr 2009)
New Revision: 29876
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=29876&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=29876&amp;view=rev</A>

Modified:
   haiku/trunk/build/jam/BuildSetup
   haiku/trunk/build/jam/HaikuImage
   haiku/trunk/build/jam/ImageRules
   haiku/trunk/build/jam/OptionalPackages
   haiku/trunk/build/jam/UserBuildConfig.ReadMe
   haiku/trunk/build/jam/UserBuildConfig.sample
   haiku/trunk/build/scripts/build_haiku_cd
   haiku/trunk/build/scripts/build_haiku_image
   haiku/trunk/data/system/boot/Bootscript
   haiku/trunk/data/system/boot/Bootscript.cd
   haiku/trunk/data/system/boot/SetupEnvironment
   haiku/trunk/headers/os/storage/FindDirectory.h
   haiku/trunk/src/apps/aboutsystem/AboutSystem.cpp
   haiku/trunk/src/apps/processcontroller/PCWorld.cpp
   haiku/trunk/src/apps/processcontroller/ProcessController.cpp
   haiku/trunk/src/bin/bash/config-top.h
   haiku/trunk/src/bin/gdb/gdb/Jamfile
   haiku/trunk/src/bin/grep/src/Jamfile
   haiku/trunk/src/bin/make/config.h
   haiku/trunk/src/bin/vim/src/gui_beos.cc
   haiku/trunk/src/kits/tracker/FSUtils.cpp
   haiku/trunk/src/kits/tracker/FSUtils.h
   haiku/trunk/src/preferences/joysticks/JoyWin.cpp
   haiku/trunk/src/preferences/keymap/KeymapWindow.cpp
   haiku/trunk/src/preferences/time/ZoneView.cpp
   haiku/trunk/src/preferences/time/ZoneView.h
   haiku/trunk/src/servers/debug/DebugServer.cpp
   haiku/trunk/src/servers/registrar/TRoster.cpp
   haiku/trunk/src/system/boot/Jamfile
   haiku/trunk/src/system/boot/loader/loader.cpp
   haiku/trunk/src/system/boot/platform/atari_m68k/shell.S
   haiku/trunk/src/system/boot/platform/atari_m68k/stage1.S
   haiku/trunk/src/system/boot/platform/bios_ia32/stage1.S
   haiku/trunk/src/system/boot/platform/bios_ia32/stage1.bin
   haiku/trunk/src/system/boot/platform/generic/text_menu.cpp
   haiku/trunk/src/system/kernel/fs/vfs_boot.cpp
   haiku/trunk/src/system/libroot/os/find_directory.c
   haiku/trunk/src/system/runtime_loader/runtime_loader.c
Log:
* Changed directory structure as suggested on the mailing list.
* Made the TimeZoneView less error prone, and also actually use Haiku code (the
  previous check didn't work since it used #if, not #ifdef).
* Also took the liberty to rename our boot loader to haiku_loader, since I had
  to update the nasm binary anyway. Updated the assembly sources to nasm 2.0.
* I haven't found where the synth location in the MIDI code is specified,
  though.
* Also, NetBootArchive, and FloppyBootImage haven't been updated yet. Will do
  so next.
* Some optional packages still put their license to beos/etc/licenses. I didn't
  update them yet, as we'll probably do so anyway at some point. Also, I think
  we might want to introduce a common/data/licenses instead for those.
* If you encounter any problems, please tell!


Modified: haiku/trunk/build/jam/BuildSetup
===================================================================
--- haiku/trunk/build/jam/BuildSetup	2009-04-03 08:05:25 UTC (rev 29875)
+++ haiku/trunk/build/jam/BuildSetup	2009-04-03 09:02:44 UTC (rev 29876)
@@ -171,21 +171,21 @@
 	{
 		HAIKU_DEFINES += __POWERPC__ ;
 		HAIKU_BOOT_PLATFORM = openfirmware ;
-		# offset in floppy image (&gt;= sizeof(zbeos))
+		# offset in floppy image (&gt;= sizeof(haiku_loader))
 		HAIKU_BOOT_ARCHIVE_IMAGE_OFFSET = 192 ; # in kB - unused yet
 	}
 	case x86 :
 	{
 		HAIKU_DEFINES += __INTEL__ ;
 		HAIKU_BOOT_PLATFORM = bios_ia32 ;
-		# offset in floppy image (&gt;= sizeof(zbeos))
+		# offset in floppy image (&gt;= sizeof(haiku_loader))
 		HAIKU_BOOT_ARCHIVE_IMAGE_OFFSET = 300 ; # in kB
 	}
 	case m68k :
 	{
 		HAIKU_DEFINES += __M68K__ ;
 		HAIKU_BOOT_PLATFORM = atari_m68k ;
-		# offset in floppy image (&gt;= sizeof(zbeos))
+		# offset in floppy image (&gt;= sizeof(haiku_loader))
 		HAIKU_BOOT_ARCHIVE_IMAGE_OFFSET = 130 ; # in kB
 	}
 	case * :

Modified: haiku/trunk/build/jam/HaikuImage
===================================================================
--- haiku/trunk/build/jam/HaikuImage	2009-04-03 08:05:25 UTC (rev 29875)
+++ haiku/trunk/build/jam/HaikuImage	2009-04-03 09:02:44 UTC (rev 29876)
@@ -18,7 +18,7 @@
 	GPL_ONLY = &quot;&quot; ;
 }
 
-BEOS_BIN = &quot;[&quot; addattr alert arp base64 basename bc beep bootman bzip2
+SYSTEM_BIN = &quot;[&quot; addattr alert arp base64 basename bc beep bootman bzip2
 	cal cat catattr checkfs chgrp chmod chop chown chroot cksum clear
 	clockconfig cmp comm compress copyattr $(X86_ONLY)CortexAddOnHost cp
 	csplit ctags cut date dc dd desklink df diff diff3 dircolors dirname
@@ -48,50 +48,51 @@
 	zdiff zforce zgrep zip zipcloak &lt;bin&gt;zipgrep zipnote zipsplit zmore znew
 ;
 
-BEOS_APPS = AboutSystem ActivityMonitor CharacterMap CodyCam DeskCalc DiskProbe
+SYSTEM_APPS = AboutSystem ActivityMonitor CharacterMap CodyCam DeskCalc DiskProbe
 	DiskUsage DriveSetup CDPlayer Expander Icon-O-Matic Installer LaunchBox
 	Magnify Mail MediaPlayer MidiPlayer NetworkStatus PackageInstaller People
 	PowerStatus ProcessController Screenshot ShowImage SoundRecorder StyledEdit
 	Terminal TextSearch TV Workspaces
 ;
-BEOS_PREFERENCES = Appearance Backgrounds DataTranslations E-mail
+SYSTEM_PREFERENCES = Appearance Backgrounds DataTranslations E-mail
 	FileTypes Fonts Keyboard Keymap Media Menu Mouse Network Printers Screen
 	ScreenSaver Sounds Time Touchpad &lt;preference&gt;Tracker VirtualMemory
 ;
-BEOS_DEMOS = BSnow Chart Clock $(X86_ONLY)Cortex FontDemo
+SYSTEM_DEMOS = BSnow Chart Clock $(X86_ONLY)Cortex FontDemo
 	$(X86_ONLY)GLDirectMode $(X86_ONLY)GLTeapot Mandelbrot Pairs
 	Playground Pulse Sudoku Gradients
 ;
-BEOS_SYSTEM_LIBS = libbe.so $(HAIKU_LIBSTDC++) libmedia.so libtracker.so
+SYSTEM_LIBS = libbe.so $(HAIKU_LIBSTDC++) libmedia.so libtracker.so
 	libtranslation.so libbnetapi.so libnetwork.so libdebug.so libbsd.so
 	libmail.so libtextencoding.so libz.so libfreetype.so libpng.so libmidi.so
 	libmidi2.so libdevice.so libgame.so libscreensaver.so &lt;revisioned&gt;libroot.so
 	$(X86_ONLY)libGL.so libfluidsynth.so liblpsolve55.so liblinprog.so libalm.so
 	libilmimf.so libiconv.so
 ;
-BEOS_SYSTEM_SERVERS = registrar debug_server syslog_daemon media_server
+SYSTEM_SERVERS = registrar debug_server syslog_daemon media_server
 	net_server media_addon_server input_server app_server fake_app_server
 	midi_server print_server mail_daemon
 ;
 
-BEOS_NETWORK_DEVICES = ethernet loopback ;
-BEOS_NETWORK_DATALINK_PROTOCOLS = ethernet_frame &lt;module&gt;arp loopback_frame
+SYSTEM_NETWORK_DEVICES = ethernet loopback ;
+SYSTEM_NETWORK_DATALINK_PROTOCOLS = ethernet_frame &lt;module&gt;arp loopback_frame
 	ipv4_datagram ;
-#BEOS_NETWORK_PPP = ipcp modem pap pppoe ;
-BEOS_NETWORK_PROTOCOLS = ipv4 tcp udp icmp unix ;
+#SYSTEM_NETWORK_PPP = ipcp modem pap pppoe ;
+SYSTEM_NETWORK_PROTOCOLS = ipv4 tcp udp icmp unix ;
 
-BEOS_ADD_ONS_ACCELERANTS = $(X86_ONLY)radeon.accelerant $(X86_ONLY)nvidia.accelerant
-	$(X86_ONLY)matrox.accelerant $(X86_ONLY)neomagic.accelerant
-	$(X86_ONLY)intel_extreme.accelerant $(X86_ONLY)s3.accelerant $(X86_ONLY)vesa.accelerant
+SYSTEM_ADD_ONS_ACCELERANTS = $(X86_ONLY)radeon.accelerant
+	$(X86_ONLY)nvidia.accelerant $(X86_ONLY)matrox.accelerant
+	$(X86_ONLY)neomagic.accelerant $(X86_ONLY)intel_extreme.accelerant
+	$(X86_ONLY)s3.accelerant $(X86_ONLY)vesa.accelerant
 	#$(X86_ONLY)via.accelerant
 	#$(X86_ONLY)vmware.accelerant
 ;
-BEOS_ADD_ONS_TRANSLATORS = BMPTranslator EXRTranslator GIFTranslator JPEGTranslator
-	JPEG2000Translator PCXTranslator PNGTranslator PPMTranslator RAWTranslator
-	RTF-Translator SGITranslator STXTTranslator TGATranslator
+SYSTEM_ADD_ONS_TRANSLATORS = BMPTranslator EXRTranslator GIFTranslator
+	JPEGTranslator JPEG2000Translator PCXTranslator PNGTranslator PPMTranslator
+	RAWTranslator RTF-Translator SGITranslator STXTTranslator TGATranslator
 	TIFFTranslator WonderBrushTranslator
 ;
-BEOS_ADD_ONS_MEDIA = cortex_audioadapter.media_addon cortex_flanger.media_addon
+SYSTEM_ADD_ONS_MEDIA = cortex_audioadapter.media_addon cortex_flanger.media_addon
 	dvb.media_addon
 	hmulti_audio.media_addon
 	mixer.media_addon
@@ -103,7 +104,7 @@
 	firewire_dv.media_addon
 	#legacy.media_addon
 ;
-BEOS_ADD_ONS_MEDIA_PLUGINS = $(GPL_ONLY)ac3_decoder
+SYSTEM_ADD_ONS_MEDIA_PLUGINS = $(GPL_ONLY)ac3_decoder
 	aiff_reader au_reader $(X86_ONLY)avcodec avi_reader
 	matroska mov_reader
 	mp3_decoder mp3_reader
@@ -112,21 +113,21 @@
 	# theora
 	vorbis wav_reader
 ;
-BEOS_ADD_ONS_PRINT = Canon\ LIPS3\ Compatible Canon\ LIPS4\ Compatible
+SYSTEM_ADD_ONS_PRINT = Canon\ LIPS3\ Compatible Canon\ LIPS4\ Compatible
 	PCL5\ Compatible PCL6\ Compatible PDF\ Writer PS\ Compatible Preview
 ;
-BEOS_ADD_ONS_PRINT_TRANSPORT = HP\ JetDirect IPP LPR Parallel\ Port
+SYSTEM_ADD_ONS_PRINT_TRANSPORT = HP\ JetDirect IPP LPR Parallel\ Port
 	Print\ To\ File Serial\ Port USB\ Port
 ;
-BEOS_ADD_ONS_SCREENSAVERS = DebugNow Flurry Haiku IFS Spider Message ;
-BEOS_ADD_ONS_DRIVERS_AUDIO = auich auvia echo3g emuxki hda ;
-BEOS_ADD_ONS_DRIVERS_AUDIO_OLD = ; #cmedia sis7018 usb_audio ;
-BEOS_ADD_ONS_DRIVERS_GRAPHICS = $(X86_ONLY)radeon $(X86_ONLY)nvidia
+SYSTEM_ADD_ONS_SCREENSAVERS = DebugNow Flurry Haiku IFS Spider Message ;
+SYSTEM_ADD_ONS_DRIVERS_AUDIO = auich auvia echo3g emuxki hda ;
+SYSTEM_ADD_ONS_DRIVERS_AUDIO_OLD = ; #cmedia sis7018 usb_audio ;
+SYSTEM_ADD_ONS_DRIVERS_GRAPHICS = $(X86_ONLY)radeon $(X86_ONLY)nvidia
 	$(X86_ONLY)neomagic $(X86_ONLY)matrox $(X86_ONLY)intel_extreme
 	$(X86_ONLY)s3 $(X86_ONLY)vesa #$(X86_ONLY)via #$(X86_ONLY)vmware
 ;
-BEOS_ADD_ONS_DRIVERS_MIDI = emuxki ;
-BEOS_ADD_ONS_DRIVERS_NET = $(X86_ONLY)3com $(X86_ONLY)broadcom440x
+SYSTEM_ADD_ONS_DRIVERS_MIDI = emuxki ;
+SYSTEM_ADD_ONS_DRIVERS_NET = $(X86_ONLY)3com $(X86_ONLY)broadcom440x
 	$(X86_ONLY)broadcom570x etherpci $(X86_ONLY)ipro1000
 	pegasus $(X86_ONLY)rtl8139 rtl8169 $(X86_ONLY)rtl81xx sis900
 	$(X86_ONLY)via_rhine wb840 $(X86_ONLY)ipro100 $(X86_ONLY)nforce
@@ -134,44 +135,44 @@
 	$(X86_ONLY)marvell_yukon $(X86_ONLY)syskonnect
 	$(X86_ONLY)attansic_l2 $(X86_ONLY)ar81xx usb_ecm
 ;
-#BEOS_ADD_ONS_DRIVERS_ACPI = $(X86_ONLY)acpi_button ;
-BEOS_ADD_ONS_BUS_MANAGERS = pci $(X86_ONLY)ps2 $(X86_ONLY)isa ide scsi
+#SYSTEM_ADD_ONS_DRIVERS_POWER = $(X86_ONLY)acpi_button ;
+SYSTEM_ADD_ONS_BUS_MANAGERS = pci $(X86_ONLY)ps2 $(X86_ONLY)isa ide scsi
 	config_manager agp_gart usb firewire $(X86_ONLY)acpi
 ;
-BEOS_ADD_ONS_FILE_SYSTEMS = bfs cdda ext2 fat iso9660 nfs attribute_overlay
+SYSTEM_ADD_ONS_FILE_SYSTEMS = bfs cdda ext2 fat iso9660 nfs attribute_overlay
 	write_overlay $(GPL_ONLY)reiserfs ;
 #googlefs $(GPL_ONLY)ntfs ;
 
 
 # modules
-AddFilesToHaikuImage beos system add-ons kernel bus_managers
-	: $(BEOS_ADD_ONS_BUS_MANAGERS) ;
-AddFilesToHaikuImage beos system add-ons kernel busses agp_gart
+AddFilesToHaikuImage system add-ons kernel bus_managers
+	: $(SYSTEM_ADD_ONS_BUS_MANAGERS) ;
+AddFilesToHaikuImage system add-ons kernel busses agp_gart
 	: $(X86_ONLY)&lt;agp_gart&gt;intel ;
-AddFilesToHaikuImage beos system add-ons kernel busses ide
+AddFilesToHaikuImage system add-ons kernel busses ide
 	: generic_ide_pci it8211 legacy_sata silicon_image_3112 $(X86_ONLY)ide_isa ;
-AddFilesToHaikuImage beos system add-ons kernel busses scsi
+AddFilesToHaikuImage system add-ons kernel busses scsi
 	: ahci ;
-AddFilesToHaikuImage beos system add-ons kernel busses usb
+AddFilesToHaikuImage system add-ons kernel busses usb
 	: &lt;usb&gt;uhci &lt;usb&gt;ohci &lt;usb&gt;ehci ;
-AddFilesToHaikuImage beos system add-ons kernel console : vga_text ;
-AddFilesToHaikuImage beos system add-ons kernel debugger
+AddFilesToHaikuImage system add-ons kernel console : vga_text ;
+AddFilesToHaikuImage system add-ons kernel debugger
 	: $(X86_ONLY)&lt;kdebug&gt;disasm &lt;kdebug&gt;hangman &lt;kdebug&gt;invalidate_on_exit
 	&lt;kdebug&gt;usb_keyboard ;
-AddFilesToHaikuImage beos system add-ons kernel file_systems
-	: $(BEOS_ADD_ONS_FILE_SYSTEMS) ;
-AddFilesToHaikuImage beos system add-ons kernel generic
+AddFilesToHaikuImage system add-ons kernel file_systems
+	: $(SYSTEM_ADD_ONS_FILE_SYSTEMS) ;
+AddFilesToHaikuImage system add-ons kernel generic
 	: dpc ide_adapter locked_pool mpu401 scsi_periph ;
-AddFilesToHaikuImage beos system add-ons kernel partitioning_systems
+AddFilesToHaikuImage system add-ons kernel partitioning_systems
 	: intel session ;
-AddFilesToHaikuImage beos system add-ons kernel interrupt_controllers
+AddFilesToHaikuImage system add-ons kernel interrupt_controllers
 	: $(PPC_ONLY)openpic ;
 
 if $(TARGET_ARCH) = x86 {
-	AddFilesToHaikuImage beos system add-ons kernel cpu : generic_x86 ;
+	AddFilesToHaikuImage system add-ons kernel cpu : generic_x86 ;
 
 	if $(HAIKU_GCC_VERSION[1]) = 2 {
-		AddFilesToHaikuImage beos system add-ons kernel debugger demangle :
+		AddFilesToHaikuImage system add-ons kernel debugger demangle :
 			&lt;kdebug&gt;gcc2 ;
 	}
 }
@@ -182,62 +183,62 @@
 # legacy drivers
 AddDriversToHaikuImage				: console dprintf $(X86_ONLY)keyboard null
 									  random &lt;driver&gt;tty zero ;
-AddDriversToHaikuImage audio hmulti	: $(BEOS_ADD_ONS_DRIVERS_AUDIO) ;
-AddDriversToHaikuImage audio old	: $(BEOS_ADD_ONS_DRIVERS_AUDIO_OLD) ;
-AddDriversToHaikuImage midi			: $(BEOS_ADD_ONS_DRIVERS_MIDI) ;
+AddDriversToHaikuImage audio hmulti	: $(SYSTEM_ADD_ONS_DRIVERS_AUDIO) ;
+AddDriversToHaikuImage audio old	: $(SYSTEM_ADD_ONS_DRIVERS_AUDIO_OLD) ;
+AddDriversToHaikuImage midi			: $(SYSTEM_ADD_ONS_DRIVERS_MIDI) ;
 AddDriversToHaikuImage bus			: usb_raw fw_raw ;
 AddDriversToHaikuImage disk floppy	: $(X86_ONLY)pc_floppy ;
 AddDriversToHaikuImage disk usb		: usb_disk ;
 AddDriversToHaikuImage disk virtual	: nbd ;
 AddDriversToHaikuImage dvb			: cx23882 ;
-AddDriversToHaikuImage graphics		: $(BEOS_ADD_ONS_DRIVERS_GRAPHICS) ;
+AddDriversToHaikuImage graphics		: $(SYSTEM_ADD_ONS_DRIVERS_GRAPHICS) ;
 AddDriversToHaikuImage input		: ps2_hid usb_hid wacom ;
 AddDriversToHaikuImage misc			: &lt;driver&gt;poke &lt;driver&gt;test &lt;driver&gt;mem ;
-AddDriversToHaikuImage net			: $(BEOS_ADD_ONS_DRIVERS_NET) ;
-#AddDriversToHaikuImage power		: $(BEOS_ADD_ONS_DRIVERS_ACPI) ;
+AddDriversToHaikuImage net			: $(SYSTEM_ADD_ONS_DRIVERS_NET) ;
+#AddDriversToHaikuImage power		: $(SYSTEM_ADD_ONS_DRIVERS_POWER) ;
 
 # kernel
-AddFilesToHaikuImage beos system : &lt;revisioned&gt;kernel_$(TARGET_ARCH) ;
+AddFilesToHaikuImage system : &lt;revisioned&gt;kernel_$(TARGET_ARCH) ;
 
 # libs
-AddFilesToHaikuImage beos system lib : $(BEOS_SYSTEM_LIBS) ;
+AddFilesToHaikuImage system lib : $(SYSTEM_LIBS) ;
 
 # libnetwork.so replaces quite a few libraries
-BEOS_SYSTEM_LIBS_LIBNETWORK_ALIASES
+SYSTEM_LIBS_LIBNETWORK_ALIASES
 	= libsocket.so libbind.so libnet.so ;
 
 local lib ;
-for lib in $(BEOS_SYSTEM_LIBS_LIBNETWORK_ALIASES) {
-	AddSymlinkToHaikuImage beos system lib : libnetwork.so : $(lib) ;
+for lib in $(SYSTEM_LIBS_LIBNETWORK_ALIASES) {
+	AddSymlinkToHaikuImage system lib : libnetwork.so : $(lib) ;
 }
 
-AddSymlinkToHaikuImage beos system lib : libbnetapi.so : libnetapi.so ;
+AddSymlinkToHaikuImage system lib : libbnetapi.so : libnetapi.so ;
 
 # libGL.so has GLU (like BeOS) *and* GLUT API built-in
-BEOS_SYSTEM_LIBS_LIBGL_ALIASES
+SYSTEM_LIBS_LIBGL_ALIASES
 	= libGLU.so libglut.so ;
 
 if $(TARGET_ARCH) = x86 {
 local lib ;
-for lib in $(BEOS_SYSTEM_LIBS_LIBGL_ALIASES) {
-	AddSymlinkToHaikuImage beos system lib : libGL.so : $(lib) ;
+for lib in $(SYSTEM_LIBS_LIBGL_ALIASES) {
+	AddSymlinkToHaikuImage system lib : libGL.so : $(lib) ;
 }
 }
 
 # servers
-AddFilesToHaikuImage beos system servers : $(BEOS_SYSTEM_SERVERS) ;
+AddFilesToHaikuImage system servers : $(SYSTEM_SERVERS) ;
 
 # apps
-AddFilesToHaikuImage beos system		: runtime_loader Deskbar Tracker ;
-AddFilesToHaikuImage beos bin			: $(BEOS_BIN) consoled ;
-AddFilesToHaikuImage beos apps			: $(BEOS_APPS) ;
-AddFilesToHaikuImage beos preferences	: $(BEOS_PREFERENCES) ;
-AddFilesToHaikuImage beos demos			: $(BEOS_DEMOS) ;
+AddFilesToHaikuImage system				: runtime_loader Deskbar Tracker ;
+AddFilesToHaikuImage system bin			: $(SYSTEM_BIN) consoled ;
+AddFilesToHaikuImage system apps		: $(SYSTEM_APPS) ;
+AddFilesToHaikuImage system preferences	: $(SYSTEM_PREFERENCES) ;
+AddFilesToHaikuImage system demos		: $(SYSTEM_DEMOS) ;
 
 SEARCH on which = [ FDirName $(HAIKU_TOP) data bin ] ;
-AddFilesToHaikuImage beos bin			: which ;
+AddFilesToHaikuImage system bin			: which ;
 
-AddSymlinkToHaikuImage beos bin : sh : bash ;
+AddSymlinkToHaikuImage system bin : sh : bash ;
 
 AddSymlinkToHaikuImage home Desktop : /boot/home : Home ;
 
@@ -250,7 +251,7 @@
 local linkTarget ;
 for linkTarget in $(DESKBAR_APPLICATIONS) {
 	AddSymlinkToHaikuImage home config be Applications
-		: /boot/beos/apps/$(linkTarget) : $(linkTarget) ;
+		: /boot/system/apps/$(linkTarget) : $(linkTarget) ;
 }
 
 # Deskbar Desktop Applets links
@@ -260,12 +261,12 @@
 ;
 for linkTarget in $(DESKBAR_DESKTOP_APPLETS) {
 	AddSymlinkToHaikuImage home config be Desktop\ Applets
-		: /boot/beos/apps/$(linkTarget) : $(linkTarget) ;
+		: /boot/system/apps/$(linkTarget) : $(linkTarget) ;
 }
 
 # Deskbar Preferences links
 AddDirectoryToHaikuImage home config be Preferences ;
-# TODO/NOTE: Cannot use $(BEOS_PREFERENCES) here since there is
+# TODO/NOTE: Cannot use $(SYSTEM_PREFERENCES) here since there is
 # &quot;&lt;preferences&gt;Tracker&quot;...
 DESKBAR_PREFERENCES = Appearance Backgrounds DataTranslations E-mail
 	FileTypes Fonts Keyboard Keymap Media Menu Mouse Network Printers Screen
@@ -273,34 +274,34 @@
 ;
 for linkTarget in $(DESKBAR_PREFERENCES) {
 	AddSymlinkToHaikuImage home config be Preferences
-		: /boot/beos/preferences/$(linkTarget) : $(linkTarget) ;
+		: /boot/system/preferences/$(linkTarget) : $(linkTarget) ;
 }
 
 # Deskbar Demo links
 AddDirectoryToHaikuImage home config be Demos ;
-for linkTarget in $(BEOS_DEMOS) {
+for linkTarget in $(SYSTEM_DEMOS) {
 	AddSymlinkToHaikuImage home config be Demos
-		: /boot/beos/demos/$(linkTarget) : $(linkTarget) ;
+		: /boot/system/demos/$(linkTarget) : $(linkTarget) ;
 }
 
-AddSymlinkToHaikuImage beos bin : bzip2 : bunzip2 ;
-AddSymlinkToHaikuImage beos bin : less : more ;
-AddSymlinkToHaikuImage beos bin : gzip : gunzip ;
-AddSymlinkToHaikuImage beos bin : gzip : zcat ;
-AddSymlinkToHaikuImage beos bin : zdiff : zcmp ;
-AddSymlinkToHaikuImage beos bin : unzip : zipinfo ;
-AddSymlinkToHaikuImage beos bin : gawk : awk ;
-AddSymlinkToHaikuImage beos bin : grep : egrep ;
-AddSymlinkToHaikuImage beos bin : grep : fgrep ;
-AddSymlinkToHaikuImage beos bin : vim : vi ;
-AddSymlinkToHaikuImage beos bin : vim : view ;
+AddSymlinkToHaikuImage system bin : bzip2 : bunzip2 ;
+AddSymlinkToHaikuImage system bin : less : more ;
+AddSymlinkToHaikuImage system bin : gzip : gunzip ;
+AddSymlinkToHaikuImage system bin : gzip : zcat ;
+AddSymlinkToHaikuImage system bin : zdiff : zcmp ;
+AddSymlinkToHaikuImage system bin : unzip : zipinfo ;
+AddSymlinkToHaikuImage system bin : gawk : awk ;
+AddSymlinkToHaikuImage system bin : grep : egrep ;
+AddSymlinkToHaikuImage system bin : grep : fgrep ;
+AddSymlinkToHaikuImage system bin : vim : vi ;
+AddSymlinkToHaikuImage system bin : vim : view ;
 
 
 # scripts and data files
 local bootScripts = Bootscript Bootscript.cd SetupEnvironment Netscript InstallerInitScript
 	InstallerFinishScript ;
 SEARCH on $(bootScripts) = [ FDirName $(HAIKU_TOP) data system boot ] ;
-AddFilesToHaikuImage beos system boot : $(bootScripts) ;
+AddFilesToHaikuImage system boot : $(bootScripts) ;
 
 local userBootScripts = UserBootscript.sample UserSetupEnvironment.sample ;
 SEARCH on $(userBootScripts) = [ FDirName $(HAIKU_TOP) data config boot ] ;
@@ -309,25 +310,25 @@
 local logoArtwork = &quot;HAIKU logo - white on blue - big.png&quot;
 	&quot;HAIKU logo - white on blue - normal.png&quot; ;
 SEARCH on $(logoArtwork) = [ FDirName $(HAIKU_TOP) data artwork ] ;
-AddFilesToHaikuImage beos etc artwork : $(logoArtwork) ;
+AddFilesToHaikuImage system data artwork : $(logoArtwork) ;
 
-AddDirectoryToHaikuImage beos etc sounds ;
+AddDirectoryToHaikuImage system data sounds ;
 
 # Mail spell check dictionaries
 local spellFiles = words geekspeak ;
 spellFiles = $(spellFiles:G=spell) ;
 SEARCH on $(spellFiles)
 	= [ FDirName $(HAIKU_TOP) src apps mail ] ;
-AddFilesToHaikuImage beos etc word_dictionary : $(spellFiles) ;
+AddFilesToHaikuImage system etc word_dictionary : $(spellFiles) ;
 
 local etcFiles = inputrc profile teapot.data ;
 etcFiles = $(etcFiles:G=etc) ;
 SEARCH on $(etcFiles) = [ FDirName $(HAIKU_TOP) data etc ] ;
 etcFiles += &lt;etc&gt;termcap &lt;etc&gt;sysless &lt;etc&gt;sysless.in ;
-AddFilesToHaikuImage beos etc : $(etcFiles) ;
+AddFilesToHaikuImage system etc : $(etcFiles) ;
 
 SEARCH on &lt;etc&gt;vimrc = [ FDirName $(HAIKU_TOP) data etc vim ] ;
-AddFilesToHaikuImage beos etc vim : &lt;etc&gt;vimrc ;
+AddFilesToHaikuImage system etc vim : &lt;etc&gt;vimrc ;
 
 local fortuneFiles =  Art Computers Education Food Fortunes Goedel Haiku
 	Humorists Kids Law &quot;Linux cookies&quot; Love Magic Medicine Miscellaneous
@@ -335,37 +336,37 @@
 	Sports &quot;Tech Support Excuses&quot; ;
 fortuneFiles = $(fortuneFiles:G=etc!fortunes) ;
 SEARCH on $(fortuneFiles) = [ FDirName $(HAIKU_TOP) data etc fortunes ] ;
-AddFilesToHaikuImage beos etc fortunes : $(fortuneFiles) ;
+AddFilesToHaikuImage system etc fortunes : $(fortuneFiles) ;
 
 local fontDir = [ FDirName $(HAIKU_TOP) data etc fonts ] ;
 local psFonts = [ Glob $(fontDir)/psfonts : *.afm *.pfb ] ;
 local ttFonts = [ Glob $(fontDir)/ttfonts : *.ttf ] ;
-AddFilesToHaikuImage beos etc fonts psfonts : $(psFonts) ;
-AddFilesToHaikuImage beos etc fonts ttfonts : $(ttFonts) ;
+AddFilesToHaikuImage system fonts psfonts : $(psFonts) ;
+AddFilesToHaikuImage system fonts ttfonts : $(ttFonts) ;
 
 local kanbeDir = [ FDirName $(HAIKU_TOP) data etc KanBe ] ;
 local kanbeDefault = [ Glob $(kanbeDir)/default : *.canna *.gz ] ;
 local kanbeDic = [ Glob $(kanbeDir)/dic : *.cbp ] ;
 local kanbeDicCanna = [ Glob $(kanbeDir)/dic/canna
 	: *.cld *.ctd *.cbd *.dir ] ;
-AddFilesToHaikuImage beos etc KanBe default : $(kanbeDefault) ;
-AddFilesToHaikuImage beos etc KanBe dic : $(kanbeDic) ;
-AddFilesToHaikuImage beos etc KanBe dic canna : $(kanbeDicCanna) ;
-AddDirectoryToHaikuImage beos etc KanBe dic group ;
-AddDirectoryToHaikuImage beos etc KanBe dic user ;
+AddFilesToHaikuImage system data KanBe default : $(kanbeDefault) ;
+AddFilesToHaikuImage system data KanBe dic : $(kanbeDic) ;
+AddFilesToHaikuImage system data KanBe dic canna : $(kanbeDicCanna) ;
+AddDirectoryToHaikuImage system data KanBe dic group ;
+AddDirectoryToHaikuImage system data KanBe dic user ;
 
 local keymapFiles = [ GLOB [ FDirName $(HAIKU_TOP) src data etc keymaps ]
 	: *.keymap ] ;
 keymapFiles = $(keymapFiles:BG=keymap) ;
-AddFilesToHaikuImage beos etc Keymap : $(keymapFiles) ;
-AddSymlinkToHaikuImage beos etc Keymap : Swedish : Finnish ;
-AddSymlinkToHaikuImage beos etc Keymap : Slovene : Croatian ;
-AddSymlinkToHaikuImage beos etc Keymap : US-International : Brazilian ;
+AddFilesToHaikuImage system data Keymaps : $(keymapFiles) ;
+AddSymlinkToHaikuImage system data Keymaps : Swedish : Finnish ;
+AddSymlinkToHaikuImage system data Keymaps : Slovene : Croatian ;
+AddSymlinkToHaikuImage system data Keymaps : US-International : Brazilian ;
 
 local timezones = [ FTimeZoneBinaries $(HAIKU_TIME_ZONE_SOURCES) : : true ] ;
 for timezone in $(timezones) {
 	local dir = [ on $(timezone) return $(RELATIVE_TIMEZONE_DIR) ] ;
-	AddFilesToHaikuImage beos etc timezones $(dir) : $(timezone) ;
+	AddFilesToHaikuImage system data timezones $(dir) : $(timezone) ;
 }
 
 local driverSettingsFiles = &lt;driver-settings&gt;kernel ;
@@ -390,7 +391,7 @@
 AddFilesToHaikuImage common settings : &lt;post-install&gt;fresh_install ;
 
 # boot loader
-AddFilesToHaikuImage beos system : zbeos ;
+AddFilesToHaikuImage system : haiku_loader ;
 
 # boot module links
 AddBootModuleSymlinksToHaikuImage
@@ -405,48 +406,48 @@
 ;
 
 # add-ons
-AddFilesToHaikuImage beos system add-ons accelerants
-	: $(BEOS_ADD_ONS_ACCELERANTS) ;
-AddFilesToHaikuImage beos system add-ons opengl
+AddFilesToHaikuImage system add-ons accelerants
+	: $(SYSTEM_ADD_ONS_ACCELERANTS) ;
+AddFilesToHaikuImage system add-ons opengl
 	: $(X86_ONLY)Mesa\ Software\ Renderer ;
-AddFilesToHaikuImage beos system add-ons Translators
-	: $(BEOS_ADD_ONS_TRANSLATORS) ;
-AddFilesToHaikuImage beos system add-ons mail_daemon inbound_protocols : POP3 IMAP ;
-AddFilesToHaikuImage beos system add-ons mail_daemon outbound_protocols : SMTP ;
-AddFilesToHaikuImage beos system add-ons mail_daemon inbound_filters : Match\ Header Spam\ Filter R5\ Daemon\ Filter ;
-AddFilesToHaikuImage beos system add-ons mail_daemon outbound_filters : Fortune ;
-AddFilesToHaikuImage beos system add-ons mail_daemon system_filters : Inbox New\ Mail\ Notification Outbox Message\ Parser ;
-AddFilesToHaikuImage beos system add-ons media : $(BEOS_ADD_ONS_MEDIA) ;
-AddFilesToHaikuImage beos system add-ons media plugins
-	: $(BEOS_ADD_ONS_MEDIA_PLUGINS) ;
-AddFilesToHaikuImage beos system add-ons Tracker
+AddFilesToHaikuImage system add-ons Translators
+	: $(SYSTEM_ADD_ONS_TRANSLATORS) ;
+AddFilesToHaikuImage system add-ons mail_daemon inbound_protocols : POP3 IMAP ;
+AddFilesToHaikuImage system add-ons mail_daemon outbound_protocols : SMTP ;
+AddFilesToHaikuImage system add-ons mail_daemon inbound_filters : Match\ Header Spam\ Filter R5\ Daemon\ Filter ;
+AddFilesToHaikuImage system add-ons mail_daemon outbound_filters : Fortune ;
+AddFilesToHaikuImage system add-ons mail_daemon system_filters : Inbox New\ Mail\ Notification Outbox Message\ Parser ;
+AddFilesToHaikuImage system add-ons media : $(SYSTEM_ADD_ONS_MEDIA) ;
+AddFilesToHaikuImage system add-ons media plugins
+	: $(SYSTEM_ADD_ONS_MEDIA_PLUGINS) ;
+AddFilesToHaikuImage system add-ons Tracker
 	: FileType-F ZipOMatic-Z Open\ Target\ Folder-T ;
-AddSymlinkToHaikuImage beos system add-ons Tracker
-	: /boot/beos/preferences/Backgrounds : Background-B ;
-AddSymlinkToHaikuImage beos system add-ons Tracker
-	: /boot/beos/apps/TextSearch : TextSearch-G ;
-AddSymlinkToHaikuImage beos system add-ons Tracker
-	: /boot/beos/apps/DiskUsage : DiskUsage-I ;
-AddFilesToHaikuImage beos system add-ons input_server devices
+AddSymlinkToHaikuImage system add-ons Tracker
+	: /boot/system/preferences/Backgrounds : Background-B ;
+AddSymlinkToHaikuImage system add-ons Tracker
+	: /boot/system/apps/TextSearch : TextSearch-G ;
+AddSymlinkToHaikuImage system add-ons Tracker
+	: /boot/system/apps/DiskUsage : DiskUsage-I ;
+AddFilesToHaikuImage system add-ons input_server devices
 	: &lt;input&gt;keyboard &lt;input&gt;mouse &lt;input&gt;wacom ;
-AddFilesToHaikuImage beos system add-ons input_server filters : screen_saver ;
-AddFilesToHaikuImage beos system add-ons kernel network
+AddFilesToHaikuImage system add-ons input_server filters : screen_saver ;
+AddFilesToHaikuImage system add-ons kernel network
 	: &lt;net&gt;notifications stack ;
-AddFilesToHaikuImage beos system add-ons kernel network devices
-	: $(BEOS_NETWORK_DEVICES) ;
-AddFilesToHaikuImage beos system add-ons kernel network datalink_protocols
-	: $(BEOS_NETWORK_DATALINK_PROTOCOLS) ;
-AddFilesToHaikuImage beos system add-ons kernel network ppp
-	: $(BEOS_NETWORK_PPP) ;
-AddFilesToHaikuImage beos system add-ons kernel network protocols
-	: $(BEOS_NETWORK_PROTOCOLS) ;
-AddFilesToHaikuImage beos system add-ons Print : $(BEOS_ADD_ONS_PRINT) ;
-AddFilesToHaikuImage beos system add-ons Print transport
-	: $(BEOS_ADD_ONS_PRINT_TRANSPORT) ;
-AddFilesToHaikuImage beos system add-ons Screen\ Savers
-	: $(BEOS_ADD_ONS_SCREENSAVERS) ;
+AddFilesToHaikuImage system add-ons kernel network devices
+	: $(SYSTEM_NETWORK_DEVICES) ;
+AddFilesToHaikuImage system add-ons kernel network datalink_protocols
+	: $(SYSTEM_NETWORK_DATALINK_PROTOCOLS) ;
+AddFilesToHaikuImage system add-ons kernel network ppp
+	: $(SYSTEM_NETWORK_PPP) ;
+AddFilesToHaikuImage system add-ons kernel network protocols
+	: $(SYSTEM_NETWORK_PROTOCOLS) ;
+AddFilesToHaikuImage system add-ons Print : $(SYSTEM_ADD_ONS_PRINT) ;
+AddFilesToHaikuImage system add-ons Print transport
+	: $(SYSTEM_ADD_ONS_PRINT_TRANSPORT) ;
+AddFilesToHaikuImage system add-ons Screen\ Savers
+	: $(SYSTEM_ADD_ONS_SCREENSAVERS) ;
 
-AddFilesToHaikuImage beos system add-ons disk_systems
+AddFilesToHaikuImage system add-ons disk_systems
 	: &lt;disk_system&gt;intel &lt;disk_system&gt;bfs ;
 
 # create directories that will remain empty
@@ -469,11 +470,11 @@
 AddDirectoryToHaikuImage home config add-ons Tracker ;
 AddDirectoryToHaikuImage home config add-ons Screen\ Savers ;
 AddDirectoryToHaikuImage home config add-ons Translators ;
-AddDirectoryToHaikuImage beos etc synth ;
-AddDirectoryToHaikuImage beos system add-ons input_server methods ;
+AddDirectoryToHaikuImage system data synth ;
+AddDirectoryToHaikuImage system add-ons input_server methods ;
 
 # optional
-AddFilesToHaikuImage optional beos system add-ons input_server methods : canna ;
+AddFilesToHaikuImage optional system add-ons input_server methods : canna ;
 
 # printers
 AddDirectoryToHaikuImage home config settings printers Preview
@@ -482,7 +483,7 @@
       : home-config-settings-printers-save-as-pdf.rdef ;
 
 # licenses
-CopyDirectoryToHaikuImage beos etc
+CopyDirectoryToHaikuImage system data
 	: [ FDirName $(HAIKU_TOP) data etc licenses ]
 	: licenses : -x .svn ;
 
@@ -512,14 +513,14 @@
 
 # collect the targets we would install in the lib directory
 local alternativeSystemLibs ;
-local libTargets = [ FFilesInHaikuImageDirectory beos system lib ] ;
+local libTargets = [ FFilesInHaikuImageDirectory system lib ] ;
 local libTarget ;
 for libTarget in $(libTargets) {
 	alternativeSystemLibs += [ on $(libTarget) return $(TARGET) ] ;
 }
 
 # collect the symlinks we would install in the lib directory
-libTargets = [ FSymlinksInHaikuImageDirectory beos system lib ] ;
+libTargets = [ FSymlinksInHaikuImageDirectory system lib ] ;
 local tmpAlternativeLibDir
 	= [ FDirName $(HAIKU_OUTPUT_DIR) tmp alternativeLibs ] ;
 for libTarget in $(libTargets) {
@@ -567,7 +568,7 @@
 	}
 
 	# install the alternative libs in the right directory
-	UnzipArchiveToHaikuImage beos system lib $(libSubDir)
+	UnzipArchiveToHaikuImage system lib $(libSubDir)
 		: $(otherAlternativeSystemLibsZip) ;
 }
 

Modified: haiku/trunk/build/jam/ImageRules
===================================================================
--- haiku/trunk/build/jam/ImageRules	2009-04-03 08:05:25 UTC (rev 29875)
+++ haiku/trunk/build/jam/ImageRules	2009-04-03 09:02:44 UTC (rev 29876)
@@ -288,10 +288,10 @@
 {
 	# AddDriversToContainer &lt;container&gt; : &lt;relative directory&gt; : &lt;targets&gt; ;
 	#
-	local directoryTokens = beos system add-ons kernel drivers dev
+	local directoryTokens = system add-ons kernel drivers dev
 		$(relativeDirectoryTokens) ;
 
-	AddFilesToContainer $(container) : beos system add-ons kernel drivers bin
+	AddFilesToContainer $(container) : system add-ons kernel drivers bin
 		: $(targets) ;
 
 	# If the image shall only be updated, we don't add any symlinks.
@@ -320,7 +320,7 @@
 {
 	# AddNewDriversToContainer &lt;container&gt; : &lt;directory&gt; : &lt;targets&gt; ;
 	#
-	local directoryTokens = beos system add-ons kernel drivers
+	local directoryTokens = system add-ons kernel drivers
 		$(relativeDirectoryTokens) ;
 
 	AddFilesToContainer $(container) : $(directoryTokens)
@@ -356,7 +356,7 @@
 		local name = $(target:BS) ;
 		local linkTarget = [ FDirName /boot $(installDir:G=) $(name) ] ;
 
-		AddSymlinkToContainer $(container) : beos system add-ons kernel boot
+		AddSymlinkToContainer $(container) : system add-ons kernel boot
 			: $(linkTarget) : $(name) ;
 	}
 }
@@ -751,7 +751,7 @@
 		Always $(file) ;
 		MakeLocate $(file) : $(HAIKU_COMMON_PLATFORM_OBJECT_DIR) ;
 		BuildHaikuImageUserGroupFile $(file) ;
-		AddFilesToHaikuImage beos etc : $(file) ;
+		AddFilesToHaikuImage system etc : $(file) ;
 	}
 
 	HAIKU_IMAGE_USER_GROUP_ENTRIES on $(file) = $(allEntries) ;
@@ -805,7 +805,7 @@
 		name = ;
 	}
 
-	AddFilesToHaikuImage beos etc licenses : $(file) : $(name) ;
+	AddFilesToHaikuImage system data licenses : $(file) : $(name) ;
 }
 
 
@@ -1053,9 +1053,9 @@
 
 # warning: that is quite x86 dependant...
 
-rule BuildFloppyBootImage image : zbeos : archive
+rule BuildFloppyBootImage image : haikuLoader : archive
 {
-	Depends $(image) : $(zbeos) ;
+	Depends $(image) : $(haikuLoader) ;
 	Depends $(image) : $(archive) ;
 	#MakeLocateDebug $(image) ;
 	ARCHIVE_IMAGE_OFFSET on $(image) = $(HAIKU_BOOT_ARCHIVE_IMAGE_OFFSET) ;
@@ -1067,7 +1067,7 @@
 		FLOPPY_IMAGE_BLOCK_SIZE on $(image) = 2 ;
 	}
 
-	BuildFloppyBootImage1 $(image) : $(zbeos) $(archive) ;
+	BuildFloppyBootImage1 $(image) : $(haikuLoader) $(archive) ;
 }
 
 actions BuildFloppyBootImage1
@@ -1075,11 +1075,9 @@
 	$(RM) $(&lt;)
 	# make an empty image
 	dd if=/dev/zero of=$(&lt;) bs=$(FLOPPY_IMAGE_BLOCK_SIZE)k count=1440
-	# add zbeos
+	# add haiku_loader
 	dd if=$(&gt;[1]) of=$(&lt;) conv=notrunc
 	# add the boot drivers tgz archive
-	# keep the offset in sync with
-	# src/system/boot/loader/file_systems/tarfs/tarfs.cpp:kFloppyArchiveOffset
 	dd if=$(&gt;[2]) of=$(&lt;) bs=$(ARCHIVE_IMAGE_OFFSET)k seek=1 conv=notrunc
 }
 

Modified: haiku/trunk/build/jam/OptionalPackages
===================================================================
--- haiku/trunk/build/jam/OptionalPackages	2009-04-03 08:05:25 UTC (rev 29875)
+++ haiku/trunk/build/jam/OptionalPackages	2009-04-03 09:02:44 UTC (rev 29876)
@@ -102,10 +102,10 @@
 if [ IsOptionalHaikuImagePackageAdded BeBook ] {
 	InstallOptionalHaikuImagePackage bebook_20081026
 		: <A HREF="http://haiku-files.org/files/optional-packages/bebook_20081026.zip">http://haiku-files.org/files/optional-packages/bebook_20081026.zip</A>
-		: beos documentation
+		: system documentation
 	;
 	AddSymlinkToHaikuImage home Desktop
-		: /boot/beos/documentation/bebook/index.html : BeBook ;
+		: /boot/system/documentation/bebook/index.html : BeBook ;
 }
 
 
@@ -147,14 +147,15 @@
 if [ IsOptionalHaikuImagePackageAdded Bluetooth ] {
 	local bluetoothDrivers = h2generic ;
 	AddDriversToHaikuImage bluetooth : $(bluetoothDrivers) ;
-	AddFilesToHaikuImage beos system servers : bluetooth_server ;
-	AddFilesToHaikuImage beos system lib : libbluetooth.so ;
-	AddFilesToHaikuImage beos system add-ons kernel network devices : bluetooth ;
-	AddFilesToHaikuImage beos system add-ons kernel network protocols : l2cap ;
-	AddFilesToHaikuImage beos system add-ons kernel bluetooth : btCoreData ;
-	AddFilesToHaikuImage beos preferences : Bluetooth ;
-	AddFilesToHaikuImage beos bin : bt_dev_info bt_discovery ;
-	AddSymlinkToHaikuImage home config be Preferences : /boot/beos/preferences/Bluetooth ;
+	AddFilesToHaikuImage system servers : bluetooth_server ;
+	AddFilesToHaikuImage system lib : libbluetooth.so ;
+	AddFilesToHaikuImage system add-ons kernel network devices : bluetooth ;
+	AddFilesToHaikuImage system add-ons kernel network protocols : l2cap ;
+	AddFilesToHaikuImage system add-ons kernel bluetooth : btCoreData ;
+	AddFilesToHaikuImage system preferences : Bluetooth ;
+	AddFilesToHaikuImage system bin : bt_dev_info bt_discovery ;
+	AddSymlinkToHaikuImage home config be Preferences
+		: /boot/system/preferences/Bluetooth ;
 	if [ IsOptionalHaikuImagePackageAdded Development ] {
 		AddSymlinkToHaikuImage develop lib x86 : /system/lib/libbluetooth.so ;
 	}
@@ -198,12 +199,12 @@
 	AddFilesToHaikuImage develop lib x86 : libposix_error_mapper.a ;
 
 	# cc and c++ wrapper scripts
-	AddFilesToHaikuImage beos bin : cc c++ ;
+	AddFilesToHaikuImage system bin : cc c++ ;
 
 	# mkdepend build tool, which is part of the Haiku source tree
 	# (same as make, but make is already included independent of the
 	# Development package)
-	AddFilesToHaikuImage beos bin : mkdepend ;
+	AddFilesToHaikuImage system bin : mkdepend ;
 
 	# skeleton makefile and makefile-engine
 	local makefileEngineFiles =
@@ -520,10 +521,10 @@
 # UserlandFS
 if [ IsOptionalHaikuImagePackageAdded UserlandFS ] {
 	# kernel module
-	AddFilesToHaikuImage beos system add-ons kernel file_systems : userlandfs ;
+	AddFilesToHaikuImage system add-ons kernel file_systems : userlandfs ;
 
 	# server
-	AddFilesToHaikuImage beos system servers : userlandfs_server ;
+	AddFilesToHaikuImage system servers : userlandfs_server ;
 
 	# libs
 	local userlandfsLibs =
@@ -531,7 +532,7 @@
 		libuserlandfs_haiku_kernel.so
 		libuserlandfs_fuse.so
 	;
-	AddFilesToHaikuImage beos system lib : $(userlandfsLibs) ;
+	AddFilesToHaikuImage system lib : $(userlandfsLibs) ;
 
 	# development goodies
 	if [ IsOptionalHaikuImagePackageAdded Development ] {
@@ -602,17 +603,17 @@
 
 # Welcome
 if [ IsOptionalHaikuImagePackageAdded Welcome ] {
-	CopyDirectoryToHaikuImage beos documentation
+	CopyDirectoryToHaikuImage system documentation
 		: [ FDirName $(HAIKU_TOP) docs welcome ]
 		: welcome : -x .svn ;
-	CopyDirectoryToHaikuImage beos documentation
+	CopyDirectoryToHaikuImage system documentation
 		: [ FDirName $(HAIKU_TOP) docs userguide ]
 		: userguide : -x .svn ;
-	AddFilesToHaikuImage beos documentation
+	AddFilesToHaikuImage system documentation
 		: [ FDirName $(HAIKU_TOP) docs Haiku-doc.css ]
 		: Haiku-doc.css ;
 	AddSymlinkToHaikuImage home Desktop
-		: /boot/beos/documentation/welcome/welcome.html : Welcome ;
+		: /boot/system/documentation/welcome/welcome.html : Welcome ;
 }
 
 

Modified: haiku/trunk/build/jam/UserBuildConfig.ReadMe
===================================================================
--- haiku/trunk/build/jam/UserBuildConfig.ReadMe	2009-04-03 08:05:25 UTC (rev 29875)
+++ haiku/trunk/build/jam/UserBuildConfig.ReadMe	2009-04-03 09:02:44 UTC (rev 29876)
@@ -83,17 +83,17 @@
 # has been added, like for &quot;kernel&quot;).
 HAIKU_INCLUDE_IN_IMAGE on libbe.so kernel = 1 ;
 
-# Add &quot;crashing_app&quot; to the beos/bin directory of the Haiku image/installation.
+# Add &quot;crashing_app&quot; to the system/bin directory of the Haiku image/installation.
 # Note, that this also makes the image depend on the target, i.e. it is
 # automatically updated when the image is built.
-AddFilesToHaikuImage beos bin : crashing_app ;
+AddFilesToHaikuImage system bin : crashing_app ;
 
 # Make a symlink to home/config/bin/crash.
-AddSymlinkToHaikuImage home config bin : /beos/bin/crashing_app : crash ;
+AddSymlinkToHaikuImage home config bin : /bin/crashing_app : crash ;
 
 # Add timezone and keymap settings.
 AddSymlinkToHaikuImage home config settings
-	: /boot/beos/etc/timezones/Europe/Paris : timezone ;
+	: /boot/system/data/timezones/Europe/Paris : timezone ;
 AddFilesToHaikuImage home config settings : &lt;keymap&gt;US-International : Key_map ;
 
 # Adds the source directories src/kits/storage and src/tests/servers/debug

Modified: haiku/trunk/build/jam/UserBuildConfig.sample
===================================================================
--- haiku/trunk/build/jam/UserBuildConfig.sample	2009-04-03 08:05:25 UTC (rev 29875)
+++ haiku/trunk/build/jam/UserBuildConfig.sample	2009-04-03 09:02:44 UTC (rev 29876)
@@ -8,7 +8,7 @@
 #HAIKU_INSTALL_DIR = /Haiku ;
 
 # Install Haiku on device /dev/sda57. Be sure you know what you're doing!
-#HAIKU_IMAGE_DIR		= /dev ;
+#HAIKU_IMAGE_DIR	= /dev ;
 #HAIKU_IMAGE_NAME	= sda57 ;
 #HAIKU_DONT_CLEAR_IMAGE = 1 ;
 
@@ -19,7 +19,7 @@
 
 # Add symlink/file (timezone and keymap settings) to the image.
 #AddSymlinkToHaikuImage home config settings
-#	: /boot/beos/etc/timezones/Europe/Paris : timezone ;
+#	: /boot/system/data/timezones/Europe/Paris : timezone ;
 #AddFilesToHaikuImage home config settings : &lt;keymap&gt;US-International
 #	: Key_map ;
 

Modified: haiku/trunk/build/scripts/build_haiku_cd
===================================================================
--- haiku/trunk/build/scripts/build_haiku_cd	2009-04-03 08:05:25 UTC (rev 29875)
+++ haiku/trunk/build/scripts/build_haiku_cd	2009-04-03 09:02:44 UTC (rev 29876)
@@ -135,7 +135,7 @@
 	$rmAttrs -f $copyrightAttrs
 	touch $copyrightAttrs
 	$addattr -f $copyrightsFile COPYRIGHTS $copyrightAttrs
-	$copyAttrs $copyrightAttrs ${tPrefix}beos/apps/AboutSystem
+	$copyAttrs $copyrightAttrs ${tPrefix}system/apps/AboutSystem
 fi
 
 # generate the attribute stores

Modified: haiku/trunk/build/scripts/build_haiku_image
===================================================================
--- haiku/trunk/build/scripts/build_haiku_image	2009-04-03 08:05:25 UTC (rev 29875)
+++ haiku/trunk/build/scripts/build_haiku_image	2009-04-03 09:02:44 UTC (rev 29876)
@@ -207,7 +207,7 @@
 		$rmAttrs -f $copyrightAttrs
 		touch $copyrightAttrs
 		$addattr -f $copyrightsFile COPYRIGHTS $copyrightAttrs
-		$copyAttrs ${sPrefix}$copyrightAttrs ${tPrefix}beos/apps/AboutSystem
+		$copyAttrs ${sPrefix}$copyrightAttrs ${tPrefix}system/apps/AboutSystem
 	fi
 fi
 

Modified: haiku/trunk/data/system/boot/Bootscript
===================================================================
--- haiku/trunk/data/system/boot/Bootscript	2009-04-03 08:05:25 UTC (rev 29875)
+++ haiku/trunk/data/system/boot/Bootscript	2009-04-03 09:02:44 UTC (rev 29876)
@@ -20,7 +20,7 @@
 		echo There is no &quot;$toLaunch&quot;
 	fi
 	return 0
-}	
+}
 
 # launchscript &lt;script path&gt;
 
@@ -54,13 +54,13 @@
 exec &gt;/dev/null 2&gt;&amp;1
 
 # Standard locations of boot files
-SCRIPTS=beos/system/boot
-SERVERS=beos/system/servers
+SCRIPTS=system/boot
+SERVERS=system/servers
 
 # clean the shared memory dir
 shmDir=/boot/var/shared_memory
 rm -rf $shmDir
-mkdir $shmDir
+mkdir -p $shmDir
 chmod 777 $shmDir
 
 # Set up the environment
@@ -77,7 +77,7 @@
 fi
 
 # Sets timezone etc.
-runprog beos/bin/clockconfig
+runprog system/bin/clockconfig
 
 # Launch servers
 
@@ -105,18 +105,18 @@
 # Launch Terminal or consoled depending on $SAFEMODE
 if [ &quot;$SAFEMODE&quot; != &quot;yes&quot; ]; then
 	if [ -e /etc/users ]; then
-		launch beos/system/Login
+		launch system/Login
 		# nothing more
 	else
-		launch beos/system/Tracker
-		launch beos/system/Deskbar
+		launch system/Tracker
+		launch system/Deskbar
 
 		# install ProcessController in the deskbar
-		(sleep 7; /boot/beos/apps/ProcessController -deskbar) &amp;
+		(sleep 7; /boot/system/apps/ProcessController -deskbar) &amp;
 	fi
-	launch beos/apps/Terminal
+	launch system/apps/Terminal
 else
-	launch beos/bin/consoled
+	launch system/bin/consoled
 fi
 
 if [ &quot;$SAFEMODE&quot; != &quot;yes&quot; ]; then
@@ -124,7 +124,7 @@
 	launch $SERVERS/midi_server
 fi
 
-# Launch Print Server 
+# Launch Print Server
 if [ &quot;$SAFEMODE&quot; != &quot;yes&quot; ]; then
 	launch $SERVERS/print_server
 fi
@@ -135,7 +135,7 @@
 fi
 
 # Check for daily saving time
-launch beos/bin/dstcheck
+launch system/bin/dstcheck
 
 if [ &quot;$SAFEMODE&quot; != &quot;yes&quot; ]; then
 	# Start user boot script

Modified: haiku/trunk/data/system/boot/Bootscript.cd
===================================================================
--- haiku/trunk/data/system/boot/Bootscript.cd	2009-04-03 08:05:25 UTC (rev 29875)
+++ haiku/trunk/data/system/boot/Bootscript.cd	2009-04-03 09:02:44 UTC (rev 29876)
@@ -72,15 +72,15 @@
 
 # Launch Terminal or consoled depending on $SAFEMODE
 if [ &quot;$SAFEMODE&quot; != &quot;yes&quot; ]; then
-	if [ -x /boot/beos/apps/Installer ]; then
-		/boot/beos/apps/Installer
-		#/boot/beos/apps/Terminal -x /boot/beos/apps/Installer
+	if [ -x /boot/system/apps/Installer ]; then
+		/boot/system/apps/Installer
+		#/boot/system/apps/Terminal -x /boot/system/apps/Installer
 	else
-		/boot/beos/apps/Terminal
+		/boot/system/apps/Terminal
 	fi
-	#launch beos/apps/Terminal
+	#launch system/apps/Terminal
 else
-	launch beos/bin/consoled
+	launch system/bin/consoled
 fi
 
 # sync disks

Modified: haiku/trunk/data/system/boot/SetupEnvironment
===================================================================
--- haiku/trunk/data/system/boot/SetupEnvironment	2009-04-03 08:05:25 UTC (rev 29875)
+++ haiku/trunk/data/system/boot/SetupEnvironment	2009-04-03 09:02:44 UTC (rev 29876)
@@ -42,13 +42,13 @@
 
 if [ &quot;$SAFEMODE&quot; != &quot;yes&quot; ]
 then
-	export PATH=.:$HOME/config/bin:/boot/common/bin:/bin:/boot/apps:/boot/preferences:/boot/beos/apps:/boot/beos/preferences:$BETOOLS
-	export LIBRARY_PATH=&quot;%A/lib:$HOME/config/lib:/boot/common/lib:/boot/beos/system/lib&quot;
-	export ADDON_PATH=&quot;%A/add-ons:$HOME/config/add-ons:/boot/beos/system/add-ons&quot;
+	export PATH=.:$HOME/config/bin:/boot/common/bin:/bin:/boot/apps:/boot/preferences:/boot/system/apps:/boot/system/preferences:$BETOOLS
+	export LIBRARY_PATH=&quot;%A/lib:$HOME/config/lib:/boot/common/lib:/boot/system/lib&quot;
+	export ADDON_PATH=&quot;%A/add-ons:$HOME/config/add-ons:/boot/system/add-ons&quot;
 else
-	export PATH=.:/boot/common/bin:/bin:/boot/apps:/boot/preferences:/boot/beos/apps:/boot/beos/preferences:$BETOOLS
-	export LIBRARY_PATH=&quot;%A/lib:/boot/common/lib:/boot/beos/system/lib&quot;
-	export ADDON_PATH=&quot;%A/add-ons:/boot/beos/system/add-ons&quot;
+	export PATH=.:/boot/common/bin:/bin:/boot/apps:/boot/preferences:/boot/system/apps:/boot/system/preferences:$BETOOLS
+	export LIBRARY_PATH=&quot;%A/lib:/boot/common/lib:/boot/system/lib&quot;
+	export ADDON_PATH=&quot;%A/add-ons:/boot/system/add-ons&quot;
 fi

[... truncated: 4164 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015389.html">[Haiku-commits] r29875 - haiku/trunk/src/system/kernel
</A></li>
	<LI>Next message: <A HREF="015393.html">[Haiku-commits] r29876 - in haiku/trunk: build/jam build/scripts data/system/boot headers/os/storage src/apps/aboutsystem src/apps/processcontroller src/bin/bash src/bin/gdb/gdb src/bin/grep/src src/bin/make src/bin/vim/src src/kits/tracker src/preferences/joysticks src/preferences/keymap src/preferences/time src/servers/debug src/servers/registrar  src/system/boot src/system/boot/loader src/system/boot/platform/atari_m68k src/system/boot/platform/bios_ia32 src/system/boot/platform/generic src/system/kernel/fs src/system/libroot/os  src/system/runtime_loader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15390">[ date ]</a>
              <a href="thread.html#15390">[ thread ]</a>
              <a href="subject.html#15390">[ subject ]</a>
              <a href="author.html#15390">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
