<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r26755 - in haiku/trunk: headers/libs/agg	headers/private/app src/kits/interface	src/preferences/appearance src/preferences/fonts	src/servers/app src/servers/app/drawing/Painter	src/servers/app/drawing/Painter/drawing_modes src/tests/servers/app
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r26755%20-%20in%20haiku/trunk%3A%20headers/libs/agg%0A%09headers/private/app%20src/kits/interface%0A%09src/preferences/appearance%20src/preferences/fonts%0A%09src/servers/app%20src/servers/app/drawing/Painter%0A%09src/servers/app/drawing/Painter/drawing_modes%20src/tests/servers/app&In-Reply-To=%3C200808031340.m73Det8h006835%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010748.html">
   <LINK REL="Next"  HREF="010757.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r26755 - in haiku/trunk: headers/libs/agg	headers/private/app src/kits/interface	src/preferences/appearance src/preferences/fonts	src/servers/app src/servers/app/drawing/Painter	src/servers/app/drawing/Painter/drawing_modes src/tests/servers/app</H1>
    <B>stippi at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r26755%20-%20in%20haiku/trunk%3A%20headers/libs/agg%0A%09headers/private/app%20src/kits/interface%0A%09src/preferences/appearance%20src/preferences/fonts%0A%09src/servers/app%20src/servers/app/drawing/Painter%0A%09src/servers/app/drawing/Painter/drawing_modes%20src/tests/servers/app&In-Reply-To=%3C200808031340.m73Det8h006835%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r26755 - in haiku/trunk: headers/libs/agg	headers/private/app src/kits/interface	src/preferences/appearance src/preferences/fonts	src/servers/app src/servers/app/drawing/Painter	src/servers/app/drawing/Painter/drawing_modes src/tests/servers/app">stippi at mail.berlios.de
       </A><BR>
    <I>Sun Aug  3 15:40:55 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="010748.html">[Haiku-commits] r26754 - haiku/trunk/headers/posix/sys
</A></li>
        <LI>Next message: <A HREF="010757.html">[Haiku-commits] r26755 - in haiku/trunk: headers/libs/agg headers/private/app src/kits/interface src/preferences/appearance src/preferences/fonts src/servers/app src/servers/app/drawing/Painter src/servers/app/drawing/Painter/drawing_modes src/tests/servers/app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10750">[ date ]</a>
              <a href="thread.html#10750">[ thread ]</a>
              <a href="subject.html#10750">[ subject ]</a>
              <a href="author.html#10750">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: stippi
Date: 2008-08-03 15:40:41 +0200 (Sun, 03 Aug 2008)
New Revision: 26755
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=26755&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=26755&amp;view=rev</A>

Added:
   haiku/trunk/src/preferences/appearance/AntialiasingSettingsView.cpp
   haiku/trunk/src/preferences/appearance/AntialiasingSettingsView.h
   haiku/trunk/src/servers/app/drawing/Painter/GlobalSubpixelSettings.cpp
   haiku/trunk/src/servers/app/drawing/Painter/GlobalSubpixelSettings.h
   haiku/trunk/src/servers/app/drawing/Painter/agg_rasterizer_scanline_aa_subpix.h
   haiku/trunk/src/servers/app/drawing/Painter/agg_scanline_p_subpix.h
   haiku/trunk/src/servers/app/drawing/Painter/agg_scanline_p_subpix_avrg_filtering.h
   haiku/trunk/src/servers/app/drawing/Painter/agg_scanline_u_subpix_avrg_filtering.h
Removed:
   haiku/trunk/src/preferences/fonts/AdvancedSettingsView.cpp
   haiku/trunk/src/preferences/fonts/AdvancedSettingsView.h
Modified:
   haiku/trunk/headers/libs/agg/agg_renderer_base.h
   haiku/trunk/headers/private/app/ServerProtocol.h
   haiku/trunk/src/kits/interface/Font.cpp
   haiku/trunk/src/kits/interface/InterfaceDefs.cpp
   haiku/trunk/src/preferences/appearance/APRView.cpp
   haiku/trunk/src/preferences/appearance/APRView.h
   haiku/trunk/src/preferences/appearance/APRWindow.cpp
   haiku/trunk/src/preferences/appearance/APRWindow.h
   haiku/trunk/src/preferences/appearance/Jamfile
   haiku/trunk/src/preferences/fonts/FontView.h
   haiku/trunk/src/preferences/fonts/Jamfile
   haiku/trunk/src/preferences/fonts/MainWindow.cpp
   haiku/trunk/src/preferences/fonts/MainWindow.h
   haiku/trunk/src/servers/app/DesktopSettings.cpp
   haiku/trunk/src/servers/app/DesktopSettings.h
   haiku/trunk/src/servers/app/DesktopSettingsPrivate.h
   haiku/trunk/src/servers/app/FontCacheEntry.cpp
   haiku/trunk/src/servers/app/FontCacheEntry.h
   haiku/trunk/src/servers/app/FontEngine.cpp
   haiku/trunk/src/servers/app/FontEngine.h
   haiku/trunk/src/servers/app/ProfileMessageSupport.cpp
   haiku/trunk/src/servers/app/ServerApp.cpp
   haiku/trunk/src/servers/app/agg_scanline_storage_subpix.h
   haiku/trunk/src/servers/app/agg_scanline_u_subpix.h
   haiku/trunk/src/servers/app/drawing/Painter/AGGTextRenderer.cpp
   haiku/trunk/src/servers/app/drawing/Painter/AGGTextRenderer.h
   haiku/trunk/src/servers/app/drawing/Painter/Jamfile
   haiku/trunk/src/servers/app/drawing/Painter/Painter.cpp
   haiku/trunk/src/servers/app/drawing/Painter/Painter.h
   haiku/trunk/src/servers/app/drawing/Painter/agg_renderer_region.h
   haiku/trunk/src/servers/app/drawing/Painter/agg_renderer_scanline_subpix.h
   haiku/trunk/src/servers/app/drawing/Painter/defines.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeAddSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeAlphaCCSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeAlphaCOSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeAlphaCOSolidSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeAlphaPCSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeAlphaPOSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeAlphaPOSolidSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeBlendSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeCopySUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeCopySolidSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeCopyTextSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeEraseSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeInvertSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeMaxSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeMinSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeOverSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeOverSolidSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeSelectSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/DrawingModeSubtractSUBPIX.h
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/PixelFormat.cpp
   haiku/trunk/src/servers/app/drawing/Painter/drawing_modes/PixelFormat.h
   haiku/trunk/src/tests/servers/app/Jamfile
Log:
Patch by Andrej Spielmann (GSoC):
* Simplified the subpixel related methods for the AGG &quot;pixel format&quot; template
  interface, the ones for the solid cover simply pass through the existing
  methods, so only one subpixel blending function is left which does the actual
  work (this removes a lot of the previously added code)
* Implemented a new rasterizer based on the original AGG rasterizer which
  implements subpixel anti-aliasing for any generic AGG vector pipelines. It
  is now optionally used in Painter and AGGTextRenderer (for vector fonts, ie
  rotated, sheared or big enough fonts) depending on the global subpixel
  setting.
* Put all subpixel variables into the new GlobalSubpixelSettings.h|cpp
* Simplified DesktopSettings related classes a bit and renamed previous
  FontSubpixelAntialiasing to just SubpixelAntialiasing.
* The private libbe functions for subpixel related settings moved from Font.cpp
  to InterfaceDefs.cpp where other such functions live. They are not related
  to fonts only anymore.
* Removed the subpixel related settings again from the Fonts preflet and added
  them to the Appearance preflet instead.

All of the above implements subpixel anti-aliasing on a global scale, which
to my knowledge no other OS is doing at the moment. Any vector rendering
can optionally use subpixel anti-aliasing in Haiku now. The bitmap cached fonts
are still affected by the Freetype complile time #define to enable the patented
subpixel rasterization (three times wide glyphs). Vector fonts and shapes are
not affected though at the moment.



Modified: haiku/trunk/headers/libs/agg/agg_renderer_base.h
===================================================================
--- haiku/trunk/headers/libs/agg/agg_renderer_base.h	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/headers/libs/agg/agg_renderer_base.h	2008-08-03 13:40:41 UTC (rev 26755)
@@ -206,22 +206,7 @@
             m_ren-&gt;blend_hline(x1, y, x2 - x1 + 1, c, cover);
         }
 		
-		//--------------------------------------------------------------------
-        void blend_hline_subpix(int x1, int y, int x2, 
-                                const color_type&amp; c, cover_type cover)
-        {
-            if(x1 &gt; x2) { int t = x2; x2 = x1; x1 = t; }
-            if(y  &gt; ymax()) return;
-            if(y  &lt; ymin()) return;
-            if(x1 &gt; xmax()) return;
-            if(x2 &lt; xmin()) return;
 
-            if(x1 &lt; xmin()) x1 = xmin();
-            if(x2 &gt; xmax()) x2 = xmax();
-
-            m_ren-&gt;blend_hline_subpix(x1, y, x2 - x1 + 1, c, cover);
-        }
-
         //--------------------------------------------------------------------
         void blend_vline(int x, int y1, int y2, 
                          const color_type&amp; c, cover_type cover)
@@ -309,7 +294,7 @@
             {
                 len -= 3 * (xmin() - x);
                 if(len &lt;= 0) return;
-                covers += 3*(xmin() - x);
+                covers += 3 * (xmin() - x);
                 x = xmin();
             }
             if(x + len / 3 &gt; xmax())

Modified: haiku/trunk/headers/private/app/ServerProtocol.h
===================================================================
--- haiku/trunk/headers/private/app/ServerProtocol.h	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/headers/private/app/ServerProtocol.h	2008-08-03 13:40:41 UTC (rev 26755)
@@ -189,10 +189,15 @@
 	AS_GET_SHOW_ALL_DRAGGERS,
 	AS_SET_SHOW_ALL_DRAGGERS,
 
-	AS_SET_FONT_SUBPIXEL_ANTIALIASING,
-	AS_GET_FONT_SUBPIXEL_ANTIALIASING,
+	// Subpixel antialiasing &amp; hinting
+	AS_SET_SUBPIXEL_ANTIALIASING,
+	AS_GET_SUBPIXEL_ANTIALIASING,
 	AS_SET_HINTING,
 	AS_GET_HINTING,
+	AS_SET_SUBPIXEL_AVERAGE_WEIGHT,
+	AS_GET_SUBPIXEL_AVERAGE_WEIGHT,
+	AS_SET_SUBPIXEL_ORDERING,
+	AS_GET_SUBPIXEL_ORDERING,
 
 	// Graphics calls
 	AS_SET_HIGH_COLOR,

Modified: haiku/trunk/src/kits/interface/Font.cpp
===================================================================
--- haiku/trunk/src/kits/interface/Font.cpp	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/src/kits/interface/Font.cpp	2008-08-03 13:40:41 UTC (rev 26755)
@@ -406,59 +406,6 @@
 }
 
 
-void
-_set_font_subpixel_antialiasing_(bool subpix)
-{
-	BPrivate::AppServerLink link;
-
-	link.StartMessage(AS_SET_FONT_SUBPIXEL_ANTIALIASING);
-	link.Attach&lt;bool&gt;(subpix);
-	link.Flush();
-}
-
-
-status_t
-_get_font_subpixel_antialiasing_(bool* subpix)
-{
-	BPrivate::AppServerLink link;
-
-	link.StartMessage(AS_GET_FONT_SUBPIXEL_ANTIALIASING);
-	int32 status = B_ERROR;
-	if (link.FlushWithReply(status) != B_OK
-		|| status &lt; B_OK)
-		return status;
-	link.Read&lt;bool&gt;(subpix);
-	return B_OK;
-}
-
-
-void
-_set_hinting_(bool hinting)
-{
-	BPrivate::AppServerLink link;
-
-	link.StartMessage(AS_SET_HINTING);
-	link.Attach&lt;bool&gt;(hinting);
-	link.Flush();
-}
-
-
-status_t
-_get_hinting_(bool* hinting)
-{
-
-	BPrivate::AppServerLink link;
-
-	link.StartMessage(AS_GET_HINTING);
-	int32 status = B_ERROR;
-	if (link.FlushWithReply(status) != B_OK
-		|| status &lt; B_OK)
-		return status;
-	link.Read&lt;bool&gt;(hinting);
-	return B_OK;
-}
-
-
 /*!
 	\brief Returns the number of installed font families
 	\return The number of installed font families

Modified: haiku/trunk/src/kits/interface/InterfaceDefs.cpp
===================================================================
--- haiku/trunk/src/kits/interface/InterfaceDefs.cpp	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/src/kits/interface/InterfaceDefs.cpp	2008-08-03 13:40:41 UTC (rev 26755)
@@ -195,6 +195,107 @@
 }	// namespace BPrivate
 
 
+void
+set_subpixel_antialiasing(bool subpix)
+{
+	BPrivate::AppServerLink link;
+
+	link.StartMessage(AS_SET_SUBPIXEL_ANTIALIASING);
+	link.Attach&lt;bool&gt;(subpix);
+	link.Flush();
+}
+
+
+status_t
+get_subpixel_antialiasing(bool* subpix)
+{
+	BPrivate::AppServerLink link;
+
+	link.StartMessage(AS_GET_SUBPIXEL_ANTIALIASING);
+	int32 status = B_ERROR;
+	if (link.FlushWithReply(status) != B_OK || status &lt; B_OK)
+		return status;
+	link.Read&lt;bool&gt;(subpix);
+	return B_OK;
+}
+
+
+void
+set_hinting(bool hinting)
+{
+	BPrivate::AppServerLink link;
+
+	link.StartMessage(AS_SET_HINTING);
+	link.Attach&lt;bool&gt;(hinting);
+	link.Flush();
+}
+
+
+status_t
+get_hinting(bool* hinting)
+{
+	BPrivate::AppServerLink link;
+
+	link.StartMessage(AS_GET_HINTING);
+	int32 status = B_ERROR;
+	if (link.FlushWithReply(status) != B_OK || status &lt; B_OK)
+		return status;
+	link.Read&lt;bool&gt;(hinting);
+	return B_OK;
+}
+
+
+void
+set_average_weight(uint8 averageWeight)
+{
+	BPrivate::AppServerLink link;
+
+	link.StartMessage(AS_SET_SUBPIXEL_AVERAGE_WEIGHT);
+	link.Attach&lt;uint8&gt;(averageWeight);
+	link.Flush();
+}
+
+
+status_t
+get_average_weight(uint8* averageWeight)
+{
+	BPrivate::AppServerLink link;
+
+	link.StartMessage(AS_GET_SUBPIXEL_AVERAGE_WEIGHT);
+	int32 status = B_ERROR;
+	if (link.FlushWithReply(status) != B_OK || status &lt; B_OK)
+		return status;
+	link.Read&lt;uint8&gt;(averageWeight);
+	return B_OK;
+}
+
+
+void
+set_is_subpixel_ordering_regular(bool subpixelOrdering)
+{
+	BPrivate::AppServerLink link;
+
+	link.StartMessage(AS_SET_SUBPIXEL_ORDERING);
+	link.Attach&lt;bool&gt;(subpixelOrdering);
+	link.Flush();
+}
+
+
+status_t
+get_is_subpixel_ordering_regular(bool* subpixelOrdering)
+{
+
+	BPrivate::AppServerLink link;
+
+	link.StartMessage(AS_GET_SUBPIXEL_ORDERING);
+	int32 status = B_ERROR;
+	if (link.FlushWithReply(status) != B_OK || status &lt; B_OK)
+		return status;
+	link.Read&lt;bool&gt;(subpixelOrdering);
+	return B_OK;
+}
+
+
 const color_map *
 system_colors()
 {
@@ -965,6 +1066,7 @@
 	return B_OK;
 }
 
+
 }	// namespace BPrivate
 
 // These methods were marked with &quot;Danger, will Robinson!&quot; in

Modified: haiku/trunk/src/preferences/appearance/APRView.cpp
===================================================================
--- haiku/trunk/src/preferences/appearance/APRView.cpp	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/src/preferences/appearance/APRView.cpp	2008-08-03 13:40:41 UTC (rev 26755)
@@ -18,6 +18,7 @@
 #include &lt;InterfaceDefs.h&gt;
 
 #include &quot;APRView.h&quot;
+#include &quot;APRWindow.h&quot;
 #include &quot;defs.h&quot;
 #include &quot;ColorWell.h&quot;
 #include &quot;ColorWhichItem.h&quot;
@@ -152,26 +153,7 @@
 	
 	fPicker = new BColorControl(BPoint(fScrollView-&gt;Frame().left,fScrollView-&gt;Frame().bottom+kBorderSpace),B_CELLS_32x8,5.0,&quot;fPicker&quot;,
 								new BMessage(UPDATE_COLOR));
-	AddChild(fPicker);
-	
-	fDefaults = new BButton(BRect(0,0,1,1),&quot;DefaultsButton&quot;,&quot;Defaults&quot;,
-							new BMessage(DEFAULT_SETTINGS),
-							B_FOLLOW_LEFT |B_FOLLOW_TOP, B_WILL_DRAW | B_NAVIGABLE);
-	fDefaults-&gt;ResizeToPreferred();
-	fDefaults-&gt;SetEnabled(false);
-	fDefaults-&gt;MoveTo(fPicker-&gt;Frame().left,fPicker-&gt;Frame().bottom+kBorderSpace);
-	AddChild(fDefaults);
-	
-	
-	BRect cvrect(fDefaults-&gt;Frame());
-	cvrect.OffsetBy(cvrect.Width() + kItemSpace,0);
-
-	fRevert = new BButton(cvrect,&quot;RevertButton&quot;,&quot;Revert&quot;, 
-						new BMessage(REVERT_SETTINGS),
-						B_FOLLOW_LEFT |B_FOLLOW_TOP, B_WILL_DRAW | B_NAVIGABLE);
-	fRevert-&gt;ResizeToPreferred();
-	fRevert-&gt;SetEnabled(false);
-	AddChild(fRevert);
+	AddChild(fPicker);	
 }
 
 APRView::~APRView(void)
@@ -184,21 +166,15 @@
 {
 	fPicker-&gt;SetTarget(this);
 	fAttrList-&gt;SetTarget(this);
-	fDefaults-&gt;SetTarget(this);
-	fRevert-&gt;SetTarget(this);
 	fColorWell-&gt;SetTarget(this);
 
 	fPicker-&gt;SetValue(fCurrentSet.StringToColor(fAttrString.String()));
 	
 	if (fDecorMenu)
 		fDecorMenu-&gt;SetTargetForItems(BMessenger(this));
-	
-	Window()-&gt;ResizeTo(MAX(fPicker-&gt;Frame().right,fPicker-&gt;Frame().right) + 10,
-					   fDefaults-&gt;Frame().bottom + 10);
+
 	LoadSettings();
 	fAttrList-&gt;Select(0);
-	
-	fDefaults-&gt;SetEnabled(fCurrentSet.IsDefaultable());
 }
 
 void
@@ -235,11 +211,9 @@
 				
 			// Update current fAttribute in the settings
 			fCurrentSet.SetColor(fAttribute, col);
-			UpdateCurrentColor();				
-	
-			fDefaults-&gt;SetEnabled(fCurrentSet.IsDefaultable());
-			fRevert-&gt;SetEnabled(true);
-			
+			UpdateCurrentColor();	
+						
+			Window()-&gt;PostMessage(kMsgUpdate);
 			break;
 		}
 		case ATTRIBUTE_CHOSEN: {
@@ -254,7 +228,7 @@
 			fAttrString=whichitem-&gt;Text();
 			UpdateControlsFromAttr(whichitem-&gt;Text());
 			
-			fDefaults-&gt;SetEnabled(fCurrentSet.IsDefaultable());
+			Window()-&gt;PostMessage(kMsgUpdate);
 			break;
 		}
 		case REVERT_SETTINGS: {
@@ -262,13 +236,11 @@
 			UpdateControlsFromAttr(fAttrString.String());
 			UpdateAllColors();
 			
-			fRevert-&gt;SetEnabled(false);
-			
+			Window()-&gt;PostMessage(kMsgUpdate);
 			break;
 		}
 		case DEFAULT_SETTINGS: {
 			fCurrentSet = ColorSet::DefaultColorSet();
-			fDefaults-&gt;SetEnabled(false);
 			
 			UpdateControlsFromAttr(fAttrString.String());
 			UpdateAllColors();
@@ -281,6 +253,7 @@
 				BPrivate::set_decorator(fDecorMenu-&gt;IndexOf(item));
 				#endif
 			}
+			Window()-&gt;PostMessage(kMsgUpdate);
 			break;
 		}
 		default:
@@ -302,6 +275,11 @@
 	fPrevSet = fCurrentSet;
 }
 
+bool APRView::IsDefaultable(void)
+{
+	return fCurrentSet.IsDefaultable();
+}
+
 void APRView::UpdateAllColors(void)
 {
 	for (uint32 i = 0; i &lt; sColorCount; i++)

Modified: haiku/trunk/src/preferences/appearance/APRView.h
===================================================================
--- haiku/trunk/src/preferences/appearance/APRView.h	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/src/preferences/appearance/APRView.h	2008-08-03 13:40:41 UTC (rev 26755)
@@ -40,6 +40,7 @@
 	void	MessageReceived(BMessage *msg);
 	
 	void	LoadSettings(void);
+	bool	IsDefaultable(void);
 
 protected:
 
@@ -49,9 +50,6 @@
 	
 	BColorControl	*fPicker;
 	
-	BButton			*fRevert;
-	BButton			*fDefaults;
-	
 	BListView		*fAttrList;
 	
 	color_which		fAttribute;

Modified: haiku/trunk/src/preferences/appearance/APRWindow.cpp
===================================================================
--- haiku/trunk/src/preferences/appearance/APRWindow.cpp	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/src/preferences/appearance/APRWindow.cpp	2008-08-03 13:40:41 UTC (rev 26755)
@@ -6,19 +6,101 @@
  *		DarkWyrm (<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">darkwyrm at earthlink.net</A>)
  */
 
+#include &lt;Button.h&gt;
 #include &lt;Messenger.h&gt;
+#include &lt;TabView.h&gt;
 #include &quot;APRWindow.h&quot;
 #include &quot;APRView.h&quot;
 #include &quot;defs.h&quot;
 
+static const uint32 kMsgSetDefaults = 'dflt';
+static const uint32 kMsgRevert = 'rvrt';
+
 APRWindow::APRWindow(BRect frame)
- :	BWindow(frame, &quot;Appearance&quot;, B_TITLED_WINDOW, B_NOT_RESIZABLE | B_NOT_ZOOMABLE,
- 			B_ALL_WORKSPACES )
+ :	BWindow(frame, &quot;Appearance&quot;, B_TITLED_WINDOW, B_NOT_ZOOMABLE,
+ 			B_ALL_WORKSPACES)
 {
-	APRView *colorview = new APRView(Bounds(),&quot;Colors&quot;,B_FOLLOW_ALL, B_WILL_DRAW);
-	AddChild(colorview);
+	BRect rect = Bounds();
+	BView* view = new BView(rect, &quot;background&quot;, B_FOLLOW_ALL, B_WILL_DRAW);
+	view-&gt;SetViewColor(ui_color(B_PANEL_BACKGROUND_COLOR));
+	AddChild(view);
+
+	rect.left = 10;
+	rect.top = rect.bottom - 10;
+	fDefaultsButton = new BButton(rect, &quot;defaults&quot;, &quot;Defaults&quot;,
+		new BMessage(kMsgSetDefaults), B_FOLLOW_LEFT
+			| B_FOLLOW_BOTTOM, B_WILL_DRAW);
+	fDefaultsButton-&gt;ResizeToPreferred();
+	fDefaultsButton-&gt;SetEnabled(false);
+	float buttonHeight = fDefaultsButton-&gt;Bounds().Height();
+	fDefaultsButton-&gt;MoveBy(0, -buttonHeight);
+	view-&gt;AddChild(fDefaultsButton);
+
+	rect = fDefaultsButton-&gt;Frame();
+	rect.OffsetBy(fDefaultsButton-&gt;Bounds().Width() + 10, 0);
+
+	fRevertButton = new BButton(rect, &quot;revert&quot;, &quot;Revert&quot;,
+		new BMessage(kMsgRevert), B_FOLLOW_LEFT | B_FOLLOW_BOTTOM, B_WILL_DRAW);
+	fRevertButton-&gt;ResizeToPreferred();
+	fRevertButton-&gt;SetEnabled(false);
+	view-&gt;AddChild(fRevertButton);
+
+	rect = Bounds();
+	rect.top += 5;
+	rect.bottom -= 20 + buttonHeight;
+	rect.left += 5;
+	BTabView *tabView = new BTabView(rect, &quot;tabview&quot;, B_WIDTH_FROM_LABEL);
+
+	rect = tabView-&gt;ContainerView()-&gt;Bounds().InsetByCopy(5, 8);
+
+	fAntialiasingSettings = new AntialiasingSettingsView(rect, &quot;Antialiasing&quot;);
+	fColorsView = new APRView(rect,&quot;Colors&quot;,B_FOLLOW_ALL, B_WILL_DRAW);
+
+	tabView-&gt;AddTab(fColorsView);
+	tabView-&gt;AddTab(fAntialiasingSettings);
+		
+	view-&gt;AddChild(tabView);
+	fColorsView-&gt;ResizeToPreferred();
+	fAntialiasingSettings -&gt; ResizeToPreferred();
+
+	fDefaultsButton -&gt; SetEnabled(fColorsView -&gt; IsDefaultable()
+							|| fAntialiasingSettings -&gt; IsDefaultable());
+	fDefaultsButton -&gt; SetTarget(this);
+	fRevertButton -&gt; SetTarget(this);
 }
 
+
+void
+APRWindow::MessageReceived(BMessage *message)
+{
+	switch (message-&gt;what) {
+		case kMsgUpdate:
+			fDefaultsButton-&gt;SetEnabled(fColorsView-&gt;IsDefaultable()
+								|| fAntialiasingSettings-&gt;IsDefaultable());
+			fRevertButton-&gt;SetEnabled(true);
+			break;
+		case kMsgSetDefaults:
+			fColorsView -&gt; MessageReceived(new BMessage(DEFAULT_SETTINGS));
+			fAntialiasingSettings-&gt;SetDefaults();
+			fDefaultsButton-&gt;SetEnabled(false);
+			fRevertButton-&gt;SetEnabled(true);
+			break;
+
+		case kMsgRevert:
+			fColorsView -&gt; MessageReceived(new BMessage(REVERT_SETTINGS));
+			fAntialiasingSettings-&gt;Revert();
+			fDefaultsButton-&gt;SetEnabled(fColorsView-&gt;IsDefaultable()
+								|| fAntialiasingSettings-&gt;IsDefaultable());
+			fRevertButton-&gt;SetEnabled(false);
+			break;
+
+		default:
+			BWindow::MessageReceived(message);
+			break;
+	}
+}
+
+
 bool
 APRWindow::QuitRequested(void)
 {

Modified: haiku/trunk/src/preferences/appearance/APRWindow.h
===================================================================
--- haiku/trunk/src/preferences/appearance/APRWindow.h	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/src/preferences/appearance/APRWindow.h	2008-08-03 13:40:41 UTC (rev 26755)
@@ -9,14 +9,30 @@
 #define APR_WINDOW_H
 
 #include &lt;Application.h&gt;
+#include &lt;Button.h&gt;
 #include &lt;Window.h&gt;
 #include &lt;Message.h&gt;
+#include &lt;TabView.h&gt;
 
+#include &quot;APRView.h&quot;
+#include &quot;AntialiasingSettingsView.h&quot;
+
 class APRWindow : public BWindow 
 {
 public:
 			APRWindow(BRect frame); 
 	bool	QuitRequested(void);
+	void	MessageReceived(BMessage *message);
+	
+private:
+		APRView*				fColorsView;
+		BButton*				fDefaultsButton;
+		BButton*				fRevertButton;
+
+		AntialiasingSettingsView*	fAntialiasingSettings;
+
 };
 
+static const int32 kMsgUpdate = 'updt';
+
 #endif

Added: haiku/trunk/src/preferences/appearance/AntialiasingSettingsView.cpp
===================================================================
--- haiku/trunk/src/preferences/appearance/AntialiasingSettingsView.cpp	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/src/preferences/appearance/AntialiasingSettingsView.cpp	2008-08-03 13:40:41 UTC (rev 26755)
@@ -0,0 +1,345 @@
+/*
+ * Copyright 2008, Andrej Spielmann, &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">andrej.spielmann at seh.ox.ac.uk</A>&gt;
+ * All rights reserved. Distributed under the terms of the MIT License.
+ */
+
+#include &quot;AntialiasingSettingsView.h&quot;
+
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+
+#include &lt;Box.h&gt;
+#include &lt;MenuField.h&gt;
+#include &lt;MenuItem.h&gt;
+#include &lt;PopUpMenu.h&gt;
+#include &lt;String.h&gt;
+#include &lt;TextControl.h&gt;
+
+#include &quot;APRWindow.h&quot;
+
+
+#define INSTANT_UPDATE
+	// if defined, the changes will take place immediately and not only on exit
+//#define DISABLE_HINTING_CONTROL
+	// if defined, the hinting menu is disabled (hinting not properly
+	// implemented)
+	
+static const int32 kMsgSetAntialiasing = 'anti';
+static const int32 kMsgSetHinting = 'hint';
+static const int32 kMsgSetAverageWeight = 'avrg';
+static const char* kSubpixelLabel = &quot;Subpixel antialiasing&quot;;
+static const char* kGrayscaleLabel = &quot;Grayscale antialiasing&quot;;
+static const char* kNoHintingLabel = &quot;Off&quot;;
+static const char* kFullHintingLabel = &quot;On&quot;;
+
+extern void set_subpixel_antialiasing(bool subpix);
+extern status_t get_subpixel_antialiasing(bool* subpix);
+extern void set_hinting(bool hinting);
+extern status_t get_hinting(bool* hinting);
+extern void set_average_weight(unsigned char averageWeight);
+extern status_t get_average_weight(unsigned char* averageWeight);
+
+
+//	#pragma mark -
+
+
+AntialiasingSettingsView::AntialiasingSettingsView(BRect _rect, const char* name)
+	: BView(_rect, name, B_FOLLOW_LEFT_RIGHT, B_WILL_DRAW)
+{
+	if (get_subpixel_antialiasing(&amp;fCurrentSubpixelAntialiasing) != B_OK)
+		fCurrentSubpixelAntialiasing = false;
+	fSavedSubpixelAntialiasing = fCurrentSubpixelAntialiasing;
+	
+	if (get_hinting(&amp;fCurrentHinting) != B_OK)
+		fCurrentHinting = true;
+	fSavedHinting = fCurrentHinting;
+	
+	if (get_average_weight(&amp;fCurrentAverageWeight) != B_OK)
+		fCurrentAverageWeight = 100;
+	fSavedAverageWeight = fCurrentAverageWeight;
+
+	fDivider = StringWidth(&quot;Strength of colours in sbpx AA:&quot;) + 5;
+	
+	fAntialiasingMenu = new BPopUpMenu(&quot;Antialiasing menu&quot;);
+	fHintingMenu = new BPopUpMenu(&quot;Hinting menu&quot;);
+
+	// antialiasing menu
+	BRect rect(Bounds());
+	fAntialiasingMenuField = new BMenuField(rect, &quot;antialiasing&quot;,
+		&quot;Antialiasing type:&quot;, fAntialiasingMenu, false);
+	fAntialiasingMenuField-&gt;SetDivider(fDivider);
+	fAntialiasingMenuField-&gt;SetAlignment(B_ALIGN_RIGHT);
+	fAntialiasingMenuField-&gt;ResizeToPreferred();
+	AddChild(fAntialiasingMenuField);
+	_BuildAntialiasingMenu();
+	
+	//Average weight in subpixel filtering
+	float shift = fAntialiasingMenuField-&gt;Bounds().Height()+5;
+	rect.top +=shift;
+	rect.bottom += shift;
+	fAverageWeightControl = new BTextControl(rect, &quot;averageWeightControl&quot;,
+		&quot;Strength of colours in sbpx AA:&quot;, NULL,
+		new BMessage(kMsgSetAverageWeight), B_FOLLOW_LEFT | B_FOLLOW_BOTTOM);
+	fAverageWeightControl -&gt; SetDivider(fDivider);
+	fAverageWeightControl -&gt; TextView() -&gt; SetMaxBytes(3);
+	fAverageWeightControl -&gt; ResizeToPreferred();
+	AddChild(fAverageWeightControl);
+	for (int i = 0; i &lt; 256; i++) {
+		if (i &lt; '0' || i &gt; '9') {
+			fAverageWeightControl-&gt;TextView()-&gt;DisallowChar(i);
+			fAverageWeightControl-&gt;TextView()-&gt;DisallowChar(i);
+		}
+	}
+	fAverageWeightControl -&gt; SetEnabled(false);
+	
+	// hinting menu
+	shift = fAverageWeightControl-&gt;Bounds().Height()+5;
+	rect.top += shift;
+	rect.bottom += shift;
+	fHintingMenuField = new BMenuField(rect, &quot;hinting&quot;,
+		&quot;Character hinting:&quot;, fHintingMenu, false);
+	fHintingMenuField-&gt;SetDivider(fDivider);
+	fHintingMenuField-&gt;SetAlignment(B_ALIGN_RIGHT);
+	fHintingMenuField-&gt;ResizeToPreferred();
+	AddChild(fHintingMenuField);
+	_BuildHintingMenu();
+	
+#ifdef DISABLE_HINTING_CONTROL
+	fHintingMenuField-&gt;SetEnabled(false);
+#endif
+	
+	_SetCurrentAntialiasing();
+	_SetCurrentHinting();
+	_SetCurrentAverageWeight();
+}
+
+
+AntialiasingSettingsView::~AntialiasingSettingsView()
+{
+#ifndef INSTANT_UPDATE
+	set_subpixel_antialiasing(fCurrentSubpixelAntialiasing);
+	set_hinting(fCurrentHinting);
+	set_average_weight(fCurrentAverageWeight);
+#endif
+}
+
+
+void
+AntialiasingSettingsView::GetPreferredSize(float *_width, float *_height)
+{
+	// don't change the width if it is large enough
+	if (_width) {
+		*_width = (StringWidth(kSubpixelLabel) &gt; StringWidth(kGrayscaleLabel) ?
+			StringWidth(kSubpixelLabel) : StringWidth(kGrayscaleLabel))
+			+ fDivider + 30;
+		if (*_width &lt; Bounds().Width())
+			*_width = Bounds().Width();
+	}
+
+	*_height = fHintingMenuField-&gt;Frame().bottom;
+}
+
+
+void
+AntialiasingSettingsView::SetDivider(float divider)
+{
+	fAntialiasingMenuField -&gt; SetDivider(divider);
+	fHintingMenuField -&gt; SetDivider(divider);
+	fAverageWeightControl -&gt; SetDivider(divider);
+	fDivider = divider;
+}
+
+
+void
+AntialiasingSettingsView::RelayoutIfNeeded()
+{
+	float width, height;
+	GetPreferredSize(&amp;width, &amp;height);
+
+	if (width &gt; Bounds().Width() || height &gt; Bounds().Height()) {
+		ResizeTo(width, height);
+	}
+}
+
+
+void
+AntialiasingSettingsView::AttachedToWindow()
+{
+	if (Parent() != NULL)
+		SetViewColor(Parent()-&gt;ViewColor());
+	else
+		SetViewColor(ui_color(B_PANEL_BACKGROUND_COLOR));
+	fAntialiasingMenu -&gt; SetTargetForItems(this);
+	fHintingMenu -&gt; SetTargetForItems(this);
+	fAverageWeightControl -&gt; SetTarget(this);
+}
+
+
+void
+AntialiasingSettingsView::MessageReceived(BMessage *msg)
+{
+	switch (msg-&gt;what) {
+		case kMsgSetAntialiasing:
+		{
+			bool subpixelAntialiasing;
+			if (msg-&gt;FindBool(&quot;antialiasing&quot;, &amp;subpixelAntialiasing) != B_OK 
+				|| subpixelAntialiasing == fCurrentSubpixelAntialiasing)
+				break;
+			fCurrentSubpixelAntialiasing = subpixelAntialiasing;
+			fAverageWeightControl -&gt; SetEnabled(fCurrentSubpixelAntialiasing);
+#ifdef INSTANT_UPDATE
+			set_subpixel_antialiasing(fCurrentSubpixelAntialiasing);
+#endif
+			Window()-&gt;PostMessage(kMsgUpdate);
+			break;
+		}
+		case kMsgSetHinting:
+		{
+			bool hinting;
+			if (msg-&gt;FindBool(&quot;hinting&quot;, &amp;hinting) != B_OK 
+				|| hinting == fCurrentHinting)
+				break;
+			fCurrentHinting = hinting;
+#ifdef INSTANT_UPDATE
+			set_hinting(fCurrentHinting);
+#endif
+			Window()-&gt;PostMessage(kMsgUpdate);
+			break;
+		}
+		case kMsgSetAverageWeight:
+		{
+			int subpixelWeight;
+			unsigned char averageWeight;
+			if (fAverageWeightControl -&gt; Text() != NULL) {
+				subpixelWeight = atoi(fAverageWeightControl -&gt; Text());
+				if (subpixelWeight &gt; 255) {
+					subpixelWeight = 255;
+					BString subpixelWeightString;
+					subpixelWeightString &lt;&lt; subpixelWeight;
+					fAverageWeightControl -&gt; SetText(
+						subpixelWeightString.String());
+				}
+				averageWeight = 255 - subpixelWeight;
+				if (averageWeight == fCurrentAverageWeight) break;
+			} else break;
+			fCurrentAverageWeight = averageWeight;
+#ifdef INSTANT_UPDATE
+			set_average_weight(fCurrentAverageWeight);
+#endif
+			Window()-&gt;PostMessage(kMsgUpdate);
+			break;
+		}
+		default:
+			BView::MessageReceived(msg);
+	}
+}
+
+
+void
+AntialiasingSettingsView::_BuildAntialiasingMenu()
+{
+	BMessage* message = new BMessage(kMsgSetAntialiasing);
+	message-&gt;AddBool(&quot;antialiasing&quot;, false);
+
+	BMenuItem* item = new BMenuItem(kGrayscaleLabel, message);
+
+	fAntialiasingMenu-&gt;AddItem(item);
+	
+	BMessage* message2 = new BMessage(kMsgSetAntialiasing);
+	message2-&gt;AddBool(&quot;antialiasing&quot;, true);
+
+	BMenuItem* item2 = new BMenuItem(kSubpixelLabel, message2);
+
+	fAntialiasingMenu-&gt;AddItem(item2);
+}
+
+
+void
+AntialiasingSettingsView::_BuildHintingMenu()
+{
+	BMessage* message = new BMessage(kMsgSetHinting);
+	message-&gt;AddBool(&quot;hinting&quot;, false);
+
+	BMenuItem* item = new BMenuItem(kNoHintingLabel, message);
+
+	fHintingMenu-&gt;AddItem(item);
+	
+	BMessage* message2 = new BMessage(kMsgSetHinting);
+	message2-&gt;AddBool(&quot;hinting&quot;, true);
+
+	BMenuItem* item2 = new BMenuItem(kFullHintingLabel, message2);
+
+	fHintingMenu-&gt;AddItem(item2);
+}
+
+
+void
+AntialiasingSettingsView::_SetCurrentAntialiasing()
+{
+	BMenuItem *item = fAntialiasingMenu-&gt;FindItem(
+		fCurrentSubpixelAntialiasing ? kSubpixelLabel : kGrayscaleLabel);
+	if (item != NULL)
+		item-&gt;SetMarked(true);
+	if (fCurrentSubpixelAntialiasing) fAverageWeightControl -&gt; SetEnabled(true);
+}
+
+
+void
+AntialiasingSettingsView::_SetCurrentHinting()
+{
+	BMenuItem *item = fHintingMenu-&gt;FindItem(
+		fCurrentHinting ? kFullHintingLabel : kNoHintingLabel);
+	if (item != NULL)
+		item-&gt;SetMarked(true);
+}
+
+
+void
+AntialiasingSettingsView::_SetCurrentAverageWeight()
+{
+	BString subpixelWeightString;
+	subpixelWeightString &lt;&lt; (255 - fCurrentAverageWeight);
+	fAverageWeightControl -&gt; SetText(subpixelWeightString.String());
+}
+
+
+void
+AntialiasingSettingsView::SetDefaults()
+{
+}
+
+
+bool
+AntialiasingSettingsView::IsDefaultable()
+{
+	return false;
+}
+
+
+bool
+AntialiasingSettingsView::IsRevertable()
+{
+	return (fCurrentSubpixelAntialiasing != fSavedSubpixelAntialiasing) 
+		|| (fCurrentHinting != fSavedHinting)
+		|| (fCurrentAverageWeight != fSavedAverageWeight);
+}
+
+
+void
+AntialiasingSettingsView::Revert()
+{
+	if (!IsRevertable())
+		return;
+
+	fCurrentSubpixelAntialiasing = fSavedSubpixelAntialiasing;
+	fCurrentHinting = fSavedHinting;
+	fCurrentAverageWeight = fSavedAverageWeight;
+#ifdef INSTANT_UPDATE
+	set_subpixel_antialiasing(fCurrentSubpixelAntialiasing);
+	set_hinting(fCurrentHinting);
+	set_average_weight(fCurrentAverageWeight);
+#endif
+	_SetCurrentAntialiasing();
+	_SetCurrentHinting();
+	_SetCurrentAverageWeight();
+}

Added: haiku/trunk/src/preferences/appearance/AntialiasingSettingsView.h
===================================================================
--- haiku/trunk/src/preferences/appearance/AntialiasingSettingsView.h	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/src/preferences/appearance/AntialiasingSettingsView.h	2008-08-03 13:40:41 UTC (rev 26755)
@@ -0,0 +1,59 @@
+/*
+ * Copyright 2008, Andrej Spielmann, &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">andrej.spielmann at seh.ox.ac.uk</A>&gt;
+ * All rights reserved. Distributed under the terms of the MIT License.
+ */
+#ifndef ANTIALIASING_SETTINGS_VIEW_H
+#define ANTIALIASING_SETTINGS_VIEW_H
+
+
+#include &lt;View.h&gt;
+
+class BBox;
+class BMenuField;
+class BPopUpMenu;
+class BTextControl;
+
+
+class AntialiasingSettingsView : public BView {
+public:
+							AntialiasingSettingsView(BRect rect,
+								const char* name);
+	virtual					~AntialiasingSettingsView();
+
+	virtual	void			GetPreferredSize(float *_width, float *_height);
+	virtual	void			RelayoutIfNeeded();
+	virtual	void			AttachedToWindow();
+	virtual	void			MessageReceived(BMessage *msg);
+
+			void			SetDivider(float divider);
+
+			void			SetDefaults();
+			void			Revert();
+			bool			IsDefaultable();
+			bool			IsRevertable();
+
+private:
+			void			_BuildAntialiasingMenu();
+			void			_SetCurrentAntialiasing();
+			void			_BuildHintingMenu();
+			void			_SetCurrentHinting();
+			void			_SetCurrentAverageWeight();
+
+protected:
+			float			fDivider;
+
+			BMenuField*		fAntialiasingMenuField;
+			BPopUpMenu*		fAntialiasingMenu;
+			BMenuField*		fHintingMenuField;
+			BPopUpMenu*		fHintingMenu;
+			BTextControl*	fAverageWeightControl;
+
+			bool			fSavedSubpixelAntialiasing;
+			bool			fCurrentSubpixelAntialiasing;
+			bool			fSavedHinting;
+			bool			fCurrentHinting;
+			unsigned char	fSavedAverageWeight;
+			unsigned char	fCurrentAverageWeight;
+};
+
+#endif // ANTIALIASING_SETTINGS_VIEW_H

Modified: haiku/trunk/src/preferences/appearance/Jamfile
===================================================================
--- haiku/trunk/src/preferences/appearance/Jamfile	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/src/preferences/appearance/Jamfile	2008-08-03 13:40:41 UTC (rev 26755)
@@ -5,6 +5,7 @@
 
 Preference Appearance :
 	APRMain.cpp
+	AntialiasingSettingsView.cpp
 	APRView.cpp
 	APRWindow.cpp
 	ColorSet.cpp

Deleted: haiku/trunk/src/preferences/fonts/AdvancedSettingsView.cpp

Deleted: haiku/trunk/src/preferences/fonts/AdvancedSettingsView.h

Modified: haiku/trunk/src/preferences/fonts/FontView.h
===================================================================
--- haiku/trunk/src/preferences/fonts/FontView.h	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/src/preferences/fonts/FontView.h	2008-08-03 13:40:41 UTC (rev 26755)
@@ -12,7 +12,6 @@
 
 
 #include &quot;FontSelectionView.h&quot;
-#include &quot;AdvancedSettingsView.h&quot;
 
 
 class FontView : public BView {

Modified: haiku/trunk/src/preferences/fonts/Jamfile
===================================================================
--- haiku/trunk/src/preferences/fonts/Jamfile	2008-08-03 12:51:40 UTC (rev 26754)
+++ haiku/trunk/src/preferences/fonts/Jamfile	2008-08-03 13:40:41 UTC (rev 26755)
@@ -5,7 +5,6 @@
 
 Preference Fonts :
 	FontSelectionView.cpp
-	AdvancedSettingsView.cpp
 	FontsSettings.cpp
 	FontView.cpp
 	main.cpp

Modified: haiku/trunk/src/preferences/fonts/MainWindow.cpp
===================================================================

[... truncated: 6431 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010748.html">[Haiku-commits] r26754 - haiku/trunk/headers/posix/sys
</A></li>
	<LI>Next message: <A HREF="010757.html">[Haiku-commits] r26755 - in haiku/trunk: headers/libs/agg headers/private/app src/kits/interface src/preferences/appearance src/preferences/fonts src/servers/app src/servers/app/drawing/Painter src/servers/app/drawing/Painter/drawing_modes src/tests/servers/app
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10750">[ date ]</a>
              <a href="thread.html#10750">[ thread ]</a>
              <a href="subject.html#10750">[ subject ]</a>
              <a href="author.html#10750">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
