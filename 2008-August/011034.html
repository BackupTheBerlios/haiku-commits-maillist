<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r27012 - in haiku/trunk: headers/libs/png	src/libs/png
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27012%20-%20in%20haiku/trunk%3A%20headers/libs/png%0A%09src/libs/png&In-Reply-To=%3C200808172203.m7HM3P8a012040%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011032.html">
   <LINK REL="Next"  HREF="011182.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r27012 - in haiku/trunk: headers/libs/png	src/libs/png</H1>
    <B>korli at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27012%20-%20in%20haiku/trunk%3A%20headers/libs/png%0A%09src/libs/png&In-Reply-To=%3C200808172203.m7HM3P8a012040%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r27012 - in haiku/trunk: headers/libs/png	src/libs/png">korli at mail.berlios.de
       </A><BR>
    <I>Mon Aug 18 00:03:25 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="011032.html">[Haiku-commits] r27011 - haiku/trunk/src/system/libroot/os/arch/x86
</A></li>
        <LI>Next message: <A HREF="011182.html">[Haiku-commits] r27012 - in haiku/trunk:	headers/libs/png	src/libs/png
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11034">[ date ]</a>
              <a href="thread.html#11034">[ thread ]</a>
              <a href="subject.html#11034">[ subject ]</a>
              <a href="author.html#11034">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: korli
Date: 2008-08-18 00:03:24 +0200 (Mon, 18 Aug 2008)
New Revision: 27012
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=27012&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=27012&amp;view=rev</A>

Modified:
   haiku/trunk/headers/libs/png/png.h
   haiku/trunk/headers/libs/png/pngconf.h
   haiku/trunk/src/libs/png/png.c
   haiku/trunk/src/libs/png/pngerror.c
   haiku/trunk/src/libs/png/pnggccrd.c
   haiku/trunk/src/libs/png/pngget.c
   haiku/trunk/src/libs/png/pngmem.c
   haiku/trunk/src/libs/png/pngpread.c
   haiku/trunk/src/libs/png/pngread.c
   haiku/trunk/src/libs/png/pngrio.c
   haiku/trunk/src/libs/png/pngrtran.c
   haiku/trunk/src/libs/png/pngrutil.c
   haiku/trunk/src/libs/png/pngset.c
   haiku/trunk/src/libs/png/pngtrans.c
   haiku/trunk/src/libs/png/pngwio.c
   haiku/trunk/src/libs/png/pngwrite.c
   haiku/trunk/src/libs/png/pngwtran.c
   haiku/trunk/src/libs/png/pngwutil.c
Log:
updated libpng to 1.2.30


Modified: haiku/trunk/headers/libs/png/png.h
===================================================================
--- haiku/trunk/headers/libs/png/png.h	2008-08-17 20:35:05 UTC (rev 27011)
+++ haiku/trunk/headers/libs/png/png.h	2008-08-17 22:03:24 UTC (rev 27012)
@@ -1,7 +1,6 @@
-
 /* png.h - header file for PNG reference library
  *
- * libpng version 1.2.26 - April 2, 2008
+ * libpng version 1.2.30 - August 15, 2008
  * Copyright (c) 1998-2008 Glenn Randers-Pehrson
  * (Version 0.96 Copyright (c) 1996, 1997 Andreas Dilger)
  * (Version 0.88 Copyright (c) 1995, 1996 Guy Eric Schalnat, Group 42, Inc.)
@@ -9,7 +8,7 @@
  * Authors and maintainers:
  *  libpng versions 0.71, May 1995, through 0.88, January 1996: Guy Schalnat
  *  libpng versions 0.89c, June 1996, through 0.96, May 1997: Andreas Dilger
- *  libpng versions 0.97, January 1998, through 1.2.26 - April 2, 2008: Glenn
+ *  libpng versions 0.97, January 1998, through 1.2.30 - August 15, 2008: Glenn
  *  See also &quot;Contributing Authors&quot;, below.
  *
  * Note about libpng version numbers:
@@ -181,6 +180,24 @@
  *    1.2.25                  13    10225  12.so.0.25[.0]
  *    1.2.26beta01-06         13    10226  12.so.0.26[.0]
  *    1.2.26rc01              13    10226  12.so.0.26[.0]
+ *    1.2.26                  13    10226  12.so.0.26[.0]
+ *    1.0.32                  10    10032  10.so.0.32[.0]
+ *    1.2.27beta01-06         13    10227  12.so.0.27[.0]
+ *    1.2.27rc01              13    10227  12.so.0.27[.0]
+ *    1.0.33                  10    10033  10.so.0.33[.0]
+ *    1.2.27                  13    10227  12.so.0.27[.0]
+ *    1.0.34                  10    10034  10.so.0.34[.0]
+ *    1.2.28                  13    10228  12.so.0.28[.0]
+ *    1.2.29beta01-03         13    10229  12.so.0.29[.0]
+ *    1.2.29rc01              13    10229  12.so.0.29[.0]
+ *    1.0.35                  10    10035  10.so.0.35[.0]
+ *    1.2.29                  13    10229  12.so.0.29[.0]
+ *    1.0.37                  10    10037  10.so.0.37[.0]
+ *    1.2.30beta01-04         13    10230  12.so.0.30[.0]
+ *    1.0.38rc01-08           10    10038  10.so.0.38[.0]
+ *    1.2.30rc01-08           13    10230  12.so.0.30[.0]
+ *    1.0.38                  10    10038  10.so.0.38[.0]
+ *    1.2.30                  13    10230  12.so.0.30[.0]
  *
  *    Henceforth the source version will match the shared-library major
  *    and minor numbers; the shared-library major version number will be
@@ -190,7 +207,7 @@
  *    to the source version x.y.z (leading zeros in y and z).  Beta versions
  *    were given the previous public release number plus a letter, until
  *    version 1.0.6j; from then on they were given the upcoming public
- *    release number plus &quot;betaNN&quot; or &quot;rcN&quot;.
+ *    release number plus &quot;betaNN&quot; or &quot;rcNN&quot;.
  *
  *    Binary incompatibility exists only when applications make direct access
  *    to the info_ptr or png_ptr members through png.h, and the compiled
@@ -210,7 +227,7 @@
  * If you modify libpng you may insert additional notices immediately following
  * this sentence.
  *
- * libpng versions 1.2.6, August 15, 2004, through 1.2.26, April 2, 2008, are
+ * libpng versions 1.2.6, August 15, 2004, through 1.2.30, August 15, 2008, are
  * Copyright (c) 2004, 2006-2008 Glenn Randers-Pehrson, and are
  * distributed according to the same disclaimer and license as libpng-1.2.5
  * with the following individual added to the list of Contributing Authors:
@@ -322,13 +339,13 @@
  * Y2K compliance in libpng:
  * =========================
  *
- *    April 2, 2008
+ *    August 15, 2008
  *
  *    Since the PNG Development group is an ad-hoc body, we can't make
  *    an official declaration.
  *
  *    This is your unofficial assurance that libpng from version 0.71 and
- *    upward through 1.2.26 are Y2K compliant.  It is my belief that earlier
+ *    upward through 1.2.30 are Y2K compliant.  It is my belief that earlier
  *    versions were also Y2K compliant.
  *
  *    Libpng only has three year fields.  One is a 2-byte unsigned integer
@@ -384,9 +401,9 @@
  */
 
 /* Version information for png.h - this should match the version in png.c */
-#define PNG_LIBPNG_VER_STRING &quot;1.2.26&quot;
+#define PNG_LIBPNG_VER_STRING &quot;1.2.30&quot;
 #define PNG_HEADER_VERSION_STRING \
-   &quot; libpng version 1.2.26 - April 2, 2008\n&quot;
+   &quot; libpng version 1.2.30 - August 15, 2008\n&quot;
 
 #define PNG_LIBPNG_VER_SONUM   0
 #define PNG_LIBPNG_VER_DLLNUM  13
@@ -394,7 +411,7 @@
 /* These should match the first 3 components of PNG_LIBPNG_VER_STRING: */
 #define PNG_LIBPNG_VER_MAJOR   1
 #define PNG_LIBPNG_VER_MINOR   2
-#define PNG_LIBPNG_VER_RELEASE 26
+#define PNG_LIBPNG_VER_RELEASE 30
 /* This should match the numeric part of the final component of
  * PNG_LIBPNG_VER_STRING, omitting any leading zero: */
 
@@ -422,7 +439,7 @@
  * Versions 0.7 through 1.0.0 were in the range 0 to 100 here (only
  * version 1.0.0 was mis-numbered 100 instead of 10000).  From
  * version 1.0.1 it's    xxyyzz, where x=major, y=minor, z=release */
-#define PNG_LIBPNG_VER 10226 /* 1.2.26 */
+#define PNG_LIBPNG_VER 10230 /* 1.2.30 */
 
 #ifndef PNG_VERSION_INFO_ONLY
 /* include the compression library's header */
@@ -1193,7 +1210,7 @@
    png_uint_32 row_number;    /* current row in interlace pass */
    png_bytep prev_row;        /* buffer to save previous (unfiltered) row */
    png_bytep row_buf;         /* buffer to save current (unfiltered) row */
-#ifndef PNG_NO_WRITE_FILTERING
+#ifndef PNG_NO_WRITE_FILTER
    png_bytep sub_row;         /* buffer to save &quot;sub&quot; row when filtering */
    png_bytep up_row;          /* buffer to save &quot;up&quot; row when filtering */
    png_bytep avg_row;         /* buffer to save &quot;avg&quot; row when filtering */
@@ -1433,13 +1450,17 @@
 
 /* New members added in libpng-1.2.26 */
   png_uint_32 old_big_row_buf_size, old_prev_row_size;
+
+/* New member added in libpng-1.2.30 */
+  png_charp chunkdata;  /* buffer for reading chunk data */
+
 };
 
 
 /* This triggers a compiler error in png.c, if png.c and png.h
  * do not agree upon the version number.
  */
-typedef png_structp version_1_2_26;
+typedef png_structp version_1_2_30;
 
 typedef png_struct FAR * FAR * png_structpp;
 
@@ -2634,6 +2655,7 @@
    png_ptr));
 #endif
 
+
 /* Maintainer: Put new public prototypes here ^, in libpng.3, and project defs */
 
 #ifdef PNG_READ_COMPOSITE_NODIV_SUPPORTED
@@ -3015,8 +3037,8 @@
 /* Decompress data in a chunk that uses compression */
 #if defined(PNG_zTXt_SUPPORTED) || defined(PNG_iTXt_SUPPORTED) || \
     defined(PNG_iCCP_SUPPORTED) || defined(PNG_sPLT_SUPPORTED)
-PNG_EXTERN png_charp png_decompress_chunk PNGARG((png_structp png_ptr,
-   int comp_type, png_charp chunkdata, png_size_t chunklength,
+PNG_EXTERN void png_decompress_chunk PNGARG((png_structp png_ptr,
+   int comp_type, png_size_t chunklength,
    png_size_t prefix_length, png_size_t *data_length));
 #endif
 
@@ -3545,6 +3567,9 @@
 #endif /* PNG_pHYs_SUPPORTED */
 #endif  /* PNG_INCH_CONVERSIONS &amp;&amp; PNG_FLOATING_POINT_SUPPORTED */
 
+/* Read the chunk header (length + type name) */
+PNG_EXTERN png_uint_32 png_read_chunk_header PNGARG((png_structp png_ptr));
+
 /* Maintainer: Put new private prototypes here ^ and in libpngpf.3 */
 
 #endif /* PNG_INTERNAL */

Modified: haiku/trunk/headers/libs/png/pngconf.h
===================================================================
--- haiku/trunk/headers/libs/png/pngconf.h	2008-08-17 20:35:05 UTC (rev 27011)
+++ haiku/trunk/headers/libs/png/pngconf.h	2008-08-17 22:03:24 UTC (rev 27012)
@@ -1,7 +1,7 @@
 
 /* pngconf.h - machine configurable file for libpng
  *
- * libpng version 1.2.26 - April 2, 2008
+ * libpng version 1.2.30 - August 15, 2008
  * For conditions of distribution and use, see copyright notice in png.h
  * Copyright (c) 1998-2008 Glenn Randers-Pehrson
  * (Version 0.96 Copyright (c) 1996, 1997 Andreas Dilger)
@@ -1123,10 +1123,10 @@
    change (I'm not sure if you will or not, so I thought I'd be safe) */
 #ifdef PNG_SIZE_T
    typedef PNG_SIZE_T png_size_t;
-#  define png_sizeof(x) png_convert_size(sizeof (x))
+#  define png_sizeof(x) png_convert_size(sizeof(x))
 #else
    typedef size_t png_size_t;
-#  define png_sizeof(x) sizeof (x)
+#  define png_sizeof(x) sizeof(x)
 #endif
 
 /* The following is needed for medium model support.  It cannot be in the

Modified: haiku/trunk/src/libs/png/png.c
===================================================================
--- haiku/trunk/src/libs/png/png.c	2008-08-17 20:35:05 UTC (rev 27011)
+++ haiku/trunk/src/libs/png/png.c	2008-08-17 22:03:24 UTC (rev 27012)
@@ -1,9 +1,9 @@
 
 /* png.c - location for general purpose libpng functions
  *
- * Last changed in libpng 1.2.21 October 4, 2007
+ * Last changed in libpng 1.2.30 [August 15, 2008]
  * For conditions of distribution and use, see copyright notice in png.h
- * Copyright (c) 1998-2007 Glenn Randers-Pehrson
+ * Copyright (c) 1998-2008 Glenn Randers-Pehrson
  * (Version 0.96 Copyright (c) 1996, 1997 Andreas Dilger)
  * (Version 0.88 Copyright (c) 1995, 1996 Guy Eric Schalnat, Group 42, Inc.)
  */
@@ -13,7 +13,7 @@
 #include &quot;png.h&quot;
 
 /* Generate a compiler error if there is an old png.h in the search path. */
-typedef version_1_2_26 Your_png_h_is_not_version_1_2_26;
+typedef version_1_2_30 Your_png_h_is_not_version_1_2_30;
 
 /* Version information for C files.  This had better match the version
  * string defined in png.h.  */
@@ -92,7 +92,7 @@
 void PNGAPI
 png_set_sig_bytes(png_structp png_ptr, int num_bytes)
 {
-   if(png_ptr == NULL) return;
+   if (png_ptr == NULL) return;
    png_debug(1, &quot;in png_set_sig_bytes\n&quot;);
    if (num_bytes &gt; 8)
       png_error(png_ptr, &quot;Too many bytes for PNG signature.&quot;);
@@ -153,7 +153,7 @@
    png_uint_32 save_flags=p-&gt;flags;
    png_uint_32 num_bytes;
 
-   if(png_ptr == NULL) return (NULL);
+   if (png_ptr == NULL) return (NULL);
    if (items &gt; PNG_UINT_32_MAX/size)
    {
      png_warning (p, &quot;Potential overflow in png_zalloc()&quot;);
@@ -241,7 +241,7 @@
    png_infop info_ptr;
 
    png_debug(1, &quot;in png_create_info_struct\n&quot;);
-   if(png_ptr == NULL) return (NULL);
+   if (png_ptr == NULL) return (NULL);
 #ifdef PNG_USER_MEM_SUPPORTED
    info_ptr = (png_infop)png_create_struct_2(PNG_STRUCT_INFO,
       png_ptr-&gt;malloc_fn, png_ptr-&gt;mem_ptr);
@@ -263,7 +263,7 @@
 png_destroy_info_struct(png_structp png_ptr, png_infopp info_ptr_ptr)
 {
    png_infop info_ptr = NULL;
-   if(png_ptr == NULL) return;
+   if (png_ptr == NULL) return;
 
    png_debug(1, &quot;in png_destroy_info_struct\n&quot;);
    if (info_ptr_ptr != NULL)
@@ -302,11 +302,11 @@
 {
    png_infop info_ptr = *ptr_ptr;
 
-   if(info_ptr == NULL) return;
+   if (info_ptr == NULL) return;
 
    png_debug(1, &quot;in png_info_init_3\n&quot;);
 
-   if(png_sizeof(png_info) &gt; png_info_struct_size)
+   if (png_sizeof(png_info) &gt; png_info_struct_size)
      {
        png_destroy_struct(info_ptr);
        info_ptr = (png_infop)png_create_struct(PNG_STRUCT_INFO);
@@ -314,7 +314,7 @@
      }
 
    /* set everything to 0 */
-   png_memset(info_ptr, 0, png_sizeof (png_info));
+   png_memset(info_ptr, 0, png_sizeof(png_info));
 }
 
 #ifdef PNG_FREE_ME_SUPPORTED
@@ -325,9 +325,9 @@
    png_debug(1, &quot;in png_data_freer\n&quot;);
    if (png_ptr == NULL || info_ptr == NULL)
       return;
-   if(freer == PNG_DESTROY_WILL_FREE_DATA)
+   if (freer == PNG_DESTROY_WILL_FREE_DATA)
       info_ptr-&gt;free_me |= mask;
-   else if(freer == PNG_USER_WILL_FREE_DATA)
+   else if (freer == PNG_USER_WILL_FREE_DATA)
       info_ptr-&gt;free_me &amp;= ~mask;
    else
       png_warning(png_ptr,
@@ -380,11 +380,11 @@
 #endif
 {
     png_free(png_ptr, info_ptr-&gt;trans);
+    info_ptr-&gt;trans = NULL;
     info_ptr-&gt;valid &amp;= ~PNG_INFO_tRNS;
 #ifndef PNG_FREE_ME_SUPPORTED
     png_ptr-&gt;flags &amp;= ~PNG_FLAG_FREE_TRNS;
 #endif
-    info_ptr-&gt;trans = NULL;
 }
 #endif
 
@@ -459,7 +459,7 @@
 {
    if (num != -1)
    {
-      if(info_ptr-&gt;splt_palettes)
+      if (info_ptr-&gt;splt_palettes)
       {
           png_free(png_ptr, info_ptr-&gt;splt_palettes[num].name);
           png_free(png_ptr, info_ptr-&gt;splt_palettes[num].entries);
@@ -469,7 +469,7 @@
    }
    else
    {
-       if(info_ptr-&gt;splt_palettes_num)
+       if (info_ptr-&gt;splt_palettes_num)
        {
          int i;
          for (i = 0; i &lt; (int)info_ptr-&gt;splt_palettes_num; i++)
@@ -485,11 +485,12 @@
 #endif
 
 #if defined(PNG_UNKNOWN_CHUNKS_SUPPORTED)
-  if(png_ptr-&gt;unknown_chunk.data)
+  if (png_ptr-&gt;unknown_chunk.data)
   {
     png_free(png_ptr, png_ptr-&gt;unknown_chunk.data);
     png_ptr-&gt;unknown_chunk.data = NULL;
   }
+
 #ifdef PNG_FREE_ME_SUPPORTED
 if ((mask &amp; PNG_FREE_UNKN) &amp; info_ptr-&gt;free_me)
 #else
@@ -498,7 +499,7 @@
 {
    if (num != -1)
    {
-       if(info_ptr-&gt;unknown_chunks)
+       if (info_ptr-&gt;unknown_chunks)
        {
           png_free(png_ptr, info_ptr-&gt;unknown_chunks[num].data);
           info_ptr-&gt;unknown_chunks[num].data = NULL;
@@ -508,7 +509,7 @@
    {
        int i;
 
-       if(info_ptr-&gt;unknown_chunks_num)
+       if (info_ptr-&gt;unknown_chunks_num)
        {
          for (i = 0; i &lt; (int)info_ptr-&gt;unknown_chunks_num; i++)
             png_free_data(png_ptr, info_ptr, PNG_FREE_UNKN, i);
@@ -562,7 +563,7 @@
 if (mask &amp; PNG_FREE_ROWS)
 #endif
 {
-    if(info_ptr-&gt;row_pointers)
+    if (info_ptr-&gt;row_pointers)
     {
        int row;
        for (row = 0; row &lt; (int)info_ptr-&gt;height; row++)
@@ -578,7 +579,7 @@
 #endif
 
 #ifdef PNG_FREE_ME_SUPPORTED
-   if(num == -1)
+   if (num == -1)
      info_ptr-&gt;free_me &amp;= ~mask;
    else
      info_ptr-&gt;free_me &amp;= ~(mask &amp; ~PNG_FREE_MUL);
@@ -601,7 +602,7 @@
    {
        png_free(png_ptr, png_ptr-&gt;chunk_list);
        png_ptr-&gt;chunk_list=NULL;
-       png_ptr-&gt;num_chunk_list=0;
+       png_ptr-&gt;num_chunk_list = 0;
    }
 #endif
 
@@ -616,7 +617,7 @@
 png_voidp PNGAPI
 png_get_io_ptr(png_structp png_ptr)
 {
-   if(png_ptr == NULL) return (NULL);
+   if (png_ptr == NULL) return (NULL);
    return (png_ptr-&gt;io_ptr);
 }
 
@@ -632,7 +633,7 @@
 png_init_io(png_structp png_ptr, png_FILE_p fp)
 {
    png_debug(1, &quot;in png_init_io\n&quot;);
-   if(png_ptr == NULL) return;
+   if (png_ptr == NULL) return;
    png_ptr-&gt;io_ptr = (png_voidp)fp;
 }
 #endif
@@ -648,7 +649,7 @@
         {&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;,
          &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;};
 
-   if(png_ptr == NULL) return (NULL);
+   if (png_ptr == NULL) return (NULL);
    if (png_ptr-&gt;time_buffer == NULL)
    {
       png_ptr-&gt;time_buffer = (png_charp)png_malloc(png_ptr, (png_uint_32)(29*
@@ -669,7 +670,7 @@
 #ifdef USE_FAR_KEYWORD
    {
       char near_time_buf[29];
-      png_snprintf6(near_time_buf,29,&quot;%d %s %d %02d:%02d:%02d +0000&quot;,
+      png_snprintf6(near_time_buf, 29, &quot;%d %s %d %02d:%02d:%02d +0000&quot;,
           ptime-&gt;day % 32, short_months[(ptime-&gt;month - 1) % 12],
           ptime-&gt;year, ptime-&gt;hour % 24, ptime-&gt;minute % 60,
           ptime-&gt;second % 61);
@@ -677,7 +678,7 @@
           29*png_sizeof(char));
    }
 #else
-   png_snprintf6(png_ptr-&gt;time_buffer,29,&quot;%d %s %d %02d:%02d:%02d +0000&quot;,
+   png_snprintf6(png_ptr-&gt;time_buffer, 29, &quot;%d %s %d %02d:%02d:%02d +0000&quot;,
        ptime-&gt;day % 32, short_months[(ptime-&gt;month - 1) % 12],
        ptime-&gt;year, ptime-&gt;hour % 24, ptime-&gt;minute % 60,
        ptime-&gt;second % 61);
@@ -693,7 +694,7 @@
 png_get_copyright(png_structp png_ptr)
 {
    png_ptr = png_ptr;  /* silence compiler warning about unused png_ptr */
-   return ((png_charp) &quot;\n libpng version 1.2.26 - April 2, 2008\n\
+   return ((png_charp) &quot;\n libpng version 1.2.30 - August 15, 2008\n\
    Copyright (c) 1998-2008 Glenn Randers-Pehrson\n\
    Copyright (c) 1996-1997 Andreas Dilger\n\
    Copyright (c) 1995-1996 Guy Eric Schalnat, Group 42, Inc.\n&quot;);
@@ -743,12 +744,12 @@
    /* check chunk_name and return &quot;keep&quot; value if it's on the list, else 0 */
    int i;
    png_bytep p;
-   if(png_ptr == NULL || chunk_name == NULL || png_ptr-&gt;num_chunk_list&lt;=0)
+   if (png_ptr == NULL || chunk_name == NULL || png_ptr-&gt;num_chunk_list&lt;=0)
       return 0;
-   p=png_ptr-&gt;chunk_list+png_ptr-&gt;num_chunk_list*5-5;
-   for (i = png_ptr-&gt;num_chunk_list; i; i--, p-=5)
+   p = png_ptr-&gt;chunk_list + png_ptr-&gt;num_chunk_list*5 - 5;
+   for (i = png_ptr-&gt;num_chunk_list; i; i--, p -= 5)
       if (!png_memcmp(chunk_name, p, 4))
-        return ((int)*(p+4));
+        return ((int)*(p + 4));
    return 0;
 }
 #endif

Modified: haiku/trunk/src/libs/png/pngerror.c
===================================================================
--- haiku/trunk/src/libs/png/pngerror.c	2008-08-17 20:35:05 UTC (rev 27011)
+++ haiku/trunk/src/libs/png/pngerror.c	2008-08-17 22:03:24 UTC (rev 27012)
@@ -1,9 +1,9 @@
 
 /* pngerror.c - stub functions for i/o and memory allocation
  *
- * Last changed in libpng 1.2.22 [October 13, 2007]
+ * Last changed in libpng 1.2.30 [August 15, 2008]
  * For conditions of distribution and use, see copyright notice in png.h
- * Copyright (c) 1998-2007 Glenn Randers-Pehrson
+ * Copyright (c) 1998-2008 Glenn Randers-Pehrson
  * (Version 0.96 Copyright (c) 1996, 1997 Andreas Dilger)
  * (Version 0.88 Copyright (c) 1995, 1996 Guy Eric Schalnat, Group 42, Inc.)
  *
@@ -15,8 +15,8 @@
 
 #define PNG_INTERNAL
 #include &quot;png.h&quot;
+#if defined(PNG_READ_SUPPORTED) || defined(PNG_WRITE_SUPPORTED)
 
-#if defined(PNG_READ_SUPPORTED) || defined(PNG_WRITE_SUPPORTED)
 static void /* PRIVATE */
 png_default_error PNGARG((png_structp png_ptr,
   png_const_charp error_message));
@@ -44,28 +44,29 @@
      {
        if (*error_message == '#')
        {
+         /* Strip &quot;#nnnn &quot; from beginning of error message. */
            int offset;
-           for (offset=1; offset&lt;15; offset++)
-              if (*(error_message+offset) == ' ')
+           for (offset = 1; offset&lt;15; offset++)
+              if (error_message[offset] == ' ')
                   break;
            if (png_ptr-&gt;flags&amp;PNG_FLAG_STRIP_ERROR_TEXT)
            {
               int i;
-              for (i=0; i&lt;offset-1; i++)
-                 msg[i]=error_message[i+1];
-              msg[i]='\0';
-              error_message=msg;
+              for (i = 0; i &lt; offset - 1; i++)
+                 msg[i] = error_message[i + 1];
+              msg[i - 1] = '\0';
+              error_message = msg;
            }
            else
-              error_message+=offset;
+              error_message += offset;
        }
        else
        {
            if (png_ptr-&gt;flags&amp;PNG_FLAG_STRIP_ERROR_TEXT)
            {
-              msg[0]='0';
-              msg[1]='\0';
-              error_message=msg;
+              msg[0] = '0';
+              msg[1] = '\0';
+              error_message = msg;
            }
        }
      }
@@ -110,16 +111,16 @@
      {
        if (*warning_message == '#')
        {
-           for (offset=1; offset&lt;15; offset++)
-              if (*(warning_message+offset) == ' ')
+           for (offset = 1; offset &lt; 15; offset++)
+              if (warning_message[offset] == ' ')
                   break;
        }
      }
      if (png_ptr != NULL &amp;&amp; png_ptr-&gt;warning_fn != NULL)
-        (*(png_ptr-&gt;warning_fn))(png_ptr, warning_message+offset);
+        (*(png_ptr-&gt;warning_fn))(png_ptr, warning_message + offset);
    }
    else
-      png_default_warning(png_ptr, warning_message+offset);
+      png_default_warning(png_ptr, warning_message + offset);
 }
 #endif /* PNG_NO_WARNINGS */
 
@@ -167,8 +168,8 @@
    {
       buffer[iout++] = ':';
       buffer[iout++] = ' ';
-      png_memcpy(buffer+iout, error_message, PNG_MAX_ERROR_TEXT);
-      buffer[iout+PNG_MAX_ERROR_TEXT-1] = '\0';
+      png_memcpy(buffer + iout, error_message, PNG_MAX_ERROR_TEXT);
+      buffer[iout + PNG_MAX_ERROR_TEXT - 1] = '\0';
    }
 }
 
@@ -216,22 +217,23 @@
 #ifdef PNG_ERROR_NUMBERS_SUPPORTED
    if (*error_message == '#')
    {
+     /* Strip &quot;#nnnn &quot; from beginning of warning message. */
      int offset;
      char error_number[16];
-     for (offset=0; offset&lt;15; offset++)
+     for (offset = 0; offset&lt;15; offset++)
      {
-         error_number[offset] = *(error_message+offset+1);
-         if (*(error_message+offset) == ' ')
+         error_number[offset] = error_message[offset + 1];
+         if (error_message[offset] == ' ')
              break;
      }
-     if((offset &gt; 1) &amp;&amp; (offset &lt; 15))
+     if ((offset &gt; 1) &amp;&amp; (offset &lt; 15))
      {
-       error_number[offset-1]='\0';
+       error_number[offset - 1] = '\0';
        fprintf(stderr, &quot;libpng error no. %s: %s\n&quot;, error_number,
-          error_message+offset);
+          error_message + offset + 1);
      }
      else
-       fprintf(stderr, &quot;libpng error: %s, offset=%d\n&quot;, error_message,offset);
+       fprintf(stderr, &quot;libpng error: %s, offset=%d\n&quot;, error_message, offset);
    }
    else
 #endif
@@ -274,17 +276,17 @@
    {
      int offset;
      char warning_number[16];
-     for (offset=0; offset&lt;15; offset++)
+     for (offset = 0; offset &lt; 15; offset++)
      {
-        warning_number[offset]=*(warning_message+offset+1);
-        if (*(warning_message+offset) == ' ')
+        warning_number[offset] = warning_message[offset + 1];
+        if (warning_message[offset] == ' ')
             break;
      }
-     if((offset &gt; 1) &amp;&amp; (offset &lt; 15))
+     if ((offset &gt; 1) &amp;&amp; (offset &lt; 15))
      {
-       warning_number[offset-1]='\0';
+       warning_number[offset + 1] = '\0';
        fprintf(stderr, &quot;libpng warning no. %s: %s\n&quot;, warning_number,
-          warning_message+offset);
+          warning_message + offset);
      }
      else
        fprintf(stderr, &quot;libpng warning: %s\n&quot;, warning_message);
@@ -333,7 +335,7 @@
 void PNGAPI
 png_set_strip_error_numbers(png_structp png_ptr, png_uint_32 strip_mode)
 {
-   if(png_ptr != NULL)
+   if (png_ptr != NULL)
    {
      png_ptr-&gt;flags &amp;=
        ((~(PNG_FLAG_STRIP_ERROR_NUMBERS|PNG_FLAG_STRIP_ERROR_TEXT))&amp;strip_mode);

Modified: haiku/trunk/src/libs/png/pnggccrd.c
===================================================================
--- haiku/trunk/src/libs/png/pnggccrd.c	2008-08-17 20:35:05 UTC (rev 27011)
+++ haiku/trunk/src/libs/png/pnggccrd.c	2008-08-17 22:03:24 UTC (rev 27012)
@@ -2,8 +2,10 @@
 
 /* This code snippet is for use by configure's compilation test. */
 
-#if defined(PNG_ASSEMBLER_CODE_SUPPORTED) &amp;&amp; \
+#if (!defined _MSC_VER) &amp;&amp; \
+    defined(PNG_ASSEMBLER_CODE_SUPPORTED) &amp;&amp; \
     defined(PNG_MMX_CODE_SUPPORTED)
+
 int PNGAPI png_dummy_mmx_support(void);
 
 static int _mmx_supported = 2; // 0: no MMX; 1: MMX supported; 2: not tested

Modified: haiku/trunk/src/libs/png/pngget.c
===================================================================
--- haiku/trunk/src/libs/png/pngget.c	2008-08-17 20:35:05 UTC (rev 27011)
+++ haiku/trunk/src/libs/png/pngget.c	2008-08-17 22:03:24 UTC (rev 27012)
@@ -1,16 +1,15 @@
 
 /* pngget.c - retrieval of values from info struct
  *
- * Last changed in libpng 1.2.15 January 5, 2007
+ * Last changed in libpng 1.2.30 [August 15, 2008]
  * For conditions of distribution and use, see copyright notice in png.h
- * Copyright (c) 1998-2007 Glenn Randers-Pehrson
+ * Copyright (c) 1998-2008 Glenn Randers-Pehrson
  * (Version 0.96 Copyright (c) 1996, 1997 Andreas Dilger)
  * (Version 0.88 Copyright (c) 1995, 1996 Guy Eric Schalnat, Group 42, Inc.)
  */
 
 #define PNG_INTERNAL
 #include &quot;png.h&quot;
-
 #if defined(PNG_READ_SUPPORTED) || defined(PNG_WRITE_SUPPORTED)
 
 png_uint_32 PNGAPI
@@ -122,7 +121,7 @@
    if (info_ptr-&gt;valid &amp; PNG_INFO_pHYs)
    {
       png_debug1(1, &quot;in %s retrieval function\n&quot;, &quot;png_get_x_pixels_per_meter&quot;);
-      if(info_ptr-&gt;phys_unit_type != PNG_RESOLUTION_METER)
+      if (info_ptr-&gt;phys_unit_type != PNG_RESOLUTION_METER)
           return (0);
       else return (info_ptr-&gt;x_pixels_per_unit);
    }
@@ -140,7 +139,7 @@
    if (info_ptr-&gt;valid &amp; PNG_INFO_pHYs)
    {
       png_debug1(1, &quot;in %s retrieval function\n&quot;, &quot;png_get_y_pixels_per_meter&quot;);
-      if(info_ptr-&gt;phys_unit_type != PNG_RESOLUTION_METER)
+      if (info_ptr-&gt;phys_unit_type != PNG_RESOLUTION_METER)
           return (0);
       else return (info_ptr-&gt;y_pixels_per_unit);
    }
@@ -158,7 +157,7 @@
    if (info_ptr-&gt;valid &amp; PNG_INFO_pHYs)
    {
       png_debug1(1, &quot;in %s retrieval function\n&quot;, &quot;png_get_pixels_per_meter&quot;);
-      if(info_ptr-&gt;phys_unit_type != PNG_RESOLUTION_METER ||
+      if (info_ptr-&gt;phys_unit_type != PNG_RESOLUTION_METER ||
          info_ptr-&gt;x_pixels_per_unit != info_ptr-&gt;y_pixels_per_unit)
           return (0);
       else return (info_ptr-&gt;x_pixels_per_unit);
@@ -199,7 +198,7 @@
    if (info_ptr-&gt;valid &amp; PNG_INFO_oFFs)
    {
       png_debug1(1, &quot;in %s retrieval function\n&quot;, &quot;png_get_x_offset_microns&quot;);
-      if(info_ptr-&gt;offset_unit_type != PNG_OFFSET_MICROMETER)
+      if (info_ptr-&gt;offset_unit_type != PNG_OFFSET_MICROMETER)
           return (0);
       else return (info_ptr-&gt;x_offset);
    }
@@ -217,7 +216,7 @@
    if (info_ptr-&gt;valid &amp; PNG_INFO_oFFs)
    {
       png_debug1(1, &quot;in %s retrieval function\n&quot;, &quot;png_get_y_offset_microns&quot;);
-      if(info_ptr-&gt;offset_unit_type != PNG_OFFSET_MICROMETER)
+      if (info_ptr-&gt;offset_unit_type != PNG_OFFSET_MICROMETER)
           return (0);
       else return (info_ptr-&gt;y_offset);
    }
@@ -235,7 +234,7 @@
    if (info_ptr-&gt;valid &amp; PNG_INFO_oFFs)
    {
       png_debug1(1, &quot;in %s retrieval function\n&quot;, &quot;png_get_x_offset_microns&quot;);
-      if(info_ptr-&gt;offset_unit_type != PNG_OFFSET_PIXEL)
+      if (info_ptr-&gt;offset_unit_type != PNG_OFFSET_PIXEL)
           return (0);
       else return (info_ptr-&gt;x_offset);
    }
@@ -253,7 +252,7 @@
    if (info_ptr-&gt;valid &amp; PNG_INFO_oFFs)
    {
       png_debug1(1, &quot;in %s retrieval function\n&quot;, &quot;png_get_y_offset_microns&quot;);
-      if(info_ptr-&gt;offset_unit_type != PNG_OFFSET_PIXEL)
+      if (info_ptr-&gt;offset_unit_type != PNG_OFFSET_PIXEL)
           return (0);
       else return (info_ptr-&gt;y_offset);
    }
@@ -323,7 +322,7 @@
       {
          *unit_type = (int)info_ptr-&gt;phys_unit_type;
          retval |= PNG_INFO_pHYs;
-         if(*unit_type == 1)
+         if (*unit_type == 1)
          {
             if (res_x != NULL) *res_x = (png_uint_32)(*res_x * .0254 + .50);
             if (res_y != NULL) *res_y = (png_uint_32)(*res_y * .0254 + .50);
@@ -784,10 +783,10 @@
              *trans_values = &amp;(info_ptr-&gt;trans_values);
              retval |= PNG_INFO_tRNS;
           }
-          if(trans != NULL)
+          if (trans != NULL)
              *trans = NULL;
       }
-      if(num_trans != NULL)
+      if (num_trans != NULL)
       {
          *num_trans = info_ptr-&gt;num_trans;
          retval |= PNG_INFO_tRNS;

Modified: haiku/trunk/src/libs/png/pngmem.c
===================================================================
--- haiku/trunk/src/libs/png/pngmem.c	2008-08-17 20:35:05 UTC (rev 27011)
+++ haiku/trunk/src/libs/png/pngmem.c	2008-08-17 22:03:24 UTC (rev 27012)
@@ -1,7 +1,7 @@
 
 /* pngmem.c - stub functions for memory allocation
  *
- * Last changed in libpng 1.2.26 [April 2, 2008]
+ * Last changed in libpng 1.2.30 [August 15, 2008]
  * For conditions of distribution and use, see copyright notice in png.h
  * Copyright (c) 1998-2008 Glenn Randers-Pehrson
  * (Version 0.96 Copyright (c) 1996, 1997 Andreas Dilger)
@@ -16,7 +16,6 @@
 
 #define PNG_INTERNAL
 #include &quot;png.h&quot;
-
 #if defined(PNG_READ_SUPPORTED) || defined(PNG_WRITE_SUPPORTED)
 
 /* Borland DOS special memory handler */
@@ -48,7 +47,7 @@
      return (png_get_copyright(NULL));
 
 #ifdef PNG_USER_MEM_SUPPORTED
-   if(malloc_fn != NULL)
+   if (malloc_fn != NULL)
    {
       png_struct dummy_struct;
       png_structp png_ptr = &amp;dummy_struct;
@@ -80,7 +79,7 @@
    if (struct_ptr != NULL)
    {
 #ifdef PNG_USER_MEM_SUPPORTED
-      if(free_fn != NULL)
+      if (free_fn != NULL)
       {
          png_struct dummy_struct;
          png_structp png_ptr = &amp;dummy_struct;
@@ -122,7 +121,7 @@
       return (NULL);
 
 #ifdef PNG_USER_MEM_SUPPORTED
-   if(png_ptr-&gt;malloc_fn != NULL)
+   if (png_ptr-&gt;malloc_fn != NULL)
        ret = ((png_voidp)(*(png_ptr-&gt;malloc_fn))(png_ptr, (png_size_t)size));
    else
        ret = (png_malloc_default(png_ptr, size));
@@ -171,7 +170,7 @@
                ret = NULL;
             }
 
-            if(png_ptr-&gt;zlib_window_bits &gt; 14)
+            if (png_ptr-&gt;zlib_window_bits &gt; 14)
                num_blocks = (int)(1 &lt;&lt; (png_ptr-&gt;zlib_window_bits - 14));
             else
                num_blocks = 1;
@@ -210,7 +209,7 @@
 
             png_ptr-&gt;offset_table = table;
             png_ptr-&gt;offset_table_ptr = farmalloc(num_blocks *
-               png_sizeof (png_bytep));
+               png_sizeof(png_bytep));
 
             if (png_ptr-&gt;offset_table_ptr == NULL)
             {
@@ -273,6 +272,7 @@
 /* free a pointer allocated by png_malloc().  In the default
    configuration, png_ptr is not used, but is passed in case it
    is needed.  If ptr is NULL, return without taking any action. */
+
 void PNGAPI
 png_free(png_structp png_ptr, png_voidp ptr)
 {
@@ -293,7 +293,7 @@
 {
 #endif /* PNG_USER_MEM_SUPPORTED */
 
-   if(png_ptr == NULL) return;
+   if (png_ptr == NULL || ptr == NULL) return;
 
    if (png_ptr-&gt;offset_table != NULL)
    {
@@ -353,7 +353,7 @@
       return (NULL);
 
 #ifdef PNG_USER_MEM_SUPPORTED
-   if(malloc_fn != NULL)
+   if (malloc_fn != NULL)
    {
       png_struct dummy_struct;
       png_structp png_ptr = &amp;dummy_struct;
@@ -369,7 +369,7 @@
    struct_ptr = (png_voidp)farmalloc(size);
 #else
 # if defined(_MSC_VER) &amp;&amp; defined(MAXSEG_64K)
-   struct_ptr = (png_voidp)halloc(size,1);
+   struct_ptr = (png_voidp)halloc(size, 1);
 # else
    struct_ptr = (png_voidp)malloc(size);
 # endif
@@ -398,7 +398,7 @@
    if (struct_ptr != NULL)
    {
 #ifdef PNG_USER_MEM_SUPPORTED
-      if(free_fn != NULL)
+      if (free_fn != NULL)
       {
          png_struct dummy_struct;
          png_structp png_ptr = &amp;dummy_struct;
@@ -434,7 +434,7 @@
    if (png_ptr == NULL || size == 0)
       return (NULL);
 
-   if(png_ptr-&gt;malloc_fn != NULL)
+   if (png_ptr-&gt;malloc_fn != NULL)
        ret = ((png_voidp)(*(png_ptr-&gt;malloc_fn))(png_ptr, (png_size_t)size));
    else
        ret = (png_malloc_default(png_ptr, size));
@@ -542,9 +542,9 @@
 {
    png_voidp ptr;
    png_uint_32 save_flags;
-   if(png_ptr == NULL) return (NULL);
+   if (png_ptr == NULL) return (NULL);
 
-   save_flags=png_ptr-&gt;flags;
+   save_flags = png_ptr-&gt;flags;
    png_ptr-&gt;flags|=PNG_FLAG_MALLOC_NULL_MEM_OK;
    ptr = (png_voidp)png_malloc((png_structp)png_ptr, size);
    png_ptr-&gt;flags=save_flags;
@@ -560,7 +560,7 @@
 
    size = (png_size_t)length;
    if ((png_uint_32)size != length)
-      png_error(png_ptr,&quot;Overflow in png_memcpy_check.&quot;);
+      png_error(png_ptr, &quot;Overflow in png_memcpy_check.&quot;);
 
    return(png_memcpy (s1, s2, size));
 }
@@ -573,7 +573,7 @@
 
    size = (png_size_t)length;
    if ((png_uint_32)size != length)
-      png_error(png_ptr,&quot;Overflow in png_memset_check.&quot;);
+      png_error(png_ptr, &quot;Overflow in png_memset_check.&quot;);
 
    return (png_memset (s1, value, size));
 
@@ -587,10 +587,11 @@
 png_set_mem_fn(png_structp png_ptr, png_voidp mem_ptr, png_malloc_ptr
   malloc_fn, png_free_ptr free_fn)
 {
-   if(png_ptr != NULL) {
-   png_ptr-&gt;mem_ptr = mem_ptr;
-   png_ptr-&gt;malloc_fn = malloc_fn;
-   png_ptr-&gt;free_fn = free_fn;
+   if (png_ptr != NULL)
+   {
+      png_ptr-&gt;mem_ptr = mem_ptr;
+      png_ptr-&gt;malloc_fn = malloc_fn;
+      png_ptr-&gt;free_fn = free_fn;
    }
 }
 
@@ -601,7 +602,7 @@
 png_voidp PNGAPI
 png_get_mem_ptr(png_structp png_ptr)
 {
-   if(png_ptr == NULL) return (NULL);
+   if (png_ptr == NULL) return (NULL);
    return ((png_voidp)png_ptr-&gt;mem_ptr);
 }
 #endif /* PNG_USER_MEM_SUPPORTED */

Modified: haiku/trunk/src/libs/png/pngpread.c
===================================================================
--- haiku/trunk/src/libs/png/pngpread.c	2008-08-17 20:35:05 UTC (rev 27011)
+++ haiku/trunk/src/libs/png/pngpread.c	2008-08-17 22:03:24 UTC (rev 27012)
@@ -1,7 +1,7 @@
 
 /* pngpread.c - read a png file in push mode
  *
- * Last changed in libpng 1.2.26 [April 2, 2008]
+ * Last changed in libpng 1.2.30 [August 15, 2008]
  * For conditions of distribution and use, see copyright notice in png.h
  * Copyright (c) 1998-2008 Glenn Randers-Pehrson
  * (Version 0.96 Copyright (c) 1996, 1997 Andreas Dilger)
@@ -10,7 +10,6 @@
 
 #define PNG_INTERNAL
 #include &quot;png.h&quot;
-
 #ifdef PNG_PROGRESSIVE_READ_SUPPORTED
 
 /* push model modes */
@@ -28,7 +27,7 @@
 png_process_data(png_structp png_ptr, png_infop info_ptr,
    png_bytep buffer, png_size_t buffer_size)
 {
-   if(png_ptr == NULL || info_ptr == NULL) return;
+   if (png_ptr == NULL || info_ptr == NULL) return;
    png_push_restore_buffer(png_ptr, buffer, buffer_size);
 
    while (png_ptr-&gt;buffer_size)
@@ -43,7 +42,7 @@
 void /* PRIVATE */
 png_process_some_data(png_structp png_ptr, png_infop info_ptr)
 {
-   if(png_ptr == NULL) return;
+   if (png_ptr == NULL) return;
    switch (png_ptr-&gt;process_mode)
    {
       case PNG_READ_SIG_MODE:
@@ -114,7 +113,7 @@
 
    png_push_fill_buffer(png_ptr, &amp;(info_ptr-&gt;signature[num_checked]),
       num_to_check);
-   png_ptr-&gt;sig_bytes = (png_byte)(png_ptr-&gt;sig_bytes+num_to_check);
+   png_ptr-&gt;sig_bytes = (png_byte)(png_ptr-&gt;sig_bytes + num_to_check);
 
    if (png_sig_cmp(info_ptr-&gt;signature, num_checked, num_to_check))
    {
@@ -210,22 +209,23 @@
       }
 
       png_push_fill_buffer(png_ptr, chunk_length, 4);
-      png_ptr-&gt;push_length = png_get_uint_31(png_ptr,chunk_length);
+      png_ptr-&gt;push_length = png_get_uint_31(png_ptr, chunk_length);
       png_reset_crc(png_ptr);
       png_crc_read(png_ptr, png_ptr-&gt;chunk_name, 4);
+      png_check_chunk_name(png_ptr, png_ptr-&gt;chunk_name);
       png_ptr-&gt;mode |= PNG_HAVE_CHUNK_HEADER;
    }
 
    if (!png_memcmp(png_ptr-&gt;chunk_name, png_IDAT, 4))
-     if(png_ptr-&gt;mode &amp; PNG_AFTER_IDAT)
+     if (png_ptr-&gt;mode &amp; PNG_AFTER_IDAT)
         png_ptr-&gt;mode |= PNG_HAVE_CHUNK_AFTER_IDAT;
 
    if (!png_memcmp(png_ptr-&gt;chunk_name, png_IHDR, 4))
    {
+      if (png_ptr-&gt;push_length != 13)
+         png_error(png_ptr, &quot;Invalid IHDR length&quot;);
       if (png_ptr-&gt;push_length + 4 &gt; png_ptr-&gt;buffer_size)
       {
-         if (png_ptr-&gt;push_length != 13)
-            png_error(png_ptr, &quot;Invalid IHDR length&quot;);
          png_push_save_buffer(png_ptr);
          return;
       }
@@ -565,7 +565,7 @@
 {
    png_bytep ptr;
 
-   if(png_ptr == NULL) return;
+   if (png_ptr == NULL) return;

[... truncated: 5002 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011032.html">[Haiku-commits] r27011 - haiku/trunk/src/system/libroot/os/arch/x86
</A></li>
	<LI>Next message: <A HREF="011182.html">[Haiku-commits] r27012 - in haiku/trunk:	headers/libs/png	src/libs/png
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11034">[ date ]</a>
              <a href="thread.html#11034">[ thread ]</a>
              <a href="subject.html#11034">[ subject ]</a>
              <a href="author.html#11034">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
