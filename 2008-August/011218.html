<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r27141 - haiku/trunk/src/kits/tracker
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27141%20-%20haiku/trunk/src/kits/tracker&In-Reply-To=%3C200808221122.m7MBMs64019953%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011215.html">
   <LINK REL="Next"  HREF="011219.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r27141 - haiku/trunk/src/kits/tracker</H1>
    <B>axeld at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r27141%20-%20haiku/trunk/src/kits/tracker&In-Reply-To=%3C200808221122.m7MBMs64019953%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r27141 - haiku/trunk/src/kits/tracker">axeld at mail.berlios.de
       </A><BR>
    <I>Fri Aug 22 13:22:54 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="011215.html">[Haiku-commits] r27140 - haiku/trunk/src/system/kernel
</A></li>
        <LI>Next message: <A HREF="011219.html">[Haiku-commits] r27142 - haiku/trunk/src/kits/tracker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11218">[ date ]</a>
              <a href="thread.html#11218">[ thread ]</a>
              <a href="subject.html#11218">[ subject ]</a>
              <a href="author.html#11218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: axeld
Date: 2008-08-22 13:22:52 +0200 (Fri, 22 Aug 2008)
New Revision: 27141
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=27141&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=27141&amp;view=rev</A>

Modified:
   haiku/trunk/src/kits/tracker/ContainerWindow.cpp
   haiku/trunk/src/kits/tracker/ContainerWindow.h
Log:
* Whitespace cleanup, no functional change.


Modified: haiku/trunk/src/kits/tracker/ContainerWindow.cpp
===================================================================
--- haiku/trunk/src/kits/tracker/ContainerWindow.cpp	2008-08-22 10:19:29 UTC (rev 27140)
+++ haiku/trunk/src/kits/tracker/ContainerWindow.cpp	2008-08-22 11:22:52 UTC (rev 27141)
@@ -154,7 +154,7 @@
 		&amp;&amp; view-&gt;Window())
 		view-&gt;Window()-&gt;Activate(true);
 
-	return B_DISPATCH_MESSAGE;		
+	return B_DISPATCH_MESSAGE;
 }
 
 
@@ -248,10 +248,10 @@
 
 				// call add-on code
 				(*processRefs)(dirRef, refsMessagePtr.get(), 0);
-				
+
 				unload_add_on(addonImage);
 				return B_OK;
-			} else 
+			} else
 				PRINT((&quot;couldn't find process_refs\n&quot;));
 
 			unload_add_on(addonImage);
@@ -266,7 +266,7 @@
 		B_WIDTH_AS_USUAL, B_WARNING_ALERT);
 	alert-&gt;SetShortcut(0, B_ESCAPE);
 	alert-&gt;Go();
-	
+
 	return result;
 }
 
@@ -288,10 +288,10 @@
 
 	if (!params-&gt;rectFromParent)
 		return false;
-		
+
 	if (!castToRect)
 		return false;
-	
+
 	((BRect *)castToRect)-&gt;OffsetBy(kWindowStaggerBy, kWindowStaggerBy);
 	return true;
 }
@@ -428,7 +428,7 @@
 
 	// See if we need to truncate the string
 	BString nameString = model-&gt;Name();
-	if (view-&gt;StringWidth(model-&gt;Name()) &gt; rect.Width()) 
+	if (view-&gt;StringWidth(model-&gt;Name()) &gt; rect.Width())
 		view-&gt;TruncateString(&amp;nameString, B_TRUNCATE_END, rect.Width() - 5);
 
 	// Draw the label
@@ -608,7 +608,7 @@
 }
 
 
-BRect 
+BRect
 BContainerWindow::InitialWindowRect(window_feel feel)
 {
 	if (feel != kPrivateDesktopWindowFeel)
@@ -660,7 +660,7 @@
 		delete fNavigationItem;
 		fNavigationItem = NULL;
 	}
-	
+
 	if (fOpenWithItem &amp;&amp; !fOpenWithItem-&gt;Menu()) {
 		delete fOpenWithItem;
 		fOpenWithItem = NULL;
@@ -685,7 +685,7 @@
 		delete fAttrMenu;
 		fAttrMenu = NULL;
 	}
-		
+
 	delete fFileContextMenu;
 	fFileContextMenu = NULL;
 	delete fWindowContextMenu;
@@ -696,9 +696,9 @@
 	fVolumeContextMenu = NULL;
 	delete fDragContextMenu;
 	fDragContextMenu = NULL;
-	
+
 	int32 windowCount = 0;
-	
+
 	// This is a deadlock code sequence - need to change this
 	// to acquire the window list while this container window is unlocked
 	if (fWindowList) {
@@ -730,7 +730,7 @@
 BContainerWindow::UpdateIfTrash(Model *model)
 {
 	BEntry entry(model-&gt;EntryRef());
-	
+
 	if (entry.InitCheck() == B_OK) {
 		fIsTrash = FSIsTrashDir(&amp;entry);
 		fInTrash = FSInTrashDir(model-&gt;EntryRef());
@@ -744,7 +744,7 @@
 {
 	UpdateIfTrash(model);
 	BRect rect(Bounds());
-	
+
 	TrackerSettings settings;
 	if (settings.SingleWindowBrowse()
 		&amp;&amp; settings.ShowNavigator()
@@ -772,14 +772,14 @@
 }
 
 
-void 
+void
 BContainerWindow::AddContextMenus()
 {
 	// create context sensitive menus
 	fFileContextMenu = new BPopUpMenu(&quot;FileContext&quot;, false, false);
 	fFileContextMenu-&gt;SetFont(be_plain_font);
 	AddFileContextMenus(fFileContextMenu);
-	
+
 	fVolumeContextMenu = new BPopUpMenu(&quot;VolumeContext&quot;, false, false);
 	fVolumeContextMenu-&gt;SetFont(be_plain_font);
 	AddVolumeContextMenus(fVolumeContextMenu);
@@ -791,7 +791,7 @@
 	fDropContextMenu = new BPopUpMenu(&quot;DropContext&quot;, false, false);
 	fDropContextMenu-&gt;SetFont(be_plain_font);
 	AddDropContextMenus(fDropContextMenu);
-	
+
 	fDragContextMenu = new BSlowContextMenu(&quot;DragContext&quot;);
 		// will get added and built dynamically in ShowContextMenu
 }
@@ -918,7 +918,7 @@
 			if (iconSize &lt; 16)
 				iconSize = 16;
 			float iconPosY = 1 + (fMenuBar-&gt;Bounds().Height() - 2 - iconSize) / 2;
-			BView *icon = new DraggableContainerIcon(BRect(Bounds().Width() - 4 - iconSize + 1, 
+			BView *icon = new DraggableContainerIcon(BRect(Bounds().Width() - 4 - iconSize + 1,
 					iconPosY, Bounds().Width() - 4, iconPosY + iconSize - 1),
 				&quot;ThisContainer&quot;, B_FOLLOW_RIGHT);
 			fMenuBar-&gt;AddChild(icon);
@@ -979,7 +979,7 @@
 BContainerWindow::RestoreState()
 {
 	SetSizeLimits(kContainerWidthMinLimit, 10000, kContainerWindowHeightLimit, 10000);
-	
+
 	UpdateTitle();
 
 	WindowStateNodeOpener opener(this, false);
@@ -994,12 +994,12 @@
 BContainerWindow::RestoreState(const BMessage &amp;message)
 {
 	SetSizeLimits(kContainerWidthMinLimit, 10000, kContainerWindowHeightLimit, 10000);
-	
+
 	UpdateTitle();
 
 	RestoreWindowState(message);
 	fPoseView-&gt;Init(message);
-	
+
 	RestoreStateCommon();
 }
 
@@ -1023,10 +1023,10 @@
 		fBackgroundImage = BackgroundImage::GetBackgroundImage(
 			opener.Node(), isDesktop);
 			// look for background image info in the window's node
-	
+
 	BNode defaultingNode;
 	if (!fBackgroundImage &amp;&amp; !isDesktop
-		&amp;&amp; DefaultStateSourceNode(kDefaultFolderTemplate, &amp;defaultingNode)) 
+		&amp;&amp; DefaultStateSourceNode(kDefaultFolderTemplate, &amp;defaultingNode))
 		// look for background image info in the source for defaults
 		fBackgroundImage = BackgroundImage::GetBackgroundImage(&amp;defaultingNode, isDesktop);
 }
@@ -1038,15 +1038,15 @@
 	// set title to full path, if necessary
 	if (TrackerSettings().ShowFullPathInTitleBar()) {
 		// use the Entry's full path
-		BPath path; 
-		TargetModel()-&gt;GetPath(&amp;path); 
+		BPath path;
+		TargetModel()-&gt;GetPath(&amp;path);
 		SetTitle(path.Path());
 	} else
 		// use the default look
 		SetTitle(TargetModel()-&gt;Name());
 
 	if (Navigator())
-		Navigator()-&gt;UpdateLocation(PoseView()-&gt;TargetModel(), kActionUpdatePath);	
+		Navigator()-&gt;UpdateLocation(PoseView()-&gt;TargetModel(), kActionUpdatePath);
 }
 
 
@@ -1062,11 +1062,11 @@
 	if (!TargetModel()-&gt;IsRoot() &amp;&amp; opener.Node())
 		fBackgroundImage = BackgroundImage::Refresh(fBackgroundImage,
 			opener.Node(), isDesktop, PoseView());
-	
+
 		// look for background image info in the window's node
 	BNode defaultingNode;
 	if (!fBackgroundImage &amp;&amp; !isDesktop
-		&amp;&amp; DefaultStateSourceNode(kDefaultFolderTemplate, &amp;defaultingNode)) 
+		&amp;&amp; DefaultStateSourceNode(kDefaultFolderTemplate, &amp;defaultingNode))
 		// look for background image info in the source for defaults
 		fBackgroundImage = BackgroundImage::Refresh(fBackgroundImage,
 			&amp;defaultingNode, isDesktop, PoseView());
@@ -1077,20 +1077,20 @@
 BContainerWindow::FrameResized(float, float)
 {
 	if (PoseView() &amp;&amp; dynamic_cast&lt;BDeskWindow *&gt;(this) == NULL) {
-		BRect extent = PoseView()-&gt;Extent();		
+		BRect extent = PoseView()-&gt;Extent();
 		float offsetX = extent.left - PoseView()-&gt;Bounds().left;
 		float offsetY = extent.top - PoseView()-&gt;Bounds().top;
-		
+
 		// scroll when the size augmented, there is a negative offset
-		// and we have resized over the bottom right corner of the extent 
+		// and we have resized over the bottom right corner of the extent
 		if (offsetX &lt; 0 &amp;&amp; PoseView()-&gt;Bounds().right &gt; extent.right
-			&amp;&amp; Bounds().Width() &gt; fPreviousBounds.Width()) 
-			PoseView()-&gt;ScrollBy(max_c(fPreviousBounds.Width() - Bounds().Width(), offsetX), 0);			
-		
-		if (offsetY &lt; 0 &amp;&amp; PoseView()-&gt;Bounds().bottom &gt; extent.bottom 
+			&amp;&amp; Bounds().Width() &gt; fPreviousBounds.Width())
+			PoseView()-&gt;ScrollBy(max_c(fPreviousBounds.Width() - Bounds().Width(), offsetX), 0);
+
+		if (offsetY &lt; 0 &amp;&amp; PoseView()-&gt;Bounds().bottom &gt; extent.bottom
 			&amp;&amp; Bounds().Height() &gt; fPreviousBounds.Height())
 			PoseView()-&gt;ScrollBy(0, max_c(fPreviousBounds.Height() - Bounds().Height(), offsetY));
-				
+
 		PoseView()-&gt;UpdateScrollRange();
 		PoseView()-&gt;ResetPosePlacementHint();
 	}
@@ -1114,7 +1114,7 @@
 }
 
 
-void 
+void
 BContainerWindow::ViewModeChanged(uint32 oldMode, uint32 newMode)
 {
 	BView *view = FindView(&quot;MenuBar&quot;);
@@ -1131,7 +1131,7 @@
 	if (newMode == kListMode)
 		fBackgroundImage-&gt;Remove();
 	else if (oldMode == kListMode)
-		fBackgroundImage-&gt;Show(PoseView(), current_workspace()); 
+		fBackgroundImage-&gt;Show(PoseView(), current_workspace());
 }
 
 
@@ -1183,11 +1183,11 @@
 bool
 BContainerWindow::StateNeedsSaving() const
 {
-	return fStateNeedsSaving || PoseView()-&gt;StateNeedsSaving();	
+	return fStateNeedsSaving || PoseView()-&gt;StateNeedsSaving();
 }
 
 
-status_t 
+status_t
 BContainerWindow::GetLayoutState(BNode *node, BMessage *message)
 {
 	// ToDo:
@@ -1221,7 +1221,7 @@
 }
 
 
-status_t 
+status_t
 BContainerWindow::SetLayoutState(BNode *node, const BMessage *message)
 {
 	status_t result = node-&gt;InitCheck();
@@ -1343,7 +1343,7 @@
 	PoseView()-&gt;ScrollBy(
 		extent.left - PoseView()-&gt;Bounds().left,
 		extent.top - PoseView()-&gt;Bounds().top);
-	
+
 	PoseView()-&gt;UpdateScrollRange();
 	PoseView()-&gt;EnableScrollBars();
 }
@@ -1384,7 +1384,7 @@
 
 		case kRestoreState:
 			if (message-&gt;HasMessage(&quot;state&quot;)) {
-				BMessage state;				
+				BMessage state;
 				message-&gt;FindMessage(&quot;state&quot;, &amp;state);
 				Init(&amp;state);
 			} else
@@ -1506,10 +1506,10 @@
 					if (Navigator()) {
 						int32 action = kActionSet;
 						if (message-&gt;FindInt32(&quot;action&quot;, &amp;action) != B_OK)
-							// Design problem? Why does FindInt32 touch 
+							// Design problem? Why does FindInt32 touch
 							// 'action' at all if he can't find it??
 							action = kActionSet;
-						
+
 						Navigator()-&gt;UpdateLocation(PoseView()-&gt;TargetModel(), action);
 					}
 
@@ -1559,18 +1559,18 @@
 								list-&gt;AddItem(new entry_ref(dragref));
 							//
 							//	compare the target and one of the drag items' parent
-							//	
+							//
 							BEntry item(&amp;dragref, true);
 							BEntry itemparent;
 							item.GetParent(&amp;itemparent);
 							entry_ref parentref;
 							itemparent.GetRef(&amp;parentref);
-							
+
 							entry_ref targetref;
 							entry.GetRef(&amp;targetref);
 
 							//	if they don't match, move/copy
-							if (targetref != parentref) 
+							if (targetref != parentref)
 								//	copy drag contents to target ref in message
 								FSMoveToFolder(list, new BEntry(entry), kMoveSelectionTo);
 
@@ -1623,7 +1623,7 @@
 						if (IsPathWatchingEnabled() &amp;&amp; !(settings.ShowNavigator() || settings.ShowFullPathInTitleBar()))
 							SetPathWatchingEnabled(false);
 						break;
-						
+
 					case kDontMoveFilesToTrashChanged:
 						{
 							bool dontMoveToTrash = settings.DontMoveFilesToTrash();
@@ -1645,7 +1645,7 @@
 					default:
 						_inherited::MessageReceived(message);
 				}
-			}		
+			}
 			break;
 		}
 
@@ -1762,7 +1762,7 @@
 void
 BContainerWindow::SetCloseItem(BMenu *menu)
 {
-	BMenuItem *item;	
+	BMenuItem *item;
 	if ((item = menu-&gt;FindItem(B_QUIT_REQUESTED)) == NULL
 		&amp;&amp; (item = menu-&gt;FindItem(kCloseAllWindows)) == NULL)
 		return;
@@ -1826,7 +1826,7 @@
 			menu-&gt;AddItem(new BMenuItem(&quot;New Folder&quot;, new BMessage(kNewFolder), 'N'));
 	}
 	menu-&gt;AddSeparatorItem();
-	
+
 	menu-&gt;AddItem(new BMenuItem(&quot;Open&quot;, new BMessage(kOpenSelection), 'O'));
 	menu-&gt;AddItem(new BMenuItem(&quot;Get Info&quot;, new BMessage(kGetInfo), 'I'));
 	menu-&gt;AddItem(new BMenuItem(&quot;Edit Name&quot;, new BMessage(kEditItem), 'E'));
@@ -1857,7 +1857,7 @@
 		// at this place, have a look at:
 		// BContainerWindow::SetupMoveCopyMenus()
 	}
-	
+
 	BMenuItem *cutItem = NULL, *copyItem = NULL, *pasteItem = NULL;
 	if (!IsPrintersDir()) {
 		menu-&gt;AddSeparatorItem();
@@ -1867,7 +1867,7 @@
 		menu-&gt;AddItem(pasteItem = new BMenuItem(&quot;Paste&quot;, new BMessage(B_PASTE), 'V'));
 
 		menu-&gt;AddSeparatorItem();
-				
+
 		menu-&gt;AddItem(new BMenuItem(&quot;Identify&quot;, new BMessage(kIdentifyEntry)));
 		BMenu *addOnMenuItem = new BMenu(kAddOnsMenuName);
 		addOnMenuItem-&gt;SetFont(be_plain_font);
@@ -1943,11 +1943,11 @@
 	item = new BMenuItem(&quot;Select All&quot;, new BMessage(B_SELECT_ALL), 'A');
 	item-&gt;SetTarget(PoseView());
 	menu-&gt;AddItem(item);
-	
+
 	item = new BMenuItem(&quot;Invert Selection&quot;, new BMessage(kInvertSelection), 'S');
 	item-&gt;SetTarget(PoseView());
 	menu-&gt;AddItem(item);
-	
+
 	if (!IsTrash()) {
 		item = new BMenuItem(&quot;Open Parent&quot;, new BMessage(kOpenParentDir),
 			B_UP_ARROW);
@@ -2093,12 +2093,12 @@
 
 	parent-&gt;AddItem(fNavigationItem, 0);
 	parent-&gt;AddItem(new BSeparatorItem(), 1);
-	
+
 	BMessage *message = new BMessage(B_REFS_RECEIVED);
 	message-&gt;AddRef(&quot;refs&quot;, ref);
 	fNavigationItem-&gt;SetMessage(message);
 	fNavigationItem-&gt;SetTarget(be_app);
-	
+
 	if (!Dragging())
 		parent-&gt;SetTrackingHook(NULL, NULL);
 }
@@ -2136,12 +2136,12 @@
 	BMenuItem *item = menu-&gt;FindItem(&quot;Edit Query&quot;);
 	if (!poseViewIsQuery &amp;&amp; !queryInSelection &amp;&amp; item)
 		item-&gt;Menu()-&gt;RemoveItem(item);
-		
+
 	else if ((poseViewIsQuery || queryInSelection) &amp;&amp; menu &amp;&amp; !item) {
 
-		// add edit query item after Open 
+		// add edit query item after Open
 		item = menu-&gt;FindItem(kOpenSelection);
-		if (item) {	
+		if (item) {
 			int32 itemIndex = item-&gt;Menu()-&gt;IndexOf(item);
 			BMenuItem *query = new BMenuItem(&quot;Edit Query&quot;, new BMessage(kEditQuery), 'G');
 			item-&gt;Menu()-&gt;AddItem(query, itemIndex + 1);
@@ -2157,7 +2157,7 @@
 	// start by removing nav item (and separator) from old menu
 	if (fOpenWithItem) {
 		BMenu *menu = fOpenWithItem-&gt;Menu();
-		if (menu) 
+		if (menu)
 			menu-&gt;RemoveItem(fOpenWithItem);
 
 		delete fOpenWithItem;
@@ -2259,7 +2259,7 @@
 		&amp;&amp; directory.GetEntry(&amp;entry) == B_OK
 		&amp;&amp; model.SetTo(&amp;entry) == B_OK)
 		navMenu-&gt;AddNavDir(&amp;model, what, this, true);
-			// ask NavMenu to populate submenu for us			
+			// ask NavMenu to populate submenu for us
 
 	// add the home dir
 	if (find_directory(B_USER_DIRECTORY, &amp;path) == B_OK
@@ -2294,7 +2294,7 @@
 			// add root dir
 			if (volume.GetRootDirectory(&amp;directory) == B_OK
 				&amp;&amp; directory.GetEntry(&amp;entry) == B_OK
-				&amp;&amp; model.SetTo(&amp;entry) == B_OK) 
+				&amp;&amp; model.SetTo(&amp;entry) == B_OK)
 				navMenu-&gt;AddNavDir(&amp;model, what, this, true);
 					// ask NavMenu to populate submenu for us
 		}
@@ -2346,7 +2346,7 @@
     	fCreateLinkItem-&gt;SetLabel(&quot;Create Relative Link&quot;);
     else
     	fCreateLinkItem-&gt;SetLabel(&quot;Create Link&quot;);
-    	
+
 	// only enable once the menus are built
 	fMoveToItem-&gt;SetEnabled(false);
 	fCopyToItem-&gt;SetEnabled(false);
@@ -2356,7 +2356,7 @@
 	BEntry entry;
 	if (entry.SetTo(item_ref) != B_OK)
 		return;
-			
+
 	Model tempModel(&amp;entry);
 	if (tempModel.InitCheck() != B_OK)
 		return;
@@ -2364,11 +2364,11 @@
 	if (tempModel.IsRoot() || tempModel.IsVolume())
 		return;
 
-	// configure &quot;Move to&quot; menu item 
+	// configure &quot;Move to&quot; menu item
 	PopulateMoveCopyNavMenu(dynamic_cast&lt;BNavMenu *&gt;(fMoveToItem-&gt;Submenu()),
 		kMoveSelectionTo, item_ref, true);
 
-	// configure &quot;Copy to&quot; menu item 
+	// configure &quot;Copy to&quot; menu item
 	// add all mounted volumes (except the one this item lives on)
 	PopulateMoveCopyNavMenu(dynamic_cast&lt;BNavMenu *&gt;(fCopyToItem-&gt;Submenu()),
 		kCopySelectionTo, item_ref, false);
@@ -2535,7 +2535,7 @@
 		if (fWindowContextMenu-&gt;Window())
 			return;
 
-		MenusEnded();		
+		MenusEnded();
 
 		// clicked on a window, show window context menu
 
@@ -2548,14 +2548,14 @@
 }
 
 
-void 
+void
 BContainerWindow::AddFileContextMenus(BMenu *menu)
 {
 	menu-&gt;AddItem(new BMenuItem(&quot;Open&quot;, new BMessage(kOpenSelection), 'O'));
 	menu-&gt;AddItem(new BMenuItem(&quot;Get Info&quot;, new BMessage(kGetInfo), 'I'));
 	menu-&gt;AddItem(new BMenuItem(&quot;Edit Name&quot;, new BMessage(kEditItem), 'E'));
 
-	if (!IsTrash() &amp;&amp; !InTrash() &amp;&amp; !IsPrintersDir()) 
+	if (!IsTrash() &amp;&amp; !InTrash() &amp;&amp; !IsPrintersDir())
 		menu-&gt;AddItem(new BMenuItem(&quot;Duplicate&quot;,
 			new BMessage(kDuplicateSelection), 'D'));
 
@@ -2593,9 +2593,9 @@
 }
 
 
-void 
+void
 BContainerWindow::AddVolumeContextMenus(BMenu *menu)
-{	
+{
 	menu-&gt;AddItem(new BMenuItem(&quot;Open&quot;, new BMessage(kOpenSelection), 'O'));
 	menu-&gt;AddItem(new BMenuItem(&quot;Get Info&quot;, new BMessage(kGetInfo), 'I'));
 	menu-&gt;AddItem(new BMenuItem(&quot;Edit Name&quot;, new BMessage(kEditItem), 'E'));
@@ -2614,7 +2614,7 @@
 }
 
 
-void 
+void
 BContainerWindow::AddWindowContextMenus(BMenu *menu)
 {
 	// create context sensitive menu for empty area of window
@@ -2622,7 +2622,7 @@
 	// mode menu
 
 	bool needSeparator = true;
-	if (IsTrash()) 
+	if (IsTrash())
 		menu-&gt;AddItem(new BMenuItem(&quot;Empty Trash&quot;, new BMessage(kEmptyTrash)));
 	else if (IsPrintersDir())
 		menu-&gt;AddItem(new BMenuItem(&quot;Add Printer&quot;B_UTF8_ELLIPSIS, new BMessage(kAddPrinter), 'N'));
@@ -2647,7 +2647,7 @@
 	menu-&gt;AddItem(new BMenuItem(&quot;Select&quot;B_UTF8_ELLIPSIS,
 		new BMessage(kShowSelectionWindow), 'A', B_SHIFT_KEY));
 	menu-&gt;AddItem(new BMenuItem(&quot;Select All&quot;, new BMessage(B_SELECT_ALL), 'A'));
-	if (!IsTrash()) 
+	if (!IsTrash())
 		menu-&gt;AddItem(new BMenuItem(&quot;Open Parent&quot;, new BMessage(kOpenParentDir),
 			B_UP_ARROW));
 
@@ -2670,7 +2670,7 @@
 }
 
 
-void 
+void
 BContainerWindow::AddDropContextMenus(BMenu *menu)
 {
 	menu-&gt;AddItem(new BMenuItem(&quot;Create Link Here&quot;, new BMessage(kCreateLink)));
@@ -2961,16 +2961,16 @@
 	BPose *pose;
 	while ((pose = list-&gt;ItemAt(index++)) != NULL)
 		refs-&gt;AddRef(&quot;refs&quot;, pose-&gt;TargetModel()-&gt;EntryRef());
-	
+
 	refs-&gt;AddMessenger(&quot;TrackerViewToken&quot;, BMessenger(PoseView()));
-	
-	LaunchInNewThread(&quot;Add-on&quot;, B_NORMAL_PRIORITY, &amp;AddOnThread, refs, addonRef, 
+
+	LaunchInNewThread(&quot;Add-on&quot;, B_NORMAL_PRIORITY, &amp;AddOnThread, refs, addonRef,
 		*TargetModel()-&gt;EntryRef());
 }
 
 
 BMenuItem *
-BContainerWindow::NewAttributeMenuItem(const char *label, const char *name, 
+BContainerWindow::NewAttributeMenuItem(const char *label, const char *name,
 	int32 type, float width, int32 align, bool editable, bool statField)
 {
 	return NewAttributeMenuItem(label, name, type, NULL, width, align,
@@ -2979,7 +2979,7 @@
 
 
 BMenuItem *
-BContainerWindow::NewAttributeMenuItem(const char *label, const char *name, 
+BContainerWindow::NewAttributeMenuItem(const char *label, const char *name,
 	int32 type, const char* displayAs, float width, int32 align,
 	bool editable, bool statField)
 {
@@ -3064,7 +3064,7 @@
 }
 
 
-void 
+void
 BContainerWindow::MarkAttributeMenu()
 {
 	MarkAttributeMenu(fAttrMenu);
@@ -3084,7 +3084,7 @@
 		if (item-&gt;Message())
 			if (item-&gt;Message()-&gt;FindInt32(&quot;attr_hash&quot;, &amp;attrHash) == B_OK)
 				item-&gt;SetMarked(PoseView()-&gt;ColumnFor((uint32)attrHash) != 0);
-			else 
+			else
 				item-&gt;SetMarked(false);
 
 		BMenu *submenu = item-&gt;Submenu();
@@ -3093,7 +3093,7 @@
 			for (int32 subindex = 0; subindex &lt; count2; subindex++) {
 				item = submenu-&gt;ItemAt(subindex);
 				if (item-&gt;Message())
-					if (item-&gt;Message()-&gt;FindInt32(&quot;attr_hash&quot;, &amp;attrHash) == B_OK) 
+					if (item-&gt;Message()-&gt;FindInt32(&quot;attr_hash&quot;, &amp;attrHash) == B_OK)
 						item-&gt;SetMarked(PoseView()-&gt;ColumnFor((uint32)attrHash) != 0);
 					else
 						item-&gt;SetMarked(false);
@@ -3103,7 +3103,7 @@
 }
 
 
-void 
+void
 BContainerWindow::AddMimeTypesToMenu()
 {
 	AddMimeTypesToMenu(fAttrMenu);
@@ -3134,11 +3134,11 @@
 	char description[B_MIME_TYPE_LENGTH];
 	const char *nameToAdd = mimeType.Type();
 
-	if (!mimeType.IsInstalled()) 
-		return NULL;		
+	if (!mimeType.IsInstalled())
+		return NULL;
 
 	// only add things to menu which have &quot;user-visible&quot; data
-	if (mimeType.GetAttrInfo(&amp;attrInfo) != B_OK) 
+	if (mimeType.GetAttrInfo(&amp;attrInfo) != B_OK)
 		return NULL;
 
 	if (mimeType.GetShortDescription(description) == B_OK
@@ -3156,7 +3156,7 @@
 		localMenu = new BMenu(nameToAdd);
 		BFont font;
 		menu-&gt;GetFont(&amp;font);
-		localMenu-&gt;SetFont(&amp;font);		
+		localMenu-&gt;SetFont(&amp;font);
 	}
 
 	while (attrInfo.FindString(&quot;attr:public_name&quot;, ++index, &amp;str) == B_OK) {
@@ -3191,7 +3191,7 @@
 		localMenu-&gt;AddItem(NewAttributeMenuItem(str, attrName, type,
 			displayAs.String(), width, align, editable, false));
 	}
-	
+
 	return localMenu;
 }
 
@@ -3206,7 +3206,7 @@
 	int32 count = menu-&gt;CountItems();
 	int32 start;
 
-	for (start = 0; start &lt; count; start++) { 
+	for (start = 0; start &lt; count; start++) {
 		if (menu-&gt;ItemAt(start)-&gt;Submenu())
 			break;
 	}
@@ -3220,7 +3220,7 @@
 
 	// Add a separator item if there is none yet
 	if (dynamic_cast&lt;BSeparatorItem *&gt;(menu-&gt;ItemAt(removeIndex)) == NULL)
-		menu-&gt;AddSeparatorItem(); 		
+		menu-&gt;AddSeparatorItem();
 
 	// Add MIME type in case we're a default query type window
 	BPath path;
@@ -3254,12 +3254,11 @@
 				message1-&gt;AddString(&quot;mimetype&quot;, mimeType.Type());
 				levelOneMenu-&gt;AddItem(new IconMenuItem(levelTwoMenu, message1,
 					mimeType.Type(), B_MINI_ICON));
-					
+
 				BMessage *message2 = new BMessage(kMIMETypeItem);
 				message2-&gt;AddString(&quot;mimetype&quot;, superType.Type());
 				menu-&gt;AddItem(new IconMenuItem(levelOneMenu, message2,
 					superType.Type(), B_MINI_ICON));
-	
 			} else {
 				if (levelOneMenu-&gt;CountItems() == 0) {
 					// Our supertype menu is empty, so we remove it now.
@@ -3268,7 +3267,7 @@
 					BMessage *message2 = new BMessage(kMIMETypeItem);
 					message2-&gt;AddString(&quot;mimetype&quot;, superType.Type());
 					menu-&gt;AddItem(new IconMenuItem(levelOneMenu, message2,
-					superType.Type(), B_MINI_ICON));		
+					superType.Type(), B_MINI_ICON));
 				}
 			}
 		}
@@ -3310,7 +3309,7 @@
 }
 
 
-bool 
+bool
 BContainerWindow::NeedsDefaultStateSetup()
 {
 	if (!TargetModel())
@@ -3319,12 +3318,12 @@
 	if (TargetModel()-&gt;IsRoot())
 		// don't try to set up anything if we are root
 		return false;
-		
+
 	WindowStateNodeOpener opener(this, false);
 	if (!opener.StreamNode())
 		// can't read state, give up
 		return false;
-	
+
 	return !NodeHasSavedState(opener.Node());
 }
 
@@ -3345,7 +3344,7 @@
 	if (!BEntry(path.Path()).Exists()) {
 		if (!createNew)
 			return false;
-	
+
 		BPath tmpPath(settingsPath);
 		for (;;) {
 			// deal with several levels of folders
@@ -3382,23 +3381,23 @@
 }
 
 
-void 
+void
 BContainerWindow::SetUpDefaultState()
 {
 	BNode defaultingNode;
 		// this is where we'll ulitimately get the state from
 	bool gotDefaultingNode = 0;
 	bool shouldStagger = false;
-	
+
 	ASSERT(TargetModel());
 
 	PRINT((&quot;folder %s does not have any saved state\n&quot;, TargetModel()-&gt;Name()));
-	
+
 	WindowStateNodeOpener opener(this, true);
 		// this is our destination node, whatever it is for this window
 	if (!opener.StreamNode())
 		return;
-	
+
 	if (!TargetModel()-&gt;IsRoot()) {
 		BDirectory desktop;
 		FSGetDeskDir(&amp;desktop, TargetModel()-&gt;EntryRef()-&gt;device);
@@ -3429,7 +3428,7 @@
 		return;
 
 	// copy over the attributes
-	
+
 	// set up a filter of the attributes we want copied
 	const char *allowAttrs[] = {
 		kAttrWindowFrame,
@@ -3440,7 +3439,7 @@
 		kAttrColumnsForeign,
 		0
 	};
-	
+
 	// copy over attributes that apply; transform them properly, stripping
 	// parts that do not apply, adding a window stagger, etc.
 
@@ -3449,7 +3448,7 @@
 	SelectiveAttributeTransformer frameOffsetter(kAttrWindowFrame, OffsetFrameOne, &amp;params);
 	SelectiveAttributeTransformer scrollOriginCleaner(kAttrViewState,
 		ClearViewOriginOne, &amp;params);
-	
+
 	// do it
 	AttributeStreamMemoryNode memoryNode;
 	NamesToAcceptAttrFilter filter(allowAttrs);
@@ -3460,13 +3459,13 @@
 }
 
 
-void 
+void
 BContainerWindow::RestoreWindowState(AttributeStreamNode *node)
 {
 	if (!node || dynamic_cast&lt;BDeskWindow *&gt;(this))
 		// don't restore any window state if we are a desktop window
 		return;
-		
+
 	const char *rectAttributeName;
 	const char *workspaceAttributeName;
 	if (TargetModel()-&gt;IsRoot()) {
@@ -3476,7 +3475,7 @@
 		rectAttributeName = kAttrWindowFrame;
 		workspaceAttributeName = kAttrWindowWorkspace;
 	}
-	
+
 	BRect frame(Frame());
 	if (node-&gt;Read(rectAttributeName, 0, B_RECT_TYPE, sizeof(BRect), &amp;frame) == sizeof(BRect)) {
 		MoveTo(frame.LeftTop());
@@ -3510,13 +3509,13 @@
 }
 
 
-void 
+void
 BContainerWindow::RestoreWindowState(const BMessage &amp;message)
 {
 	if (dynamic_cast&lt;BDeskWindow *&gt;(this))
 		// don't restore any window state if we are a desktop window
 		return;
-		
+
 	const char *rectAttributeName;
 	const char *workspaceAttributeName;
 	if (TargetModel()-&gt;IsRoot()) {
@@ -3528,7 +3527,7 @@
 	}
 
 	BRect frame(Frame());
-	if (message.FindRect(rectAttributeName, &amp;frame) == B_OK) {	
+	if (message.FindRect(rectAttributeName, &amp;frame) == B_OK) {
 		MoveTo(frame.LeftTop());
 		ResizeTo(frame.Width(), frame.Height());
 	} else
@@ -3536,7 +3535,7 @@
 
 	uint32 workspace;
 	if ((fContainerWindowFlags &amp; kRestoreWorkspace)
-		&amp;&amp; message.FindInt32(workspaceAttributeName, (int32 *)&amp;workspace) == B_OK) 
+		&amp;&amp; message.FindInt32(workspaceAttributeName, (int32 *)&amp;workspace) == B_OK)
 		SetWorkspaces(workspace);
 
 	if (fContainerWindowFlags &amp; kIsHidden)
@@ -3553,7 +3552,7 @@
 }
 
 
-void 
+void
 BContainerWindow::SaveWindowState(AttributeStreamNode *node)
 {
 	ASSERT(node);
@@ -3566,7 +3565,7 @@
 		rectAttributeName = kAttrWindowFrame;
 		workspaceAttributeName = kAttrWindowWorkspace;
 	}
-	
+
 	// node is null if it already got deleted
 	BRect frame(Frame());
 	node-&gt;Write(rectAttributeName, 0, B_RECT_TYPE, sizeof(BRect), &amp;frame);
@@ -3588,7 +3587,7 @@
 }
 
 
-void 
+void
 BContainerWindow::SaveWindowState(BMessage &amp;message) const
 {
 	const char *rectAttributeName;
@@ -3601,7 +3600,7 @@
 		rectAttributeName = kAttrWindowFrame;
 		workspaceAttributeName = kAttrWindowWorkspace;
 	}
-	
+
 	// node is null if it already got deleted
 	BRect frame(Frame());
 	message.AddRect(rectAttributeName, frame);
@@ -3620,7 +3619,7 @@
 BContainerWindow::DragStart(const BMessage *incoming)
 {
 	if (!incoming)
-		return B_ERROR;	
+		return B_ERROR;
 
 	//	if already dragging, or
 	//	if all the refs match
@@ -3630,9 +3629,9 @@
 	//	cache the current drag message
 	//	build a list of the mimetypes in the message
 	SpringLoadedFolderCacheDragData(incoming, &amp;fDragMessage, &amp;fCachedTypesList);
-	
+
 	fWaitingForRefs = true;
-	
+
 	return B_OK;
 }
 
@@ -3645,7 +3644,7 @@
 
 	delete fCachedTypesList;
 	fCachedTypesList = NULL;
-	
+
 	fWaitingForRefs = false;
 }
 
@@ -3654,7 +3653,7 @@
 BContainerWindow::ShowSelectionWindow()
 {
 	if (fSelectionWindow == NULL) {
-		fSelectionWindow = new SelectionWindow(this);	
+		fSelectionWindow = new SelectionWindow(this);
 		fSelectionWindow-&gt;Show();
 	} else if (fSelectionWindow-&gt;Lock()) {
 		if (fSelectionWindow-&gt;IsHidden()) {
@@ -3671,7 +3670,7 @@
 {
 	if (PoseView()-&gt;IsDesktopWindow())
 		return;
-	
+
 	if (show) {
 		if (Navigator() &amp;&amp; !Navigator()-&gt;IsHidden())
 			return;
@@ -3683,30 +3682,30 @@
 			fNavigator = new BNavigator(TargetModel(), rect);
 			AddChild(fNavigator);
 		}
-		
+
 		if (Navigator()-&gt;IsHidden()) {
 			if (Navigator()-&gt;Bounds().top == 0)
 				Navigator()-&gt;MoveTo(0, KeyMenuBar()-&gt;Bounds().Height() + 1);
 				// This is if the navigator was created with a .top = 0.
 			Navigator()-&gt;Show();
 		}
-		
+
 		float displacement = Navigator()-&gt;Frame().Height() + 1;
-	
+
 		PoseView()-&gt;MoveBy(0, displacement);
 		PoseView()-&gt;ResizeBy(0, -displacement);
-		
+
 		if (PoseView()-&gt;VScrollBar()) {
 			PoseView()-&gt;VScrollBar()-&gt;MoveBy(0, displacement);
 			PoseView()-&gt;VScrollBar()-&gt;ResizeBy(0, -displacement);
 			PoseView()-&gt;UpdateScrollRange();
-		}		
-	} else {		
+		}
+	} else {
 		if (!Navigator() || Navigator()-&gt;IsHidden())
 			return;
 
 		float displacement = Navigator()-&gt;Frame().Height() + 1;
-	
+
 		PoseView()-&gt;ResizeBy(0, displacement);
 		PoseView()-&gt;MoveBy(0, -displacement);
 
@@ -3726,14 +3725,14 @@
 {
 	if (PoseView()-&gt;IsDesktopWindow())
 		return;
-	
+
 	if (enabled) {
 		if (!Navigator())
 			return;
 
 		RemoveShortcut(B_DOWN_ARROW, B_OPTION_KEY | B_COMMAND_KEY);
 		RemoveShortcut(B_UP_ARROW, B_COMMAND_KEY | B_OPTION_KEY);
-		RemoveShortcut(B_UP_ARROW, B_COMMAND_KEY | B_OPTION_KEY | B_CONTROL_KEY);	
+		RemoveShortcut(B_UP_ARROW, B_COMMAND_KEY | B_OPTION_KEY | B_CONTROL_KEY);
 		RemoveShortcut(B_UP_ARROW, B_COMMAND_KEY | B_CONTROL_KEY);
 
 		AddShortcut(B_LEFT_ARROW, B_COMMAND_KEY,

[... truncated: 239 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011215.html">[Haiku-commits] r27140 - haiku/trunk/src/system/kernel
</A></li>
	<LI>Next message: <A HREF="011219.html">[Haiku-commits] r27142 - haiku/trunk/src/kits/tracker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11218">[ date ]</a>
              <a href="thread.html#11218">[ thread ]</a>
              <a href="subject.html#11218">[ subject ]</a>
              <a href="author.html#11218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
