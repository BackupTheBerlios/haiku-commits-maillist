<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r24969 - in haiku/trunk: build/jam	src/tests/system/benchmarks src/tests/system/benchmarks/libMicro
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r24969%20-%20in%20haiku/trunk%3A%20build/jam%0A%09src/tests/system/benchmarks%20src/tests/system/benchmarks/libMicro&In-Reply-To=%3C200804151627.m3FGR4OP021467%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007793.html">
   <LINK REL="Next"  HREF="007795.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r24969 - in haiku/trunk: build/jam	src/tests/system/benchmarks src/tests/system/benchmarks/libMicro</H1>
    <B>bonefish at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r24969%20-%20in%20haiku/trunk%3A%20build/jam%0A%09src/tests/system/benchmarks%20src/tests/system/benchmarks/libMicro&In-Reply-To=%3C200804151627.m3FGR4OP021467%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r24969 - in haiku/trunk: build/jam	src/tests/system/benchmarks src/tests/system/benchmarks/libMicro">bonefish at mail.berlios.de
       </A><BR>
    <I>Tue Apr 15 18:27:04 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="007793.html">[Haiku-commits] r24968 - haiku/trunk/build/scripts
</A></li>
        <LI>Next message: <A HREF="007795.html">[Haiku-commits] r24970 - haiku/trunk/build/jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7794">[ date ]</a>
              <a href="thread.html#7794">[ thread ]</a>
              <a href="subject.html#7794">[ subject ]</a>
              <a href="author.html#7794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: bonefish
Date: 2008-04-15 18:27:00 +0200 (Tue, 15 Apr 2008)
New Revision: 24969
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=24969&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=24969&amp;view=rev</A>

Added:
   haiku/trunk/src/tests/system/benchmarks/libMicro/
   haiku/trunk/src/tests/system/benchmarks/libMicro/Jamfile
   haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile
   haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.Aix
   haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.Linux
   haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.SunOS
   haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.benchmarks
   haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.com
   haiku/trunk/src/tests/system/benchmarks/libMicro/OPENSOLARIS.LICENSE
   haiku/trunk/src/tests/system/benchmarks/libMicro/README
   haiku/trunk/src/tests/system/benchmarks/libMicro/atomic.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/bench
   haiku/trunk/src/tests/system/benchmarks/libMicro/benchmark_fini.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/benchmark_finibatch.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/benchmark_finirun.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/benchmark_finiworker.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/benchmark_init.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/benchmark_initbatch.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/benchmark_initrun.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/benchmark_initworker.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/benchmark_optswitch.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/benchmark_result.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/bind.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/cachetocache.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/cascade_cond.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/cascade_fcntl.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/cascade_flock.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/cascade_lockf.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/cascade_mutex.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/chdir.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/close.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/close_tcp.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/config_libmicro.h
   haiku/trunk/src/tests/system/benchmarks/libMicro/connection.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/dup.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/elided.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/exec.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/exec_bin.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/exit.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/exp.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/fcntl.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/fcntl_ndelay.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/file_lock.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/fork.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/getcontext.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/getenv.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/getpeername.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/getpid.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/getrusage.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/getsockname.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/gettimeofday.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/isatty.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/libmicro.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/libmicro.h
   haiku/trunk/src/tests/system/benchmarks/libMicro/libmicro_main.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/listen.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/localtime_r.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/log.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/longjmp.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/lrand48.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/lseek.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/malloc.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/memcpy.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/memmove.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/memrand.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/memset.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/mk_tarball
   haiku/trunk/src/tests/system/benchmarks/libMicro/mktime.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/mmap.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/mprotect.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/msync.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/multiview
   haiku/trunk/src/tests/system/benchmarks/libMicro/multiview.sh
   haiku/trunk/src/tests/system/benchmarks/libMicro/munmap.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/mutex.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/nop.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/open.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/pipe.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/poll.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/pread.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/pthread_create.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/pwrite.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/read.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/realpath.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/recurse.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/recurse2.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/select.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/semop.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/setcontext.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/setsockopt.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/sigaction.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/siglongjmp.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/signal.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/sigprocmask.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/socket.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/socketpair.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/stat.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/strcasecmp.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/strchr.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/strcmp.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/strcpy.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/strftime.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/strlen.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/strtol.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/system.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/tattle.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/tattle.h
   haiku/trunk/src/tests/system/benchmarks/libMicro/time.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/times.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/wrapper
   haiku/trunk/src/tests/system/benchmarks/libMicro/write.c
   haiku/trunk/src/tests/system/benchmarks/libMicro/writev.c
Modified:
   haiku/trunk/build/jam/HaikuImage
   haiku/trunk/src/tests/system/benchmarks/Jamfile
Log:
Added libMicro benchmark. Ported by Vasilis Kaoutsis.


Modified: haiku/trunk/build/jam/HaikuImage
===================================================================
--- haiku/trunk/build/jam/HaikuImage	2008-04-15 15:46:00 UTC (rev 24968)
+++ haiku/trunk/build/jam/HaikuImage	2008-04-15 16:27:00 UTC (rev 24969)
@@ -477,6 +477,39 @@
 }
 
 
+#pragma mark - Benchmarks
+
+
+# libMicro
+if $(HAIKU_ADD_LIBMICRO_BENCHMARKS_TO_IMAGE) {
+	# add scripts, tattle executable and README
+	SEARCH on bench = [ FDirName $(HAIKU_TOP) src tests system benchmarks libMicro ] ;
+	AddFilesToHaikuImage home benchmarks libmicro : bench ;
+	SEARCH on multiview = [ FDirName $(HAIKU_TOP) src tests system benchmarks libMicro ] ;
+	AddFilesToHaikuImage home benchmarks libmicro : multiview ;
+	AddFilesToHaikuImage home benchmarks libmicro bin-BePC : tattle ;
+	SEARCH on README = [ FDirName $(HAIKU_TOP) src tests system benchmarks libMicro ] ;
+	AddFilesToHaikuImage home benchmarks libmicro : README ;
+
+
+	# add libmicro benchmarks
+	AddFilesToHaikuImage home benchmarks libmicro bin-BePC
+		: atomic &lt;libmicro&gt;bind cachetocache cascade_cond cascade_fcntl cascade_flock
+		  cascade_lockf cascade_mutex chdir close close_tcp connection dup exec exec_bin
+		  exit exp fcntl fcntl_ndelay file_lock fork getcontext getenv &lt;libmicro&gt;getpeername
+		  getpid getrusage getsockname gettimeofday isatty listen localtime_r &lt;libmicro&gt;log
+		  longjmp lrand48 lseek malloc memcpy memmove memrand memset mktime mmap mprotect
+		  msync munmap mutex nop &lt;libmicro&gt;open pipe poll pread pthread_create pwrite read
+		  realpath recurse select semop setcontext setsockopt sigaction siglongjmp signal
+		  sigprocmask &lt;libmicro&gt;socket socketpair &lt;libmicro&gt;stat strcasecmp strchr strcmp
+		  strcpy strftime strlen strtol system time times write writev ;
+
+	AddSymlinkToHaikuImage home benchmarks libmicro : bin-BePC : bin ;
+
+}
+
+
+
 #pragma mark - Optional Packages
 
 

Modified: haiku/trunk/src/tests/system/benchmarks/Jamfile
===================================================================
--- haiku/trunk/src/tests/system/benchmarks/Jamfile	2008-04-15 15:46:00 UTC (rev 24968)
+++ haiku/trunk/src/tests/system/benchmarks/Jamfile	2008-04-15 16:27:00 UTC (rev 24969)
@@ -20,3 +20,4 @@
 	forkbench.c
 ;
 
+SubInclude HAIKU_TOP src tests system benchmarks libMicro ;
\ No newline at end of file

Added: haiku/trunk/src/tests/system/benchmarks/libMicro/Jamfile
===================================================================
--- haiku/trunk/src/tests/system/benchmarks/libMicro/Jamfile	2008-04-15 15:46:00 UTC (rev 24968)
+++ haiku/trunk/src/tests/system/benchmarks/libMicro/Jamfile	2008-04-15 16:27:00 UTC (rev 24969)
@@ -0,0 +1,358 @@
+SubDir HAIKU_TOP src tests system benchmarks libMicro ;
+
+SEARCH_SOURCE = [ FDirName $(SUBDIR) ] ;
+
+# filter warnings we don't want here
+TARGET_WARNING_CCFLAGS = [ FFilter $(TARGET_WARNING_CCFLAGS)
+	: -Wall -Wmissing-prototypes -Wsign-compare ] ;
+
+UseHeaders [ FDirName $(SUBDIR) $(SUBDIR) $(SUBDIR) $(SUBDIR) $(SUBDIR) headers posix ] : true ;
+UseHeaders [ FDirName $(SUBDIR) ] : true ;
+
+SubDirHdrs $(HAIKU_TOP) src tests system benchmarks libMicro ;
+SubDirCcFlags -nostdinc ;
+SubDirCcFlags -D_REENTRANT ;
+
+SubDirCcFlags -include $(SUBDIR)/config_libmicro.h ;
+
+StaticLibrary libmicro.a :
+	libmicro.c
+	libmicro_main.c
+	benchmark_init.c
+	benchmark_fini.c
+	benchmark_initrun.c
+	benchmark_finirun.c
+	benchmark_initbatch.c
+	benchmark_finibatch.c
+	benchmark_initworker.c
+	benchmark_finiworker.c
+	benchmark_optswitch.c
+	benchmark_result.c
+;
+
+StaticLibrary libelided.a :
+	elided.c ;
+
+BinCommand &lt;libmicro&gt;bind : 
+	bind.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+BinCommand atomic : 
+	: libelided.a libroot.so ;
+
+BinCommand cachetocache : 
+	: libelided.a libroot.so ;
+
+BinCommand cascade_mutex : 
+	cascade_mutex.c
+	: libmicro.a libroot.so ;
+
+BinCommand cascade_cond : 
+	cascade_cond.c
+	: libmicro.a libroot.so ;
+
+BinCommand cascade_lockf : 
+	cascade_lockf.c
+	: libmicro.a libroot.so ;
+
+BinCommand cascade_fcntl : 
+	cascade_fcntl.c
+	: libmicro.a libroot.so ;
+
+BinCommand cascade_flock : 
+	cascade_flock.c
+	: libmicro.a libroot.so ;
+
+BinCommand chdir : 
+	chdir.c
+	: libmicro.a ;
+
+BinCommand close : 
+	close.c
+	: libmicro.a libroot.so ;
+
+BinCommand close_tcp : 
+	close_tcp.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+BinCommand connection : 
+	connection.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+BinCommand dup : 
+	dup.c
+	: libmicro.a libroot.so ;
+
+BinCommand exec_bin : 
+	exec_bin.c
+	: libmicro.a libroot.so ;
+
+BinCommand exec : 
+	exec.c
+	: libmicro.a libroot.so ;
+
+BinCommand exit : 
+	exit.c
+	: libmicro.a libroot.so ;
+
+BinCommand exp : 
+	exp.c
+	: libmicro.a libroot.so ;
+
+BinCommand fcntl : 
+	fcntl.c
+	: libmicro.a libroot.so ;
+
+BinCommand fcntl_ndelay : 
+	fcntl_ndelay.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+BinCommand file_lock : 
+	file_lock.c
+	: libmicro.a libroot.so ;
+
+BinCommand fork : 
+	fork.c
+	: libmicro.a libroot.so ;
+
+# atm unsupported
+BinCommand getcontext : 
+	: libelided.a libroot.so ;
+
+BinCommand getenv : 
+	getenv.c
+	: libmicro.a libroot.so ;
+
+BinCommand gettimeofday : 
+	gettimeofday.c
+	: libmicro.a libroot.so ;
+
+BinCommand &lt;libmicro&gt;getpeername : 
+	getpeername.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+BinCommand getpid : 
+	getpid.c
+	: libmicro.a libroot.so ;
+
+BinCommand getrusage : 
+	getrusage.c
+	: libmicro.a libroot.so ;
+
+BinCommand getsockname : 
+	getsockname.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+BinCommand isatty : 
+	isatty.c
+	: libmicro.a libroot.so ;
+
+BinCommand listen : 
+	listen.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+BinCommand localtime_r : 
+	localtime_r.c
+	: libmicro.a libroot.so ;
+
+BinCommand &lt;libmicro&gt;log : 
+	log.c
+	: libmicro.a libroot.so ;
+
+BinCommand longjmp : 
+	longjmp.c
+	: libmicro.a libroot.so ;
+
+BinCommand lrand48 : 
+	lrand48.c
+	: libmicro.a libroot.so ;
+
+BinCommand lseek : 
+	lseek.c
+	: libmicro.a libroot.so ;
+
+BinCommand malloc : 
+	malloc.c
+	: libmicro.a libroot.so ;
+
+BinCommand memcpy : 
+	memcpy.c
+	: libmicro.a libroot.so ;
+
+BinCommand memmove : 
+	memmove.c
+	: libmicro.a libroot.so ;
+
+BinCommand memrand : 
+	memrand.c
+	: libmicro.a libroot.so ;
+
+BinCommand memset : 
+	memset.c
+	: libmicro.a libroot.so ;
+
+BinCommand mktime : 
+	mktime.c
+	: libmicro.a libroot.so ;
+
+# atm unsupported
+BinCommand mprotect : 
+	: libelided.a libroot.so ;
+
+# atm unsupported
+BinCommand mmap : 
+	: libelided.a libroot.so ;
+
+# atm unsupported
+BinCommand msync : 
+	: libelided.a libroot.so ;
+
+# atm unsupported
+BinCommand munmap : 
+	: libelided.a libroot.so ;
+
+# atm unsupported
+BinCommand mutex : 
+	: libelided.a libroot.so ;
+
+BinCommand nop : 
+	nop.c
+	: libmicro.a libroot.so ;
+
+BinCommand &lt;libmicro&gt;open : 
+	open.c
+	: libmicro.a libroot.so ;
+
+BinCommand pipe : 
+	pipe.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+BinCommand poll : 
+	poll.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+BinCommand pread : 
+	pread.c
+	: libmicro.a libroot.so ;
+
+# atm unsupported
+# needs pthread_attr_setstacksize
+BinCommand pthread_create : 
+	: libelided.a libroot.so ;
+
+BinCommand pwrite : 
+	pwrite.c
+	: libmicro.a libroot.so ;
+
+BinCommand read : 
+	read.c
+	: libmicro.a libroot.so ;
+
+BinCommand realpath : 
+	realpath.c
+	: libmicro.a libroot.so ;
+
+BinCommand recurse : 
+	recurse.c
+	recurse2.c
+	: libmicro.a libroot.so ;
+
+BinCommand select : 
+	select.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+# atm unsupported
+BinCommand semop : 
+	: libelided.a libroot.so ;
+
+# atm unsupported
+BinCommand setcontext : 
+	: libelided.a libroot.so ;
+
+BinCommand setsockopt : 
+	setsockopt.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+BinCommand sigaction : 
+	sigaction.c
+	: libmicro.a libroot.so ;
+
+BinCommand siglongjmp : 
+	siglongjmp.c
+	: libmicro.a libroot.so ;
+
+BinCommand signal : 
+	signal.c
+	: libmicro.a libroot.so ;
+
+BinCommand sigprocmask : 
+	sigprocmask.c
+	: libmicro.a libroot.so ;
+
+
+BinCommand &lt;libmicro&gt;socket :  
+	socket.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+search on socket.c = [ FDirName $(SUBDIR) ] ;
+
+
+BinCommand socketpair : 
+	socketpair.c
+	: libmicro.a $(TARGET_NETWORK_LIBS) ;
+
+BinCommand &lt;libmicro&gt;stat : 
+	stat.c
+	: libmicro.a libroot.so ;
+
+BinCommand strcasecmp : 
+	strcasecmp.c
+	: libmicro.a libroot.so ;
+
+BinCommand strchr : 
+	strchr.c
+	: libmicro.a libroot.so ;
+
+BinCommand strcmp : 
+	strcmp.c
+	: libmicro.a libroot.so ;
+
+BinCommand strcpy : 
+	strcpy.c
+	: libmicro.a libroot.so ;
+
+BinCommand strftime : 
+	strftime.c
+	: libmicro.a libroot.so ;
+
+BinCommand strlen : 
+	strlen.c
+	: libmicro.a libroot.so ;
+
+BinCommand strtol : 
+	strtol.c
+	: libmicro.a libroot.so ;
+
+BinCommand system : 
+	system.c
+	: libmicro.a libroot.so ;
+
+BinCommand time : 
+	time.c
+	: libmicro.a libroot.so ;
+
+BinCommand times : 
+	times.c
+	: libmicro.a libroot.so ;
+
+BinCommand write : 
+	write.c
+	: libmicro.a libroot.so ;
+
+BinCommand writev : 
+	writev.c
+	: libmicro.a libroot.so ;
+
+BinCommand tattle : 
+	tattle.c
+	: libmicro.a libroot.so ;

Added: haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile
===================================================================
--- haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile	2008-04-15 15:46:00 UTC (rev 24968)
+++ haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile	2008-04-15 16:27:00 UTC (rev 24969)
@@ -0,0 +1,95 @@
+#
+# CDDL HEADER START
+#
+# The contents of this file are subject to the terms
+# of the Common Development and Distribution License
+# (the &quot;License&quot;).  You may not use this file except
+# in compliance with the License.
+#
+# You can obtain a copy of the license at
+# src/OPENSOLARIS.LICENSE
+# or <A HREF="http://www.opensolaris.org/os/licensing.">http://www.opensolaris.org/os/licensing.</A>
+# See the License for the specific language governing
+# permissions and limitations under the License.
+#
+# When distributing Covered Code, include this CDDL
+# HEADER in each file and include the License file at
+# usr/src/OPENSOLARIS.LICENSE.  If applicable,
+# add the following below this CDDL HEADER, with the
+# fields enclosed by brackets &quot;[]&quot; replaced with your
+# own identifying information: Portions Copyright [yyyy]
+# [name of copyright owner]
+#
+# CDDL HEADER END
+#
+
+#
+# Copyright 2005 Sun Microsystems, Inc.  All rights reserved.
+# Use is subject to license terms.
+#
+
+
+include Makefile.benchmarks
+
+BINS=		$(ALL:%=bin/%) bin/tattle
+
+TARBALL_CONTENTS = 	\
+	Makefile.benchmarks \
+	Makefile.SunOS 	\
+	Makefile.Linux 	\
+	Makefile.Aix 	\
+	Makefile.com 	\
+	Makefile	\
+	$(ALL:%=%.c)	\
+	elided.c	\
+	exec_bin.c	\
+	libmicro.c	\
+	libmicro_main.c	\
+	libmicro.h	\
+	recurse2.c	\
+	benchmark_finibatch.c 	\
+	benchmark_initbatch.c	\
+	benchmark_optswitch.c	\
+	benchmark_fini.c	\
+	benchmark_init.c	\
+	benchmark_result.c	\
+	benchmark_finirun.c	\
+	benchmark_initrun.c	\
+	benchmark_initworker.c	\
+	benchmark_finiworker.c	\
+	bench		\
+	bench.sh	\
+	mk_tarball	\
+	multiview	\
+	multiview.sh	\
+	OPENSOLARIS.LICENSE	\
+	tattle.c	\
+	wrapper		\
+	wrapper.sh	\
+	README
+
+default $(ALL) run cstyle lint tattle: $(BINS)
+	@cp bench.sh bench
+	@cp multiview.sh multiview
+	@cp wrapper.sh wrapper
+	@chmod +x bench multiview wrapper
+	@mkdir -p bin-`uname -m`; cd bin-`uname -m`; MACH=`uname -m` $(MAKE) -f ../Makefile.`uname -s` UNAME_RELEASE=`uname -r | sed 's/\./_/g'` $@
+
+clean:
+	rm -rf bin bin-* wrapper multiview bench
+
+bin:	
+	@mkdir -p bin
+
+$(BINS): bin
+	@cp wrapper.sh wrapper
+	@chmod +x wrapper
+	@ln -sf ../wrapper $@
+
+
+libMicro.tar:	FORCE
+	@chmod +x ./mk_tarball wrapper
+	@./mk_tarball $(TARBALL_CONTENTS) 
+ 
+FORCE:
+

Added: haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.Aix
===================================================================
--- haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.Aix	2008-04-15 15:46:00 UTC (rev 24968)
+++ haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.Aix	2008-04-15 16:27:00 UTC (rev 24969)
@@ -0,0 +1,41 @@
+#
+# CDDL HEADER START
+#
+# The contents of this file are subject to the terms
+# of the Common Development and Distribution License
+# (the &quot;License&quot;).  You may not use this file except
+# in compliance with the License.
+#
+# You can obtain a copy of the license at
+# src/OPENSOLARIS.LICENSE
+# or <A HREF="http://www.opensolaris.org/os/licensing.">http://www.opensolaris.org/os/licensing.</A>
+# See the License for the specific language governing
+# permissions and limitations under the License.
+#
+# When distributing Covered Code, include this CDDL
+# HEADER in each file and include the License file at
+# usr/src/OPENSOLARIS.LICENSE.  If applicable,
+# add the following below this CDDL HEADER, with the
+# fields enclosed by brackets &quot;[]&quot; replaced with your
+# own identifying information: Portions Copyright [yyyy]
+# [name of copyright owner]
+#
+# CDDL HEADER END
+#
+
+#
+# Copyright 2005 Sun Microsystems, Inc.  All rights reserved.
+# Use is subject to license terms.
+#
+
+
+CFLAGS=		-O3
+
+CPPFLAGS = -D_REENTRANT
+
+include ../Makefile.com
+
+NSLLIB=		-lnsl
+SOCKLIB=
+
+.KEEP_STATE:

Added: haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.Linux
===================================================================
--- haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.Linux	2008-04-15 15:46:00 UTC (rev 24968)
+++ haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.Linux	2008-04-15 16:27:00 UTC (rev 24969)
@@ -0,0 +1,43 @@
+#
+# CDDL HEADER START
+#
+# The contents of this file are subject to the terms
+# of the Common Development and Distribution License
+# (the &quot;License&quot;).  You may not use this file except
+# in compliance with the License.
+#
+# You can obtain a copy of the license at
+# src/OPENSOLARIS.LICENSE
+# or <A HREF="http://www.opensolaris.org/os/licensing.">http://www.opensolaris.org/os/licensing.</A>
+# See the License for the specific language governing
+# permissions and limitations under the License.
+#
+# When distributing Covered Code, include this CDDL
+# HEADER in each file and include the License file at
+# usr/src/OPENSOLARIS.LICENSE.  If applicable,
+# add the following below this CDDL HEADER, with the
+# fields enclosed by brackets &quot;[]&quot; replaced with your
+# own identifying information: Portions Copyright [yyyy]
+# [name of copyright owner]
+#
+# CDDL HEADER END
+#
+
+#
+# Copyright 2005 Sun Microsystems, Inc.  All rights reserved.
+# Use is subject to license terms.
+#
+
+
+CC=		gcc
+
+#CFLAGS=		-O -DUSE_SEMOP
+CPPFLAGS=		-DUSE_SEMOP -D_REENTRANT
+MATHLIB=	-lm
+
+ELIDED_BENCHMARKS=	\
+	cachetocache	\
+	atomic
+
+
+include ../Makefile.com

Added: haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.SunOS
===================================================================
--- haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.SunOS	2008-04-15 15:46:00 UTC (rev 24968)
+++ haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.SunOS	2008-04-15 16:27:00 UTC (rev 24969)
@@ -0,0 +1,61 @@
+#
+# CDDL HEADER START
+#
+# The contents of this file are subject to the terms
+# of the Common Development and Distribution License
+# (the &quot;License&quot;).  You may not use this file except
+# in compliance with the License.
+#
+# You can obtain a copy of the license at
+# src/OPENSOLARIS.LICENSE
+# or <A HREF="http://www.opensolaris.org/os/licensing.">http://www.opensolaris.org/os/licensing.</A>
+# See the License for the specific language governing
+# permissions and limitations under the License.
+#
+# When distributing Covered Code, include this CDDL
+# HEADER in each file and include the License file at
+# usr/src/OPENSOLARIS.LICENSE.  If applicable,
+# add the following below this CDDL HEADER, with the
+# fields enclosed by brackets &quot;[]&quot; replaced with your
+# own identifying information: Portions Copyright [yyyy]
+# [name of copyright owner]
+#
+# CDDL HEADER END
+#
+
+#
+# Copyright 2005 Sun Microsystems, Inc.  All rights reserved.
+# Use is subject to license terms.
+#
+
+
+CPPFLAGS=		-DUSE_GETHRTIME -D_REENTRANT
+
+CFLAGS = -O $(extra_CFLAGS)
+
+#
+# These defines allow libmicro to be compiled against older Solaris
+# releases by turning off the tests which don't work there.
+#
+# This is a little contorted-- UNAME_RELEASE is set as an environment
+# variable for us by the invoking make process (see Makefile)-- it is
+# the output of uname -r | sed 's/\./_/g'.
+#
+# We couldn't find any other gmake/unix make portable way to make this
+# work.
+#
+ELIDED_BENCHMARKS_5_8=atomic cachetocache
+ELIDED_BENCHMARKS_5_9=atomic
+
+ELIDED_BENCHMARKS_CMN=cascade_flock
+
+ELIDED_BENCHMARKS=$(ELIDED_BENCHMARKS_CMN) $(ELIDED_BENCHMARKS_$(UNAME_RELEASE))
+
+include ../Makefile.com
+
+NSLLIB=		-lnsl
+SOCKLIB=	-lsocket
+UCBLIB=		-lc -L/usr/ucblib -lucb -R/usr/ucblib
+MATHLIB=	-lm
+
+.KEEP_STATE:

Added: haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.benchmarks
===================================================================
--- haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.benchmarks	2008-04-15 15:46:00 UTC (rev 24968)
+++ haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.benchmarks	2008-04-15 16:27:00 UTC (rev 24969)
@@ -0,0 +1,112 @@
+#
+# CDDL HEADER START
+#
+# The contents of this file are subject to the terms
+# of the Common Development and Distribution License
+# (the &quot;License&quot;).  You may not use this file except
+# in compliance with the License.
+#
+# You can obtain a copy of the license at
+# src/OPENSOLARIS.LICENSE
+# or <A HREF="http://www.opensolaris.org/os/licensing.">http://www.opensolaris.org/os/licensing.</A>
+# See the License for the specific language governing
+# permissions and limitations under the License.
+#
+# When distributing Covered Code, include this CDDL
+# HEADER in each file and include the License file at
+# usr/src/OPENSOLARIS.LICENSE.  If applicable,
+# add the following below this CDDL HEADER, with the
+# fields enclosed by brackets &quot;[]&quot; replaced with your
+# own identifying information: Portions Copyright [yyyy]
+# [name of copyright owner]
+#
+# CDDL HEADER END
+#
+
+#
+# Copyright 2005 Sun Microsystems, Inc.  All rights reserved.
+# Use is subject to license terms.
+#
+
+
+ALL=				\
+		atomic		\
+		bind		\
+		cachetocache	\
+		cascade_mutex	\
+		cascade_cond	\
+		cascade_lockf	\
+		cascade_fcntl	\
+		cascade_flock	\
+		chdir		\
+		close		\
+		close_tcp	\
+		connection	\
+		dup		\
+		exec		\
+		exit		\
+		exp		\
+		fcntl		\
+		fcntl_ndelay	\
+		file_lock	\
+		fork		\
+		getcontext	\
+		getenv		\
+		gettimeofday	\
+		getpeername	\
+		getpid		\
+		getrusage	\
+		getsockname	\
+		isatty		\
+		listen		\
+		localtime_r	\
+		log		\
+		longjmp		\
+		lrand48		\
+		lseek		\
+		malloc		\
+		memcpy		\
+		memmove		\
+		memrand		\
+		memset		\
+		mktime		\
+		mprotect	\
+		mmap		\
+		msync		\
+		munmap		\
+		mutex		\
+		nop		\
+		open		\
+		pipe		\
+		poll		\
+		pread		\
+		pthread_create	\
+		pwrite		\
+		read		\
+		realpath	\
+		recurse		\
+		select		\
+		semop		\
+		setcontext	\
+		setsockopt	\
+		sigaction	\
+		siglongjmp	\
+		signal		\
+		sigprocmask	\
+		socket		\
+		socketpair	\
+		stat		\
+		strcasecmp	\
+		strchr		\
+		strcmp		\
+		strcpy		\
+		strftime	\
+		strlen		\
+		strtol		\
+		system		\
+		time		\
+		times		\
+		write		\
+		writev
+
+

Added: haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.com
===================================================================
--- haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.com	2008-04-15 15:46:00 UTC (rev 24968)
+++ haiku/trunk/src/tests/system/benchmarks/libMicro/Makefile.com	2008-04-15 16:27:00 UTC (rev 24969)
@@ -0,0 +1,127 @@
+#
+# CDDL HEADER START
+#
+# The contents of this file are subject to the terms
+# of the Common Development and Distribution License
+# (the &quot;License&quot;).  You may not use this file except
+# in compliance with the License.
+#
+# You can obtain a copy of the license at
+# src/OPENSOLARIS.LICENSE
+# or <A HREF="http://www.opensolaris.org/os/licensing.">http://www.opensolaris.org/os/licensing.</A>
+# See the License for the specific language governing
+# permissions and limitations under the License.
+#
+# When distributing Covered Code, include this CDDL
+# HEADER in each file and include the License file at
+# usr/src/OPENSOLARIS.LICENSE.  If applicable,
+# add the following below this CDDL HEADER, with the
+# fields enclosed by brackets &quot;[]&quot; replaced with your
+# own identifying information: Portions Copyright [yyyy]
+# [name of copyright owner]
+#
+# CDDL HEADER END
+#
+
+#
+# Copyright 2005 Sun Microsystems, Inc.  All rights reserved.
+# Use is subject to license terms.
+#
+
+include ../Makefile.benchmarks
+
+EXTRA_CFILES= \
+		exec_bin.c 	\
+		elided.c	\
+		tattle.c
+
+#
+# some definitions to make getting compiler versions possible - avoid quotes
+#
+COMPILER_VERSION_CMD_cc=cc -V 2&gt;&amp;1 | egrep Sun
+COMPILER_VERSION_CMD_gcc=gcc -dumpversion
+COMPILER_VERSION_CMD=$(COMPILER_VERSION_CMD_$(CC))
+
+default: $(ALL) tattle
+
+cstyle:	
+	for file in $(ALL:%=../%.c) $(EXTRA_CFILES:%=../%) ; \
+	do cstyle -p $$file ;\
+	done
+
+
+lint:	libmicro.ln $(ALL:%=%.lint) $(EXTRA_CFILES:%.c=%.lint)
+
+
+$(EXTRA_CFILES:%.c=%.lint):
+	$(LINT) ../$(@:%.lint=%.c) -I. -mu -lc libmicro.ln -lm
+
+%.lint:	../%.c libmicro.ln
+	$(LINT) -mu $(CPPFLAGS) $&lt; libmicro.ln -lpthread -lsocket -lnsl -lm
+
+%.o:	../%.c
+	$(CC) -c $(CFLAGS) $(CPPFLAGS) $&lt; -o $@
+
+libmicro.ln: ../libmicro.c ../libmicro_main.c ../libmicro.h ../benchmark_*.c
+	$(LINT) -muc $(CPPFLAGS) ../libmicro.c ../libmicro_main.c ../benchmark_*.c
+
+CPPFLAGS+= -D_REENTRANT
+
+bind_EXTRA_LIBS=$(NSLLIB) $(SOCKLIB)
+cascade_flock_EXTRA_LIBS=$(UCBLIB)
+close_tcp_EXTRA_LIBS=$(NSLLIB) $(SOCKLIB)
+connection_EXTRA_LIBS=$(NSLLIB) $(SOCKLIB)
+fcntl_ndelay_EXTRA_LIBS=$(SOCKLIB)
+getpeername_EXTRA_LIBS=$(NSLLIB) $(SOCKLIB)
+getsockname_EXTRA_LIBS=$(NSLLIB) $(SOCKLIB)
+listen_EXTRA_LIBS=$(NSLLIB) $(SOCKLIB)
+log_EXTRA_LIBS=$(MATHLIB)
+pipe_EXTRA_LIBS=$(NSLLIB) $(SOCKLIB)
+poll_EXTRA_LIBS=$(SOCKLIB)
+select_EXTRA_LIBS=$(SOCKLIB)
+setsockopt_EXTRA_LIBS=$(NSLLIB) $(SOCKLIB)
+socket_EXTRA_LIBS=$(SOCKLIB)
+socketpair_EXTRA_LIBS=$(SOCKLIB)
+
+BENCHMARK_FUNCS=		\
+	benchmark_init.o	\
+	benchmark_fini.o	\
+	benchmark_initrun.o	\
+	benchmark_finirun.o	\
+	benchmark_initbatch.o	\
+	benchmark_finibatch.o	\
+	benchmark_initworker.o	\
+	benchmark_finiworker.o	\
+	benchmark_optswitch.o	\
+	benchmark_result.o
+
+recurse_EXTRA_DEPS=recurse2.o
+
+
+recurse:	$(recurse_EXTRA_DEPS)
+
+libmicro.a:	libmicro.o libmicro_main.o $(BENCHMARK_FUNCS)
+		$(AR) -cr libmicro.a libmicro.o libmicro_main.o $(BENCHMARK_FUNCS)
+
+tattle:		../tattle.c	libmicro.a
+	echo &quot;char * compiler_version = \&quot;&quot;`$(COMPILER_VERSION_CMD)`&quot;\&quot;;&quot; &gt; tattle.h
+	echo &quot;char * CC = \&quot;&quot;$(CC)&quot;\&quot;;&quot; &gt;&gt; tattle.h
+	echo &quot;char * extra_compiler_flags = \&quot;&quot;$(extra_CFLAGS)&quot;\&quot;;&quot; &gt;&gt; tattle.h
+	$(CC) -o tattle $(CFLAGS) -I. ../tattle.c libmicro.a -lrt -lm
+
+$(ELIDED_BENCHMARKS):	../elided.c
+	$(CC) -o $(@) ../elided.c
+
+%: libmicro.a %.o 
+	$(CC) -o $(@) $(@).o $($(@)_EXTRA_DEPS) $(CFLAGS) libmicro.a $($(@)_EXTRA_LIBS) $(EXTRA_LIBS) -lpthread -lm
+
+exec:	exec_bin
+
+exec_bin:	exec_bin.o
+	$(CC) -o exec_bin $(CFLAGS) exec_bin.o
+
+FORCE:
+
+
+._KEEP_STATE:
+

Added: haiku/trunk/src/tests/system/benchmarks/libMicro/OPENSOLARIS.LICENSE
===================================================================
--- haiku/trunk/src/tests/system/benchmarks/libMicro/OPENSOLARIS.LICENSE	2008-04-15 15:46:00 UTC (rev 24968)
+++ haiku/trunk/src/tests/system/benchmarks/libMicro/OPENSOLARIS.LICENSE	2008-04-15 16:27:00 UTC (rev 24969)
@@ -0,0 +1,385 @@
+Unless otherwise noted, all files in this distribution are released
+under the Common Development and Distribution License (CDDL),
+Version 1.0 only.  Exceptions are noted within the associated
+source files.
+
+--------------------------------------------------------------------
+
+
+COMMON DEVELOPMENT AND DISTRIBUTION LICENSE Version 1.0
+
+1. Definitions.
+
+    1.1. &quot;Contributor&quot; means each individual or entity that creates
+         or contributes to the creation of Modifications.
+
+    1.2. &quot;Contributor Version&quot; means the combination of the Original
+         Software, prior Modifications used by a Contributor (if any),
+         and the Modifications made by that particular Contributor.
+
+    1.3. &quot;Covered Software&quot; means (a) the Original Software, or (b)
+         Modifications, or (c) the combination of files containing
+         Original Software with files containing Modifications, in
+         each case including portions thereof.
+
+    1.4. &quot;Executable&quot; means the Covered Software in any form other
+         than Source Code.
+
+    1.5. &quot;Initial Developer&quot; means the individual or entity that first
+         makes Original Software available under this License.
+
+    1.6. &quot;Larger Work&quot; means a work which combines Covered Software or
+         portions thereof with code not governed by the terms of this
+         License.
+
+    1.7. &quot;License&quot; means this document.
+
+    1.8. &quot;Licensable&quot; means having the right to grant, to the maximum
+         extent possible, whether at the time of the initial grant or
+         subsequently acquired, any and all of the rights conveyed
+         herein.
+
+    1.9. &quot;Modifications&quot; means the Source Code and Executable form of
+         any of the following:
+
+        A. Any file that results from an addition to, deletion from or
+           modification of the contents of a file containing Original
+           Software or previous Modifications;
+
+        B. Any new file that contains any part of the Original
+           Software or previous Modifications; or
+
+        C. Any new file that is contributed or otherwise made
+           available under the terms of this License.
+
+    1.10. &quot;Original Software&quot; means the Source Code and Executable
+          form of computer software code that is originally released
+          under this License.
+
+    1.11. &quot;Patent Claims&quot; means any patent claim(s), now owned or
+          hereafter acquired, including without limitation, method,

[... truncated: 15578 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007793.html">[Haiku-commits] r24968 - haiku/trunk/build/scripts
</A></li>
	<LI>Next message: <A HREF="007795.html">[Haiku-commits] r24970 - haiku/trunk/build/jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7794">[ date ]</a>
              <a href="thread.html#7794">[ thread ]</a>
              <a href="subject.html#7794">[ subject ]</a>
              <a href="author.html#7794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
