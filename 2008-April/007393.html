<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r24754 - in haiku/vendor/acpica/current: common	compiler debugger disassembler events hardware include	include/platform interpreter/dispatcher interpreter/executer	interpreter/parser namespace resources tables utilities
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r24754%20-%20in%20haiku/vendor/acpica/current%3A%20common%0A%09compiler%20debugger%20disassembler%20events%20hardware%20include%0A%09include/platform%20interpreter/dispatcher%20interpreter/executer%0A%09interpreter/parser%20namespace%20resources%20tables%20utilities&In-Reply-To=%3C200804021833.m32IX30O023429%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007390.html">
   <LINK REL="Next"  HREF="007394.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r24754 - in haiku/vendor/acpica/current: common	compiler debugger disassembler events hardware include	include/platform interpreter/dispatcher interpreter/executer	interpreter/parser namespace resources tables utilities</H1>
    <B>korli at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r24754%20-%20in%20haiku/vendor/acpica/current%3A%20common%0A%09compiler%20debugger%20disassembler%20events%20hardware%20include%0A%09include/platform%20interpreter/dispatcher%20interpreter/executer%0A%09interpreter/parser%20namespace%20resources%20tables%20utilities&In-Reply-To=%3C200804021833.m32IX30O023429%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r24754 - in haiku/vendor/acpica/current: common	compiler debugger disassembler events hardware include	include/platform interpreter/dispatcher interpreter/executer	interpreter/parser namespace resources tables utilities">korli at mail.berlios.de
       </A><BR>
    <I>Wed Apr  2 20:33:03 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="007390.html">[Haiku-commits] r24753 - haiku/trunk/src/data/beos_mime/application
</A></li>
        <LI>Next message: <A HREF="007394.html">[Haiku-commits] r24755 - haiku/vendor/acpica
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7393">[ date ]</a>
              <a href="thread.html#7393">[ thread ]</a>
              <a href="subject.html#7393">[ subject ]</a>
              <a href="author.html#7393">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: korli
Date: 2008-04-02 20:32:56 +0200 (Wed, 02 Apr 2008)
New Revision: 24754
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=24754&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=24754&amp;view=rev</A>

Added:
   haiku/vendor/acpica/current/compiler/aslstartup.c
Modified:
   haiku/vendor/acpica/current/common/16bit.h
   haiku/vendor/acpica/current/common/a16find.c
   haiku/vendor/acpica/current/common/a16utils.obj
   haiku/vendor/acpica/current/common/adfile.c
   haiku/vendor/acpica/current/common/adisasm.c
   haiku/vendor/acpica/current/common/adwalk.c
   haiku/vendor/acpica/current/common/dmrestag.c
   haiku/vendor/acpica/current/common/dmtable.c
   haiku/vendor/acpica/current/common/dmtbdump.c
   haiku/vendor/acpica/current/common/dmtbinfo.c
   haiku/vendor/acpica/current/common/getopt.c
   haiku/vendor/acpica/current/compiler/Makefile
   haiku/vendor/acpica/current/compiler/aslanalyze.c
   haiku/vendor/acpica/current/compiler/aslcodegen.c
   haiku/vendor/acpica/current/compiler/aslcompile.c
   haiku/vendor/acpica/current/compiler/aslcompiler.h
   haiku/vendor/acpica/current/compiler/aslcompiler.l
   haiku/vendor/acpica/current/compiler/aslcompiler.y
   haiku/vendor/acpica/current/compiler/asldefine.h
   haiku/vendor/acpica/current/compiler/aslerror.c
   haiku/vendor/acpica/current/compiler/aslfiles.c
   haiku/vendor/acpica/current/compiler/aslfold.c
   haiku/vendor/acpica/current/compiler/aslglobal.h
   haiku/vendor/acpica/current/compiler/asllength.c
   haiku/vendor/acpica/current/compiler/asllisting.c
   haiku/vendor/acpica/current/compiler/aslload.c
   haiku/vendor/acpica/current/compiler/asllookup.c
   haiku/vendor/acpica/current/compiler/aslmain.c
   haiku/vendor/acpica/current/compiler/aslmap.c
   haiku/vendor/acpica/current/compiler/aslopcodes.c
   haiku/vendor/acpica/current/compiler/asloperands.c
   haiku/vendor/acpica/current/compiler/aslopt.c
   haiku/vendor/acpica/current/compiler/aslresource.c
   haiku/vendor/acpica/current/compiler/aslrestype1.c
   haiku/vendor/acpica/current/compiler/aslrestype2.c
   haiku/vendor/acpica/current/compiler/aslstubs.c
   haiku/vendor/acpica/current/compiler/asltransform.c
   haiku/vendor/acpica/current/compiler/asltree.c
   haiku/vendor/acpica/current/compiler/asltypes.h
   haiku/vendor/acpica/current/compiler/aslutils.c
   haiku/vendor/acpica/current/debugger/dbcmds.c
   haiku/vendor/acpica/current/debugger/dbdisply.c
   haiku/vendor/acpica/current/debugger/dbexec.c
   haiku/vendor/acpica/current/debugger/dbfileio.c
   haiku/vendor/acpica/current/debugger/dbhistry.c
   haiku/vendor/acpica/current/debugger/dbinput.c
   haiku/vendor/acpica/current/debugger/dbstats.c
   haiku/vendor/acpica/current/debugger/dbutils.c
   haiku/vendor/acpica/current/debugger/dbxface.c
   haiku/vendor/acpica/current/disassembler/dmbuffer.c
   haiku/vendor/acpica/current/disassembler/dmnames.c
   haiku/vendor/acpica/current/disassembler/dmobject.c
   haiku/vendor/acpica/current/disassembler/dmopcode.c
   haiku/vendor/acpica/current/disassembler/dmresrc.c
   haiku/vendor/acpica/current/disassembler/dmresrcl.c
   haiku/vendor/acpica/current/disassembler/dmresrcs.c
   haiku/vendor/acpica/current/disassembler/dmutils.c
   haiku/vendor/acpica/current/disassembler/dmwalk.c
   haiku/vendor/acpica/current/events/evevent.c
   haiku/vendor/acpica/current/events/evgpe.c
   haiku/vendor/acpica/current/events/evgpeblk.c
   haiku/vendor/acpica/current/events/evmisc.c
   haiku/vendor/acpica/current/events/evregion.c
   haiku/vendor/acpica/current/events/evrgnini.c
   haiku/vendor/acpica/current/events/evsci.c
   haiku/vendor/acpica/current/events/evxface.c
   haiku/vendor/acpica/current/events/evxfevnt.c
   haiku/vendor/acpica/current/events/evxfregn.c
   haiku/vendor/acpica/current/hardware/hwacpi.c
   haiku/vendor/acpica/current/hardware/hwgpe.c
   haiku/vendor/acpica/current/hardware/hwregs.c
   haiku/vendor/acpica/current/hardware/hwsleep.c
   haiku/vendor/acpica/current/hardware/hwtimer.c
   haiku/vendor/acpica/current/include/acapps.h
   haiku/vendor/acpica/current/include/acconfig.h
   haiku/vendor/acpica/current/include/acdebug.h
   haiku/vendor/acpica/current/include/acdisasm.h
   haiku/vendor/acpica/current/include/acdispat.h
   haiku/vendor/acpica/current/include/acevents.h
   haiku/vendor/acpica/current/include/acexcep.h
   haiku/vendor/acpica/current/include/acglobal.h
   haiku/vendor/acpica/current/include/achware.h
   haiku/vendor/acpica/current/include/acinterp.h
   haiku/vendor/acpica/current/include/aclocal.h
   haiku/vendor/acpica/current/include/acmacros.h
   haiku/vendor/acpica/current/include/acnames.h
   haiku/vendor/acpica/current/include/acnamesp.h
   haiku/vendor/acpica/current/include/acobject.h
   haiku/vendor/acpica/current/include/acopcode.h
   haiku/vendor/acpica/current/include/acoutput.h
   haiku/vendor/acpica/current/include/acparser.h
   haiku/vendor/acpica/current/include/acpi.h
   haiku/vendor/acpica/current/include/acpiosxf.h
   haiku/vendor/acpica/current/include/acpixf.h
   haiku/vendor/acpica/current/include/acresrc.h
   haiku/vendor/acpica/current/include/acstruct.h
   haiku/vendor/acpica/current/include/actables.h
   haiku/vendor/acpica/current/include/actbl.h
   haiku/vendor/acpica/current/include/actbl1.h
   haiku/vendor/acpica/current/include/actbl2.h
   haiku/vendor/acpica/current/include/actypes.h
   haiku/vendor/acpica/current/include/acutils.h
   haiku/vendor/acpica/current/include/amlcode.h
   haiku/vendor/acpica/current/include/amlresrc.h
   haiku/vendor/acpica/current/include/platform/acdos16.h
   haiku/vendor/acpica/current/include/platform/acefi.h
   haiku/vendor/acpica/current/include/platform/acenv.h
   haiku/vendor/acpica/current/include/platform/acfreebsd.h
   haiku/vendor/acpica/current/include/platform/acgcc.h
   haiku/vendor/acpica/current/include/platform/acintel.h
   haiku/vendor/acpica/current/include/platform/aclinux.h
   haiku/vendor/acpica/current/include/platform/acmsvc.h
   haiku/vendor/acpica/current/include/platform/acnetbsd.h
   haiku/vendor/acpica/current/include/platform/acwin.h
   haiku/vendor/acpica/current/include/platform/acwin64.h
   haiku/vendor/acpica/current/interpreter/dispatcher/dsfield.c
   haiku/vendor/acpica/current/interpreter/dispatcher/dsinit.c
   haiku/vendor/acpica/current/interpreter/dispatcher/dsmethod.c
   haiku/vendor/acpica/current/interpreter/dispatcher/dsmthdat.c
   haiku/vendor/acpica/current/interpreter/dispatcher/dsobject.c
   haiku/vendor/acpica/current/interpreter/dispatcher/dsopcode.c
   haiku/vendor/acpica/current/interpreter/dispatcher/dsutils.c
   haiku/vendor/acpica/current/interpreter/dispatcher/dswexec.c
   haiku/vendor/acpica/current/interpreter/dispatcher/dswload.c
   haiku/vendor/acpica/current/interpreter/dispatcher/dswscope.c
   haiku/vendor/acpica/current/interpreter/dispatcher/dswstate.c
   haiku/vendor/acpica/current/interpreter/executer/exconfig.c
   haiku/vendor/acpica/current/interpreter/executer/exconvrt.c
   haiku/vendor/acpica/current/interpreter/executer/excreate.c
   haiku/vendor/acpica/current/interpreter/executer/exdump.c
   haiku/vendor/acpica/current/interpreter/executer/exfield.c
   haiku/vendor/acpica/current/interpreter/executer/exfldio.c
   haiku/vendor/acpica/current/interpreter/executer/exmisc.c
   haiku/vendor/acpica/current/interpreter/executer/exmutex.c
   haiku/vendor/acpica/current/interpreter/executer/exnames.c
   haiku/vendor/acpica/current/interpreter/executer/exoparg1.c
   haiku/vendor/acpica/current/interpreter/executer/exoparg2.c
   haiku/vendor/acpica/current/interpreter/executer/exoparg3.c
   haiku/vendor/acpica/current/interpreter/executer/exoparg6.c
   haiku/vendor/acpica/current/interpreter/executer/exprep.c
   haiku/vendor/acpica/current/interpreter/executer/exregion.c
   haiku/vendor/acpica/current/interpreter/executer/exresnte.c
   haiku/vendor/acpica/current/interpreter/executer/exresolv.c
   haiku/vendor/acpica/current/interpreter/executer/exresop.c
   haiku/vendor/acpica/current/interpreter/executer/exstore.c
   haiku/vendor/acpica/current/interpreter/executer/exstoren.c
   haiku/vendor/acpica/current/interpreter/executer/exstorob.c
   haiku/vendor/acpica/current/interpreter/executer/exsystem.c
   haiku/vendor/acpica/current/interpreter/executer/exutils.c
   haiku/vendor/acpica/current/interpreter/parser/psargs.c
   haiku/vendor/acpica/current/interpreter/parser/psloop.c
   haiku/vendor/acpica/current/interpreter/parser/psopcode.c
   haiku/vendor/acpica/current/interpreter/parser/psparse.c
   haiku/vendor/acpica/current/interpreter/parser/psscope.c
   haiku/vendor/acpica/current/interpreter/parser/pstree.c
   haiku/vendor/acpica/current/interpreter/parser/psutils.c
   haiku/vendor/acpica/current/interpreter/parser/pswalk.c
   haiku/vendor/acpica/current/interpreter/parser/psxface.c
   haiku/vendor/acpica/current/namespace/nsaccess.c
   haiku/vendor/acpica/current/namespace/nsalloc.c
   haiku/vendor/acpica/current/namespace/nsdump.c
   haiku/vendor/acpica/current/namespace/nsdumpdv.c
   haiku/vendor/acpica/current/namespace/nseval.c
   haiku/vendor/acpica/current/namespace/nsinit.c
   haiku/vendor/acpica/current/namespace/nsload.c
   haiku/vendor/acpica/current/namespace/nsnames.c
   haiku/vendor/acpica/current/namespace/nsobject.c
   haiku/vendor/acpica/current/namespace/nsparse.c
   haiku/vendor/acpica/current/namespace/nssearch.c
   haiku/vendor/acpica/current/namespace/nsutils.c
   haiku/vendor/acpica/current/namespace/nswalk.c
   haiku/vendor/acpica/current/namespace/nsxfeval.c
   haiku/vendor/acpica/current/namespace/nsxfname.c
   haiku/vendor/acpica/current/namespace/nsxfobj.c
   haiku/vendor/acpica/current/resources/rsaddr.c
   haiku/vendor/acpica/current/resources/rscalc.c
   haiku/vendor/acpica/current/resources/rscreate.c
   haiku/vendor/acpica/current/resources/rsdump.c
   haiku/vendor/acpica/current/resources/rsinfo.c
   haiku/vendor/acpica/current/resources/rsio.c
   haiku/vendor/acpica/current/resources/rsirq.c
   haiku/vendor/acpica/current/resources/rslist.c
   haiku/vendor/acpica/current/resources/rsmemory.c
   haiku/vendor/acpica/current/resources/rsmisc.c
   haiku/vendor/acpica/current/resources/rsutils.c
   haiku/vendor/acpica/current/resources/rsxface.c
   haiku/vendor/acpica/current/tables/tbfadt.c
   haiku/vendor/acpica/current/tables/tbfind.c
   haiku/vendor/acpica/current/tables/tbinstal.c
   haiku/vendor/acpica/current/tables/tbutils.c
   haiku/vendor/acpica/current/tables/tbxface.c
   haiku/vendor/acpica/current/tables/tbxfroot.c
   haiku/vendor/acpica/current/utilities/utalloc.c
   haiku/vendor/acpica/current/utilities/utcache.c
   haiku/vendor/acpica/current/utilities/utclib.c
   haiku/vendor/acpica/current/utilities/utcopy.c
   haiku/vendor/acpica/current/utilities/utdebug.c
   haiku/vendor/acpica/current/utilities/utdelete.c
   haiku/vendor/acpica/current/utilities/uteval.c
   haiku/vendor/acpica/current/utilities/utglobal.c
   haiku/vendor/acpica/current/utilities/utinit.c
   haiku/vendor/acpica/current/utilities/utmath.c
   haiku/vendor/acpica/current/utilities/utmisc.c
   haiku/vendor/acpica/current/utilities/utmutex.c
   haiku/vendor/acpica/current/utilities/utobject.c
   haiku/vendor/acpica/current/utilities/utresrc.c
   haiku/vendor/acpica/current/utilities/utstate.c
   haiku/vendor/acpica/current/utilities/uttrack.c
   haiku/vendor/acpica/current/utilities/utxface.c
Log:
updated acpica with version 20080321


Modified: haiku/vendor/acpica/current/common/16bit.h
===================================================================
--- haiku/vendor/acpica/current/common/16bit.h	2008-04-02 16:09:48 UTC (rev 24753)
+++ haiku/vendor/acpica/current/common/16bit.h	2008-04-02 18:32:56 UTC (rev 24754)
@@ -8,7 +8,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2006, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
  * All rights reserved.
  *
  * 2. License

Modified: haiku/vendor/acpica/current/common/a16find.c
===================================================================
--- haiku/vendor/acpica/current/common/a16find.c	2008-04-02 16:09:48 UTC (rev 24753)
+++ haiku/vendor/acpica/current/common/a16find.c	2008-04-02 18:32:56 UTC (rev 24754)
@@ -2,7 +2,7 @@
  *
  * Module Name: a16find - 16-bit (real mode) routines to find ACPI
  *                        tables in memory
- *              $Revision: 1.41 $
+ *              $Revision: 1.43 $
  *
  *****************************************************************************/
 
@@ -10,7 +10,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2006, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
  * All rights reserved.
  *
  * 2. License

Modified: haiku/vendor/acpica/current/common/a16utils.obj
===================================================================
(Binary files differ)

Modified: haiku/vendor/acpica/current/common/adfile.c
===================================================================
--- haiku/vendor/acpica/current/common/adfile.c	2008-04-02 16:09:48 UTC (rev 24753)
+++ haiku/vendor/acpica/current/common/adfile.c	2008-04-02 18:32:56 UTC (rev 24754)
@@ -1,7 +1,7 @@
 /******************************************************************************
  *
  * Module Name: adfile - Application-level disassembler file support routines
- *              $Revision: 1.2 $
+ *              $Revision: 1.4 $
  *
  *****************************************************************************/
 
@@ -9,7 +9,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2006, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
  * All rights reserved.
  *
  * 2. License

Modified: haiku/vendor/acpica/current/common/adisasm.c
===================================================================
--- haiku/vendor/acpica/current/common/adisasm.c	2008-04-02 16:09:48 UTC (rev 24753)
+++ haiku/vendor/acpica/current/common/adisasm.c	2008-04-02 18:32:56 UTC (rev 24754)
@@ -1,7 +1,7 @@
 /******************************************************************************
  *
  * Module Name: adisasm - Application-level disassembler routines
- *              $Revision: 1.103 $
+ *              $Revision: 1.112 $
  *
  *****************************************************************************/
 
@@ -9,7 +9,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2006, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
  * All rights reserved.
  *
  * 2. License
@@ -372,7 +372,7 @@
     ACPI_STATUS             Status;
     char                    *DisasmFilename = NULL;
     FILE                    *File = NULL;
-    ACPI_TABLE_HEADER       *Table;
+    ACPI_TABLE_HEADER       *Table = NULL;
     ACPI_TABLE_HEADER       *ExternalTable;
 
 
@@ -470,7 +470,7 @@
     {
         /* Always parse the tables, only option is what to display */
 
-        Status = AdParseTable (Table);
+        Status = AdParseTable (Table, TRUE);
         if (ACPI_FAILURE (Status))
         {
             AcpiOsPrintf (&quot;Could not parse ACPI tables, %s\n&quot;,
@@ -547,7 +547,9 @@
             Status = AcpiNsRootInitialize ();
             AdAddExternalsToNamespace ();
 
-            Status = AdParseTable (Table);
+            /* Parse table. No need to reload it, however (FALSE) */
+
+            Status = AdParseTable (Table, FALSE);
             if (ACPI_FAILURE (Status))
             {
                 AcpiOsPrintf (&quot;Could not parse ACPI tables, %s\n&quot;,
@@ -573,6 +575,17 @@
     }
 
 Cleanup:
+
+    if (Table &amp;&amp; !AcpiUtIsAmlTable (Table))
+    {
+        ACPI_FREE (Table);
+    }
+
+    if (DisasmFilename)
+    {
+        ACPI_FREE (DisasmFilename);
+    }
+
     if (OutToFile &amp;&amp; File)
     {
 
@@ -585,7 +598,8 @@
     }
 
     AcpiPsDeleteParseTree (AcpiGbl_ParseOpRoot);
-    return Status;
+    AcpiGbl_ParseOpRoot = NULL;
+    return (Status);
 }
 
 
@@ -640,19 +654,36 @@
     ACPI_TABLE_HEADER       *Table)
 {
     char                    *NewFilename;
+    UINT8                   Checksum;
 
 
+    /*
+     * Print file header and dump original table header
+     */
     AdDisassemblerHeader (Filename);
 
     AcpiOsPrintf (&quot; *\n * Original Table Header:\n&quot;);
     AcpiOsPrintf (&quot; *     Signature        \&quot;%4.4s\&quot;\n&quot;,    Table-&gt;Signature);
     AcpiOsPrintf (&quot; *     Length           0x%8.8X (%u)\n&quot;, Table-&gt;Length, Table-&gt;Length);
     AcpiOsPrintf (&quot; *     Revision         0x%2.2X\n&quot;,      Table-&gt;Revision);
+
+    /* Print and validate the table checksum */
+
+    AcpiOsPrintf (&quot; *     Checksum         0x%2.2X&quot;,        Table-&gt;Checksum);
+
+    Checksum = AcpiTbChecksum (ACPI_CAST_PTR (UINT8, Table), Table-&gt;Length);
+    if (Checksum)
+    {
+        AcpiOsPrintf (&quot; **** Incorrect checksum, should be 0x%2.2X&quot;,
+            (UINT8) (Table-&gt;Checksum - Checksum));
+    }
+    AcpiOsPrintf (&quot;\n&quot;);
+
     AcpiOsPrintf (&quot; *     OEM ID           \&quot;%.6s\&quot;\n&quot;,     Table-&gt;OemId);
     AcpiOsPrintf (&quot; *     OEM Table ID     \&quot;%.8s\&quot;\n&quot;,     Table-&gt;OemTableId);
     AcpiOsPrintf (&quot; *     OEM Revision     0x%8.8X (%u)\n&quot;, Table-&gt;OemRevision, Table-&gt;OemRevision);
-    AcpiOsPrintf (&quot; *     Creator ID       \&quot;%.4s\&quot;\n&quot;,     Table-&gt;AslCompilerId);
-    AcpiOsPrintf (&quot; *     Creator Revision 0x%8.8X (%u)\n&quot;, Table-&gt;AslCompilerRevision, Table-&gt;AslCompilerRevision);
+    AcpiOsPrintf (&quot; *     Compiler ID      \&quot;%.4s\&quot;\n&quot;,     Table-&gt;AslCompilerId);
+    AcpiOsPrintf (&quot; *     Compiler Version 0x%8.8X (%u)\n&quot;, Table-&gt;AslCompilerRevision, Table-&gt;AslCompilerRevision);
     AcpiOsPrintf (&quot; */\n&quot;);
 
     /* Create AML output filename based on input filename */
@@ -674,6 +705,8 @@
         &quot;DefinitionBlock (\&quot;%s\&quot;, \&quot;%4.4s\&quot;, %hd, \&quot;%.6s\&quot;, \&quot;%.8s\&quot;, 0x%8.8X)\n&quot;,
         NewFilename, Table-&gt;Signature, Table-&gt;Revision,
         Table-&gt;OemId, Table-&gt;OemTableId, Table-&gt;OemRevision);
+
+    ACPI_FREE (NewFilename);
 }
 
 
@@ -904,6 +937,7 @@
         case AML_CREATE_BYTE_FIELD_OP:
         case AML_CREATE_BIT_FIELD_OP:
         case AML_CREATE_FIELD_OP:
+        case AML_BANK_FIELD_OP:
 
             /* Nothing to do in these cases */
 
@@ -1046,7 +1080,8 @@
 
 ACPI_STATUS
 AdParseTable (
-    ACPI_TABLE_HEADER       *Table)
+    ACPI_TABLE_HEADER       *Table,
+    BOOLEAN                 LoadTable)
 {
     ACPI_STATUS             Status = AE_OK;
     ACPI_WALK_STATE         *WalkState;
@@ -1102,16 +1137,19 @@
 
     /* Pass 2 */
 
-    Status = AcpiTbStoreTable ((ACPI_NATIVE_UINT) Table, Table,
-                Table-&gt;Length, ACPI_TABLE_ORIGIN_ALLOCATED, &amp;TableIndex);
-    if (ACPI_FAILURE (Status))
+    if (LoadTable)
     {
-        return Status;
+        Status = AcpiTbStoreTable ((ACPI_NATIVE_UINT) Table, Table,
+                    Table-&gt;Length, ACPI_TABLE_ORIGIN_ALLOCATED, &amp;TableIndex);
+        if (ACPI_FAILURE (Status))
+        {
+            return Status;
+        }
     }
 
     fprintf (stderr, &quot;Pass 2 parse of [%4.4s]\n&quot;, (char *) Table-&gt;Signature);
 
-    Status = AcpiNsOneCompleteParse (ACPI_IMODE_LOAD_PASS2, 0);
+    Status = AcpiNsOneCompleteParse (ACPI_IMODE_LOAD_PASS2, 0, NULL);
     if (ACPI_FAILURE (Status))
     {
         return (Status);

Modified: haiku/vendor/acpica/current/common/adwalk.c
===================================================================
--- haiku/vendor/acpica/current/common/adwalk.c	2008-04-02 16:09:48 UTC (rev 24753)
+++ haiku/vendor/acpica/current/common/adwalk.c	2008-04-02 18:32:56 UTC (rev 24754)
@@ -1,7 +1,7 @@
 /******************************************************************************
  *
  * Module Name: adwalk - Application-level disassembler parse tree walk routines
- *              $Revision: 1.5 $
+ *              $Revision: 1.7 $
  *
  *****************************************************************************/
 
@@ -9,7 +9,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2006, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
  * All rights reserved.
  *
  * 2. License

Modified: haiku/vendor/acpica/current/common/dmrestag.c
===================================================================
--- haiku/vendor/acpica/current/common/dmrestag.c	2008-04-02 16:09:48 UTC (rev 24753)
+++ haiku/vendor/acpica/current/common/dmrestag.c	2008-04-02 18:32:56 UTC (rev 24754)
@@ -1,7 +1,7 @@
 /******************************************************************************
  *
  * Module Name: dmrestag - Add tags to resource descriptors (Application-level)
- *              $Revision: 1.10 $
+ *              $Revision: 1.12 $
  *
  *****************************************************************************/
 
@@ -9,7 +9,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2006, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
  * All rights reserved.
  *
  * 2. License

Modified: haiku/vendor/acpica/current/common/dmtable.c
===================================================================
--- haiku/vendor/acpica/current/common/dmtable.c	2008-04-02 16:09:48 UTC (rev 24753)
+++ haiku/vendor/acpica/current/common/dmtable.c	2008-04-02 18:32:56 UTC (rev 24754)
@@ -1,7 +1,7 @@
 /******************************************************************************
  *
  * Module Name: dmtable - Support for ACPI tables that contain no AML code
- *              $Revision: 1.11 $
+ *              $Revision: 1.16 $
  *
  *****************************************************************************/
 
@@ -9,7 +9,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2006, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
  * All rights reserved.
  *
  * 2. License
@@ -137,6 +137,16 @@
 
 /* These tables map a subtable type to a description string */
 
+static const char           *AcpiDmAsfSubnames[] =
+{
+    &quot;ASF Information&quot;,
+    &quot;ASF Alerts&quot;,
+    &quot;ASF Remote Control&quot;,
+    &quot;ASF RMCP Boot Options&quot;,
+    &quot;ASF Address&quot;,
+    &quot;Unknown SubTable Type&quot;         /* Reserved */
+};
+
 static const char           *AcpiDmDmarSubnames[] =
 {
     &quot;Hardware Unit Definition&quot;,
@@ -144,6 +154,31 @@
     &quot;Unknown SubTable Type&quot;         /* Reserved */
 };
 
+static const char           *AcpiDmHestSubnames[] =
+{
+    &quot;XPF Machine Check Exception&quot;,
+    &quot;XPF Corrected Machine Check&quot;,
+    &quot;NOT USED???&quot;,
+    &quot;XPF Non-Maskable Interrupt&quot;,
+    &quot;IPF Corrected Machine Check&quot;,
+    &quot;IPF Corrected Platform Error&quot;,
+    &quot;PCI Express Root Port AER&quot;,
+    &quot;PCI Express AER (AER Endpoint)&quot;,
+    &quot;PCI Express/PCI-X Bridge AERn&quot;,
+    &quot;Generic Hardware Error Source&quot;,
+    &quot;Unknown SubTable Type&quot;         /* Reserved */
+};
+
+static const char           *AcpiDmHestNotifySubnames[] =
+{
+    &quot;Polled&quot;,
+    &quot;External Interrupt&quot;,
+    &quot;Local Interrupt&quot;,
+    &quot;SCI&quot;,
+    &quot;NMI&quot;,
+    &quot;Unknown Notify Type&quot;           /* Reserved */
+};
+
 static const char           *AcpiDmMadtSubnames[] =
 {
     &quot;Processor Local APIC&quot;,         /* ACPI_MADT_TYPE_LOCAL_APIC */
@@ -180,16 +215,21 @@
 {
     {ACPI_SIG_ASF,  NULL,                   AcpiDmDumpAsf,  &quot;Alert Standard Format table&quot;},
     {ACPI_SIG_BOOT, AcpiDmTableInfoBoot,    NULL,           &quot;Simple Boot Flag Table&quot;},
+    {ACPI_SIG_BERT, AcpiDmTableInfoBert,    NULL,           &quot;Boot Error Record Table&quot;},
     {ACPI_SIG_CPEP, NULL,                   AcpiDmDumpCpep, &quot;Corrected Platform Error Polling table&quot;},
     {ACPI_SIG_DBGP, AcpiDmTableInfoDbgp,    NULL,           &quot;Debug Port table&quot;},
     {ACPI_SIG_DMAR, NULL,                   AcpiDmDumpDmar, &quot;DMA Remapping table&quot;},
     {ACPI_SIG_ECDT, AcpiDmTableInfoEcdt,    NULL,           &quot;Embedded Controller Boot Resources Table&quot;},
+    {ACPI_SIG_EINJ, NULL,                   AcpiDmDumpEinj, &quot;Error Injection table&quot;},
+    {ACPI_SIG_ERST, NULL,                   AcpiDmDumpErst, &quot;Error Record Serialization Table&quot;},
     {ACPI_SIG_FADT, NULL,                   AcpiDmDumpFadt, &quot;Fixed ACPI Description Table&quot;},
+    {ACPI_SIG_HEST, NULL,                   AcpiDmDumpHest, &quot;Hardware Error Source Table&quot;},
     {ACPI_SIG_HPET, AcpiDmTableInfoHpet,    NULL,           &quot;High Precision Event Timer table&quot;},
     {ACPI_SIG_MADT, NULL,                   AcpiDmDumpMadt, &quot;Multiple APIC Description Table&quot;},
     {ACPI_SIG_MCFG, NULL,                   AcpiDmDumpMcfg, &quot;Memory Mapped Configuration table&quot;},
     {ACPI_SIG_RSDT, NULL,                   AcpiDmDumpRsdt, &quot;Root System Description Table&quot;},
     {ACPI_SIG_SBST, AcpiDmTableInfoSbst,    NULL,           &quot;Smart Battery Specification Table&quot;},
+    {ACPI_SIG_SLIC, AcpiDmTableInfoSlic,    NULL,           &quot;Software Licensing Description Table&quot;},
     {ACPI_SIG_SLIT, NULL,                   AcpiDmDumpSlit, &quot;System Locality Information Table&quot;},
     {ACPI_SIG_SPCR, AcpiDmTableInfoSpcr,    NULL,           &quot;Serial Port Console Redirection table&quot;},
     {ACPI_SIG_SPMI, AcpiDmTableInfoSpmi,    NULL,           &quot;Server Platform Management Interface table&quot;},
@@ -284,6 +324,7 @@
 AcpiDmDumpDataTable (
     ACPI_TABLE_HEADER       *Table)
 {
+    ACPI_STATUS             Status;
     ACPI_DMTABLE_DATA       *TableData;
     UINT32                  Length;
 
@@ -314,7 +355,11 @@
          * All other tables must use the common ACPI table header, dump it now
          */
         Length = Table-&gt;Length;
-        AcpiDmDumpTable (Length, 0, Table, 0, AcpiDmTableInfoHeader);
+        Status = AcpiDmDumpTable (Length, 0, Table, 0, AcpiDmTableInfoHeader);
+        if (ACPI_FAILURE (Status))
+        {
+            return;
+        }
         AcpiOsPrintf (&quot;\n&quot;);
 
         /* Match signature and dispatch appropriately */
@@ -419,7 +464,7 @@
  *              TableOffset         - Starting offset within the table for this
  *                                    sub-descriptor (0 if main table)
  *              Table               - The ACPI table
- *              SubtableLength      - Lenghth of this sub-descriptor
+ *              SubtableLength      - Length of this sub-descriptor
  *              Info                - Info table for this ACPI table
  *
  * RETURN:      None
@@ -428,7 +473,7 @@
  *
  ******************************************************************************/
 
-void
+ACPI_STATUS
 AcpiDmDumpTable (
     UINT32                  TableLength,
     UINT32                  TableOffset,
@@ -442,12 +487,13 @@
     UINT8                   Temp8;
     UINT16                  Temp16;
     ACPI_DMTABLE_DATA       *TableData;
+    BOOLEAN                 LastOutputBlankLine = FALSE;
 
 
     if (!Info)
     {
         AcpiOsPrintf (&quot;Display not implemented\n&quot;);
-        return;
+        return (AE_NOT_IMPLEMENTED);
     }
 
     /* Walk entire Info table; Null name terminates */
@@ -466,7 +512,8 @@
         if ((CurrentOffset &gt;= TableLength) ||
             (SubtableLength &amp;&amp; (Info-&gt;Offset &gt;= SubtableLength)))
         {
-            return;
+            AcpiOsPrintf (&quot;**** ACPI table terminates in the middle of a data structure!\n&quot;);
+            return (AE_BAD_DATA);
         }
 
         /* Generate the byte length for this field */
@@ -478,10 +525,13 @@
         case ACPI_DMT_SPACEID:
         case ACPI_DMT_MADT:
         case ACPI_DMT_SRAT:
+        case ACPI_DMT_ASF:
+        case ACPI_DMT_HESTNTYP:
             ByteLength = 1;
             break;
         case ACPI_DMT_UINT16:
         case ACPI_DMT_DMAR:
+        case ACPI_DMT_HEST:
             ByteLength = 2;
             break;
         case ACPI_DMT_UINT24:
@@ -506,14 +556,32 @@
             ByteLength = ACPI_STRLEN (ACPI_CAST_PTR (char, Target)) + 1;
             break;
         case ACPI_DMT_GAS:
-            AcpiOsPrintf (&quot;\n&quot;);
+            if (!LastOutputBlankLine)
+            {
+                AcpiOsPrintf (&quot;\n&quot;);
+                LastOutputBlankLine = TRUE;
+            }
             ByteLength = sizeof (ACPI_GENERIC_ADDRESS);
             break;
+        case ACPI_DMT_HESTNTFY:
+            if (!LastOutputBlankLine)
+            {
+                AcpiOsPrintf (&quot;\n&quot;);
+                LastOutputBlankLine = TRUE;
+            }
+            ByteLength = sizeof (ACPI_HEST_NOTIFY);
+            break;
         default:
             ByteLength = 0;
             break;
         }
 
+        if (CurrentOffset + ByteLength &gt; TableLength)
+        {
+            AcpiOsPrintf (&quot;**** ACPI table terminates in the middle of a data structure!\n&quot;);
+            return (AE_BAD_DATA);
+        }
+
         /* Start a new line and decode the opcode */
 
         AcpiDmLineHeader (CurrentOffset, ByteLength, Info-&gt;Name);
@@ -571,9 +639,11 @@
 
         case ACPI_DMT_UINT56:
 
-            AcpiOsPrintf (&quot;%6.6X%8.8X\n&quot;,
-                ACPI_HIDWORD (ACPI_GET64 (Target)) &amp; 0x00FFFFFF,
-                ACPI_LODWORD (ACPI_GET64 (Target)));
+            for (Temp8 = 0; Temp8 &lt; 7; Temp8++)
+            {
+                AcpiOsPrintf (&quot;%2.2X&quot;, Target[Temp8]);
+            }
+            AcpiOsPrintf (&quot;\n&quot;);
             break;
 
         case ACPI_DMT_UINT64:
@@ -649,8 +719,23 @@
             AcpiOsPrintf (&quot;&lt;Generic Address Structure&gt;\n&quot;);
             AcpiDmDumpTable (ACPI_CAST_PTR (ACPI_TABLE_HEADER, Table)-&gt;Length,
                 CurrentOffset, Target, 0, AcpiDmTableInfoGas);
+            AcpiOsPrintf (&quot;\n&quot;);
+            LastOutputBlankLine = TRUE;
             break;
 
+        case ACPI_DMT_ASF:
+
+            /* ASF subtable types */
+
+            Temp16 = (UINT16) ((*Target) &amp; 0x7F);  /* Top bit can be zero or one */
+            if (Temp16 &gt; ACPI_ASF_TYPE_RESERVED)
+            {
+                Temp16 = ACPI_ASF_TYPE_RESERVED;
+            }
+
+            AcpiOsPrintf (&quot;%2.2X &lt;%s&gt;\n&quot;, *Target, AcpiDmAsfSubnames[Temp16]);
+            break;
+
         case ACPI_DMT_DMAR:
 
             /* DMAR subtable types */
@@ -664,6 +749,42 @@
             AcpiOsPrintf (&quot;%4.4X &lt;%s&gt;\n&quot;, *Target, AcpiDmDmarSubnames[Temp16]);
             break;
 
+        case ACPI_DMT_HEST:
+
+            /* HEST subtable types */
+
+            Temp16 = *Target;
+            if (Temp16 &gt; ACPI_HEST_TYPE_RESERVED)
+            {
+                Temp16 = ACPI_HEST_TYPE_RESERVED;
+            }
+
+            AcpiOsPrintf (&quot;%4.4X (%s)\n&quot;, *Target, AcpiDmHestSubnames[Temp16]);
+            break;
+
+        case ACPI_DMT_HESTNTFY:
+
+            AcpiOsPrintf (&quot;&lt;Hardware Error Notification Structure&gt;\n&quot;);
+            AcpiDmDumpTable (ACPI_CAST_PTR (ACPI_TABLE_HEADER, Table)-&gt;Length,
+                CurrentOffset, Target, 0, AcpiDmTableInfoHestNotify);
+            AcpiOsPrintf (&quot;\n&quot;);
+            LastOutputBlankLine = TRUE;
+            break;
+
+        case ACPI_DMT_HESTNTYP:
+
+            /* HEST Notify types */
+
+            Temp8 = *Target;
+            if (Temp8 &gt; ACPI_HEST_NOTIFY_RESERVED)
+            {
+                Temp8 = ACPI_HEST_NOTIFY_RESERVED;
+            }
+
+            AcpiOsPrintf (&quot;%2.2X (%s)\n&quot;, *Target, AcpiDmHestNotifySubnames[Temp8]);
+            break;
+
+
         case ACPI_DMT_MADT:
 
             /* MADT subtable types */
@@ -691,14 +812,16 @@
             break;
 
         case ACPI_DMT_EXIT:
-            return;
+            return (AE_OK);
 
         default:
             ACPI_ERROR ((AE_INFO,
                 &quot;**** Invalid table opcode [%X] ****\n&quot;, Info-&gt;Opcode));
-            return;
+            return (AE_SUPPORT);
         }
     }
+
+    return (AE_OK);
 }
 
 

Modified: haiku/vendor/acpica/current/common/dmtbdump.c
===================================================================
--- haiku/vendor/acpica/current/common/dmtbdump.c	2008-04-02 16:09:48 UTC (rev 24753)
+++ haiku/vendor/acpica/current/common/dmtbdump.c	2008-04-02 18:32:56 UTC (rev 24754)
@@ -1,7 +1,7 @@
 /******************************************************************************
  *
  * Module Name: dmtbdump - Dump ACPI data tables that contain no AML code
- *              $Revision: 1.14 $
+ *              $Revision: 1.18 $
  *
  *****************************************************************************/
 
@@ -9,7 +9,7 @@
  *
  * 1. Copyright Notice
  *
- * Some or all of this work - Copyright (c) 1999 - 2006, Intel Corp.
+ * Some or all of this work - Copyright (c) 1999 - 2008, Intel Corp.
  * All rights reserved.
  *
  * 2. License
@@ -289,6 +289,7 @@
 AcpiDmDumpAsf (
     ACPI_TABLE_HEADER       *Table)
 {
+    ACPI_STATUS             Status;
     UINT32                  Offset = sizeof (ACPI_TABLE_HEADER);
     ACPI_ASF_INFO           *SubTable;
     ACPI_DMTABLE_INFO       *InfoTable;
@@ -307,7 +308,12 @@
     {
         /* Common sub-table header */
 
-        AcpiDmDumpTable (Table-&gt;Length, Offset, SubTable, 0, AcpiDmTableInfoAsfHdr);
+        Status = AcpiDmDumpTable (Table-&gt;Length, Offset, SubTable,
+                    SubTable-&gt;Header.Length, AcpiDmTableInfoAsfHdr);
+        if (ACPI_FAILURE (Status))
+        {
+            return;
+        }
 
         switch (SubTable-&gt;Header.Type &amp; 0x7F) /* Mask off top bit */
         {
@@ -349,9 +355,13 @@
             return;
         }
 
-        AcpiDmDumpTable (Table-&gt;Length, Offset, SubTable, SubTable-&gt;Header.Length, InfoTable);
+        Status = AcpiDmDumpTable (Table-&gt;Length, Offset, SubTable,
+                    SubTable-&gt;Header.Length, InfoTable);
+        if (ACPI_FAILURE (Status))
+        {
+            return;
+        }
 
-
         /* Dump variable-length extra data */
 
         switch (SubTable-&gt;Header.Type &amp; 0x7F) /* Mask off top bit */
@@ -362,7 +372,12 @@
             for (i = 0; i &lt; DataCount; i++)
             {
                 AcpiOsPrintf (&quot;\n&quot;);
-                AcpiDmDumpTable (Table-&gt;Length, DataOffset, DataTable, DataLength, DataInfoTable);
+                Status = AcpiDmDumpTable (Table-&gt;Length, DataOffset,
+                            DataTable, DataLength, DataInfoTable);
+                if (ACPI_FAILURE (Status))
+                {
+                    return;
+                }
 
                 DataTable = ACPI_ADD_PTR (UINT8, DataTable, DataLength);
                 DataOffset += DataLength;
@@ -381,6 +396,11 @@
                 AcpiOsPrintf (&quot;%2.2X &quot;, *DataTable);
                 DataTable++;
                 DataOffset++;
+                if (DataOffset &gt; Table-&gt;Length)
+                {
+                    AcpiOsPrintf (&quot;**** ACPI table terminates in the middle of a data structure!\n&quot;);
+                    return;
+                }
             }
 
             AcpiOsPrintf (&quot;\n&quot;);
@@ -391,6 +411,12 @@
 
         /* Point to next sub-table */
 
+        if (!SubTable-&gt;Header.Length)
+        {
+            AcpiOsPrintf (&quot;Invalid zero subtable header length\n&quot;);
+            return;
+        }
+
         Offset += SubTable-&gt;Header.Length;
         SubTable = ACPI_ADD_PTR (ACPI_ASF_INFO, SubTable, SubTable-&gt;Header.Length);
     }
@@ -414,6 +440,7 @@
 AcpiDmDumpCpep (
     ACPI_TABLE_HEADER       *Table)
 {
+    ACPI_STATUS             Status;
     ACPI_CPEP_POLLING       *SubTable;
     UINT32                  Length = Table-&gt;Length;
     UINT32                  Offset = sizeof (ACPI_TABLE_CPEP);
@@ -421,7 +448,11 @@
 
     /* Main table */
 
-    AcpiDmDumpTable (Length, 0, Table, 0, AcpiDmTableInfoCpep);
+    Status = AcpiDmDumpTable (Length, 0, Table, 0, AcpiDmTableInfoCpep);
+    if (ACPI_FAILURE (Status))
+    {
+        return;
+    }
 
     /* Sub-tables */
 
@@ -429,7 +460,12 @@
     while (Offset &lt; Table-&gt;Length)
     {
         AcpiOsPrintf (&quot;\n&quot;);
-        AcpiDmDumpTable (Length, Offset, SubTable, SubTable-&gt;Length, AcpiDmTableInfoCpep0);
+        Status = AcpiDmDumpTable (Length, Offset, SubTable,
+                    SubTable-&gt;Length, AcpiDmTableInfoCpep0);
+        if (ACPI_FAILURE (Status))
+        {
+            return;
+        }
 
         /* Point to next sub-table */
 
@@ -456,6 +492,7 @@
 AcpiDmDumpDmar (
     ACPI_TABLE_HEADER       *Table)
 {
+    ACPI_STATUS             Status;
     ACPI_DMAR_HEADER        *SubTable;
     UINT32                  Length = Table-&gt;Length;
     UINT32                  Offset = sizeof (ACPI_TABLE_DMAR);
@@ -468,7 +505,11 @@
 
     /* Main table */
 
-    AcpiDmDumpTable (Length, 0, Table, 0, AcpiDmTableInfoDmar);
+    Status = AcpiDmDumpTable (Length, 0, Table, 0, AcpiDmTableInfoDmar);
+    if (ACPI_FAILURE (Status))
+    {
+        return;
+    }
 
     /* Sub-tables */
 
@@ -478,7 +519,12 @@
         /* Common sub-table header */
 
         AcpiOsPrintf (&quot;\n&quot;);
-        AcpiDmDumpTable (Length, Offset, SubTable, 0, AcpiDmTableInfoDmarHdr);
+        Status = AcpiDmDumpTable (Length, Offset, SubTable,
+                    SubTable-&gt;Length, AcpiDmTableInfoDmarHdr);
+        if (ACPI_FAILURE (Status))
+        {
+            return;
+        }
 
         switch (SubTable-&gt;Type)
         {
@@ -495,7 +541,12 @@
             return;
         }
 
-        AcpiDmDumpTable (Length, Offset, SubTable, SubTable-&gt;Length, InfoTable);
+        Status = AcpiDmDumpTable (Length, Offset, SubTable,
+                    SubTable-&gt;Length, InfoTable);
+        if (ACPI_FAILURE (Status))
+        {
+            return;
+        }
 
         /*
          * Currently, a common flag indicates whether there are any
@@ -509,8 +560,12 @@
             while (ScopeOffset &lt; SubTable-&gt;Length)
             {
                 AcpiOsPrintf (&quot;\n&quot;);
-                AcpiDmDumpTable (Length, Offset + ScopeOffset, ScopeTable,
-                    ScopeTable-&gt;Length, AcpiDmTableInfoDmarScope);
+                Status = AcpiDmDumpTable (Length, Offset + ScopeOffset, ScopeTable,
+                            ScopeTable-&gt;Length, AcpiDmTableInfoDmarScope);
+                if (ACPI_FAILURE (Status))
+                {
+                    return;
+                }
 
                 /* Dump the PCI Path entries for this device scope */
 
@@ -548,6 +603,180 @@
 
 /*******************************************************************************
  *
+ * FUNCTION:    AcpiDmDumpEinj
+ *
+ * PARAMETERS:  Table               - A EINJ table
+ *
+ * RETURN:      None
+ *
+ * DESCRIPTION: Format the contents of a EINJ. This table type consists
+ *              of an open-ended number of subtables.
+ *
+ ******************************************************************************/
+
+void
+AcpiDmDumpEinj (
+    ACPI_TABLE_HEADER       *Table)
+{
+    ACPI_STATUS             Status;
+    ACPI_WHEA_HEADER        *SubTable;
+    UINT32                  Length = Table-&gt;Length;
+    UINT32                  Offset = sizeof (ACPI_TABLE_EINJ);
+
+
+    /* Main table */
+
+    Status = AcpiDmDumpTable (Length, 0, Table, 0, AcpiDmTableInfoEinj);
+    if (ACPI_FAILURE (Status))
+    {
+        return;
+    }
+
+    /* Sub-tables */
+
+    SubTable = ACPI_ADD_PTR (ACPI_WHEA_HEADER, Table, Offset);
+    while (Offset &lt; Table-&gt;Length)
+    {
+        AcpiOsPrintf (&quot;\n&quot;);
+        Status = AcpiDmDumpTable (Length, Offset, SubTable,
+                    0, AcpiDmTableInfoEinj0);
+        if (ACPI_FAILURE (Status))
+        {
+            return;
+        }
+
+        /* Point to next sub-table (each subtable is of fixed length) */
+
+        Offset += sizeof (ACPI_WHEA_HEADER);
+        SubTable = ACPI_ADD_PTR (ACPI_WHEA_HEADER, SubTable,
+                        sizeof (ACPI_WHEA_HEADER));
+    }
+}
+
+
+/*******************************************************************************
+ *
+ * FUNCTION:    AcpiDmDumpErst
+ *
+ * PARAMETERS:  Table               - A ERST table
+ *
+ * RETURN:      None
+ *
+ * DESCRIPTION: Format the contents of a ERST. This table type consists
+ *              of an open-ended number of subtables.
+ *
+ ******************************************************************************/
+
+void
+AcpiDmDumpErst (
+    ACPI_TABLE_HEADER       *Table)
+{
+    ACPI_STATUS             Status;
+    ACPI_WHEA_HEADER        *SubTable;
+    UINT32                  Length = Table-&gt;Length;
+    UINT32                  Offset = sizeof (ACPI_TABLE_ERST);
+
+
+    /* Main table */
+
+    Status = AcpiDmDumpTable (Length, 0, Table, 0, AcpiDmTableInfoErst);
+    if (ACPI_FAILURE (Status))
+    {
+        return;
+    }
+
+    /* Sub-tables */
+
+    SubTable = ACPI_ADD_PTR (ACPI_WHEA_HEADER, Table, Offset);
+    while (Offset &lt; Table-&gt;Length)
+    {
+        AcpiOsPrintf (&quot;\n&quot;);
+        Status = AcpiDmDumpTable (Length, Offset, SubTable,
+                    0, AcpiDmTableInfoEinj0);
+        if (ACPI_FAILURE (Status))
+        {
+            return;
+        }
+
+        /* Point to next sub-table (each subtable is of fixed length) */
+
+        Offset += sizeof (ACPI_WHEA_HEADER);
+        SubTable = ACPI_ADD_PTR (ACPI_WHEA_HEADER, SubTable,
+                        sizeof (ACPI_WHEA_HEADER));
+    }
+}
+
+
+/*******************************************************************************
+ *
+ * FUNCTION:    AcpiDmDumpHest
+ *
+ * PARAMETERS:  Table               - A HEST table
+ *
+ * RETURN:      None
+ *
+ * DESCRIPTION: Format the contents of a HEST. This table type consists
+ *              of an open-ended number of subtables.
+ *
+ ******************************************************************************/
+
+void
+AcpiDmDumpHest (
+    ACPI_TABLE_HEADER       *Table)
+{
+    ACPI_STATUS             Status;
+    ACPI_HEST_HEADER        *SubTable;
+    UINT32                  Length = Table-&gt;Length;
+    UINT32                  Offset = sizeof (ACPI_TABLE_HEST);
+    ACPI_DMTABLE_INFO       *InfoTable;
+    UINT32                  SubTableLength;
+
+
+    /* Main table */
+
+    Status = AcpiDmDumpTable (Length, 0, Table, 0, AcpiDmTableInfoHest);
+    if (ACPI_FAILURE (Status))
+    {
+        return;
+    }
+
+    /* Sub-tables */
+
+    SubTable = ACPI_ADD_PTR (ACPI_HEST_HEADER, Table, Offset);
+    while (Offset &lt; Table-&gt;Length)
+    {
+        /* TBD: add new subtable types as examples become available */
+
+        switch (SubTable-&gt;Type)
+        {
+        case ACPI_HEST_TYPE_GENERIC_HARDWARE_ERROR_SOURCE:
+            InfoTable = AcpiDmTableInfoHest9;
+            SubTableLength = sizeof (ACPI_HEST_GENERIC);
+            break;
+
+        default:
+            AcpiOsPrintf (&quot;\n**** Unknown HEST sub-table type %X\n&quot;, SubTable-&gt;Type);
+            return;
+        }
+
+        AcpiOsPrintf (&quot;\n&quot;);
+        Status = AcpiDmDumpTable (Length, Offset, SubTable,
+                    0, InfoTable);
+        if (ACPI_FAILURE (Status))
+        {
+            return;
+        }
+
+        /* Point to next sub-table (each subtable is of fixed length) */
+
+        Offset += SubTableLength;
+        SubTable = ACPI_ADD_PTR (ACPI_HEST_HEADER, SubTable, SubTableLength);
+    }
+}
+
+
+/*******************************************************************************
+ *
  * FUNCTION:    AcpiDmDumpMadt
  *
  * PARAMETERS:  Table               - A MADT table
@@ -563,6 +792,7 @@
 AcpiDmDumpMadt (
     ACPI_TABLE_HEADER       *Table)
 {
+    ACPI_STATUS             Status;
     ACPI_SUBTABLE_HEADER    *SubTable;
     UINT32                  Length = Table-&gt;Length;
     UINT32                  Offset = sizeof (ACPI_TABLE_MADT);
@@ -571,7 +801,11 @@
 
     /* Main table */
 
-    AcpiDmDumpTable (Length, 0, Table, 0, AcpiDmTableInfoMadt);
+    Status = AcpiDmDumpTable (Length, 0, Table, 0, AcpiDmTableInfoMadt);
+    if (ACPI_FAILURE (Status))
+    {
+        return;
+    }
 
     /* Sub-tables */
 
@@ -581,7 +815,12 @@
         /* Common sub-table header */
 
         AcpiOsPrintf (&quot;\n&quot;);
-        AcpiDmDumpTable (Length, Offset, SubTable, 0, AcpiDmTableInfoMadtHdr);
+        Status = AcpiDmDumpTable (Length, Offset, SubTable,
+                    SubTable-&gt;Length, AcpiDmTableInfoMadtHdr);
+        if (ACPI_FAILURE (Status))
+        {
+            return;
+        }
 

[... truncated: 15886 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007390.html">[Haiku-commits] r24753 - haiku/trunk/src/data/beos_mime/application
</A></li>
	<LI>Next message: <A HREF="007394.html">[Haiku-commits] r24755 - haiku/vendor/acpica
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7393">[ date ]</a>
              <a href="thread.html#7393">[ thread ]</a>
              <a href="subject.html#7393">[ subject ]</a>
              <a href="author.html#7393">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
