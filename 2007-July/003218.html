<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r21715 - in haiku/trunk: headers/private/kernel headers/private/libroot src/kits src/kits/tracker src/system/kernel src/system/kernel/messaging src/system/kernel/util src/system/libroot src/system/libroot/os src/system/libroot/posix/stdlib src/system/runtime_loader
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r21715%20-%20in%20haiku/trunk%3A%20headers/private/kernel%0A%20headers/private/libroot%20src/kits%20src/kits/tracker%20src/system/kernel%0A%20src/system/kernel/messaging%20src/system/kernel/util%20src/system/libroot%0A%20src/system/libroot/os%20src/system/libroot/posix/stdlib%0A%20src/system/runtime_loader&In-Reply-To=%3C20070727140951.794.1%40cs.tu-berlin.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003210.html">
   <LINK REL="Next"  HREF="003240.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r21715 - in haiku/trunk: headers/private/kernel headers/private/libroot src/kits src/kits/tracker src/system/kernel src/system/kernel/messaging src/system/kernel/util src/system/libroot src/system/libroot/os src/system/libroot/posix/stdlib src/system/runtime_loader</H1>
    <B>Ingo Weinhold</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r21715%20-%20in%20haiku/trunk%3A%20headers/private/kernel%0A%20headers/private/libroot%20src/kits%20src/kits/tracker%20src/system/kernel%0A%20src/system/kernel/messaging%20src/system/kernel/util%20src/system/libroot%0A%20src/system/libroot/os%20src/system/libroot/posix/stdlib%0A%20src/system/runtime_loader&In-Reply-To=%3C20070727140951.794.1%40cs.tu-berlin.de%3E"
       TITLE="[Haiku-commits] r21715 - in haiku/trunk: headers/private/kernel headers/private/libroot src/kits src/kits/tracker src/system/kernel src/system/kernel/messaging src/system/kernel/util src/system/libroot src/system/libroot/os src/system/libroot/posix/stdlib src/system/runtime_loader">bonefish at cs.tu-berlin.de
       </A><BR>
    <I>Fri Jul 27 14:09:51 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003210.html">[Haiku-commits] r21715 - in haiku/trunk: headers/private/kernel	headers/private/libroot src/kits src/kits/tracker	src/system/kernel src/system/kernel/messaging	src/system/kernel/util src/system/libroot	src/system/libroot/os src/system/libroot/posix/stdlib	src/system/runtime_loader
</A></li>
        <LI>Next message: <A HREF="003240.html">[Haiku-commits] r21715 - in haiku/trunk: headers/private/kernel headers/private/libroot src/kits src/kits/tracker src/system/kernel src/system/kernel/messaging src/system/kernel/util src/system/libroot src/system/libroot/os src/system/libroot/posix/stdlib src/system/runtime_loader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3218">[ date ]</a>
              <a href="thread.html#3218">[ thread ]</a>
              <a href="subject.html#3218">[ subject ]</a>
              <a href="author.html#3218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 2007-07-27 at 04:32:23 [+0200], axeld at BerliOS &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">axeld at mail.berlios.de</A>&gt; 
wrote:
&gt;<i> Author: axeld
</I>&gt;<i> Date: 2007-07-27 04:32:19 +0200 (Fri, 27 Jul 2007)
</I>&gt;<i> New Revision: 21715
</I>&gt;<i> ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=21715&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=21715&amp;view=rev</A>
</I>&gt;<i> 
</I>&gt;<i> Modified:
</I>&gt;<i>    haiku/trunk/headers/private/kernel/syscalls.h
</I>&gt;<i>    haiku/trunk/headers/private/kernel/team.h
</I>&gt;<i>    haiku/trunk/headers/private/kernel/user_runtime.h
</I>&gt;<i>    haiku/trunk/headers/private/libroot/libroot_private.h
</I>&gt;<i>    haiku/trunk/src/kits/Jamfile
</I>&gt;<i>    haiku/trunk/src/kits/tracker/FSUtils.cpp
</I>&gt;<i>    haiku/trunk/src/system/kernel/messaging/Jamfile
</I>&gt;<i>    haiku/trunk/src/system/kernel/messaging/KMessage.cpp
</I>&gt;<i>    haiku/trunk/src/system/kernel/team.c
</I>&gt;<i>    haiku/trunk/src/system/kernel/util/kernel_cpp.cpp
</I>&gt;<i>    haiku/trunk/src/system/libroot/libroot_init.c
</I>&gt;<i>    haiku/trunk/src/system/libroot/os/image.c
</I>&gt;<i>    haiku/trunk/src/system/libroot/posix/stdlib/env.c
</I>&gt;<i>    haiku/trunk/src/system/runtime_loader/Jamfile
</I>&gt;<i>    haiku/trunk/src/system/runtime_loader/elf.cpp
</I>&gt;<i>    haiku/trunk/src/system/runtime_loader/heap.cpp
</I>&gt;<i>    haiku/trunk/src/system/runtime_loader/runtime_loader.c
</I>&gt;<i>    haiku/trunk/src/system/runtime_loader/runtime_loader_private.h
</I>&gt;<i>    haiku/trunk/src/system/runtime_loader/utility.cpp
</I>&gt;<i> Log:
</I>&gt;<i> * Added a mechanism to retrieve a BMessage with eventual error descriptions
</I>&gt;<i>   for _kern_load_image().
</I>&gt;<i> * Added KMessage to the runtime_loader (a bit hacky, though) - it will use
</I>&gt;<i>   it to deliver the above mentioned functionality.
</I>
Hacky indeed. Did anything speak against just defining the required *_port() 
symbols in the loader? Or probably even better, use KMessage in 
KMESSAGE_CONTAINER_ONLY mode and send it yourself (maybe add a 
KMessage::SetDeliveryInfo()).

&gt;<i> * load_dependencies() did return the wrong status code in case a library
</I>&gt;<i>   was missing; now it returns B_MISSING_LIBRARY.
</I>&gt;<i> * load_dependencies() will now try to load all dependencies when a report
</I>&gt;<i>   message is requested; therefore, all missing libraries are listed.
</I>&gt;<i> * Renamed uspace_program_args to user_space_program_args.
</I>&gt;<i> * The kernel filled in various members of the user_space_program_args 
</I>&gt;<i> structure
</I>&gt;<i>   unsafely, ie. was not using user_memcpy().
</I>&gt;<i> * Renamed some local variables in team.c to better fit our style guide (ie.
</I>&gt;<i>   uargs to userArgs).
</I>&gt;<i> * Changed Tracker to use the new _kern_load_image() variant on Haiku to 
</I>&gt;<i> retrieve
</I>&gt;<i>   and report all missing libraries. This fixes bug #1324.
</I>
Am I the only one who's not overly happy with the Tracker (i.e. a more or 
less normal app) using syscalls directly? It smells like the 
BRoster::Launch() methods should have an additional BMessage* errorMessage 
parameter.

CU, Ingo

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003210.html">[Haiku-commits] r21715 - in haiku/trunk: headers/private/kernel	headers/private/libroot src/kits src/kits/tracker	src/system/kernel src/system/kernel/messaging	src/system/kernel/util src/system/libroot	src/system/libroot/os src/system/libroot/posix/stdlib	src/system/runtime_loader
</A></li>
	<LI>Next message: <A HREF="003240.html">[Haiku-commits] r21715 - in haiku/trunk: headers/private/kernel headers/private/libroot src/kits src/kits/tracker src/system/kernel src/system/kernel/messaging src/system/kernel/util src/system/libroot src/system/libroot/os src/system/libroot/posix/stdlib src/system/runtime_loader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3218">[ date ]</a>
              <a href="thread.html#3218">[ thread ]</a>
              <a href="subject.html#3218">[ subject ]</a>
              <a href="author.html#3218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
