<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r21721 - in haiku/trunk:	headers/private/kernel/disk_device_manager	src/system/kernel/disk_device_manager	src/system/kernel/disk_device_manager/jobs
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r21721%20-%20in%20haiku/trunk%3A%0A%09headers/private/kernel/disk_device_manager%0A%09src/system/kernel/disk_device_manager%0A%09src/system/kernel/disk_device_manager/jobs&In-Reply-To=%3C200707271632.l6RGWwMN021110%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003220.html">
   <LINK REL="Next"  HREF="003222.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r21721 - in haiku/trunk:	headers/private/kernel/disk_device_manager	src/system/kernel/disk_device_manager	src/system/kernel/disk_device_manager/jobs</H1>
    <B>bonefish at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r21721%20-%20in%20haiku/trunk%3A%0A%09headers/private/kernel/disk_device_manager%0A%09src/system/kernel/disk_device_manager%0A%09src/system/kernel/disk_device_manager/jobs&In-Reply-To=%3C200707271632.l6RGWwMN021110%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r21721 - in haiku/trunk:	headers/private/kernel/disk_device_manager	src/system/kernel/disk_device_manager	src/system/kernel/disk_device_manager/jobs">bonefish at mail.berlios.de
       </A><BR>
    <I>Fri Jul 27 18:32:58 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003220.html">[Haiku-commits] r21720 -	haiku/trunk/src/system/kernel/disk_device_manager/jobs
</A></li>
        <LI>Next message: <A HREF="003222.html">[Haiku-commits] r21722 - haiku/trunk/src/kits/storage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3221">[ date ]</a>
              <a href="thread.html#3221">[ thread ]</a>
              <a href="subject.html#3221">[ subject ]</a>
              <a href="author.html#3221">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: bonefish
Date: 2007-07-27 18:32:47 +0200 (Fri, 27 Jul 2007)
New Revision: 21721
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=21721&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=21721&amp;view=rev</A>

Modified:
   haiku/trunk/headers/private/kernel/disk_device_manager/KDiskDeviceJob.h
   haiku/trunk/headers/private/kernel/disk_device_manager/KDiskSystem.h
   haiku/trunk/headers/private/kernel/disk_device_manager/KFileSystem.h
   haiku/trunk/headers/private/kernel/disk_device_manager/KPartition.h
   haiku/trunk/headers/private/kernel/disk_device_manager/KPartitioningSystem.h
   haiku/trunk/headers/private/kernel/disk_device_manager/KPhysicalPartition.h
   haiku/trunk/headers/private/kernel/disk_device_manager/KShadowPartition.h
   haiku/trunk/src/system/kernel/disk_device_manager/KDiskDeviceJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/KDiskDeviceJobFactory.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/KPartitioningSystem.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/ddm_userland_interface.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KCreateChildJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KCreateChildJob.h
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KDefragmentJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KDefragmentJob.h
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KDeleteChildJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KDeleteChildJob.h
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KInitializeJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KInitializeJob.h
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KMoveJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KMoveJob.h
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KRepairJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KRepairJob.h
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KResizeJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KResizeJob.h
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KScanPartitionJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KScanPartitionJob.h
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KSetNameJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KSetNameJob.h
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KSetParametersJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KSetParametersJob.h
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KSetTypeJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KSetTypeJob.h
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KUninitializeJob.cpp
   haiku/trunk/src/system/kernel/disk_device_manager/jobs/KUninitializeJob.h
Log:
* Style cleanup.
* Moved method documentation from headers to source files.
* Fixed small problems (memory leaks, unsafe string duplication,...).
* Added TODOs where I spotted problems.


Modified: haiku/trunk/headers/private/kernel/disk_device_manager/KDiskDeviceJob.h
===================================================================
--- haiku/trunk/headers/private/kernel/disk_device_manager/KDiskDeviceJob.h	2007-07-27 15:37:23 UTC (rev 21720)
+++ haiku/trunk/headers/private/kernel/disk_device_manager/KDiskDeviceJob.h	2007-07-27 16:32:47 UTC (rev 21721)
@@ -1,5 +1,11 @@
-// KDiskDeviceJob.h
-
+/*
+ * Copyright 2003-2007, Haiku, Inc. All Rights Reserved.
+ * Distributed under the terms of the MIT License.
+ *
+ * Authors:
+ *		Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bonefish at cs.tu-berlin.de</A>&gt;
+ *		Lubos Kulic
+ */
 #ifndef _K_DISK_DEVICE_JOB_H
 #define _K_DISK_DEVICE_JOB_H
 
@@ -15,38 +21,19 @@
 
 /**
  * Represents some action executed on the disk device.
- * 
- * - 
  */
 class KDiskDeviceJob {
 public:
-	/**
-	 * Creates a new job
-	 * 
-	 * \param type actual type of the job (see DiskDeviceDefs.h for details)
-	 * \param partitionID the partition/device on which the action should be executed
-	 * \param scopeID partition/device which is the highest in the hierarchy (i.e. closest
-	 * to the root) that can be affected by the action
- * 		- every descendant of this partition is marked busy and all ancestors are marked descendant-
-	busy
-	 */
 	KDiskDeviceJob(uint32 type, partition_id partitionID,
 				   partition_id scopeID = -1);
 	virtual ~KDiskDeviceJob();
 
-	/**
-	 * Unique identification of the job
-	 */
 	disk_job_id ID() const;
 
 	void SetJobQueue(KDiskDeviceJobQueue *queue);
 	KDiskDeviceJobQueue *JobQueue() const;
 
-	/**
-	 * Gets actual type of the action
-	 */
 	uint32 Type() const;
-
 	
 	void SetStatus(uint32 status);
 	uint32 Status() const;
@@ -81,21 +68,6 @@
 	status_t GetInfo(user_disk_device_job_info *info);
 	status_t GetProgressInfo(disk_device_job_progress_info *info);
 
-	/**
-	 * Do the actual work of the job.
-	 * 
-	 * - is supposed to be implemented in descendants
-	 * - doesn't have any parameter - every operation needs different ones -&gt; they're passed
-	 * 		to the constructor
-	 * - the implementations will 
-	 * 		- check the parameters given in constructor (e.g. if given partition exists...)
-	 * 		- check whether the partition has needed disk system (its own or parent - depends
-	 * 			on the operation)
-	 * 		- using the disk system, validate the operation for given params
-	 * 		- finally execute the action
-	 * 
-	 * \return B_OK when everything went OK, some error otherwise
-	 */
 	virtual status_t Do() = 0;
 
 private:
@@ -116,27 +88,10 @@
 
 	static disk_job_id	fNextID;
 	
-private:
-	/**
-	 * Visitor which checks if every descendant of given partition is busy or descendant-busy
-	 */
-	struct IsNotBusyVisitor	: KPartitionVisitor {
-		virtual bool VisitPre(KPartition * partition);
-	};
-	IsNotBusyVisitor fNotBusyVisitor;
-	
 protected: 
-	//some stuff useful for all descendants
+	// some stuff useful for all descendants
 		
-	/**
-	 * Checks if there's any descendant which is not busy/descendant-busy.
-	 * 
-	 * - the condition of busy descendant is common for many disk device operations -&gt;
-	 * 		many jobs can use this
-	 * 
-	 * \param partition the root of checked subtree of the whole partition hieararchy
-	 */
-	bool isPartitionNotBusy( KPartition * partition );	
+	bool IsPartitionNotBusy(KPartition* partition);	
 	
 };
 

Modified: haiku/trunk/headers/private/kernel/disk_device_manager/KDiskSystem.h
===================================================================
--- haiku/trunk/headers/private/kernel/disk_device_manager/KDiskSystem.h	2007-07-27 15:37:23 UTC (rev 21720)
+++ haiku/trunk/headers/private/kernel/disk_device_manager/KDiskSystem.h	2007-07-27 16:32:47 UTC (rev 21721)
@@ -1,5 +1,10 @@
-// KDiskSystem.h
-
+/*
+ * Copyright 2003-2007, Haiku, Inc. All Rights Reserved.
+ * Distributed under the terms of the MIT License.
+ *
+ * Authors:
+ *		Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bonefish at cs.tu-berlin.de</A>&gt;
+ */
 #ifndef _K_DISK_DEVICE_SYSTEM_H
 #define _K_DISK_DEVICE_SYSTEM_H
 
@@ -13,7 +18,7 @@
 class KDiskDeviceJob;
 class KPartition;
 
-///	\brief Common ancestor for disk system add-on wrappers
+//!	\brief Common ancestor for disk system add-on wrappers
 class KDiskSystem {
 public:
 	KDiskSystem(const char *name);

Modified: haiku/trunk/headers/private/kernel/disk_device_manager/KFileSystem.h
===================================================================
--- haiku/trunk/headers/private/kernel/disk_device_manager/KFileSystem.h	2007-07-27 15:37:23 UTC (rev 21720)
+++ haiku/trunk/headers/private/kernel/disk_device_manager/KFileSystem.h	2007-07-27 16:32:47 UTC (rev 21721)
@@ -1,8 +1,13 @@
-// KFileSystem.h
-//
-// KFileSystem implements the KDiskSystem interface for file systems.
-// It works with the FS API.
-
+/*
+ * Copyright 2003-2007, Haiku, Inc. All Rights Reserved.
+ * Distributed under the terms of the MIT License.
+ *
+ * Authors:
+ *		Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bonefish at cs.tu-berlin.de</A>&gt;
+ *
+ * KFileSystem implements the KDiskSystem interface for file systems.
+ * It works with the FS API.
+ */
 #ifndef _K_FILE_DISK_DEVICE_SYSTEM_H
 #define _K_FILE_DISK_DEVICE_SYSTEM_H
 
@@ -13,7 +18,7 @@
 namespace BPrivate {
 namespace DiskDevice {
 
-///	\brief Wrapper for the C interface of a filesystem add-on.
+//!	\brief Wrapper for the C interface of a filesystem add-on.
 class KFileSystem : public KDiskSystem {
 public:
 	KFileSystem(const char *name);

Modified: haiku/trunk/headers/private/kernel/disk_device_manager/KPartition.h
===================================================================
--- haiku/trunk/headers/private/kernel/disk_device_manager/KPartition.h	2007-07-27 15:37:23 UTC (rev 21720)
+++ haiku/trunk/headers/private/kernel/disk_device_manager/KPartition.h	2007-07-27 16:32:47 UTC (rev 21721)
@@ -1,5 +1,10 @@
-// KPartition.h
-
+/*
+ * Copyright 2003-2007, Haiku, Inc. All Rights Reserved.
+ * Distributed under the terms of the MIT License.
+ *
+ * Authors:
+ *		Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bonefish at cs.tu-berlin.de</A>&gt;
+ */
 #ifndef _K_DISK_DEVICE_PARTITION_H
 #define _K_DISK_DEVICE_PARTITION_H
 
@@ -21,7 +26,7 @@
 class KPhysicalPartition;
 class KShadowPartition;
 
-///	\brief Class representing a single partition.
+//!	\brief Class representing a single partition.
 class KPartition {
 public:
 	KPartition(partition_id id = -1);

Modified: haiku/trunk/headers/private/kernel/disk_device_manager/KPartitioningSystem.h
===================================================================
--- haiku/trunk/headers/private/kernel/disk_device_manager/KPartitioningSystem.h	2007-07-27 15:37:23 UTC (rev 21720)
+++ haiku/trunk/headers/private/kernel/disk_device_manager/KPartitioningSystem.h	2007-07-27 16:32:47 UTC (rev 21721)
@@ -1,5 +1,10 @@
-// KPartitioningSystem.h
-
+/*
+ * Copyright 2003-2007, Haiku, Inc. All Rights Reserved.
+ * Distributed under the terms of the MIT License.
+ *
+ * Authors:
+ *		Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bonefish at cs.tu-berlin.de</A>&gt;
+ */
 #ifndef _K_PARTITIONING_DISK_DEVICE_SYSTEM_H
 #define _K_PARTITIONING_DISK_DEVICE_SYSTEM_H
 
@@ -24,9 +29,9 @@
 
 	// Scanning
 
-	/// Try to identify a given partition
+	//! Try to identify a given partition
 	virtual float Identify(KPartition *partition, void **cookie);
-	/// Scan the partition
+	//! Scan the partition
 	virtual status_t Scan(KPartition *partition, void *cookie);
 	virtual void FreeIdentifyCookie(KPartition *partition, void *cookie);
 	virtual void FreeCookie(KPartition *partition);
@@ -34,132 +39,132 @@
 
 	// Querying
 
-	/// Check whether the add-on supports repairing this partition.
+	//! Check whether the add-on supports repairing this partition.
 	virtual bool SupportsRepairing(KPartition *partition, bool checkOnly,
 								   bool *whileMounted);
-	/// Check whether the add-on supports resizing this partition.
+	//! Check whether the add-on supports resizing this partition.
 	virtual bool SupportsResizing(KPartition *partition, bool *whileMounted);
-	/// Check whether the add-on supports resizing children of this partition.
+	//! Check whether the add-on supports resizing children of this partition.
 	virtual bool SupportsResizingChild(KPartition *child);
-	/// Check whether the add-on supports moving this partition.
+	//! Check whether the add-on supports moving this partition.
 	virtual bool SupportsMoving(KPartition *partition, bool *isNoOp);
-	/// Check whether the add-on supports moving children of this partition.
+	//! Check whether the add-on supports moving children of this partition.
 	virtual bool SupportsMovingChild(KPartition *child);
-	/// Check whether the add-on supports setting name of this partition.
+	//! Check whether the add-on supports setting name of this partition.
 	virtual bool SupportsSettingName(KPartition *partition);
-	/// Check whether the add-on supports setting name to content of this partition.
+	//! Check whether the add-on supports setting name to content of this partition.
 	virtual bool SupportsSettingContentName(KPartition *partition,
 											bool *whileMounted);
-	/// Check whether the add-on supports setting type of this partition.
+	//! Check whether the add-on supports setting type of this partition.
 	virtual bool SupportsSettingType(KPartition *partition);
-	/// Check whether the add-on supports setting parameters of this partition.
+	//! Check whether the add-on supports setting parameters of this partition.
 	virtual bool SupportsSettingParameters(KPartition *partition);
-	/// Check whether the add-on supports setting parameters to content of this partition.
+	//! Check whether the add-on supports setting parameters to content of this partition.
 	virtual bool SupportsSettingContentParameters(KPartition *partition,
 												  bool *whileMounted);
-	/// Check whether the add-on supports initializing this partition.
+	//! Check whether the add-on supports initializing this partition.
 	virtual bool SupportsInitializing(KPartition *partition);
-	/// Check whether the add-on supports initializing a child of this partition.
+	//! Check whether the add-on supports initializing a child of this partition.
 	virtual bool SupportsInitializingChild(KPartition *child,
 										   const char *diskSystem);
-	/// Check whether the add-on supports creating children of this partition.
+	//! Check whether the add-on supports creating children of this partition.
 	virtual bool SupportsCreatingChild(KPartition *partition);
-	/// Check whether the add-on supports deleting children of this partition.
+	//! Check whether the add-on supports deleting children of this partition.
 	virtual bool SupportsDeletingChild(KPartition *child);
-	/// Check whether the add-on is a subsystem for a given partition.
+	//! Check whether the add-on is a subsystem for a given partition.
 	virtual bool IsSubSystemFor(KPartition *partition);
 
-	/// Validates parameters for resizing a partition
+	//! Validates parameters for resizing a partition
 	virtual bool ValidateResize(KPartition *partition, off_t *size);
-	/// Validates parameters for resizing a child partition
+	//! Validates parameters for resizing a child partition
 	virtual bool ValidateResizeChild(KPartition *child, off_t *size);
-	/// Validates parameters for moving a partition
+	//! Validates parameters for moving a partition
 	virtual bool ValidateMove(KPartition *partition, off_t *start);
-	/// Validates parameters for moving a child partition
+	//! Validates parameters for moving a child partition
 	virtual bool ValidateMoveChild(KPartition *child, off_t *start);
-	/// Validates parameters for setting name of a partition
+	//! Validates parameters for setting name of a partition
 	virtual bool ValidateSetName(KPartition *partition, char *name);
-	/// Validates parameters for setting name to content of a partition
+	//! Validates parameters for setting name to content of a partition
 	virtual bool ValidateSetContentName(KPartition *partition, char *name);
-	/// Validates parameters for setting type of a partition
+	//! Validates parameters for setting type of a partition
 	virtual bool ValidateSetType(KPartition *partition, const char *type);
-	/// Validates parameters for setting parameters of a partition
+	//! Validates parameters for setting parameters of a partition
 	virtual bool ValidateSetParameters(KPartition *partition,
 									   const char *parameters);
-	/// Validates parameters for setting parameters to content of a partition
+	//! Validates parameters for setting parameters to content of a partition
 	virtual bool ValidateSetContentParameters(KPartition *parameters,
 											  const char *parameters);
-	/// Validates parameters for initializing a partition
+	//! Validates parameters for initializing a partition
 	virtual bool ValidateInitialize(KPartition *partition, char *name,
 									const char *parameters);
-	/// Validates parameters for creating child of a partition
+	//! Validates parameters for creating child of a partition
 	virtual bool ValidateCreateChild(KPartition *partition, off_t *start,
 									 off_t *size, const char *type,
 									 const char *parameters, int32 *index);
-	/// Counts partitionable spaces on a partition
+	//! Counts partitionable spaces on a partition
 	virtual int32 CountPartitionableSpaces(KPartition *partition);
-	/// Retrieves a list of partitionable spaces on a partition
+	//! Retrieves a list of partitionable spaces on a partition
 	virtual status_t GetPartitionableSpaces(KPartition *partition,
 											partitionable_space_data *buffer,
 											int32 count,
 											int32 *actualCount = NULL);
 
-	/// Iterates through supported partition types
+	//! Iterates through supported partition types
 	virtual status_t GetNextSupportedType(KPartition *partition, int32 *cookie,
 										  char *type);
-	/// Translates the &quot;pretty&quot; content type to an internal type
+	//! Translates the &quot;pretty&quot; content type to an internal type
 	virtual status_t GetTypeForContentType(const char *contentType,
 										   char *type);
 
 	// Shadow partition modification
 
-	/// Calls for additional modifications when shadow partition is changed
+	//! Calls for additional modifications when shadow partition is changed
 	virtual status_t ShadowPartitionChanged(KPartition *partition,
 											uint32 operation);
 
 	// Writing
 
-	/// Repairs a partition
+	//! Repairs a partition
 	virtual status_t Repair(KPartition *partition, bool checkOnly,
 							KDiskDeviceJob *job);
-	/// Resizes a partition
+	//! Resizes a partition
 	virtual status_t Resize(KPartition *partition, off_t size,
 							KDiskDeviceJob *job);
-	/// Resizes child of a partition
+	//! Resizes child of a partition
 	virtual status_t ResizeChild(KPartition *child, off_t size,
 								 KDiskDeviceJob *job);
-	/// Moves a partition
+	//! Moves a partition
 	virtual status_t Move(KPartition *partition, off_t offset,
 						  KDiskDeviceJob *job);
-	/// Moves child of a partition
+	//! Moves child of a partition
 	virtual status_t MoveChild(KPartition *child, off_t offset,
 							   KDiskDeviceJob *job);
-	/// Sets name to a partition
+	//! Sets name of a partition
 	virtual status_t SetName(KPartition *partition, char *name,
 							 KDiskDeviceJob *job);
-	/// Sets name to content of a partition
+	//! Sets name of the content of a partition
 	virtual status_t SetContentName(KPartition *partition, char *name,
 									KDiskDeviceJob *job);
-	/// Sets type of a partition
+	//! Sets type of a partition
 	virtual status_t SetType(KPartition *partition, char *type,
 							 KDiskDeviceJob *job);
-	/// Sets parameters of a partition
+	//! Sets parameters of a partition
 	virtual status_t SetParameters(KPartition *partition,
 								   const char *parameters,
 								   KDiskDeviceJob *job);
-	/// Sets parameters to content of a partition
+	//! Sets parameters to content of a partition
 	virtual status_t SetContentParameters(KPartition *partition,
 										  const char *parameters,
 										  KDiskDeviceJob *job);
-	/// Creates a child partition
+	//! Creates a child partition
 	virtual status_t CreateChild(KPartition *partition, off_t offset,
 								 off_t size, const char *type,
 								 const char *parameters, KDiskDeviceJob *job,
 								 KPartition **child = NULL,
 								 partition_id childID = -1);
-	/// Deletes a child partition
+	//! Deletes a child partition
 	virtual status_t DeleteChild(KPartition *child, KDiskDeviceJob *job);
-	/// Initializes a partition with this partitioning system
+	//! Initializes a partition with this partitioning system
 	virtual status_t Initialize(KPartition *partition, const char *name,
 								const char *parameters, KDiskDeviceJob *job);
 

Modified: haiku/trunk/headers/private/kernel/disk_device_manager/KPhysicalPartition.h
===================================================================
--- haiku/trunk/headers/private/kernel/disk_device_manager/KPhysicalPartition.h	2007-07-27 15:37:23 UTC (rev 21720)
+++ haiku/trunk/headers/private/kernel/disk_device_manager/KPhysicalPartition.h	2007-07-27 16:32:47 UTC (rev 21721)
@@ -1,5 +1,10 @@
-// KPartition.h
-
+/*
+ * Copyright 2003-2007, Haiku, Inc. All Rights Reserved.
+ * Distributed under the terms of the MIT License.
+ *
+ * Authors:
+ *		Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bonefish at cs.tu-berlin.de</A>&gt;
+ */
 #ifndef _K_DISK_DEVICE_PHYSICAL_PARTITION_H
 #define _K_DISK_DEVICE_PHYSICAL_PARTITION_H
 
@@ -12,7 +17,7 @@
 class KDiskSystem;
 class KShadowPartition;
 
-/// \brief Class representing an existing partition.
+//! \brief Class representing an existing partition.
 class KPhysicalPartition : public KPartition {
 public:
 	KPhysicalPartition(partition_id id = -1);

Modified: haiku/trunk/headers/private/kernel/disk_device_manager/KShadowPartition.h
===================================================================
--- haiku/trunk/headers/private/kernel/disk_device_manager/KShadowPartition.h	2007-07-27 15:37:23 UTC (rev 21720)
+++ haiku/trunk/headers/private/kernel/disk_device_manager/KShadowPartition.h	2007-07-27 16:32:47 UTC (rev 21721)
@@ -1,5 +1,10 @@
-// KPartition.h
-
+/*
+ * Copyright 2003-2007, Haiku, Inc. All Rights Reserved.
+ * Distributed under the terms of the MIT License.
+ *
+ * Authors:
+ *		Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bonefish at cs.tu-berlin.de</A>&gt;
+ */
 #ifndef _K_DISK_DEVICE_SHADOW_PARTITION_H
 #define _K_DISK_DEVICE_SHADOW_PARTITION_H
 
@@ -11,9 +16,10 @@
 
 class KPhysicalPartition;
 
-///	\brief Class representing a shadow of an existing partition.
-///
-///	See \ref path_kernel_structures for more information.
+/*!	\brief Class representing a shadow of an existing partition.
+
+	See \ref path_kernel_structures for more information.
+*/
 class KShadowPartition : public KPartition, private KPartitionListener {
 public:
 	KShadowPartition(KPhysicalPartition *physicalPartition);

Modified: haiku/trunk/src/system/kernel/disk_device_manager/KDiskDeviceJob.cpp
===================================================================
--- haiku/trunk/src/system/kernel/disk_device_manager/KDiskDeviceJob.cpp	2007-07-27 15:37:23 UTC (rev 21720)
+++ haiku/trunk/src/system/kernel/disk_device_manager/KDiskDeviceJob.cpp	2007-07-27 16:32:47 UTC (rev 21721)
@@ -1,4 +1,11 @@
-// KDiskDeviceJob.cpp
+/*
+ * Copyright 2003-2007, Haiku, Inc. All Rights Reserved.
+ * Distributed under the terms of the MIT License.
+ *
+ * Authors:
+ *		Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bonefish at cs.tu-berlin.de</A>&gt;
+ *		Lubos Kulic &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">lubos at radical.ed</A>&gt;
+ */
 
 #include &lt;stdio.h&gt;
 
@@ -14,8 +21,19 @@
 #define OUT dprintf
 
 // constructor
+/**
+	Creates a new job
+	
+	\param type actual type of the job (see DiskDeviceDefs.h for details)
+	\param partitionID the partition/device on which the action should be
+		executed
+	\param scopeID partition/device which is the highest in the hierarchy (i.e.
+		closest to the root) that can be affected by the action - every
+		descendant of this partition is marked busy and all ancestors are marked
+		descendant-busy
+*/
 KDiskDeviceJob::KDiskDeviceJob(uint32 type, partition_id partitionID,
-							   partition_id scopeID)
+		partition_id scopeID)
 	: fID(_NextID()),
 	  fJobQueue(NULL),
 	  fType(type),
@@ -233,6 +251,23 @@
 	return B_OK;
 }
 
+/** \fn status_t KDiskDevice::Do()
+	Do the actual work of the job.
+
+	- is supposed to be implemented in descendants
+	- doesn't have any parameter - every operation needs different ones
+		-&gt; they're passed to the constructor
+	- the implementations will 
+		- check the parameters given in constructor (e.g. if given partition
+			exists...)
+		- check whether the partition has needed disk system (its own or
+			parent - depends on the operation)
+		- using the disk system, validate the operation for given params
+		- finally execute the action
+
+	\return B_OK when everything went OK, some error otherwise
+*/
+
 // _NextID
 disk_job_id
 KDiskDeviceJob::_NextID()
@@ -244,16 +279,29 @@
 disk_job_id KDiskDeviceJob::fNextID = 0;
 
 
-// IsNotBusyVisitor
-bool KDiskDeviceJob::IsNotBusyVisitor::VisitPre( KPartition * partition ) {
-	return !(partition-&gt;IsBusy() || partition-&gt;IsDescendantBusy());
-}
+/**
+	Checks if there's any descendant which is not busy/descendant-busy.
 
+	- the condition of busy descendant is common for many disk device operations -&gt;
+			many jobs can use this
 
-bool KDiskDeviceJob::isPartitionNotBusy( KPartition * partition ) {
+	\param partition the root of checked subtree of the whole partition
+		hierarchy
+*/
+bool
+KDiskDeviceJob::IsPartitionNotBusy(KPartition* partition)
+{
 	if( !partition ) {
 		return false; 
 	}
+
+	struct IsNotBusyVisitor	: KPartitionVisitor {
+		virtual bool VisitPre(KPartition* partition)
+		{
+			return !(partition-&gt;IsBusy() || partition-&gt;IsDescendantBusy());
+		}
+	};
+	IsNotBusyVisitor notBusyVisitor;
 	
-	return partition-&gt;VisitEachDescendant(&amp;fNotBusyVisitor);
+	return partition-&gt;VisitEachDescendant(&amp;notBusyVisitor);
 }

Modified: haiku/trunk/src/system/kernel/disk_device_manager/KDiskDeviceJobFactory.cpp
===================================================================
--- haiku/trunk/src/system/kernel/disk_device_manager/KDiskDeviceJobFactory.cpp	2007-07-27 15:37:23 UTC (rev 21720)
+++ haiku/trunk/src/system/kernel/disk_device_manager/KDiskDeviceJobFactory.cpp	2007-07-27 16:32:47 UTC (rev 21721)
@@ -1,11 +1,12 @@
 /*
- * Copyright 2004-2006, Haiku, Inc. All rights reserved.
- * Copyright 2003-2004, Ingo Weinhold, <A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bonefish at cs.tu-berlin.de.</A> All rights reserved.
+ * Copyright 2003-2007, Haiku, Inc. All Rights Reserved.
+ * Distributed under the terms of the MIT License.
  *
- * Distributed under the terms of the MIT License.
+ * Authors:
+ *		Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bonefish at cs.tu-berlin.de</A>&gt;
+ *		Lubos Kulic &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">lubos at radical.ed</A>&gt;
  */
 
-
 #include &lt;util/kernel_cpp.h&gt;
 
 #include &quot;KDiskDeviceJob.h&quot;
@@ -24,6 +25,7 @@
 #include &quot;KSetTypeJob.h&quot;
 #include &quot;KUninitializeJob.h&quot;
 
+
 using namespace std;
 
 
@@ -61,8 +63,9 @@
 
 
 KDiskDeviceJob *
-KDiskDeviceJobFactory::CreateMoveJob(partition_id parentID, partition_id partitionID,
-	off_t offset, const partition_id *contentsToMove, int32 contentsToMoveCount)
+KDiskDeviceJobFactory::CreateMoveJob(partition_id parentID,
+	partition_id partitionID, off_t offset, const partition_id *contentsToMove,
+	int32 contentsToMoveCount)
 {
 	// TODO: this is wierd, what in hell are contentsToMove etc?
 	return new(nothrow) KMoveJob(parentID, partitionID, offset);
@@ -113,7 +116,8 @@
 KDiskDeviceJobFactory::CreateInitializeJob(partition_id partitionID,
 	disk_system_id diskSystemID, const char *name, const char *parameters)
 {
-	return new(nothrow) KInitializeJob(partitionID, diskSystemID, name, parameters);
+	return new(nothrow) KInitializeJob(partitionID, diskSystemID, name,
+		parameters);
 }
 
 
@@ -129,7 +133,8 @@
 	partition_id childID, off_t offset, off_t size, const char *type,
 	const char *parameters)
 {
-	return new(nothrow) KCreateChildJob(partitionID, childID, offset, size, type, parameters);
+	return new(nothrow) KCreateChildJob(partitionID, childID, offset, size,
+		type, parameters);
 }
 
 

Modified: haiku/trunk/src/system/kernel/disk_device_manager/KPartitioningSystem.cpp
===================================================================
--- haiku/trunk/src/system/kernel/disk_device_manager/KPartitioningSystem.cpp	2007-07-27 15:37:23 UTC (rev 21720)
+++ haiku/trunk/src/system/kernel/disk_device_manager/KPartitioningSystem.cpp	2007-07-27 16:32:47 UTC (rev 21721)
@@ -1,3 +1,12 @@
+/*
+ * Copyright 2003-2007, Haiku, Inc. All Rights Reserved.
+ * Distributed under the terms of the MIT License.
+ *
+ * Authors:
+ *		Ingo Weinhold &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">bonefish at cs.tu-berlin.de</A>&gt;
+ *		Lubos Kulic &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">lubos at radical.ed</A>&gt;
+ */
+
 /**	\file KPartitioningSystem.cpp
  *
  * 	\brief Implementation of \ref KPartitioningSystem class
@@ -15,6 +24,7 @@
 #include &lt;KPartition.h&gt;
 #include &lt;KPartitioningSystem.h&gt;
 
+
 // constructor
 KPartitioningSystem::KPartitioningSystem(const char *name)
 	: KDiskSystem(name),
@@ -44,6 +54,7 @@
 }
 
 // Identify
+//! Try to identify a given partition
 float
 KPartitioningSystem::Identify(KPartition *partition, void **cookie)
 {
@@ -53,12 +64,13 @@
 	if (partition-&gt;Open(O_RDONLY, &amp;fd) != B_OK)
 		return -1;
 	float result = fModule-&gt;identify_partition(fd, partition-&gt;PartitionData(),
-											   cookie);
+		cookie);
 	close(fd);
 	return result;
 }
 
 // Scan
+//! Scan the partition
 status_t
 KPartitioningSystem::Scan(KPartition *partition, void *cookie)
 {
@@ -80,7 +92,7 @@
 	if (!partition || !fModule || !fModule-&gt;free_identify_partition_cookie)
 		return;
 	fModule-&gt;free_identify_partition_cookie(partition-&gt;PartitionData(),
-											cookie);
+		cookie);
 }
 
 // FreeCookie
@@ -108,9 +120,10 @@
 }
 
 // SupportsRepairing
+//! Check whether the add-on supports repairing this partition.
 bool
 KPartitioningSystem::SupportsRepairing(KPartition *partition, bool checkOnly,
-									   bool *whileMounted)
+	bool *whileMounted)
 {
 	bool _whileMounted = false;
 	if (!whileMounted)
@@ -126,9 +139,9 @@
 }
 
 // SupportsResizing
+//! Check whether the add-on supports resizing this partition.
 bool
-KPartitioningSystem::SupportsResizing(KPartition *partition,
-									  bool *whileMounted)
+KPartitioningSystem::SupportsResizing(KPartition *partition, bool *whileMounted)
 {
 	bool _whileMounted = false;
 	if (!whileMounted)
@@ -143,17 +156,18 @@
 }
 
 // SupportsResizingChild
+//! Check whether the add-on supports resizing children of this partition.
 bool
 KPartitioningSystem::SupportsResizingChild(KPartition *child)
 {
 	return (child &amp;&amp; child-&gt;Parent() &amp;&amp; child-&gt;ParentDiskSystem() == this
-			&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_resizing_child
-			&amp;&amp; fModule-&gt;supports_resizing_child(
-						child-&gt;Parent()-&gt;PartitionData(),
-						child-&gt;PartitionData()));
+		&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_resizing_child
+		&amp;&amp; fModule-&gt;supports_resizing_child(child-&gt;Parent()-&gt;PartitionData(),
+				child-&gt;PartitionData()));
 }
 
 // SupportsMoving
+//! Check whether the add-on supports moving this partition.
 bool
 KPartitioningSystem::SupportsMoving(KPartition *partition, bool *isNoOp)
 {
@@ -168,28 +182,33 @@
 }
 
 // SupportsMovingChild
+//! Check whether the add-on supports moving children of this partition.
 bool
 KPartitioningSystem::SupportsMovingChild(KPartition *child)
 {
 	return (child &amp;&amp; child-&gt;Parent() &amp;&amp; child-&gt;ParentDiskSystem() != this
-			&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_moving_child
-			&amp;&amp; fModule-&gt;supports_moving_child(child-&gt;Parent()-&gt;PartitionData(),
-											  child-&gt;PartitionData()));
+		&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_moving_child
+		&amp;&amp; fModule-&gt;supports_moving_child(child-&gt;Parent()-&gt;PartitionData(),
+				child-&gt;PartitionData()));
 }
 
 // SupportsSettingName
+//! Check whether the add-on supports setting name of this partition.
 bool
 KPartitioningSystem::SupportsSettingName(KPartition *partition)
 {
 	return (partition &amp;&amp; partition-&gt;ParentDiskSystem() == this
-			&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_setting_name
-			&amp;&amp; fModule-&gt;supports_setting_name(partition-&gt;PartitionData()));
+		&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_setting_name
+		&amp;&amp; fModule-&gt;supports_setting_name(partition-&gt;PartitionData()));
 }
 
 // SupportsSettingContentName
+/*! Check whether the add-on supports setting name of the content of this
+	partition.
+*/
 bool
 KPartitioningSystem::SupportsSettingContentName(KPartition *partition,
-												bool *whileMounted)
+	bool *whileMounted)
 {
 	bool _whileMounted = false;
 	if (!whileMounted)
@@ -205,28 +224,32 @@
 }
 
 // SupportsSettingType
+//! Check whether the add-on supports setting type of this partition.
 bool
 KPartitioningSystem::SupportsSettingType(KPartition *partition)
 {
 	return (partition &amp;&amp; partition-&gt;ParentDiskSystem() == this
-			&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_setting_type
-			&amp;&amp; fModule-&gt;supports_setting_type(partition-&gt;PartitionData()));
+		&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_setting_type
+		&amp;&amp; fModule-&gt;supports_setting_type(partition-&gt;PartitionData()));
 }
 
 // SupportsSettingParameters
+//! Check whether the add-on supports setting parameters of this partition.
 bool
 KPartitioningSystem::SupportsSettingParameters(KPartition *partition)
 {
 	return (partition &amp;&amp; partition-&gt;ParentDiskSystem() == this
-			&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_setting_parameters
-			&amp;&amp; fModule-&gt;supports_setting_parameters(
-					partition-&gt;PartitionData()));
+		&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_setting_parameters
+		&amp;&amp; fModule-&gt;supports_setting_parameters(partition-&gt;PartitionData()));
 }
 
 // SupportsSettingContentParameters
+/*! Check whether the add-on supports setting parameters of the content of this
+	partition.
+*/
 bool
 KPartitioningSystem::SupportsSettingContentParameters(KPartition *partition,
-													  bool *whileMounted)
+	bool *whileMounted)
 {
 	bool _whileMounted = false;
 	if (!whileMounted)
@@ -242,135 +265,149 @@
 }
 
 // SupportsInitializing
+//! Check whether the add-on supports initializing this partition.
 bool
 KPartitioningSystem::SupportsInitializing(KPartition *partition)
 {
 	return (partition &amp;&amp; fModule &amp;&amp; fModule-&gt;supports_initializing
-			&amp;&amp; fModule-&gt;supports_initializing(partition-&gt;PartitionData()));
+		&amp;&amp; fModule-&gt;supports_initializing(partition-&gt;PartitionData()));
 }
 
 // SupportsInitializingChild
+//! Check whether the add-on supports initializing a child of this partition.
 bool
 KPartitioningSystem::SupportsInitializingChild(KPartition *child,
-											   const char *diskSystem)
+	const char *diskSystem)
 {
 	return (child &amp;&amp; child-&gt;ParentDiskSystem() == this &amp;&amp; diskSystem
-			&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_initializing_child
-			&amp;&amp; fModule-&gt;supports_initializing_child(child-&gt;PartitionData(),
-													diskSystem));
+		&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_initializing_child
+		&amp;&amp; fModule-&gt;supports_initializing_child(child-&gt;PartitionData(),
+				diskSystem));
 }
 
 // SupportsCreatingChild
+//! Check whether the add-on supports creating children of this partition.
 bool
 KPartitioningSystem::SupportsCreatingChild(KPartition *partition)
 {
 	return (partition &amp;&amp; partition-&gt;DiskSystem() == this
-			&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_creating_child
-			&amp;&amp; fModule-&gt;supports_creating_child(partition-&gt;PartitionData()));
+		&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_creating_child
+		&amp;&amp; fModule-&gt;supports_creating_child(partition-&gt;PartitionData()));
 }
 
 // SupportsDeletingChild
+//! Check whether the add-on supports deleting children of this partition.
 bool
 KPartitioningSystem::SupportsDeletingChild(KPartition *child)
 {
 	return (child &amp;&amp; child-&gt;Parent() &amp;&amp; child-&gt;ParentDiskSystem() == this
-			&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_deleting_child
-			&amp;&amp; fModule-&gt;supports_deleting_child(
-					child-&gt;Parent()-&gt;PartitionData(), child-&gt;PartitionData()));
+		&amp;&amp; fModule &amp;&amp; fModule-&gt;supports_deleting_child
+		&amp;&amp; fModule-&gt;supports_deleting_child(child-&gt;Parent()-&gt;PartitionData(),
+				child-&gt;PartitionData()));
 }
 
 // IsSubSystemFor
+//! Check whether the add-on is a subsystem for a given partition.
 bool
 KPartitioningSystem::IsSubSystemFor(KPartition *partition)
 {
 	return (partition &amp;&amp; fModule &amp;&amp; fModule-&gt;is_sub_system_for
-			&amp;&amp; fModule-&gt;is_sub_system_for(partition-&gt;PartitionData()));
+		&amp;&amp; fModule-&gt;is_sub_system_for(partition-&gt;PartitionData()));
 }
 
 // ValidateResize
+//! Validates parameters for resizing a partition
 bool
 KPartitioningSystem::ValidateResize(KPartition *partition, off_t *size)
 {
 	return (partition &amp;&amp; size &amp;&amp; partition-&gt;DiskSystem() == this &amp;&amp; fModule
-			&amp;&amp; fModule-&gt;validate_resize
-			&amp;&amp; fModule-&gt;validate_resize(partition-&gt;PartitionData(), size));
+		&amp;&amp; fModule-&gt;validate_resize
+		&amp;&amp; fModule-&gt;validate_resize(partition-&gt;PartitionData(), size));
 }
 
 // ValidateResizeChild
+//! Validates parameters for resizing a child partition
 bool
 KPartitioningSystem::ValidateResizeChild(KPartition *child, off_t *size)
 {
 	return (child &amp;&amp; size &amp;&amp; child-&gt;Parent()
-			&amp;&amp; child-&gt;ParentDiskSystem() == this &amp;&amp; fModule
-			&amp;&amp; fModule-&gt;validate_resize_child
-			&amp;&amp; fModule-&gt;validate_resize_child(child-&gt;Parent()-&gt;PartitionData(),
-											  child-&gt;PartitionData(), size));
+		&amp;&amp; child-&gt;ParentDiskSystem() == this &amp;&amp; fModule
+		&amp;&amp; fModule-&gt;validate_resize_child
+		&amp;&amp; fModule-&gt;validate_resize_child(child-&gt;Parent()-&gt;PartitionData(),
+				child-&gt;PartitionData(), size));
 }
 
 // ValidateMove
+//! Validates parameters for moving a partition
 bool
 KPartitioningSystem::ValidateMove(KPartition *partition, off_t *start)
 {
 	return (partition &amp;&amp; start &amp;&amp; partition-&gt;DiskSystem() == this &amp;&amp; fModule
-			&amp;&amp; fModule-&gt;validate_move
-			&amp;&amp; fModule-&gt;validate_move(partition-&gt;PartitionData(), start));
+		&amp;&amp; fModule-&gt;validate_move
+		&amp;&amp; fModule-&gt;validate_move(partition-&gt;PartitionData(), start));
 }
 
 // ValidateMoveChild
+//! Validates parameters for moving a child partition
 bool
 KPartitioningSystem::ValidateMoveChild(KPartition *child, off_t *start)
 {
 	return (child &amp;&amp; start &amp;&amp; child-&gt;Parent()
-			&amp;&amp; child-&gt;ParentDiskSystem() == this &amp;&amp; fModule
-			&amp;&amp; fModule-&gt;validate_move_child
-			&amp;&amp; fModule-&gt;validate_move_child(child-&gt;Parent()-&gt;PartitionData(),
-											child-&gt;PartitionData(), start));
+		&amp;&amp; child-&gt;ParentDiskSystem() == this &amp;&amp; fModule
+		&amp;&amp; fModule-&gt;validate_move_child
+		&amp;&amp; fModule-&gt;validate_move_child(child-&gt;Parent()-&gt;PartitionData(),
+				child-&gt;PartitionData(), start));
 }
 
 // ValidateSetName
+//! Validates parameters for setting name of a partition
 bool
 KPartitioningSystem::ValidateSetName(KPartition *partition, char *name)
 {
 	return (partition &amp;&amp; name &amp;&amp; partition-&gt;Parent()
-			&amp;&amp; partition-&gt;ParentDiskSystem() == this &amp;&amp; fModule
-			&amp;&amp; fModule-&gt;validate_set_name
-			&amp;&amp; fModule-&gt;validate_set_name(partition-&gt;PartitionData(), name));
+		&amp;&amp; partition-&gt;ParentDiskSystem() == this &amp;&amp; fModule
+		&amp;&amp; fModule-&gt;validate_set_name
+		&amp;&amp; fModule-&gt;validate_set_name(partition-&gt;PartitionData(), name));
 }
 
 // ValidateSetContentName
+//! Validates parameters for setting name of the content of a partition
 bool
 KPartitioningSystem::ValidateSetContentName(KPartition *partition, char *name)
 {
 	return (partition &amp;&amp; name &amp;&amp; partition-&gt;DiskSystem() == this
-			&amp;&amp; fModule &amp;&amp; fModule-&gt;validate_set_content_name
-			&amp;&amp; fModule-&gt;validate_set_content_name(partition-&gt;PartitionData(),
-												  name));
+		&amp;&amp; fModule &amp;&amp; fModule-&gt;validate_set_content_name
+		&amp;&amp; fModule-&gt;validate_set_content_name(partition-&gt;PartitionData(),
+				name));
 }
 
 // ValidateSetType
+//! Validates parameters for setting type of a partition
 bool
 KPartitioningSystem::ValidateSetType(KPartition *partition, const char *type)
 {
 	return (partition &amp;&amp; type &amp;&amp; partition-&gt;ParentDiskSystem() == this
-			&amp;&amp; fModule &amp;&amp; fModule-&gt;validate_set_type
-			&amp;&amp; fModule-&gt;validate_set_type(partition-&gt;PartitionData(), type));
+		&amp;&amp; fModule &amp;&amp; fModule-&gt;validate_set_type
+		&amp;&amp; fModule-&gt;validate_set_type(partition-&gt;PartitionData(), type));
 }
 
 // ValidateSetParameters
+//! Validates parameters for setting parameters of a partition
 bool
 KPartitioningSystem::ValidateSetParameters(KPartition *partition,
-										   const char *parameters)
+	const char *parameters)
 {
 	return (partition &amp;&amp; partition-&gt;ParentDiskSystem() == this 
-			&amp;&amp; fModule &amp;&amp; fModule-&gt;validate_set_parameters
-			&amp;&amp; fModule-&gt;validate_set_parameters(partition-&gt;PartitionData(),
-					parameters));
+		&amp;&amp; fModule &amp;&amp; fModule-&gt;validate_set_parameters
+		&amp;&amp; fModule-&gt;validate_set_parameters(partition-&gt;PartitionData(),
+				parameters));
 }
 
 // ValidateSetContentParameters
+//! Validates parameters for setting parameters of the content of a partition
 bool
 KPartitioningSystem::ValidateSetContentParameters(KPartition *partition,
-												  const char *parameters)
+	const char *parameters)
 {
 	return (partition &amp;&amp; partition-&gt;DiskSystem() == this &amp;&amp; fModule
 			&amp;&amp; fModule-&gt;validate_set_content_parameters
@@ -379,33 +416,34 @@
 }
 
 // ValidateInitialize
+//! Validates parameters for initializing a partition
 bool
 KPartitioningSystem::ValidateInitialize(KPartition *partition, char *name,

[... truncated: 2648 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003220.html">[Haiku-commits] r21720 -	haiku/trunk/src/system/kernel/disk_device_manager/jobs
</A></li>
	<LI>Next message: <A HREF="003222.html">[Haiku-commits] r21722 - haiku/trunk/src/kits/storage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3221">[ date ]</a>
              <a href="thread.html#3221">[ thread ]</a>
              <a href="subject.html#3221">[ subject ]</a>
              <a href="author.html#3221">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
