<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r24312 - in haiku/trunk: headers/os/support src/kits/support
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%0A%20%3D%3Fiso-8859-15%3Fq%3Fr24312_-_in_haiku/trunk%3D3A_header%3F%3D%0A%20%3D%3Fiso-8859-15%3Fq%3Fs/os/support_src/kits/support%3F%3D&In-Reply-To=%3C3969951813-BeMail%40zon%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006740.html">
   <LINK REL="Next"  HREF="006737.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r24312 - in haiku/trunk: headers/os/support src/kits/support</H1>
    <B>Axel D&#246;rfler</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%0A%20%3D%3Fiso-8859-15%3Fq%3Fr24312_-_in_haiku/trunk%3D3A_header%3F%3D%0A%20%3D%3Fiso-8859-15%3Fq%3Fs/os/support_src/kits/support%3F%3D&In-Reply-To=%3C3969951813-BeMail%40zon%3E"
       TITLE="[Haiku-commits] r24312 - in haiku/trunk: headers/os/support src/kits/support">axeld at pinc-software.de
       </A><BR>
    <I>Mon Mar 10 12:08:10 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="006740.html">[Haiku-commits] r24312 - in haiku/trunk: headers/os/support src/kits/support
</A></li>
        <LI>Next message: <A HREF="006737.html">[Haiku-commits] r24312 - in haiku/trunk: headers/os/support	src/kits/support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6736">[ date ]</a>
              <a href="thread.html#6736">[ thread ]</a>
              <a href="subject.html#6736">[ subject ]</a>
              <a href="author.html#6736">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Julun &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/haiku-commits">HOST.HAIKU at gmx.de</A>&gt; wrote:
&gt;<i> Axel D&#246;rfler schrieb:
</I>&gt;<i> &gt; To make this class truely thread-safe, we would only need to make 
</I>&gt;<i> &gt; the 
</I>&gt;<i> &gt; detach process safe. That will probably require some locking, but 
</I>&gt;<i> &gt; would 
</I>&gt;<i> &gt; therefore also make the memory footprint a bit higher.
</I>&gt;<i> I need to go back to this topic since this is not entirely true, 
</I>&gt;<i> assume 
</I>&gt;<i> the following situation:
</I>&gt;<i> 
</I>&gt;<i> One might have a class with two worker threads, both got a pointer to 
</I>&gt;<i> a 
</I>&gt;<i> BString passed that the class holds. While Thread A executes a write 
</I>&gt;<i> operation on the string it gets hold in the middle of the function 
</I>&gt;<i> execution and Thread B starts writing to the string, now it would 
</I>&gt;<i> mess 
</I>&gt;<i> up the string completely. It that case it would be out of interest if 
</I>&gt;<i> detach is thread save or not! So BString has to have every writing 
</I>&gt;<i> function to be locked as well to be fully thread save.
</I>
You put my &quot;truely thread-safe&quot; out of context I wanted to have it in: 
I didn't mean to make the whole BString class thread-safe, but as 
thread-safe as the BeOS version of it is.
All write operations have to call Detach() before they actually write 
to the string. Hence, only this method needs to be thread safe.
In your example, there is only one BString involved, and for that, 
BString is known and documented to be unsafe.

Bye,
   Axel.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006740.html">[Haiku-commits] r24312 - in haiku/trunk: headers/os/support src/kits/support
</A></li>
	<LI>Next message: <A HREF="006737.html">[Haiku-commits] r24312 - in haiku/trunk: headers/os/support	src/kits/support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6736">[ date ]</a>
              <a href="thread.html#6736">[ thread ]</a>
              <a href="subject.html#6736">[ subject ]</a>
              <a href="author.html#6736">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
