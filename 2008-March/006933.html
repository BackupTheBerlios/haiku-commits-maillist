<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r24454 - in haiku/trunk: headers/libs/fluidsynth	headers/libs/fluidsynth/fluidsynth src/libs/fluidsynth	src/libs/fluidsynth/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r24454%20-%20in%20haiku/trunk%3A%20headers/libs/fluidsynth%0A%09headers/libs/fluidsynth/fluidsynth%20src/libs/fluidsynth%0A%09src/libs/fluidsynth/src&In-Reply-To=%3C200803182217.m2IMHr5o010239%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006932.html">
   <LINK REL="Next"  HREF="006934.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r24454 - in haiku/trunk: headers/libs/fluidsynth	headers/libs/fluidsynth/fluidsynth src/libs/fluidsynth	src/libs/fluidsynth/src</H1>
    <B>korli at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r24454%20-%20in%20haiku/trunk%3A%20headers/libs/fluidsynth%0A%09headers/libs/fluidsynth/fluidsynth%20src/libs/fluidsynth%0A%09src/libs/fluidsynth/src&In-Reply-To=%3C200803182217.m2IMHr5o010239%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r24454 - in haiku/trunk: headers/libs/fluidsynth	headers/libs/fluidsynth/fluidsynth src/libs/fluidsynth	src/libs/fluidsynth/src">korli at mail.berlios.de
       </A><BR>
    <I>Tue Mar 18 23:17:53 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="006932.html">[Haiku-commits] r24453 - in haiku/trunk/src/system:	boot/platform/bios_ia32 kernel
</A></li>
        <LI>Next message: <A HREF="006934.html">[Haiku-commits] r24455 -	haiku/trunk/src/add-ons/kernel/drivers/audio/echo/generic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6933">[ date ]</a>
              <a href="thread.html#6933">[ thread ]</a>
              <a href="subject.html#6933">[ subject ]</a>
              <a href="author.html#6933">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: korli
Date: 2008-03-18 23:17:50 +0100 (Tue, 18 Mar 2008)
New Revision: 24454
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=24454&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=24454&amp;view=rev</A>

Removed:
   haiku/trunk/src/libs/fluidsynth/src/fluid_dsp_core.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_dsp_sse.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_sse.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_strtok.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_strtok.h
Modified:
   haiku/trunk/headers/libs/fluidsynth/fluidsynth.h
   haiku/trunk/headers/libs/fluidsynth/fluidsynth/audio.h
   haiku/trunk/headers/libs/fluidsynth/fluidsynth/event.h
   haiku/trunk/headers/libs/fluidsynth/fluidsynth/gen.h
   haiku/trunk/headers/libs/fluidsynth/fluidsynth/log.h
   haiku/trunk/headers/libs/fluidsynth/fluidsynth/midi.h
   haiku/trunk/headers/libs/fluidsynth/fluidsynth/sfont.h
   haiku/trunk/headers/libs/fluidsynth/fluidsynth/version.h
   haiku/trunk/src/libs/fluidsynth/AUTHORS
   haiku/trunk/src/libs/fluidsynth/src/Jamfile
   haiku/trunk/src/libs/fluidsynth/src/fluid_adriver.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_adriver.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_aufile.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_chan.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_chan.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_chorus.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_chorus.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_cmd.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_cmd.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_conv.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_conv.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_defsfont.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_defsfont.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_dsp_float.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_dsp_simple.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_event.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_event_priv.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_gen.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_gen.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_hash.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_hash.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_io.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_io.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_ladspa.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_ladspa.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_lash.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_lash.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_list.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_mdriver.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_mdriver.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_midi.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_midi.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_midi_router.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_midi_router.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_mod.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_mod.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_phase.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_ramsfont.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_ramsfont.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_rev.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_rev.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_seq.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_seqbind.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_settings.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_settings.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_sfont.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_synth.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_synth.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_sys.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_sys.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_tuning.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_tuning.h
   haiku/trunk/src/libs/fluidsynth/src/fluid_voice.c
   haiku/trunk/src/libs/fluidsynth/src/fluid_voice.h
   haiku/trunk/src/libs/fluidsynth/src/fluidsynth.c
   haiku/trunk/src/libs/fluidsynth/src/fluidsynth_priv.h
Log:
updated fluidsynth to 1.0.8


Modified: haiku/trunk/headers/libs/fluidsynth/fluidsynth/audio.h
===================================================================
--- haiku/trunk/headers/libs/fluidsynth/fluidsynth/audio.h	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/headers/libs/fluidsynth/fluidsynth/audio.h	2008-03-18 22:17:50 UTC (rev 24454)
@@ -25,15 +25,29 @@
 extern &quot;C&quot; {
 #endif
 
+/**
+ * @file audio.h
+ * @brief Functions for audio driver output.
+ *
+ * Defines functions for creating audio driver output.  Use
+ * new_fluid_audio_driver() to create a new audio driver for a given synth
+ * and configuration settings.  The function new_fluid_audio_driver2() can be
+ * used if custom audio processing is desired before the audio is sent to the
+ * audio driver (although it is not as efficient).
+ */
 
-
-  /** Audio driver
-   *
-   *
-   */
-
-
-  /** The function should return non-zero if an error occured. */
+/**
+ * Callback function type used with new_fluid_audio_driver2() to allow for
+ * custom user audio processing before the audio is sent to the driver.  This
+ * function is responsible for rendering the audio to the buffers.
+ * @param data The user data parameter as passed to new_fluid_audio_driver2().
+ * @param len Length of the audio in frames.
+ * @param nin Count of buffers in 'in'
+ * @param in FIXME - Not used currently?
+ * @param nout Count of arrays in 'out' (i.e., channel count)
+ * @param out Output buffers, one for each channel
+ * @return Should return 0 on success, non-zero if an error occured.
+ */
 typedef int (*fluid_audio_func_t)(void* data, int len, 
 				 int nin, float** in, 
 				 int nout, float** out);

Modified: haiku/trunk/headers/libs/fluidsynth/fluidsynth/event.h
===================================================================
--- haiku/trunk/headers/libs/fluidsynth/fluidsynth/event.h	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/headers/libs/fluidsynth/fluidsynth/event.h	2008-03-18 22:17:50 UTC (rev 24454)
@@ -25,28 +25,37 @@
 extern &quot;C&quot; {
 #endif
 
+/**
+ * @file event.h
+ * @brief Sequencer event functions and defines.
+ *
+ * Functions and constants for creating/processing sequencer events.
+ */
 
+/**
+ * Sequencer event type enumeration.
+ */
 enum fluid_seq_event_type {
-  FLUID_SEQ_NOTE = 0,
-  FLUID_SEQ_NOTEON,
-  FLUID_SEQ_NOTEOFF,
-  FLUID_SEQ_ALLSOUNDSOFF,
-  FLUID_SEQ_ALLNOTESOFF,
-  FLUID_SEQ_BANKSELECT,
-  FLUID_SEQ_PROGRAMCHANGE,
-  FLUID_SEQ_PROGRAMSELECT,
-  FLUID_SEQ_PITCHBEND,
-  FLUID_SEQ_PITCHWHHELSENS,
-  FLUID_SEQ_MODULATION,
-  FLUID_SEQ_SUSTAIN,
-  FLUID_SEQ_CONTROLCHANGE,
-  FLUID_SEQ_PAN,
-  FLUID_SEQ_VOLUME,
-  FLUID_SEQ_REVERBSEND,
-  FLUID_SEQ_CHORUSSEND,
-  FLUID_SEQ_TIMER,
-  FLUID_SEQ_ANYCONTROLCHANGE,	// used for remove_events only
-  FLUID_SEQ_LASTEVENT  
+  FLUID_SEQ_NOTE = 0,		/**&lt; Note event (DOCME) */
+  FLUID_SEQ_NOTEON,		/**&lt; Note on event */
+  FLUID_SEQ_NOTEOFF,		/**&lt; Note off event */
+  FLUID_SEQ_ALLSOUNDSOFF,	/**&lt; All sounds off event */
+  FLUID_SEQ_ALLNOTESOFF,	/**&lt; All notes off event */
+  FLUID_SEQ_BANKSELECT,		/**&lt; Bank select message */
+  FLUID_SEQ_PROGRAMCHANGE,	/**&lt; Program change message */
+  FLUID_SEQ_PROGRAMSELECT,	/**&lt; Program select message (DOCME) */
+  FLUID_SEQ_PITCHBEND,		/**&lt; Pitch bend message */
+  FLUID_SEQ_PITCHWHHELSENS,	/**&lt; Pitch wheel sensitivity set message */
+  FLUID_SEQ_MODULATION,		/**&lt; Modulation controller event */
+  FLUID_SEQ_SUSTAIN,		/**&lt; Sustain controller event */
+  FLUID_SEQ_CONTROLCHANGE,	/**&lt; MIDI control change event */
+  FLUID_SEQ_PAN,		/**&lt; Stereo pan set event */
+  FLUID_SEQ_VOLUME,		/**&lt; Volume set event */
+  FLUID_SEQ_REVERBSEND,		/**&lt; Reverb send set event */
+  FLUID_SEQ_CHORUSSEND,		/**&lt; Chorus send set event */
+  FLUID_SEQ_TIMER,		/**&lt; Timer event (DOCME) */
+  FLUID_SEQ_ANYCONTROLCHANGE,	/**&lt; DOCME (used for remove_events only) */
+  FLUID_SEQ_LASTEVENT		/**&lt; Defines the count of event enums */
 };
 
 /* Event alloc/free */

Modified: haiku/trunk/headers/libs/fluidsynth/fluidsynth/gen.h
===================================================================
--- haiku/trunk/headers/libs/fluidsynth/fluidsynth/gen.h	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/headers/libs/fluidsynth/fluidsynth/gen.h	2008-03-18 22:17:50 UTC (rev 24454)
@@ -25,99 +25,105 @@
 extern &quot;C&quot; {
 #endif
 
+/**
+ * @file gen.h
+ * @brief Functions and defines for SoundFont generator effects.
+ */
 
-  /** List of generator numbers
-      Soundfont 2.01 specifications section 8.1.3 */
+/**
+ * Generator (effect) numbers (Soundfont 2.01 specifications section 8.1.3)
+ */
 enum fluid_gen_type {
-  GEN_STARTADDROFS,
-  GEN_ENDADDROFS,
-  GEN_STARTLOOPADDROFS,
-  GEN_ENDLOOPADDROFS,
-  GEN_STARTADDRCOARSEOFS,
-  GEN_MODLFOTOPITCH,
-  GEN_VIBLFOTOPITCH,
-  GEN_MODENVTOPITCH,
-  GEN_FILTERFC,
-  GEN_FILTERQ,
-  GEN_MODLFOTOFILTERFC,
-  GEN_MODENVTOFILTERFC,
-  GEN_ENDADDRCOARSEOFS,
-  GEN_MODLFOTOVOL,
-  GEN_UNUSED1,
-  GEN_CHORUSSEND,
-  GEN_REVERBSEND,
-  GEN_PAN,
-  GEN_UNUSED2,
-  GEN_UNUSED3,
-  GEN_UNUSED4,
-  GEN_MODLFODELAY,
-  GEN_MODLFOFREQ,
-  GEN_VIBLFODELAY,
-  GEN_VIBLFOFREQ,
-  GEN_MODENVDELAY,
-  GEN_MODENVATTACK,
-  GEN_MODENVHOLD,
-  GEN_MODENVDECAY,
-  GEN_MODENVSUSTAIN,
-  GEN_MODENVRELEASE,
-  GEN_KEYTOMODENVHOLD,
-  GEN_KEYTOMODENVDECAY,
-  GEN_VOLENVDELAY,
-  GEN_VOLENVATTACK,
-  GEN_VOLENVHOLD,
-  GEN_VOLENVDECAY,
-  GEN_VOLENVSUSTAIN,
-  GEN_VOLENVRELEASE,
-  GEN_KEYTOVOLENVHOLD,
-  GEN_KEYTOVOLENVDECAY,
-  GEN_INSTRUMENT,
-  GEN_RESERVED1,
-  GEN_KEYRANGE,
-  GEN_VELRANGE,
-  GEN_STARTLOOPADDRCOARSEOFS,
-  GEN_KEYNUM,
-  GEN_VELOCITY,
-  GEN_ATTENUATION,
-  GEN_RESERVED2,
-  GEN_ENDLOOPADDRCOARSEOFS,
-  GEN_COARSETUNE,
-  GEN_FINETUNE,
-  GEN_SAMPLEID,
-  GEN_SAMPLEMODE,
-  GEN_RESERVED3,
-  GEN_SCALETUNE,
-  GEN_EXCLUSIVECLASS,
-  GEN_OVERRIDEROOTKEY,
+  GEN_STARTADDROFS,		/**&lt; Sample start address offset (0-32767) */
+  GEN_ENDADDROFS,		/**&lt; Sample end address offset (-32767-0) */
+  GEN_STARTLOOPADDROFS,		/**&lt; Sample loop start address offset (-32767-32767) */
+  GEN_ENDLOOPADDROFS,		/**&lt; Sample loop end address offset (-32767-32767) */
+  GEN_STARTADDRCOARSEOFS,	/**&lt; Sample start address coarse offset (X 32768) */
+  GEN_MODLFOTOPITCH,		/**&lt; Modulation LFO to pitch */
+  GEN_VIBLFOTOPITCH,		/**&lt; Vibrato LFO to pitch */
+  GEN_MODENVTOPITCH,		/**&lt; Modulation envelope to pitch */
+  GEN_FILTERFC,			/**&lt; Filter cutoff */
+  GEN_FILTERQ,			/**&lt; Filter Q */
+  GEN_MODLFOTOFILTERFC,		/**&lt; Modulation LFO to filter cutoff */
+  GEN_MODENVTOFILTERFC,		/**&lt; Modulation envelope to filter cutoff */
+  GEN_ENDADDRCOARSEOFS,		/**&lt; Sample end address coarse offset (X 32768) */
+  GEN_MODLFOTOVOL,		/**&lt; Modulation LFO to volume */
+  GEN_UNUSED1,			/**&lt; Unused */
+  GEN_CHORUSSEND,		/**&lt; Chorus send amount */
+  GEN_REVERBSEND,		/**&lt; Reverb send amount */
+  GEN_PAN,			/**&lt; Stereo panning */
+  GEN_UNUSED2,			/**&lt; Unused */
+  GEN_UNUSED3,			/**&lt; Unused */
+  GEN_UNUSED4,			/**&lt; Unused */
+  GEN_MODLFODELAY,		/**&lt; Modulation LFO delay */
+  GEN_MODLFOFREQ,		/**&lt; Modulation LFO frequency */
+  GEN_VIBLFODELAY,		/**&lt; Vibrato LFO delay */
+  GEN_VIBLFOFREQ,		/**&lt; Vibrato LFO frequency */
+  GEN_MODENVDELAY,		/**&lt; Modulation envelope delay */
+  GEN_MODENVATTACK,		/**&lt; Modulation envelope attack */
+  GEN_MODENVHOLD,		/**&lt; Modulation envelope hold */
+  GEN_MODENVDECAY,		/**&lt; Modulation envelope decay */
+  GEN_MODENVSUSTAIN,		/**&lt; Modulation envelope sustain */
+  GEN_MODENVRELEASE,		/**&lt; Modulation envelope release */
+  GEN_KEYTOMODENVHOLD,		/**&lt; Key to modulation envelope hold */
+  GEN_KEYTOMODENVDECAY,		/**&lt; Key to modulation envelope decay */
+  GEN_VOLENVDELAY,		/**&lt; Volume envelope delay */
+  GEN_VOLENVATTACK,		/**&lt; Volume envelope attack */
+  GEN_VOLENVHOLD,		/**&lt; Volume envelope hold */
+  GEN_VOLENVDECAY,		/**&lt; Volume envelope decay */
+  GEN_VOLENVSUSTAIN,		/**&lt; Volume envelope sustain */
+  GEN_VOLENVRELEASE,		/**&lt; Volume envelope release */
+  GEN_KEYTOVOLENVHOLD,		/**&lt; Key to volume envelope hold */
+  GEN_KEYTOVOLENVDECAY,		/**&lt; Key to volume envelope decay */
+  GEN_INSTRUMENT,		/**&lt; Instrument ID (shouldn't be set by user) */
+  GEN_RESERVED1,		/**&lt; Reserved */
+  GEN_KEYRANGE,			/**&lt; MIDI note range */
+  GEN_VELRANGE,			/**&lt; MIDI velocity range */
+  GEN_STARTLOOPADDRCOARSEOFS,	/**&lt; Sample start loop address coarse offset (X 32768) */
+  GEN_KEYNUM,			/**&lt; Fixed MIDI note number */
+  GEN_VELOCITY,			/**&lt; Fixed MIDI velocity value */
+  GEN_ATTENUATION,		/**&lt; Initial volume attenuation */
+  GEN_RESERVED2,		/**&lt; Reserved */
+  GEN_ENDLOOPADDRCOARSEOFS,	/**&lt; Sample end loop address coarse offset (X 32768) */
+  GEN_COARSETUNE,		/**&lt; Coarse tuning */
+  GEN_FINETUNE,			/**&lt; Fine tuning */
+  GEN_SAMPLEID,			/**&lt; Sample ID (shouldn't be set by user) */
+  GEN_SAMPLEMODE,		/**&lt; Sample mode flags */
+  GEN_RESERVED3,		/**&lt; Reserved */
+  GEN_SCALETUNE,		/**&lt; Scale tuning */
+  GEN_EXCLUSIVECLASS,		/**&lt; Exclusive class number */
+  GEN_OVERRIDEROOTKEY,		/**&lt; Sample root note override */
 
   /* the initial pitch is not a &quot;standard&quot; generator. It is not
    * mentioned in the list of generator in the SF2 specifications. It
    * is used, however, as the destination for the default pitch wheel
    * modulator. */
-  GEN_PITCH,
-  GEN_LAST 
+  GEN_PITCH,			/**&lt; Pitch (NOTE: Not a real SoundFont generator) */
+  GEN_LAST			/**&lt; Value defines the count of generators (#fluid_gen_type) */
 };
 
 
-  /*
-   *  fluid_gen_t
-   *  Sound font generator
-   */
+/**
+ * SoundFont generator structure.
+ */
 typedef struct _fluid_gen_t
 {
-  unsigned char flags; /* is it used or not */
-  double val;          /* The nominal value */
-  double mod;          /* Change by modulators */
-  double nrpn;         /* Change by NRPN messages */
+  unsigned char flags; /**&lt; Is the generator set or not (#fluid_gen_flags) */
+  double val;          /**&lt; The nominal value */
+  double mod;          /**&lt; Change by modulators */
+  double nrpn;         /**&lt; Change by NRPN messages */
 } fluid_gen_t;
 
+/**
+ * Enum value for 'flags' field of #_fluid_gen_t (not really flags).
+ */
 enum fluid_gen_flags
 {
-  GEN_UNUSED,
-  GEN_SET,
-  GEN_ABS_NRPN
+  GEN_UNUSED,		/**&lt; Generator value is not set */
+  GEN_SET,		/**&lt; Generator value is set */
+  GEN_ABS_NRPN		/**&lt; DOCME */
 };
 
-  /** Reset an array of generators to the SF2.01 default values */
 FLUIDSYNTH_API int fluid_gen_set_default_values(fluid_gen_t* gen);
 
 

Modified: haiku/trunk/headers/libs/fluidsynth/fluidsynth/log.h
===================================================================
--- haiku/trunk/headers/libs/fluidsynth/fluidsynth/log.h	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/headers/libs/fluidsynth/fluidsynth/log.h	2008-03-18 22:17:50 UTC (rev 24454)
@@ -27,57 +27,55 @@
 #endif
 
 
-  /**
-   *
-   *  Logging interface
-   *
-   *  The default logging function of the fluidsynth prints its messages
-   *  to the stderr. The synthesizer uses four level of messages: FLUID_PANIC,
-   *  ERR, WARN, and FLUID_DBG. They are commented in the definition below.
-   *
-   *  A client application can install a new log function to handle the
-   *  messages differently. In the following example, the application
-   *  sets a callback function to display &quot;FLUID_PANIC&quot; messages in a dialog,
-   *  and ignores all other messages by setting the log function to
-   *  NULL:
-   *
-   *  ...
-   *  fluid_set_log_function(FLUID_PANIC, show_dialog, (void*) root_window);
-   *  fluid_set_log_function(ERR, NULL, NULL);
-   *  fluid_set_log_function(WARN, NULL, NULL);
-   *  fluid_set_log_function(FLUID_DBG, NULL, NULL);
-   *  ...
-   *
-   */
+/**
+ * @file log.h
+ * @brief Logging interface
+ *
+ * The default logging function of the fluidsynth prints its messages
+ * to the stderr. The synthesizer uses five level of messages: #FLUID_PANIC,
+ * #FLUID_ERR, #FLUID_WARN, #FLUID_INFO, and #FLUID_DBG.
+ *
+ * A client application can install a new log function to handle the
+ * messages differently. In the following example, the application
+ * sets a callback function to display #FLUID_PANIC messages in a dialog,
+ * and ignores all other messages by setting the log function to
+ * NULL:
+ *
+ * DOCME (formatting)
+ * fluid_set_log_function(FLUID_PANIC, show_dialog, (void*) root_window);
+ * fluid_set_log_function(FLUID_ERR, NULL, NULL);
+ * fluid_set_log_function(FLUID_WARN, NULL, NULL);
+ * fluid_set_log_function(FLUID_DBG, NULL, NULL);
+ */
 
+/**
+ * FluidSynth log levels.
+ */
 enum fluid_log_level { 
-  FLUID_PANIC,   /* the synth can't function correctly any more */
-  FLUID_ERR,     /* the synth can function, but with serious limitation */
-  FLUID_WARN,    /* the synth might not function as expected */
-  FLUID_INFO,    /* verbose messages */
-  FLUID_DBG,     /* debugging messages */
+  FLUID_PANIC,   /**&lt; The synth can't function correctly any more */
+  FLUID_ERR,     /**&lt; Serious error occurred */
+  FLUID_WARN,    /**&lt; Warning */
+  FLUID_INFO,    /**&lt; Verbose informational messages */
+  FLUID_DBG,     /**&lt; Debugging messages */
   LAST_LOG_LEVEL
 };
 
+/**
+ * Log function handler callback type used by fluid_set_log_function().
+ * @param level Log level (#fluid_log_level)
+ * @param message Log message text
+ * @param data User data pointer supplied to fluid_set_log_function().
+ */
 typedef void (*fluid_log_function_t)(int level, char* message, void* data);
 
-  /** fluid_set_log_function installs a new log function for the
-   *  specified level. It returns the previously installed function. 
-   */
 FLUIDSYNTH_API 
 fluid_log_function_t fluid_set_log_function(int level, fluid_log_function_t fun, void* data);
 
-  
-  /** fluid_default_log_function is the fluid's default log function. It
-   *  prints to the stderr. */
 FLUIDSYNTH_API void fluid_default_log_function(int level, char* message, void* data);
 
-  /** print a message to the log */
 FLUIDSYNTH_API int fluid_log(int level, char * fmt, ...);
 
 
-
-
 #ifdef __cplusplus
 }
 #endif

Modified: haiku/trunk/headers/libs/fluidsynth/fluidsynth/midi.h
===================================================================
--- haiku/trunk/headers/libs/fluidsynth/fluidsynth/midi.h	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/headers/libs/fluidsynth/fluidsynth/midi.h	2008-03-18 22:17:50 UTC (rev 24454)
@@ -25,8 +25,11 @@
 extern &quot;C&quot; {
 #endif
 
+/**
+ * @file midi.h
+ * @brief Functions for MIDI events, drivers and MIDI file playback.
+ */
 
-
 FLUIDSYNTH_API fluid_midi_event_t* new_fluid_midi_event(void);
 FLUIDSYNTH_API int delete_fluid_midi_event(fluid_midi_event_t* event);
 
@@ -48,58 +51,41 @@
 FLUIDSYNTH_API int fluid_midi_event_set_pitch(fluid_midi_event_t* evt, int val);
 
 
-  /* Generic callback function for MIDI events.
-   * Will be used between
-   * - MIDI driver and MIDI router
-   * - MIDI router and synth
-   * to communicate events.
-   * In the not-so-far future...
-   */
+/**
+ * Generic callback function for MIDI events.
+ * @param data User defined data pointer
+ * @param event The MIDI event
+ * @return DOCME
+ *
+ * Will be used between
+ * - MIDI driver and MIDI router
+ * - MIDI router and synth
+ * to communicate events.
+ * In the not-so-far future...
+ */
 typedef int (*handle_midi_event_func_t)(void* data, fluid_midi_event_t* event);
 
-  /*
-   *
-   *  MIDI router
-   *
-   *  The MIDI handler forwards incoming MIDI events to the synthesizer
-   *
-   */
+/*
+ *  MIDI router
+ *
+ *  The MIDI handler forwards incoming MIDI events to the synthesizer
+ */
 
-  /** Create a new midi router. A midi handler connects to a midi input
-   *  device and forwards incoming midi events to the synthesizer. 
-   */
 FLUIDSYNTH_API fluid_midi_router_t* new_fluid_midi_router(fluid_settings_t* settings,
 						       handle_midi_event_func_t handler, 
 						       void* event_handler_data); 
 
-  /** Delete the midi router.  
-   *
-   * \param handler a pointer to the midi handler
-   * \return 0 if no error occured, -1 otherwise 
-   */
 FLUIDSYNTH_API int delete_fluid_midi_router(fluid_midi_router_t* handler); 
-
-  /** The standard handler function. Every MIDI event goes through
-      this. */
 FLUIDSYNTH_API int fluid_midi_router_handle_midi_event(void* data, fluid_midi_event_t* event);
-
-  /** An optional link in the MIDI chain to dump MIDI data between MIDI
-      driver and router */
 FLUIDSYNTH_API int fluid_midi_dump_prerouter(void* data, fluid_midi_event_t* event); 
-
-  /** An optional link in the MIDI chain to dump MIDI data between MIDI
-      router and the synthesizer */
 FLUIDSYNTH_API int fluid_midi_dump_postrouter(void* data, fluid_midi_event_t* event); 
 
 /*
- *
  *  MIDI driver
  *
  *  The MIDI handler forwards incoming MIDI events to the synthesizer
- *
  */
 
-
 FLUIDSYNTH_API 
 fluid_midi_driver_t* new_fluid_midi_driver(fluid_settings_t* settings, 
 					 handle_midi_event_func_t handler, 
@@ -110,11 +96,9 @@
 
 
 /*
- *
  *  MIDI file player
  *
  *  The MIDI player allows you to play MIDI files with the FLUID Synth
- *
  */
 
 FLUIDSYNTH_API fluid_player_t* new_fluid_player(fluid_synth_t* synth);

Modified: haiku/trunk/headers/libs/fluidsynth/fluidsynth/sfont.h
===================================================================
--- haiku/trunk/headers/libs/fluidsynth/fluidsynth/sfont.h	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/headers/libs/fluidsynth/fluidsynth/sfont.h	2008-03-18 22:17:50 UTC (rev 24454)
@@ -144,9 +144,9 @@
 {
   char name[21];
   unsigned int start;
-  unsigned int end;
+  unsigned int end;	/* Note: Index of last valid sample point (contrary to SF spec) */
   unsigned int loopstart;
-  unsigned int loopend;
+  unsigned int loopend;	/* Note: first point following the loop (superimposed on loopstart) */
   unsigned int samplerate;
   int origpitch;
   int pitchadj;

Modified: haiku/trunk/headers/libs/fluidsynth/fluidsynth/version.h
===================================================================
--- haiku/trunk/headers/libs/fluidsynth/fluidsynth/version.h	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/headers/libs/fluidsynth/fluidsynth/version.h	2008-03-18 22:17:50 UTC (rev 24454)
@@ -26,10 +26,10 @@
 extern &quot;C&quot; {
 #endif
 
-#define FLUIDSYNTH_VERSION       &quot;1.0.7&quot;
+#define FLUIDSYNTH_VERSION       &quot;1.0.8&quot;
 #define FLUIDSYNTH_VERSION_MAJOR 1
 #define FLUIDSYNTH_VERSION_MINOR 0
-#define FLUIDSYNTH_VERSION_MICRO 7
+#define FLUIDSYNTH_VERSION_MICRO 8
 
 
 FLUIDSYNTH_API void fluid_version(int *major, int *minor, int *micro);

Modified: haiku/trunk/headers/libs/fluidsynth/fluidsynth.h
===================================================================
--- haiku/trunk/headers/libs/fluidsynth/fluidsynth.h	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/headers/libs/fluidsynth/fluidsynth.h	2008-03-18 22:17:50 UTC (rev 24454)
@@ -44,41 +44,38 @@
 #endif
 
 
-  /**
+/**
+ * @file fluidsynth.h
+ * @brief FluidSynth is a real-time synthesizer designed for SoundFont(R) files.
+ *
+ * This is the header of the fluidsynth library and contains the
+ * synthesizer's public API.
+ *
+ * Depending on how you want to use or extend the synthesizer you
+ * will need different API functions. You probably do not need all
+ * of them. Here is what you might want to do:
+ *
+ * o Embedded synthesizer: create a new synthesizer and send MIDI
+ *   events to it. The sound goes directly to the audio output of
+ *   your system.
+ *
+ * o Plugin synthesizer: create a synthesizer and send MIDI events
+ *   but pull the audio back into your application.
+ *
+ * o SoundFont plugin: create a new type of &quot;SoundFont&quot; and allow
+ *   the synthesizer to load your type of SoundFonts.
+ *
+ * o MIDI input: Create a MIDI handler to read the MIDI input on your
+ *   machine and send the MIDI events directly to the synthesizer.
+ *
+ * o MIDI files: Open MIDI files and send the MIDI events to the
+ *   synthesizer.
+ *
+ * o Command lines: You can send textual commands to the synthesizer.
+ *
+ * SoundFont(R) is a registered trademark of E-mu Systems, Inc.
+ */
 
-     \file fluidsynth.h
-
-     \brief fluidsynth is a real-time SoundFont(R) synthesizer. This is
-     the header of the fluidsynth library and contains the
-     synthesizer's public API.
-
-     Depending on how you want to use or extend the synthesizer you
-     will need different API functions. You probably do not need all
-     of them. Here is what you might want to do:
-     
-     o Embedded synthesizer: create a new synthesizer and send MIDI
-       events to it. The sound goes directly to the audio output of
-       your system.
-     
-     o Plugin synthesizer: create a synthesizer and send MIDI events
-       but pull the audio back into your application.
-     
-     o SoundFont plugin: create a new type of &quot;SoundFont&quot; and allow
-       the synthesizer to load your type of SoundFonts.
-     
-     o MIDI input: Create a MIDI handler to read the MIDI input on your
-       machine and send the MIDI events directly to the synthesizer.
-     
-     o MIDI files: Open MIDI files and send the MIDI events to the
-       synthesizer.
-     
-     o Command lines: You can send textual commands to the synthesizer.
-
-
-     SoundFont(R) is a registered trademark of E-mu Systems, Inc. 
-							    
-  */
-
 #include &quot;fluidsynth/types.h&quot;
 #include &quot;fluidsynth/settings.h&quot;
 #include &quot;fluidsynth/synth.h&quot;

Modified: haiku/trunk/src/libs/fluidsynth/AUTHORS
===================================================================
--- haiku/trunk/src/libs/fluidsynth/AUTHORS	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/src/libs/fluidsynth/AUTHORS	2008-03-18 22:17:50 UTC (rev 24454)
@@ -6,10 +6,10 @@
 
 [:Development:]
 
-Many people contributed to FluidSynth, send suggestions or bug
+Many people contributed to FluidSynth, sent suggestions or bug
 fixes. The project was started by Peter Hanappe who is the main
 author. Josh Green is the current maintainer. Below you'll find a
-summery of contributions.
+summary of contributions.
 
 
 * Peter Hanappe. Initiated the project. files: sticked his nose in all
@@ -24,10 +24,6 @@
   (the blue waves with FluidSynth letters partially submerged).
   files: iiwu_defsfont.{c,h}, iiwu_alsa{c,h} and others.
 
-* Stephane Letz from Grame wrote most of the MidiShare driver, all of
-  the PortAudio driver, ported iiwusynth to MacOS X, and sent in many
-  fixes. files: iiwu_midishare.c, iiwu_portaudio.c
-
 * Markus Nentwig (re-)designed the resonant filter, the chorus, the
   LADSPA subsystem, the MIDI router, optimized for SSE, made many
   changes and bug fixes and got the synthesizer to actually work. Most
@@ -36,6 +32,10 @@
   iiwu_sse.h, iiwu_dsp_core.h, iiwu_rev.{c,h}, and basically all the
   other files.
 
+* Stephane Letz from Grame wrote most of the MidiShare driver, all of
+  the PortAudio driver, ported iiwusynth to MacOS X, and sent in many
+  fixes. files: iiwu_midishare.c, iiwu_portaudio.c
+
 * Antoine Schmitt added the sequencer support, support for sample
   loading (RAM Sfont), developed the
   MacroMedia Director Xtra, and send in many many bug reports. Thanks
@@ -67,8 +67,7 @@
   portability.
 
 * The midi device uses code from jMax's alsarawmidi.c file and from
-  Smurf's midi_alsaraw.c by Josh Green. Josh also added support for
-  the alsa sequencer interface. file: iiwu_alsa.c
+  Smurf's midi_alsaraw.c by Josh Green.  file: iiwu_alsa.c
 
 * The reverb algorithm was written by Jezar
   (<A HREF="http://www.dreampoint.co.uk">http://www.dreampoint.co.uk</A>). His code is public domain. The code
@@ -115,3 +114,7 @@
 Rui Nuno Capela
 Frieder B&#252;rzele
 Henri Manson
+Mihail Zenkov
+Paul Millar
+Nick Daly
+David Hilvert

Modified: haiku/trunk/src/libs/fluidsynth/src/Jamfile
===================================================================
--- haiku/trunk/src/libs/fluidsynth/src/Jamfile	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/src/libs/fluidsynth/src/Jamfile	2008-03-18 22:17:50 UTC (rev 24454)
@@ -14,6 +14,7 @@
 	fluid_cmd.c
 	fluid_conv.c
 	fluid_defsfont.c
+	fluid_dsp_float.c
 	fluid_event.c
 	fluid_gen.c
 	fluid_hash.c
@@ -28,7 +29,6 @@
 	fluid_seq.c
 	fluid_seqbind.c
 	fluid_settings.c
-	fluid_strtok.c
 	fluid_synth.c
 	fluid_sys.c
 	fluid_tuning.c

Modified: haiku/trunk/src/libs/fluidsynth/src/fluid_adriver.c
===================================================================
--- haiku/trunk/src/libs/fluidsynth/src/fluid_adriver.c	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/src/libs/fluidsynth/src/fluid_adriver.c	2008-03-18 22:17:50 UTC (rev 24454)
@@ -11,7 +11,7 @@
  * WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  * Library General Public License for more details.
- *  
+ *
  * You should have received a copy of the GNU Library General Public
  * License along with this library; if not, write to the Free
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
@@ -25,12 +25,12 @@
  * fluid_adriver_definition_t
  */
 
-typedef struct _fluid_audriver_definition_t 
+typedef struct _fluid_audriver_definition_t
 {
   char* name;
   fluid_audio_driver_t* (*new)(fluid_settings_t* settings, fluid_synth_t* synth);
-  fluid_audio_driver_t* (*new2)(fluid_settings_t* settings, 
-				fluid_audio_func_t func, 
+  fluid_audio_driver_t* (*new2)(fluid_settings_t* settings,
+				fluid_audio_func_t func,
 				void* data);
   int (*free)(fluid_audio_driver_t* driver);
   void (*settings)(fluid_settings_t* settings);
@@ -48,57 +48,57 @@
 #endif
 
 #if OSS_SUPPORT
-fluid_audio_driver_t* new_fluid_oss_audio_driver(fluid_settings_t* settings, 
+fluid_audio_driver_t* new_fluid_oss_audio_driver(fluid_settings_t* settings,
 						 fluid_synth_t* synth);
-fluid_audio_driver_t* new_fluid_oss_audio_driver2(fluid_settings_t* settings, 
+fluid_audio_driver_t* new_fluid_oss_audio_driver2(fluid_settings_t* settings,
 						fluid_audio_func_t func, void* data);
 int delete_fluid_oss_audio_driver(fluid_audio_driver_t* p);
 void fluid_oss_audio_driver_settings(fluid_settings_t* settings);
 #endif
 
 #if COREAUDIO_SUPPORT
-fluid_audio_driver_t* new_fluid_core_audio_driver(fluid_settings_t* settings, 
+fluid_audio_driver_t* new_fluid_core_audio_driver(fluid_settings_t* settings,
 						  fluid_synth_t* synth);
-fluid_audio_driver_t* new_fluid_core_audio_driver2(fluid_settings_t* settings, 
-						      fluid_audio_func_t func, 
+fluid_audio_driver_t* new_fluid_core_audio_driver2(fluid_settings_t* settings,
+						      fluid_audio_func_t func,
 						      void* data);
 int delete_fluid_core_audio_driver(fluid_audio_driver_t* p);
 void fluid_core_audio_driver_settings(fluid_settings_t* settings);
 #endif
 
 #if DSOUND_SUPPORT
-fluid_audio_driver_t* new_fluid_dsound_audio_driver(fluid_settings_t* settings, 
+fluid_audio_driver_t* new_fluid_dsound_audio_driver(fluid_settings_t* settings,
 						  fluid_synth_t* synth);
 int delete_fluid_dsound_audio_driver(fluid_audio_driver_t* p);
 void fluid_dsound_audio_driver_settings(fluid_settings_t* settings);
 #endif
 
 #if PORTAUDIO_SUPPORT
-fluid_audio_driver_t* new_fluid_portaudio_driver(fluid_settings_t* settings, 
+fluid_audio_driver_t* new_fluid_portaudio_driver(fluid_settings_t* settings,
 						 fluid_synth_t* synth);
 int delete_fluid_portaudio_driver(fluid_audio_driver_t* p);
 #endif
 
 #if JACK_SUPPORT
 fluid_audio_driver_t* new_fluid_jack_audio_driver(fluid_settings_t* settings, fluid_synth_t* synth);
-fluid_audio_driver_t* new_fluid_jack_audio_driver2(fluid_settings_t* settings, 
+fluid_audio_driver_t* new_fluid_jack_audio_driver2(fluid_settings_t* settings,
 						 fluid_audio_func_t func, void* data);
 int delete_fluid_jack_audio_driver(fluid_audio_driver_t* p);
 void fluid_jack_audio_driver_settings(fluid_settings_t* settings);
 #endif
 
 #if SNDMAN_SUPPORT
-fluid_audio_driver_t* new_fluid_sndmgr_audio_driver(fluid_settings_t* settings, 
+fluid_audio_driver_t* new_fluid_sndmgr_audio_driver(fluid_settings_t* settings,
 						  fluid_synth_t* synth);
-fluid_audio_driver_t* new_fluid_sndmgr_audio_driver2(fluid_settings_t* settings, 
-						   fluid_audio_func_t func, 
+fluid_audio_driver_t* new_fluid_sndmgr_audio_driver2(fluid_settings_t* settings,
+						   fluid_audio_func_t func,
 						   void* data);
 int delete_fluid_sndmgr_audio_driver(fluid_audio_driver_t* p);
 #endif
 
 #define AUFILE_SUPPORT 1
 #if AUFILE_SUPPORT
-fluid_audio_driver_t* new_fluid_file_audio_driver(fluid_settings_t* settings, 
+fluid_audio_driver_t* new_fluid_file_audio_driver(fluid_settings_t* settings,
 						  fluid_synth_t* synth);
 int delete_fluid_file_audio_driver(fluid_audio_driver_t* p);
 void fluid_file_audio_driver_settings(fluid_settings_t* settings);
@@ -106,10 +106,10 @@
 
 fluid_audriver_definition_t fluid_audio_drivers[] = {
 #if OSS_SUPPORT
-  { &quot;oss&quot;, 
-    new_fluid_oss_audio_driver, 
+  { &quot;oss&quot;,
+    new_fluid_oss_audio_driver,
     new_fluid_oss_audio_driver2,
-    delete_fluid_oss_audio_driver, 
+    delete_fluid_oss_audio_driver,
     fluid_oss_audio_driver_settings },
 #endif
 #if ALSA_SUPPORT
@@ -120,45 +120,45 @@
     fluid_alsa_audio_driver_settings },
 #endif
 #if COREAUDIO_SUPPORT
-  { &quot;coreaudio&quot;, 
-    new_fluid_core_audio_driver, 
+  { &quot;coreaudio&quot;,
+    new_fluid_core_audio_driver,
     new_fluid_core_audio_driver2,
-    delete_fluid_core_audio_driver, 
+    delete_fluid_core_audio_driver,
     fluid_core_audio_driver_settings },
 #endif
 #if DSOUND_SUPPORT
-  { &quot;dsound&quot;, 
-    new_fluid_dsound_audio_driver, 
+  { &quot;dsound&quot;,
+    new_fluid_dsound_audio_driver,
     NULL,
-    delete_fluid_dsound_audio_driver, 
+    delete_fluid_dsound_audio_driver,
     fluid_dsound_audio_driver_settings },
 #endif
 #if PORTAUDIO_SUPPORT
-  { &quot;portaudio&quot;, 
-    new_fluid_portaudio_driver, 
+  { &quot;portaudio&quot;,
+    new_fluid_portaudio_driver,
     NULL,
-    delete_fluid_portaudio_driver, 
-    NULL }, 
+    delete_fluid_portaudio_driver,
+    NULL },
 #endif
 #if SNDMAN_SUPPORT
-  { &quot;sndman&quot;, 
-    new_fluid_sndmgr_audio_driver, 
+  { &quot;sndman&quot;,
+    new_fluid_sndmgr_audio_driver,
     new_fluid_sndmgr_audio_driver2,
-    delete_fluid_sndmgr_audio_driver, 
+    delete_fluid_sndmgr_audio_driver,
     NULL },
 #endif
 #if JACK_SUPPORT
-  { &quot;jack&quot;, 
-    new_fluid_jack_audio_driver, 
+  { &quot;jack&quot;,
+    new_fluid_jack_audio_driver,
     new_fluid_jack_audio_driver2,
-    delete_fluid_jack_audio_driver, 
+    delete_fluid_jack_audio_driver,
     fluid_jack_audio_driver_settings },
 #endif
 #if AUFILE_SUPPORT
-  { &quot;file&quot;, 
-    new_fluid_file_audio_driver, 
+  { &quot;file&quot;,
+    new_fluid_file_audio_driver,
     NULL,
-    delete_fluid_file_audio_driver, 
+    delete_fluid_file_audio_driver,
     fluid_file_audio_driver_settings },
 #endif
   { NULL, NULL, NULL, NULL, NULL }
@@ -241,11 +241,21 @@
     if (fluid_audio_drivers[i].settings != NULL) {
       fluid_audio_drivers[i].settings(settings);
     }
-  }  
+  }
 }
 
 
-fluid_audio_driver_t* 
+/**
+ * Create a new audio driver.
+ * @param settings Configuration settings used to select and create the audio
+ *   driver.
+ * @param synth Synthesizer instance for which the audio driver is created for.
+ * @return The new audio driver instance.
+ *
+ * Creates a new audio driver for a given 'synth' instance with a defined set
+ * of configuration 'settings'.
+ */
+fluid_audio_driver_t*
 new_fluid_audio_driver(fluid_settings_t* settings, fluid_synth_t* synth)
 {
   int i;
@@ -260,7 +270,7 @@
       driver = (*fluid_audio_drivers[i].new)(settings, synth);
       if (driver) {
 	driver-&gt;name = fluid_audio_drivers[i].name;
-      } 
+      }
       return driver;
     }
   }
@@ -269,7 +279,20 @@
   return NULL;
 }
 
-fluid_audio_driver_t* 
+/**
+ * Create a new audio driver.
+ * @param settings Configuration settings used to select and create the audio
+ *   driver.
+ * @param func Function called to fill audio buffers for audio playback
+ * @param data User defined data pointer to pass to 'func'
+ * @return The new audio driver instance.
+ *
+ * Like new_fluid_audio_driver() but allows for custom audio processing before
+ * audio is sent to audio driver.  It is the responsibility of the callback
+ * 'func' to render the audio into the buffers.
+ * NOTE: Not as efficient as new_fluid_audio_driver().
+ */
+fluid_audio_driver_t*
 new_fluid_audio_driver2(fluid_settings_t* settings, fluid_audio_func_t func, void* data)
 {
   int i;
@@ -285,7 +308,7 @@
       driver = (*fluid_audio_drivers[i].new2)(settings, func, data);
       if (driver) {
 	driver-&gt;name = fluid_audio_drivers[i].name;
-      } 
+      }
       return driver;
     }
   }
@@ -294,7 +317,13 @@
   return NULL;
 }
 
-void 
+/**
+ * Deletes an audio driver instance.
+ * @param driver Audio driver instance to delete
+ *
+ * Shuts down an audio driver and deletes its instance.
+ */
+void
 delete_fluid_audio_driver(fluid_audio_driver_t* driver)
 {
   int i;

Modified: haiku/trunk/src/libs/fluidsynth/src/fluid_adriver.h
===================================================================
--- haiku/trunk/src/libs/fluidsynth/src/fluid_adriver.h	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/src/libs/fluidsynth/src/fluid_adriver.h	2008-03-18 22:17:50 UTC (rev 24454)
@@ -11,7 +11,7 @@
  * WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  * Library General Public License for more details.
- *  
+ *
  * You should have received a copy of the GNU Library General Public
  * License along with this library; if not, write to the Free
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
@@ -30,7 +30,7 @@
  * fluid_audio_driver_t
  */
 
-struct _fluid_audio_driver_t 
+struct _fluid_audio_driver_t
 {
   char* name;
 };

Modified: haiku/trunk/src/libs/fluidsynth/src/fluid_aufile.c
===================================================================
--- haiku/trunk/src/libs/fluidsynth/src/fluid_aufile.c	2008-03-18 21:41:02 UTC (rev 24453)
+++ haiku/trunk/src/libs/fluidsynth/src/fluid_aufile.c	2008-03-18 22:17:50 UTC (rev 24454)
@@ -11,7 +11,7 @@
  * WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  * Library General Public License for more details.
- *  
+ *
  * You should have received a copy of the GNU Library General Public
  * License along with this library; if not, write to the Free
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
@@ -20,7 +20,7 @@
 
 /* fluid_aufile.c
  *
- * Audio driver, outputs the audio to a file (non real-time) 
+ * Audio driver, outputs the audio to a file (non real-time)
  *
  */
 
@@ -31,9 +31,9 @@
 
 
 /** fluid_file_audio_driver_t
- * 
+ *
  * This structure should not be accessed directly. Use audio port
- * functions instead.  
+ * functions instead.
  */

[... truncated: 16762 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006932.html">[Haiku-commits] r24453 - in haiku/trunk/src/system:	boot/platform/bios_ia32 kernel
</A></li>
	<LI>Next message: <A HREF="006934.html">[Haiku-commits] r24455 -	haiku/trunk/src/add-ons/kernel/drivers/audio/echo/generic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6933">[ date ]</a>
              <a href="thread.html#6933">[ thread ]</a>
              <a href="subject.html#6933">[ subject ]</a>
              <a href="author.html#6933">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
