<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r28459 -	haiku/trunk/src/add-ons/kernel/bus_managers/ps2
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r28459%20-%0A%09haiku/trunk/src/add-ons/kernel/bus_managers/ps2&In-Reply-To=%3C200811021130.mA2BUnEw023858%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013216.html">
   <LINK REL="Next"  HREF="013218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r28459 -	haiku/trunk/src/add-ons/kernel/bus_managers/ps2</H1>
    <B>stippi at mail.berlios.de</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r28459%20-%0A%09haiku/trunk/src/add-ons/kernel/bus_managers/ps2&In-Reply-To=%3C200811021130.mA2BUnEw023858%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r28459 -	haiku/trunk/src/add-ons/kernel/bus_managers/ps2">stippi at mail.berlios.de
       </A><BR>
    <I>Sun Nov  2 12:30:49 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="013216.html">[Haiku-commits] r28458 -	haiku/trunk/src/add-ons/kernel/bus_managers/ps2
</A></li>
        <LI>Next message: <A HREF="013218.html">[Haiku-commits] r28460 -	haiku/trunk/src/add-ons/kernel/bus_managers/ps2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13217">[ date ]</a>
              <a href="thread.html#13217">[ thread ]</a>
              <a href="subject.html#13217">[ subject ]</a>
              <a href="author.html#13217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: stippi
Date: 2008-11-02 12:30:41 +0100 (Sun, 02 Nov 2008)
New Revision: 28459
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=28459&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=28459&amp;view=rev</A>

Modified:
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/PS2.h
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/movement_maker.c
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/movement_maker.h
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/packet_buffer.cpp
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/packet_buffer.h
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_common.c
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_dev.c
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_dev.h
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_keyboard.c
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_module.c
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_service.c
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_standard_mouse.h
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.h
   haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_trackpoint.c
Log:
Automatic white space cleanup.


Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/PS2.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/PS2.h	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/PS2.h	2008-11-02 11:30:41 UTC (rev 28459)
@@ -20,8 +20,8 @@
 typedef struct {
 	bus_manager_info	binfo;
 
-	int32 (*function1)(); 
-	int32 (*function2)(); 
+	int32 (*function1)();
+	int32 (*function2)();
 
 } ps2_module_info;
 

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/movement_maker.c
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/movement_maker.c	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/movement_maker.c	2008-11-02 11:30:41 UTC (rev 28459)
@@ -100,17 +100,17 @@
 sqrtf(float x)
 {
         float z;
-        int32 sign = (int)0x80000000; 
+        int32 sign = (int)0x80000000;
         int32 ix,s,q,m,t,i;
         uint32 r;
 
         GET_FLOAT_WORD(ix,x);
 
     /* take care of Inf and NaN */
-        if ((ix&amp;0x7f800000)==0x7f800000) {                        
+        if ((ix&amp;0x7f800000)==0x7f800000) {
             return x*x+x;                /* sqrt(NaN)=NaN, sqrt(+inf)=+inf
                                            sqrt(-inf)=sNaN */
-        } 
+        }
     /* take care of zero */
         if (ix&lt;=0) {
             if ((ix&amp;(~sign))==0) return x;/* sqrt(+-0) = +-0 */
@@ -135,12 +135,12 @@
         r = 0x01000000;                /* r = moving bit from right to left */
 
         while(r!=0) {
-            t = s+r; 
-            if (t&lt;=ix) { 
-                s    = t+r; 
-                ix  -= t; 
-                q   += r; 
-            } 
+            t = s+r;
+            if (t&lt;=ix) {
+                s    = t+r;
+                ix  -= t;
+                q   += r;
+            }
             ix += ix;
             r&gt;&gt;=1;
         }
@@ -163,7 +163,7 @@
 }
 
 
-int32 
+int32
 make_small(float value)
 {
 	if (value &gt; 0)
@@ -173,17 +173,17 @@
 }
 
 
-void 
+void
 get_raw_movement(movement_maker *move, uint32 posX, uint32 posY)
 {
 	int16 i;
 	float meanXOld = 0, meanYOld = 0;
 	float meanX = 0, meanY = 0;
-	
+
 	// calculate mean
 	for (i = 0; i &lt; move-&gt;n_points; i++) {
-		meanXOld+= move-&gt;historyX[i];
-		meanYOld+= move-&gt;historyY[i];
+		meanXOld += move-&gt;historyX[i];
+		meanYOld += move-&gt;historyY[i];
 	}
 	if (move-&gt;n_points == 0) {
 		meanXOld = posX;
@@ -192,10 +192,10 @@
 		meanXOld = meanXOld / move-&gt;n_points;
 		meanYOld = meanYOld / move-&gt;n_points;
 	}
-	
+
 	meanX = (meanXOld + posX) / 2;
 	meanY = (meanYOld + posY) / 2;
-		
+
 	// fill history
 	for (i = 0; i &lt; HISTORY_SIZE - 1; i++) {
 		move-&gt;historyX[i] = move-&gt;historyX[i + 1];
@@ -203,14 +203,14 @@
 	}
 	move-&gt;historyX[HISTORY_SIZE - 1] = meanX;
 	move-&gt;historyY[HISTORY_SIZE - 1] = meanY;
-			
+
 	if (move-&gt;n_points &lt; HISTORY_SIZE) {
 		move-&gt;n_points++;
 		move-&gt;xDelta = 0;
 		move-&gt;yDelta = 0;
 		return;
 	}
-	
+
 	move-&gt;xDelta = make_small((meanX - meanXOld) / 16);
 	move-&gt;yDelta = make_small((meanY - meanYOld) / 16);
 }
@@ -221,9 +221,9 @@
 {
 	// acceleration
 	float acceleration = 1;
-	if (accel_factor) {
-		acceleration = 1 + sqrtf(move-&gt;xDelta * move-&gt;xDelta + move-&gt;yDelta * move-&gt;yDelta)
-			* accel_factor / 50.0;
+	if (accel_factor != 0) {
+		acceleration = 1 + sqrtf(move-&gt;xDelta * move-&gt;xDelta
+			+ move-&gt;yDelta * move-&gt;yDelta) * accel_factor / 50.0;
 	}
 
 	move-&gt;xDelta = make_small(move-&gt;xDelta * acceleration);
@@ -231,7 +231,7 @@
 }
 
 
-void 
+void
 get_movement(movement_maker *move, uint32 posX, uint32 posY)
 {
 	get_raw_movement(move, posX, posY);
@@ -244,21 +244,21 @@
 get_scrolling(movement_maker *move, uint32 posX, uint32 posY)
 {
 	int32 stepsX = 0, stepsY = 0;
-	
+
 	get_raw_movement(move, posX, posY);
 	compute_acceleration(move, move-&gt;scroll_acceleration);
-	
+
 	move-&gt;scrolling_x+= move-&gt;xDelta;
 	move-&gt;scrolling_y+= move-&gt;yDelta;
-	
+
 	stepsX = make_small(move-&gt;scrolling_x / move-&gt;scrolling_xStep);
 	stepsY = make_small(move-&gt;scrolling_y / move-&gt;scrolling_yStep);
-	
+
 	move-&gt;scrolling_x-= stepsX * move-&gt;scrolling_xStep;
 	move-&gt;scrolling_y-= stepsY * move-&gt;scrolling_yStep;
-	
+
 	move-&gt;xDelta = stepsX;
-	move-&gt;yDelta = -1 * stepsY;	
+	move-&gt;yDelta = -1 * stepsY;
 }
 
 
@@ -269,7 +269,7 @@
 		move-&gt;scrolling_xStep = 1;
 	if (move-&gt;scrolling_yStep &lt;= 0)
 		move-&gt;scrolling_yStep = 1;
-	
+
 	move-&gt;n_points = 0;
 	move-&gt;scrolling_x = 0;
 	move-&gt;scrolling_y = 0;

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/movement_maker.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/movement_maker.h	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/movement_maker.h	2008-11-02 11:30:41 UTC (rev 28459)
@@ -11,20 +11,19 @@
 float sqrtf(float x);
 int32 make_small(float value);
 
-typedef struct
-{
+typedef struct {
 	int32			xDelta;
 	int32			yDelta;
-	
+
 	int8			acceleration;
 	int8			speed;
-	
+
 	float			scrolling_x;
 	float			scrolling_y;
 	int32			scrolling_xStep;
 	int32			scrolling_yStep;
 	int32			scroll_acceleration;
-	
+
 	uint8			n_points;
 	float			historyX[HISTORY_SIZE];
 	float			historyY[HISTORY_SIZE];

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/packet_buffer.cpp
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/packet_buffer.cpp	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/packet_buffer.cpp	2008-11-02 11:30:41 UTC (rev 28459)
@@ -31,7 +31,8 @@
 struct packet_buffer *
 create_packet_buffer(size_t size)
 {
-	struct packet_buffer *buffer = (packet_buffer *)malloc(sizeof(packet_buffer));
+	struct packet_buffer *buffer
+		= (packet_buffer *)malloc(sizeof(packet_buffer));
 	if (buffer == NULL)
 		return NULL;
 
@@ -126,7 +127,8 @@
 
 
 size_t
-packet_buffer_write(struct packet_buffer *buffer, const uint8 *data, size_t length)
+packet_buffer_write(struct packet_buffer *buffer, const uint8 *data,
+	size_t length)
 {
 	cpu_status state = disable_interrupts();
 	acquire_spinlock(&amp;buffer-&gt;lock);

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/packet_buffer.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/packet_buffer.h	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/packet_buffer.h	2008-11-02 11:30:41 UTC (rev 28459)
@@ -23,8 +23,10 @@
 size_t packet_buffer_readable(struct packet_buffer *buffer);
 size_t packet_buffer_writable(struct packet_buffer *buffer);
 void packet_buffer_flush(struct packet_buffer *buffer, size_t bytes);
-size_t packet_buffer_read(struct packet_buffer *buffer, uint8 *data, size_t length);
-size_t packet_buffer_write(struct packet_buffer *buffer, const uint8 *data, size_t length);
+size_t packet_buffer_read(struct packet_buffer *buffer, uint8 *data, size_t
+	length);
+size_t packet_buffer_write(struct packet_buffer *buffer, const uint8 *data,
+	size_t length);
 
 #ifdef __cplusplus
 }

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_common.c
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_common.c	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_common.c	2008-11-02 11:30:41 UTC (rev 28459)
@@ -321,7 +321,7 @@
 ps2_init(void)
 {
 	status_t status;
-	
+
 	TRACE(&quot;ps2: init\n&quot;);
 
 	status = get_module(B_ISA_MODULE_NAME, (module_info **)&amp;gIsa);
@@ -383,7 +383,7 @@
 		ps2_service_notify_device_added(&amp;ps2_device[PS2_DEVICE_MOUSE]);
 		ps2_service_notify_device_added(&amp;ps2_device[PS2_DEVICE_KEYB]);
 	}
-	
+
 	TRACE(&quot;ps2: init done!\n&quot;);
 	return B_OK;
 

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_dev.c
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_dev.c	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_dev.c	2008-11-02 11:30:41 UTC (rev 28459)
@@ -102,7 +102,7 @@
 	// probe devices
 	// the probe function has to set the dev name and the dev packet size
 
-#if 0
+#if 1
 	status = probe_trackpoint(dev);
 	if (status == B_OK) {
 		*hooks = &gStandardMouseDeviceHooks;

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_dev.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_dev.h	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_dev.h	2008-11-02 11:30:41 UTC (rev 28459)
@@ -35,7 +35,7 @@
 	data_history	history[2];
 	ps2_dev *		parent_dev;
 	size_t			packet_size;
-	
+
 // functions
 	void          (*disconnect)(ps2_dev *);
 	int32		  (*handle_int)(ps2_dev *);

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_keyboard.c
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_keyboard.c	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_keyboard.c	2008-11-02 11:30:41 UTC (rev 28459)
@@ -60,7 +60,7 @@
 set_typematic(int32 rate, bigtime_t delay)
 {
 	uint8 value;
-	
+
 	TRACE(&quot;ps2: set_typematic rate %ld, delay %Ld\n&quot;, rate, delay);
 
 	// input server and keyboard preferences *seem* to use a range of 20-300
@@ -68,22 +68,22 @@
 		rate = 20;
 	if (rate &gt; 300)
 		rate = 300;
-		
+
 	// map this into range 0-31
 	rate = ((rate - 20) * 31) / (300 - 20);
 
 	// keyboard uses 0 == fast, 31 == slow
 	value = 31 - rate;
-	
+
 	if (delay &gt;= 875000)
 		value |= 3 &lt;&lt; 5;
 	else if (delay &gt;= 625000)
 		value |= 2 &lt;&lt; 5;
 	else if (delay &gt;= 375000)
 		value |= 1 &lt;&lt; 5;
-	else 
+	else
 		value |= 0 &lt;&lt; 5;
-		
+
 	return ps2_dev_command(&amp;ps2_device[PS2_DEVICE_KEYB], PS2_CMD_KEYBOARD_SET_TYPEMATIC, &amp;value, 1, NULL, 0);
 }
 
@@ -103,13 +103,13 @@
 		sIsExtended = true;
 //		TRACE(&quot;Extended key\n&quot;);
 		return B_HANDLED_INTERRUPT;
-	} 
+	}
 
 //	TRACE(&quot;scancode: %x\n&quot;, scancode);
 
 	if (scancode &amp; 0x80) {
 		keyInfo.is_keydown = false;
-		scancode &amp;= 0x7f;	
+		scancode &amp;= 0x7f;
 	} else
 		keyInfo.is_keydown = true;
 
@@ -143,7 +143,7 @@
 	status = acquire_sem_etc(sKeyboardSem, 1, B_CAN_INTERRUPT, 0);
 	if (status &lt; B_OK)
 		return status;
-		
+
 	if (!ps2_device[PS2_DEVICE_KEYB].active) {
 		TRACE(&quot;ps2: read_keyboard_packet, Error device no longer active\n&quot;);
 		return B_ERROR;
@@ -219,7 +219,7 @@
 
 	if (atomic_or(&amp;sKeyboardOpenMask, 1) != 0)
 		return B_BUSY;
-		
+
 	status = probe_keyboard();
 	if (status != B_OK) {
 		INFO(&quot;ps2: keyboard probing failed\n&quot;);
@@ -269,7 +269,7 @@
 	delete_sem(sKeyboardSem);
 
 	atomic_and(&amp;ps2_device[PS2_DEVICE_KEYB].flags, ~PS2_FLAG_ENABLED);
-	
+
 	atomic_and(&amp;sKeyboardOpenMask, 0);
 
 	TRACE(&quot;ps2: keyboard_close done\n&quot;);
@@ -338,7 +338,7 @@
 			// 0xF8 (Set All Keys Make/Break) - Keyboard responds with &quot;ack&quot; (0xFA).
 			return ps2_dev_command(&amp;ps2_device[PS2_DEVICE_KEYB], 0xf8, NULL, 0, NULL, 0);
 		}
-		
+
 		case KB_SET_KEY_REPEAT_RATE:
 		{
 			int32 key_repeat_rate;
@@ -350,7 +350,7 @@
 			sKeyboardRepeatRate = key_repeat_rate;
 			return B_OK;
 		}
-		
+
 		case KB_GET_KEY_REPEAT_RATE:
 		{
 			TRACE(&quot;ps2: ioctl KB_GET_KEY_REPEAT_RATE\n&quot;);
@@ -367,7 +367,7 @@
 				return B_ERROR;
 			sKeyboardRepeatDelay = key_repeat_delay;
 			return B_OK;
-				
+
 		}
 
 		case KB_GET_KEY_REPEAT_DELAY:

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_module.c
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_module.c	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_module.c	2008-11-02 11:30:41 UTC (rev 28459)
@@ -34,31 +34,31 @@
 		case B_MODULE_INIT:
 			return ps2_init();
 
-		case B_MODULE_UNINIT: 
+		case B_MODULE_UNINIT:
 			ps2_uninit();
-			break; 
-		default: 
+			break;
+		default:
 			return B_ERROR;
 	}
-	return B_OK; 
+	return B_OK;
 }
 
 
 static ps2_module_info ps2_module = {
 	.binfo = {
-		.minfo = { 
+		.minfo = {
 			.name    = B_PS2_MODULE_NAME,
 			.flags   = B_KEEP_LOADED,
 			.std_ops = std_ops,
 		},
 		.rescan = NULL,
 	},
-	&amp;function1, 
-	&amp;function2, 
+	&amp;function1,
+	&amp;function2,
 };
 
 
-module_info *modules[] = { 
-	(module_info *)&amp;ps2_module, 
+module_info *modules[] = {
+	(module_info *)&amp;ps2_module,
 	NULL
 };

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_service.c
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_service.c	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_service.c	2008-11-02 11:30:41 UTC (rev 28459)
@@ -42,10 +42,10 @@
 	ps2_service_cmd cmd;
 
 	TRACE(&quot;ps2: ps2_service_notify_device_added %s\n&quot;, dev-&gt;name);
-	
+
 	cmd.id = PS2_SERVICE_NOTIFY_DEVICE_ADDED;
 	cmd.dev = dev;
-	
+
 	packet_buffer_write(sServiceCmdBuffer, (const uint8 *)&amp;cmd, sizeof(cmd));
 	release_sem_etc(sServiceSem, 1, B_DO_NOT_RESCHEDULE);
 
@@ -59,10 +59,10 @@
 	ps2_service_cmd cmd;
 
 	TRACE(&quot;ps2: ps2_service_notify_device_republish %s\n&quot;, dev-&gt;name);
-	
+
 	cmd.id = PS2_SERVICE_NOTIFY_DEVICE_REPUBLISH;
 	cmd.dev = dev;
-	
+
 	packet_buffer_write(sServiceCmdBuffer, (const uint8 *)&amp;cmd, sizeof(cmd));
 	release_sem_etc(sServiceSem, 1, B_DO_NOT_RESCHEDULE);
 
@@ -79,7 +79,7 @@
 
 	cmd.id = PS2_SERVICE_NOTIFY_DEVICE_REMOVED;
 	cmd.dev = dev;
-	
+
 	packet_buffer_write(sServiceCmdBuffer, (const uint8 *)&amp;cmd, sizeof(cmd));
 	release_sem_etc(sServiceSem, 1, B_DO_NOT_RESCHEDULE);
 
@@ -115,7 +115,7 @@
 					snooze(2500000);
 					ps2_dev_publish(cmd.dev);
 					break;
-					
+
 				case PS2_SERVICE_NOTIFY_DEVICE_REMOVED:
 					TRACE(&quot;ps2: PS2_SERVICE_NOTIFY_DEVICE_REMOVED %s\n&quot;, cmd.dev-&gt;name);
 					ps2_dev_unpublish(cmd.dev);
@@ -139,7 +139,7 @@
 ps2_republish(int argc, char **argv)
 {
 	int dev = 4;
-	if (argc == 2) 
+	if (argc == 2)
 		dev = strtoul(argv[1], NULL, 0);
 	if (dev &lt; 0 || dev &gt; 4)
 		dev = 4;
@@ -171,7 +171,7 @@
 
 	TRACE(&quot;ps2: ps2_service_init done\n&quot;);
 	return B_OK;
-	
+
 err3:
 	delete_sem(sServiceSem);
 err2:

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_standard_mouse.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_standard_mouse.h	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_standard_mouse.h	2008-11-02 11:30:41 UTC (rev 28459)
@@ -28,7 +28,7 @@
 typedef struct
 {
 	ps2_dev *		dev;
-	
+
 	sem_id			standard_mouse_sem;
 	packet_buffer *	standard_mouse_buffer;
 	bigtime_t		click_last_time;
@@ -49,11 +49,11 @@
 status_t standard_mouse_freecookie(void *_cookie);
 status_t standard_mouse_ioctl(void *_cookie, uint32 op, void *buffer,
 	size_t length);
-	
+
 int32 standard_mouse_handle_int(ps2_dev *dev);
 void standard_mouse_disconnect(ps2_dev *dev);
 
-device_hooks gStandardMouseDeviceHooks; 
+device_hooks gStandardMouseDeviceHooks;
 
 
 #endif /* __PS2_STANDARD_MOUSE_H */

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.h
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.h	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_synaptics.h	2008-11-02 11:30:41 UTC (rev 28459)
@@ -11,7 +11,7 @@
 
 #define SYN_TOUCHPAD			0x47
 // Synaptics modes
-#define SYN_ABSOLUTE_MODE		0x80 
+#define SYN_ABSOLUTE_MODE		0x80
 // Absolute plus w mode
 #define SYN_ABSOLUTE_W_MODE		0x81
 #define SYN_FOUR_BYTE_CHILD		(1 &lt;&lt; 1)
@@ -25,7 +25,7 @@
 // synaptics touchpad proportions
 #define SYN_EDGE_MOTION_WIDTH	50
 #define SYN_EDGE_MOTION_SPEED	5
-#define SYN_AREA_OFFSET			40	// increase the touchpad size a little bit 
+#define SYN_AREA_OFFSET			40	// increase the touchpad size a little bit
 #define SYN_AREA_START_X		(1472 - SYN_AREA_OFFSET)
 #define SYN_AREA_END_X			(5472 + SYN_AREA_OFFSET)
 #define SYN_AREA_WIDTH_X		(SYN_AREA_END_X - SYN_AREA_START_X)
@@ -48,14 +48,14 @@
 typedef struct {
 	uint8 majorVersion;
 	uint8 minorVersion;
-	
+
 	bool capExtended;
 	bool capSleep;
 	bool capFourButtons;
 	bool capMultiFinger;
 	bool capPalmDetection;
 	bool capPassThrough;
-	
+
 } touchpad_info;
 
 
@@ -68,20 +68,20 @@
 	bool		finger;
 	bool		gesture;
 	// absolut w mode
-	uint8		wValue;	
+	uint8		wValue;
 } touch_event;
 
 
 typedef struct
 {
 	ps2_dev *			dev;
-	
+
 	sem_id				synaptics_sem;
 	packet_buffer 	*	synaptics_ring_buffer;
 	size_t				packet_index;
 	uint8				packet_buffer[PS2_PACKET_SYNAPTICS];
 	uint8				mode;
-	
+
 	movement_maker		movement_maker;
 	bool				movement_started;
 	bool				scrolling_started;
@@ -93,7 +93,7 @@
 	bool				tapdrag_started;
 	bool				valid_edge_motion;
 	bool				double_click;
-	
+
 	touchpad_settings	settings;
 } synaptics_cookie;
 
@@ -119,7 +119,7 @@
 status_t synaptics_close(void *_cookie);
 status_t synaptics_freecookie(void *_cookie);
 status_t synaptics_ioctl(void *_cookie, uint32 op, void *buffer, size_t length);
-	
+
 int32 synaptics_handle_int(ps2_dev *dev);
 void synaptics_disconnect(ps2_dev *dev);
 

Modified: haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_trackpoint.c
===================================================================
--- haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_trackpoint.c	2008-11-02 10:49:23 UTC (rev 28458)
+++ haiku/trunk/src/add-ons/kernel/bus_managers/ps2/ps2_trackpoint.c	2008-11-02 11:30:41 UTC (rev 28459)
@@ -19,14 +19,14 @@
 
 	TRACE(&quot;TRACKPOINT: probe\n&quot;);
 	ps2_dev_command(dev, 0xE1, NULL, 0, val, 2);
-	
+
 	if (val[0] != 0x01) {
 		TRACE(&quot;TRACKPOINT: not found\n&quot;);
 		return B_ERROR;
 	}
 	dev-&gt;name = kTrackpointPath[dev-&gt;idx];
 	dev-&gt;packet_size = 3;
-	TRACE(&quot;TRACKPOINT: version 0x%x found\n&quot;, val[1]);	
-		
+	TRACE(&quot;TRACKPOINT: version 0x%x found\n&quot;, val[1]);
+
 	return B_OK;
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="013216.html">[Haiku-commits] r28458 -	haiku/trunk/src/add-ons/kernel/bus_managers/ps2
</A></li>
	<LI>Next message: <A HREF="013218.html">[Haiku-commits] r28460 -	haiku/trunk/src/add-ons/kernel/bus_managers/ps2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13217">[ date ]</a>
              <a href="thread.html#13217">[ thread ]</a>
              <a href="subject.html#13217">[ subject ]</a>
              <a href="author.html#13217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
