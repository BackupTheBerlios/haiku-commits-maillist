<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r20704 - haiku/trunk/src/servers/input
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r20704%20-%20haiku/trunk/src/servers/input&In-Reply-To=%3C200704151417.l3FEH2E6009315%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001609.html">
   <LINK REL="Next"  HREF="001612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r20704 - haiku/trunk/src/servers/input</H1>
    <B>korli at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r20704%20-%20haiku/trunk/src/servers/input&In-Reply-To=%3C200704151417.l3FEH2E6009315%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r20704 - haiku/trunk/src/servers/input">korli at mail.berlios.de
       </A><BR>
    <I>Sun Apr 15 16:17:02 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001609.html">[Haiku-commits] r20703 - in haiku/trunk: headers/private/media	src/kits/media src/servers/media
</A></li>
        <LI>Next message: <A HREF="001612.html">[Haiku-commits] r20705 - haiku/trunk/build/jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1610">[ date ]</a>
              <a href="thread.html#1610">[ thread ]</a>
              <a href="subject.html#1610">[ subject ]</a>
              <a href="author.html#1610">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: korli
Date: 2007-04-15 16:17:02 +0200 (Sun, 15 Apr 2007)
New Revision: 20704
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=20704&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=20704&amp;view=rev</A>

Modified:
   haiku/trunk/src/servers/input/MethodMenuItem.cpp
   haiku/trunk/src/servers/input/MethodMenuItem.h
   haiku/trunk/src/servers/input/MethodReplicant.cpp
   haiku/trunk/src/servers/input/MethodReplicant.h
Log:
code style


Modified: haiku/trunk/src/servers/input/MethodMenuItem.cpp
===================================================================
--- haiku/trunk/src/servers/input/MethodMenuItem.cpp	2007-04-15 13:59:59 UTC (rev 20703)
+++ haiku/trunk/src/servers/input/MethodMenuItem.cpp	2007-04-15 14:17:02 UTC (rev 20704)
@@ -24,7 +24,7 @@
 {
 	SetLabel(name);
 	fIcon.SetBits(icon, MENUITEM_ICON_SIZE * MENUITEM_ICON_SIZE, 0, B_CMAP8);
-	fMessenger = messenger;	
+	fMessenger = messenger;
 }
 
 

Modified: haiku/trunk/src/servers/input/MethodMenuItem.h
===================================================================
--- haiku/trunk/src/servers/input/MethodMenuItem.h	2007-04-15 13:59:59 UTC (rev 20703)
+++ haiku/trunk/src/servers/input/MethodMenuItem.h	2007-04-15 14:17:02 UTC (rev 20704)
@@ -2,13 +2,13 @@
 //
 //	Copyright (c) 2004, Haiku
 //
-//  This software is part of the Haiku distribution and is covered 
+//  This software is part of the Haiku distribution and is covered
 //  by the Haiku license.
 //
 //
 //  File:			MethodMenuItem.h
 //  Authors:		J&#233;r&#244;me Duval,
-//	
+//
 //  Description:	Input Server
 //  Created:		October 19, 2004
 //
@@ -23,27 +23,26 @@
 #define MENUITEM_ICON_SIZE 16
 
 class MethodMenuItem : public BMenuItem {
-public:
-	MethodMenuItem(int32 cookie, const char *label, const uchar *icon, BMenu *subMenu, BMessenger &amp;messenger);
-	MethodMenuItem(int32 cookie, const char *label, const uchar *icon);
-		
-	virtual ~MethodMenuItem();
+	public:
+		MethodMenuItem(int32 cookie, const char *label, const uchar *icon, BMenu *subMenu, BMessenger &amp;messenger);
+		MethodMenuItem(int32 cookie, const char *label, const uchar *icon);
 
-	virtual void DrawContent();
-	virtual void GetContentSize(float *width, float *height);
+		virtual ~MethodMenuItem();
 
-	void SetName(const char *name);
-	const char *Name() { return Label(); }; 
+		virtual void DrawContent();
+		virtual void GetContentSize(float *width, float *height);
 
-	void SetIcon(const uchar *icon);
-	const uchar *Icon() { return (uchar *)fIcon.Bits(); };
+		void SetName(const char *name);
+		const char *Name() { return Label(); };
 
-	const int32 Cookie() { return fCookie; };
-private:
-	BBitmap fIcon;
-	int32 fCookie;
-	BMessenger fMessenger;
+		void SetIcon(const uchar *icon);
+		const uchar *Icon() { return(uchar *)fIcon.Bits(); };
+
+		const int32 Cookie() { return fCookie; };
+	private:
+		BBitmap fIcon;
+		int32 fCookie;
+		BMessenger fMessenger;
 };
 
-#endif 
-
+#endif

Modified: haiku/trunk/src/servers/input/MethodReplicant.cpp
===================================================================
--- haiku/trunk/src/servers/input/MethodReplicant.cpp	2007-04-15 13:59:59 UTC (rev 20703)
+++ haiku/trunk/src/servers/input/MethodReplicant.cpp	2007-04-15 14:17:02 UTC (rev 20704)
@@ -2,13 +2,13 @@
 //
 //	Copyright (c) 2004, Haiku
 //
-//  This software is part of the Haiku distribution and is covered 
+//  This software is part of the Haiku distribution and is covered
 //  by the Haiku license.
 //
 //
 //  File:			MethodReplicant.cpp
 //  Authors:		J&#233;r&#244;me Duval,
-//	
+//
 //  Description:	Input Server
 //  Created:		October 13, 2004
 //
@@ -33,29 +33,29 @@
 #ifdef DEBUG
 	#define CALLED() PRINT((&quot;CALLED %s \n&quot;, __PRETTY_FUNCTION__));
 #else
-	#define CALLED() 
+	#define CALLED()
 #endif
 
 
 MethodReplicant::MethodReplicant(const char* signature)
 	:	BView(BRect(0, 0, 15, 15), REPLICANT_CTL_NAME, B_FOLLOW_ALL, B_WILL_DRAW),
-		fMenu(&quot;&quot;, false, false)
+	fMenu(&quot;&quot;, false, false)
 {
 	// Background Bitmap
 	fSegments = new BBitmap(BRect(0, 0, kRemoteWidth - 1, kRemoteHeight - 1), kRemoteColorSpace);
 	fSegments-&gt;SetBits(kRemoteBits, kRemoteWidth*kRemoteHeight, 0, kRemoteColorSpace);
 	// Background Color
-	SetViewColor(184,184,184);
+	SetViewColor(184, 184, 184);
 
 	//add dragger
 	BRect rect(Bounds());
-	rect.left = rect.right-7.0; 
-	rect.top = rect.bottom-7.0;
+	rect.left = rect.right - 7.0;
+	rect.top = rect.bottom - 7.0;
 	BDragger *dragger = new BDragger(rect, this, B_FOLLOW_RIGHT | B_FOLLOW_BOTTOM);
 	AddChild(dragger);
 	dragger-&gt;SetViewColor(B_TRANSPARENT_32_BIT);
-	
-	ASSERT(signature!=NULL);
+
+	ASSERT(signature != NULL);
 	fSignature = strdup(signature);
 
 	fMenu.SetFont(be_plain_font);
@@ -65,15 +65,15 @@
 
 MethodReplicant::MethodReplicant(BMessage *message)
 	:	BView(message),
-		fMenu(&quot;&quot;, false, false)
+	fMenu(&quot;&quot;, false, false)
 {
 	// Background Bitmap
 	fSegments = new BBitmap(BRect(0, 0, kRemoteWidth - 1, kRemoteHeight - 1), kRemoteColorSpace);
 	fSegments-&gt;SetBits(kRemoteBits, kRemoteWidth*kRemoteHeight, 0, kRemoteColorSpace);
-	
+
 	const char *signature = NULL;
 	message-&gt;FindString(&quot;add_on&quot;, &amp;signature);
-	ASSERT(signature!=NULL);
+	ASSERT(signature != NULL);
 	fSignature = strdup(signature);
 
 	fMenu.SetFont(be_plain_font);
@@ -99,7 +99,7 @@
 }
 
 
-status_t 
+status_t
 MethodReplicant::Archive(BMessage *data, bool deep) const
 {
 	BView::Archive(data, deep);
@@ -118,7 +118,7 @@
 	msg.AddMessenger(&quot;address&quot;, messenger);
 
 	BMessenger inputMessenger(fSignature);
-	if (inputMessenger.SendMessage(&amp;msg)!=B_OK) {
+	if (inputMessenger.SendMessage(&amp;msg) != B_OK) {
 		printf(&quot;error when contacting input_server\n&quot;);
 	}
 }
@@ -127,45 +127,45 @@
 void
 MethodReplicant::MessageReceived(BMessage *message)
 {
-	PRINT((&quot;%s what:%c%c%c%c\n&quot;, __PRETTY_FUNCTION__, message-&gt;what&gt;&gt;24, message-&gt;what&gt;&gt;16, message-&gt;what&gt;&gt;8, message-&gt;what));
+	PRINT((&quot;%s what:%c%c%c%c\n&quot;, __PRETTY_FUNCTION__, message-&gt;what &gt;&gt; 24, message-&gt;what &gt;&gt; 16, message-&gt;what &gt;&gt; 8, message-&gt;what));
 	PRINT_OBJECT(*message);
 	switch (message-&gt;what) {
-	case B_ABOUT_REQUESTED:
-		(new BAlert(&quot;About Method Replicant&quot;, &quot;Method Replicant (Replicant)\n&quot;
-			    &quot;  Brought to you by J&#233;r&#244;me DUVAL.\n\n&quot;
-			    &quot;Haiku, 2004&quot;,&quot;OK&quot;))-&gt;Go();
-		break;
-	case IS_UPDATE_NAME:
-		UpdateMethodName(message);
-		break;
-	case IS_UPDATE_ICON:
-		UpdateMethodIcon(message);
-		break;
-	case IS_UPDATE_MENU:
-		UpdateMethodMenu(message);
-		break;
-	case IS_UPDATE_METHOD:
-		UpdateMethod(message);
-		break;
-	case IS_ADD_METHOD:
-		AddMethod(message);
-		break;
-	case IS_REMOVE_METHOD:
-		RemoveMethod(message);
-		break;
+		case B_ABOUT_REQUESTED:
+			(new BAlert(&quot;About Method Replicant&quot;, &quot;Method Replicant (Replicant)\n&quot;
+				&quot;  Brought to you by J&#233;r&#244;me DUVAL.\n\n&quot;
+				&quot;Haiku, 2004&quot;, &quot;OK&quot;))-&gt;Go();
+			break;
+		case IS_UPDATE_NAME:
+			UpdateMethodName(message);
+			break;
+		case IS_UPDATE_ICON:
+			UpdateMethodIcon(message);
+			break;
+		case IS_UPDATE_MENU:
+			UpdateMethodMenu(message);
+			break;
+		case IS_UPDATE_METHOD:
+			UpdateMethod(message);
+			break;
+		case IS_ADD_METHOD:
+			AddMethod(message);
+			break;
+		case IS_REMOVE_METHOD:
+			RemoveMethod(message);
+			break;
 
-	default:
-		BView::MessageReceived(message);
-		break;		
+		default:
+			BView::MessageReceived(message);
+			break;
 	}
 }
 
 
-void 
+void
 MethodReplicant::Draw(BRect rect)
 {
 	BView::Draw(rect);
-	
+
 	SetDrawingMode(B_OP_OVER);
 	DrawBitmap(fSegments);
 }
@@ -178,13 +178,13 @@
 	uint32 mouseButtons;
 	BPoint where;
 	GetMouse(&amp;where, &amp;mouseButtons, true);
-	
+
 	where = ConvertToScreen(point);
-	
+
 	fMenu.SetTargetForItems(this);
-	BMenuItem *item = fMenu.Go(where, true, true, 
+	BMenuItem *item = fMenu.Go(where, true, true,
 		BRect(where - BPoint(4, 4), where + BPoint(4, 4)));
-		
+
 	if (item &amp;&amp; dynamic_cast&lt;MethodMenuItem *&gt;(item)) {
 		BMessage msg(IS_SET_METHOD);
 		msg.AddInt32(&quot;cookie&quot;, ((MethodMenuItem*)item)-&gt;Cookie());
@@ -201,12 +201,12 @@
 }
 
 
-void 
+void
 MethodReplicant::UpdateMethod(BMessage *message)
 {
 	CALLED();
 	int32 cookie;
-	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie)!=B_OK) {
+	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie) != B_OK) {
 		fprintf(stderr, &quot;can't find cookie in message\n&quot;);
 		return;
 	}
@@ -223,19 +223,19 @@
 }
 
 
-void 
+void
 MethodReplicant::UpdateMethodIcon(BMessage *message)
 {
 	CALLED();
 	int32 cookie;
-	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie)!=B_OK) {
+	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie) != B_OK) {
 		fprintf(stderr, &quot;can't find cookie in message\n&quot;);
 		return;
 	}
 
 	const uchar *data;
 	ssize_t numBytes;
-	if (message-&gt;FindData(&quot;icon&quot;, B_ANY_TYPE, (const void**)&amp;data, &amp;numBytes)!=B_OK) {
+	if (message-&gt;FindData(&quot;icon&quot;, B_ANY_TYPE, (const void**)&amp;data, &amp;numBytes) != B_OK) {
 		fprintf(stderr, &quot;can't find icon in message\n&quot;);
 		return;
 	}
@@ -250,25 +250,25 @@
 }
 
 
-void 
+void
 MethodReplicant::UpdateMethodMenu(BMessage *message)
 {
 	CALLED();
 	int32 cookie;
-	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie)!=B_OK) {
+	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie) != B_OK) {
 		fprintf(stderr, &quot;can't find cookie in message\n&quot;);
 		return;
 	}
 
 	BMessage msg;
-	if (message-&gt;FindMessage(&quot;menu&quot;, &amp;msg)!=B_OK) {
+	if (message-&gt;FindMessage(&quot;menu&quot;, &amp;msg) != B_OK) {
 		fprintf(stderr, &quot;can't find menu in message\n&quot;);
 		return;
 	}
 	PRINT_OBJECT(msg);
 
 	BMessenger messenger;
-	if (message-&gt;FindMessenger(&quot;target&quot;, &amp;messenger)!=B_OK) {
+	if (message-&gt;FindMessenger(&quot;target&quot;, &amp;messenger) != B_OK) {
 		fprintf(stderr, &quot;can't find target in message\n&quot;);
 		return;
 	}
@@ -288,7 +288,7 @@
 
 	MethodMenuItem *item2 = NULL;
 	if (menu)
-		item2 = new MethodMenuItem(cookie, item-&gt;Label(), item-&gt;Icon(), 
+		item2 = new MethodMenuItem(cookie, item-&gt;Label(), item-&gt;Icon(),
 			menu, messenger);
 	else
 		item2 = new MethodMenuItem(cookie, item-&gt;Label(), item-&gt;Icon());
@@ -299,18 +299,18 @@
 }
 
 
-void 
+void
 MethodReplicant::UpdateMethodName(BMessage *message)
 {
 	CALLED();
 	int32 cookie;
-	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie)!=B_OK) {
+	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie) != B_OK) {
 		fprintf(stderr, &quot;can't find cookie in message\n&quot;);
 		return;
 	}
 
 	const char *name;
-	if (message-&gt;FindString(&quot;name&quot;, &amp;name)!=B_OK) {
+	if (message-&gt;FindString(&quot;name&quot;, &amp;name) != B_OK) {
 		fprintf(stderr, &quot;can't find name in message\n&quot;);
 		return;
 	}
@@ -328,36 +328,36 @@
 MethodMenuItem *
 MethodReplicant::FindItemByCookie(int32 cookie)
 {
-	for (int32 i=0; i&lt;fMenu.CountItems(); i++) {
+	for (int32 i = 0; i &lt; fMenu.CountItems(); i++) {
 		MethodMenuItem *item = (MethodMenuItem *)fMenu.ItemAt(i);
 		PRINT((&quot;cookie : 0x%lx\n&quot;, item-&gt;Cookie()));
-		if (item-&gt;Cookie()==cookie)
+		if (item-&gt;Cookie() == cookie)
 			return item;
-	}	
+	}
 
 	return NULL;
 }
 
 
-void 
+void
 MethodReplicant::AddMethod(BMessage *message)
 {
 	CALLED();
 	int32 cookie;
-	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie)!=B_OK) {
+	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie) != B_OK) {
 		fprintf(stderr, &quot;can't find cookie in message\n&quot;);
 		return;
 	}
 
 	const char *name;
-	if (message-&gt;FindString(&quot;name&quot;, &amp;name)!=B_OK) {
+	if (message-&gt;FindString(&quot;name&quot;, &amp;name) != B_OK) {
 		fprintf(stderr, &quot;can't find name in message\n&quot;);
 		return;
 	}
-	
+
 	const uchar *icon;
 	ssize_t numBytes;
-	if (message-&gt;FindData(&quot;icon&quot;, B_ANY_TYPE, (const void**)&amp;icon, &amp;numBytes)!=B_OK) {
+	if (message-&gt;FindData(&quot;icon&quot;, B_ANY_TYPE, (const void**)&amp;icon, &amp;numBytes) != B_OK) {
 		fprintf(stderr, &quot;can't find icon in message\n&quot;);
 		return;
 	}
@@ -377,12 +377,12 @@
 }
 
 
-void 
+void
 MethodReplicant::RemoveMethod(BMessage *message)
 {
 	CALLED();
 	int32 cookie;
-	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie)!=B_OK) {
+	if (message-&gt;FindInt32(&quot;cookie&quot;, &amp;cookie) != B_OK) {
 		fprintf(stderr, &quot;can't find cookie in message\n&quot;);
 		return;
 	}

Modified: haiku/trunk/src/servers/input/MethodReplicant.h
===================================================================
--- haiku/trunk/src/servers/input/MethodReplicant.h	2007-04-15 13:59:59 UTC (rev 20703)
+++ haiku/trunk/src/servers/input/MethodReplicant.h	2007-04-15 14:17:02 UTC (rev 20704)
@@ -2,13 +2,13 @@
 //
 //	Copyright (c) 2004, Haiku
 //
-//  This software is part of the Haiku distribution and is covered 
+//  This software is part of the Haiku distribution and is covered
 //  by the Haiku license.
 //
 //
 //  File:			MethodReplicant.h
 //  Authors:		J&#233;r&#244;me Duval,
-//	
+//
 //  Description:	Input Server
 //  Created:		October 13, 2004
 //
@@ -26,39 +26,38 @@
 class _EXPORT MethodReplicant;
 
 class MethodReplicant : public BView {
-public:
-	MethodReplicant(const char* signature);
-		
-	MethodReplicant(BMessage *);
+	public:
+		MethodReplicant(const char* signature);
+
+		MethodReplicant(BMessage *);
 		// BMessage * based constructor needed to support archiving
-	virtual ~MethodReplicant();
+		virtual ~MethodReplicant();
 
-	// archiving overrides
-	static MethodReplicant *Instantiate(BMessage *data);
-	virtual	status_t Archive(BMessage *data, bool deep = true) const;
+		// archiving overrides
+		static MethodReplicant *Instantiate(BMessage *data);
+		virtual	status_t Archive(BMessage *data, bool deep = true) const;
 
-	virtual void AttachedToWindow();
+		virtual void AttachedToWindow();
 
-	// misc BView overrides
-	virtual void MouseDown(BPoint);
-	virtual void MouseUp(BPoint);
-	
-	virtual void Draw(BRect );
+		// misc BView overrides
+		virtual void MouseDown(BPoint);
+		virtual void MouseUp(BPoint);
 
-	virtual void MessageReceived(BMessage *);
-private:
-	BBitmap *fSegments;
-	char *fSignature;
-	BPopUpMenu fMenu;
+		virtual void Draw(BRect);
 
-	void UpdateMethod(BMessage *);
-	void UpdateMethodIcon(BMessage *);
-	void UpdateMethodMenu(BMessage *);
-	void UpdateMethodName(BMessage *);
-	void AddMethod(BMessage *message);
-	void RemoveMethod(BMessage *message);
-	MethodMenuItem *FindItemByCookie(int32 cookie);
+		virtual void MessageReceived(BMessage *);
+	private:
+		BBitmap *fSegments;
+		char *fSignature;
+		BPopUpMenu fMenu;
+
+		void UpdateMethod(BMessage *);
+		void UpdateMethodIcon(BMessage *);
+		void UpdateMethodMenu(BMessage *);
+		void UpdateMethodName(BMessage *);
+		void AddMethod(BMessage *message);
+		void RemoveMethod(BMessage *message);
+		MethodMenuItem *FindItemByCookie(int32 cookie);
 };
 
-#endif 
-
+#endif


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001609.html">[Haiku-commits] r20703 - in haiku/trunk: headers/private/media	src/kits/media src/servers/media
</A></li>
	<LI>Next message: <A HREF="001612.html">[Haiku-commits] r20705 - haiku/trunk/build/jam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1610">[ date ]</a>
              <a href="thread.html#1610">[ thread ]</a>
              <a href="subject.html#1610">[ subject ]</a>
              <a href="author.html#1610">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
