<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Haiku-commits] r20880 - in haiku/trunk/src/apps/cortex: .	AddOnHost DiagramView ValControl
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/haiku-commits/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r20880%20-%20in%20haiku/trunk/src/apps/cortex%3A%20.%0A%09AddOnHost%20DiagramView%20ValControl&In-Reply-To=%3C200704281205.l3SC5lLK009323%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001887.html">
   <LINK REL="Next"  HREF="001890.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Haiku-commits] r20880 - in haiku/trunk/src/apps/cortex: .	AddOnHost DiagramView ValControl</H1>
    <B>axeld at BerliOS</B> 
    <A HREF="mailto:haiku-commits%40lists.berlios.de?Subject=Re%3A%20%5BHaiku-commits%5D%20r20880%20-%20in%20haiku/trunk/src/apps/cortex%3A%20.%0A%09AddOnHost%20DiagramView%20ValControl&In-Reply-To=%3C200704281205.l3SC5lLK009323%40sheep.berlios.de%3E"
       TITLE="[Haiku-commits] r20880 - in haiku/trunk/src/apps/cortex: .	AddOnHost DiagramView ValControl">axeld at mail.berlios.de
       </A><BR>
    <I>Sat Apr 28 14:05:47 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001887.html">[Haiku-commits] r20879 - haiku/trunk/src/tools/fs_shell
</A></li>
        <LI>Next message: <A HREF="001890.html">[Haiku-commits] r20881 - in haiku/trunk/src/apps/cortex:	DiagramView support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1889">[ date ]</a>
              <a href="thread.html#1889">[ thread ]</a>
              <a href="subject.html#1889">[ subject ]</a>
              <a href="author.html#1889">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: axeld
Date: 2007-04-28 14:05:46 +0200 (Sat, 28 Apr 2007)
New Revision: 20880
ViewCVS: <A HREF="http://svn.berlios.de/viewcvs/haiku?rev=20880&amp;view=rev">http://svn.berlios.de/viewcvs/haiku?rev=20880&amp;view=rev</A>

Modified:
   haiku/trunk/src/apps/cortex/AddOnHost/AddOnHostApp.h
   haiku/trunk/src/apps/cortex/DiagramView/DiagramBox.cpp
   haiku/trunk/src/apps/cortex/DiagramView/DiagramBox.h
   haiku/trunk/src/apps/cortex/DiagramView/DiagramDefs.h
   haiku/trunk/src/apps/cortex/ValControl/NumericValControl.cpp
   haiku/trunk/src/apps/cortex/ValControl/NumericValControl.h
   haiku/trunk/src/apps/cortex/ValControl/ValCtrlLayoutEntry.cpp
   haiku/trunk/src/apps/cortex/ValControl/ValCtrlLayoutEntry.h
   haiku/trunk/src/apps/cortex/cortex_defs.h
Log:
Another round of style updates by Vasilis Kaoutsis.


Modified: haiku/trunk/src/apps/cortex/AddOnHost/AddOnHostApp.h
===================================================================
--- haiku/trunk/src/apps/cortex/AddOnHost/AddOnHostApp.h	2007-04-28 10:56:19 UTC (rev 20879)
+++ haiku/trunk/src/apps/cortex/AddOnHost/AddOnHostApp.h	2007-04-28 12:05:46 UTC (rev 20880)
@@ -22,7 +22,7 @@
 __BEGIN_CORTEX_NAMESPACE
 namespace addon_host {
 
-class App:public BApplication {
+class App : public BApplication {
 	typedef	BApplication _inherited;
 
 	public:

Modified: haiku/trunk/src/apps/cortex/DiagramView/DiagramBox.cpp
===================================================================
--- haiku/trunk/src/apps/cortex/DiagramView/DiagramBox.cpp	2007-04-28 10:56:19 UTC (rev 20879)
+++ haiku/trunk/src/apps/cortex/DiagramView/DiagramBox.cpp	2007-04-28 12:05:46 UTC (rev 20880)
@@ -16,41 +16,35 @@
 #define D_MOUSE(x) //PRINT (x)
 #define D_DRAW(x) //PRINT (x)
 
-// -------------------------------------------------------- //
-// *** ctor/dtor (public)
-// -------------------------------------------------------- //
 
-DiagramBox::DiagramBox(
-	BRect frame,
-	uint32 flags)
+//	#pragma mark -
+
+
+DiagramBox::DiagramBox(BRect frame, uint32 flags)
 	: DiagramItem(DiagramItem::M_BOX),
-	  DiagramItemGroup(DiagramItem::M_ENDPOINT),
-	  m_frame(frame),
-	  m_flags(flags)
+	DiagramItemGroup(DiagramItem::M_ENDPOINT),
+	m_frame(frame),
+	m_flags(flags)
 {
 	D_METHOD((&quot;DiagramBox::DiagramBox()\n&quot;));
 	makeDraggable(true);
 }
 
+
 DiagramBox::~DiagramBox()
 {
 	D_METHOD((&quot;DiagramBox::~DiagramBox()\n&quot;));
 }
 
-// -------------------------------------------------------- //
-// *** derived from DiagramItemGroup (public)
-// -------------------------------------------------------- //
 
-bool DiagramBox::addItem(
-	DiagramItem *item)
+// derived from DiagramItemGroup (public)
+bool
+DiagramBox::addItem(DiagramItem *item)
 {
 	D_METHOD((&quot;DiagramBox::addItem()\n&quot;));
-	if (item)
-	{
-		if (DiagramItemGroup::addItem(item))
-		{
-			if (m_view)
-			{
+	if (item) {
+		if (DiagramItemGroup::addItem(item)) {
+			if (m_view) {
 				item-&gt;_setOwner(m_view);
 				item-&gt;attachedToDiagram();
 			}
@@ -60,15 +54,14 @@
 	return false;
 }
 
-bool DiagramBox::removeItem(
-	DiagramItem *item)
+
+bool
+DiagramBox::removeItem(DiagramItem *item)
 {
 	D_METHOD((&quot;DiagramBox::removeItem()\n&quot;));
-	if (item)
-	{
+	if (item) {
 		item-&gt;detachedFromDiagram();
-		if (DiagramItemGroup::removeItem(item))
-		{
+		if (DiagramItemGroup::removeItem(item)) {
 			item-&gt;_setOwner(0);
 			return true;
 		}
@@ -76,47 +69,36 @@
 	return false;
 }
 
-// -------------------------------------------------------- //
-// *** derived from DiagramItem (public)
-// -------------------------------------------------------- //
 
-void DiagramBox::draw(
-	BRect updateRect)
+// derived from DiagramItem (public)
+void
+DiagramBox::draw(BRect updateRect)
 {
 	D_DRAW((&quot;DiagramBox::draw()\n&quot;));
-	if (view())
-	{
+	if (view()) {
 		view()-&gt;PushState();
 		{
-			if (m_flags &amp; M_DRAW_UNDER_ENDPOINTS)
-			{
+			if (m_flags &amp; M_DRAW_UNDER_ENDPOINTS) {
 				BRegion region, clipping;
 				region.Include(frame());
 				if (group()-&gt;getClippingAbove(this, &amp;clipping))
 					region.Exclude(&amp;clipping);
 				view()-&gt;ConstrainClippingRegion(&amp;region);
 				drawBox();
-				for (int32 i = 0; i &lt; countItems(); i++)
-				{
+				for (int32 i = 0; i &lt; countItems(); i++) {
 					DiagramItem *item = itemAt(i);
 					if (region.Intersects(item-&gt;frame()))
-					{
 						item-&gt;draw(item-&gt;frame());
-					}
 				}
-			}
-			else
-			{
+			} else {
 				BRegion region, clipping;
 				region.Include(frame());
 				if (view()-&gt;getClippingAbove(this, &amp;clipping))
 					region.Exclude(&amp;clipping);
-				for (int32 i = 0; i &lt; countItems(); i++)
-				{
+				for (int32 i = 0; i &lt; countItems(); i++) {
 					DiagramItem *item = itemAt(i);
 					BRect r;
-					if (region.Intersects(r = item-&gt;frame()))
-					{
+					if (region.Intersects(r = item-&gt;frame())) {
 						item-&gt;draw(r);
 						region.Exclude(r);
 					}
@@ -129,36 +111,26 @@
 	}
 }
 
-void DiagramBox::mouseDown(
-	BPoint point,
-	uint32 buttons,
-	uint32 clicks)
+
+void
+DiagramBox::mouseDown(BPoint point, uint32 buttons, uint32 clicks)
 {
 	D_MOUSE((&quot;DiagramBox::mouseDown()\n&quot;));
 	DiagramItem *item = itemUnder(point);
 	if (item)
-	{
 		item-&gt;mouseDown(point, buttons, clicks);
-	}
-	else if (clicks == 1)
-	{
-		if (isSelectable())
-		{
+	else if (clicks == 1) {
+		if (isSelectable()) {
 			BMessage selectMsg(M_SELECTION_CHANGED);
 			if (modifiers() &amp; B_SHIFT_KEY)
-			{
 				selectMsg.AddBool(&quot;replace&quot;, false);
-			}
 			else
-			{
 				selectMsg.AddBool(&quot;replace&quot;, true);
-			}
 			selectMsg.AddPointer(&quot;item&quot;, reinterpret_cast&lt;void *&gt;(this));
 			DiagramView* v = view();
 			BMessenger(v).SendMessage(&amp;selectMsg);
 		}
-		if (isDraggable() &amp;&amp; (buttons == B_PRIMARY_MOUSE_BUTTON))
-		{
+		if (isDraggable() &amp;&amp; (buttons == B_PRIMARY_MOUSE_BUTTON)) {
 			BMessage dragMsg(M_BOX_DRAGGED);
 			dragMsg.AddPointer(&quot;item&quot;, static_cast&lt;void *&gt;(this));
 			dragMsg.AddPoint(&quot;offset&quot;, point - frame().LeftTop());
@@ -167,159 +139,114 @@
 	}
 }
 
-void DiagramBox::mouseOver(
-	BPoint point,
-	uint32 transit)
+
+void
+DiagramBox::mouseOver(BPoint point, uint32 transit)
 {
 	D_MOUSE((&quot;DiagramBox::mouseOver()\n&quot;));
 	DiagramItem *last = lastItemUnder();
-	if (last &amp;&amp; (transit == B_EXITED_VIEW))
-	{
+	if (last &amp;&amp; (transit == B_EXITED_VIEW)) {
 		last-&gt;mouseOver(point, B_EXITED_VIEW);
 		resetItemUnder();
-	}
-	else
-	{
+	} else {
 		DiagramItem *item = itemUnder(point);
-		if (item)
-		{
-			if (item != last)
-			{
+		if (item) {
+			if (item != last) {
 				if (last)
 					last-&gt;mouseOver(point, B_EXITED_VIEW);
 				item-&gt;mouseOver(point, B_ENTERED_VIEW);
-			}
-			else
-			{
+			} else
 				item-&gt;mouseOver(point, B_INSIDE_VIEW);
-			}
 		}
 		else if (last)
-		{
 			last-&gt;mouseOver(point, B_EXITED_VIEW);
-		}
 	}
 }
 
-void DiagramBox::messageDragged(
-	BPoint point,
-	uint32 transit,
-	const BMessage *message)
+
+void
+DiagramBox::messageDragged(BPoint point, uint32 transit, const BMessage *message)
 {
 	D_MOUSE((&quot;DiagramBox::messageDragged()\n&quot;));
 	DiagramItem *last = lastItemUnder();
-	if (last &amp;&amp; (transit == B_EXITED_VIEW))
-	{
+	if (last &amp;&amp; (transit == B_EXITED_VIEW)) {
 		last-&gt;messageDragged(point, B_EXITED_VIEW, message);
 		resetItemUnder();
-	}
-	else
-	{
+	} else {
 		DiagramItem *item = itemUnder(point);
-		if (item)
-		{
-			if (item != last)
-			{
+		if (item) {
+			if (item != last) {
 				if (last)
-				{
 					last-&gt;messageDragged(point, B_EXITED_VIEW, message);
-				}
 				item-&gt;messageDragged(point, B_ENTERED_VIEW, message);
-			}
-			else
-			{
+			} else
 				item-&gt;messageDragged(point, B_INSIDE_VIEW, message);
-			}
 			return;
-		}
-		else if (last)
-		{
+		} else if (last)
 			last-&gt;messageDragged(point, B_EXITED_VIEW, message);
-		}
 		if (message-&gt;what == M_WIRE_DRAGGED)
-		{
 			view()-&gt;trackWire(point);
-		}
 	}
 }
 
-void DiagramBox::messageDropped(
-	BPoint point,
-	BMessage *message)
+
+void
+DiagramBox::messageDropped(BPoint point, BMessage *message)
 {
 	D_METHOD((&quot;DiagramBox::messageDropped()\n&quot;));
 	DiagramItem *item = itemUnder(point);
-	if (item)
-	{
+	if (item) {
 		item-&gt;messageDropped(point, message);
 		return;
 	}
 }
 
-// -------------------------------------------------------- //
-// *** operations (public)
-// -------------------------------------------------------- //
 
-void DiagramBox::moveBy(
-	float x,
-	float y,
-	BRegion *wireRegion)
+// operations (public)
+void
+DiagramBox::moveBy(float x, float y, BRegion *wireRegion)
 {
 	D_METHOD((&quot;DiagramBox::moveBy()\n&quot;));
-	if (view())
-	{
+	if (view()) {
 		view()-&gt;PushState();
 		{
-			for (int32 i = 0; i &lt; countItems(); i++)
-			{
+			for (int32 i = 0; i &lt; countItems(); i++) {
 				DiagramEndPoint *endPoint = dynamic_cast&lt;DiagramEndPoint *&gt;(itemAt(i));
 				if (endPoint)
-				{
 					endPoint-&gt;moveBy(x, y, wireRegion);
-				}
 			}
-			if (wireRegion)
-			{
+			if (wireRegion) {
 				wireRegion-&gt;Include(m_frame);
 				m_frame.OffsetBy(x, y);
 				wireRegion-&gt;Include(m_frame);
 			}
 			else
-			{
 				m_frame.OffsetBy(x, y);
-			}
 		}
 		view()-&gt;PopState();
 	}
 }
 
-void DiagramBox::resizeBy(
-	float horizontal,
-	float vertical)
+
+void
+DiagramBox::resizeBy(float horizontal, float vertical)
 {
 	D_METHOD((&quot;DiagramBox::resizeBy()\n&quot;));
 	m_frame.right += horizontal;
 	m_frame.bottom += vertical;
 }
 
-// -------------------------------------------------------- //
-// *** internal operations (private)
-// -------------------------------------------------------- //
 
-void DiagramBox::_setOwner(
-	DiagramView *owner)
+// internal operations (private)
+void
+DiagramBox::_setOwner(DiagramView *owner)
 {
 	D_METHOD((&quot;DiagramBox::_setOwner()\n&quot;));
 	m_view = owner;
-	for (int32 i = 0; i &lt; countItems(DiagramItem::M_ENDPOINT); i++)
-	{
+	for (int32 i = 0; i &lt; countItems(DiagramItem::M_ENDPOINT); i++) {
 		DiagramItem *item = itemAt(i);
 		item-&gt;_setOwner(m_view);
 		if (m_view)
-		{
 			item-&gt;attachedToDiagram();
-		}
 	}
 }
-
-// END -- DiagramBox.cpp --

Modified: haiku/trunk/src/apps/cortex/DiagramView/DiagramBox.h
===================================================================
--- haiku/trunk/src/apps/cortex/DiagramView/DiagramBox.h	2007-04-28 10:56:19 UTC (rev 20879)
+++ haiku/trunk/src/apps/cortex/DiagramView/DiagramBox.h	2007-04-28 12:05:46 UTC (rev 20880)
@@ -8,123 +8,95 @@
 // * HISTORY
 //   c.lenz		25sep99		Begun
 //
+#ifndef DIAGRAM_BOX_H
+#define DIAGRAM_BOX_H
 
-#ifndef __DiagramBox_H__
-#define __DiagramBox_H__
+#include &quot;cortex_defs.h&quot;
+#include &quot;DiagramItem.h&quot;
+#include &quot;DiagramItemGroup.h&quot;
 
 #include &lt;Region.h&gt;
 #include &lt;Window.h&gt;
 
-#include &quot;DiagramItem.h&quot;
-#include &quot;DiagramItemGroup.h&quot;
 
-#include &quot;cortex_defs.h&quot;
 __BEGIN_CORTEX_NAMESPACE
 
-class DiagramBox : public DiagramItem,
-				   public DiagramItemGroup
-{
 
-public:					// *** flags
+class DiagramBox : public DiagramItem, public DiagramItemGroup {
+	public:	// flags
 
-	enum flag_t
-	{
-		M_DRAW_UNDER_ENDPOINTS = 0x1
-	};
+		enum flag_t {
+			M_DRAW_UNDER_ENDPOINTS = 0x1
+		};
 
-public:					// *** ctor/dtor
+	public:
+		DiagramBox(BRect frame, uint32 flags = 0);
+		virtual ~DiagramBox();
 
-						DiagramBox(
-							BRect frame,
-							uint32 flags = 0);
+	public:	// hook functions
+		// is called from draw() to do the actual drawing
+		virtual void drawBox() = 0;
 
-	virtual				~DiagramBox();
+	public:	// derived from DiagramItemGroup
 
-public:					// *** hook functions
+		// extends the DiagramItemGroup implementation by setting
+		// the items owner and calling the attachedToDiagram() hook
+		// on it
+		virtual bool addItem(DiagramItem *item);
 
-	// is called from draw() to do the actual drawing
-	virtual void		drawBox() = 0;
+		// extends the DiagramItemGroup implementation by calling 
+		// the detachedToDiagram() hook on the item
+		virtual bool removeItem(DiagramItem *item);
 
-public:					// ** derived from DiagramItemGroup
+	public:	// derived from DiagramItem
 
-	// extends the DiagramItemGroup implementation by setting
-	// the items owner and calling the attachedToDiagram() hook
-	// on it
-	virtual bool		addItem(
-							DiagramItem *item);
+		// returns the Boxes frame rectangle
+		BRect frame() const { return m_frame; }
 
-	// extends the DiagramItemGroup implementation by calling 
-	// the detachedToDiagram() hook on the item
-	virtual bool		removeItem(
-							DiagramItem *item);
+		// prepares the drawing stack and clipping region, then
+		// calls drawBox
+		void draw(BRect updateRect);
 
-public:					// *** derived from DiagramItem
+		// is called from the parent DiagramViews MouseDown() implementation 
+		// if the Box was hit; this version initiates selection and dragging
+		virtual void mouseDown(BPoint point, uint32 buttons, uint32 clicks);
 
-	// returns the Boxes frame rectangle
-	BRect				frame() const
-						{ return m_frame; }
-
-	// prepares the drawing stack and clipping region, then
-	// calls drawBox
-	void				draw(
-							BRect updateRect);
-
-	// is called from the parent DiagramViews MouseDown() implementation 
-	// if the Box was hit; this version initiates selection and dragging
-	virtual void		mouseDown(
-							BPoint point,
-							uint32 buttons,
-							uint32 clicks);
-
-	// is called from the DiagramViews MouseMoved() when no message is being 
-	// dragged, but the mouse has moved above the box
-	virtual void		mouseOver(
-							BPoint point,
-							uint32 transit);
+		// is called from the DiagramViews MouseMoved() when no message is being 
+		// dragged, but the mouse has moved above the box
+		virtual void mouseOver(BPoint point, uint32 transit);
 		
-	// is called from the DiagramViews MouseMoved() when a message is being 
-	// dragged over the DiagramBox
-	virtual void		messageDragged(
-							BPoint point,
-							uint32 transit,
-							const BMessage *message);
+		// is called from the DiagramViews MouseMoved() when a message is being 
+		// dragged over the DiagramBox
+		virtual void messageDragged(BPoint point, uint32 transit, const BMessage *message);
 
-	// is called from the DiagramViews MessageReceived() function when a 
-	// message has been dropped on the DiagramBox
-	virtual void		messageDropped(
-							BPoint point,
-							BMessage *message);
+		// is called from the DiagramViews MessageReceived() function when a 
+		// message has been dropped on the DiagramBox
+		virtual void messageDropped(BPoint point, BMessage *message);
 
-public:					// *** operations
+	public:	// operations
 
-	// moves the box by a given amount, and returns in updateRegion the
-	// frames of wires impacted by the move
-	void				moveBy(
-							float x,
-							float y,
-							BRegion *updateRegion);
+		// moves the box by a given amount, and returns in updateRegion the
+		// frames of wires impacted by the move
+		void moveBy(float x, float y, BRegion *updateRegion);
 
-	// resizes the boxes frame without doing any updating		
-	virtual void		resizeBy(
-							float horizontal,
-							float vertical);
+		// resizes the boxes frame without doing any updating		
+		virtual void resizeBy(float horizontal, float vertical);
 
-private:				// *** internal methods
+	<A HREF="private://">private://</A> internal methods
 
-	// is called by the DiagramView when added
-	void				_setOwner(
-							DiagramView *owner);
+		// is called by the DiagramView when added
+		void _setOwner(DiagramView *owner);
 
-private:				// *** data
-
+	private:
+	
 		// the boxes' frame rectangle
-		BRect				m_frame;
+		BRect m_frame;
 
 		// flags:
 		// 	M_DRAW_UNDER_ENDPOINTS -  don't remove EndPoint frames from
 		//							the clipping region
-		uint32				m_flags;
+		uint32 m_flags;
 };
 
 __END_CORTEX_NAMESPACE
-#endif /* __DiagramBox_H__ */
+#endif	// DIAGRAM_BOX_H

Modified: haiku/trunk/src/apps/cortex/DiagramView/DiagramDefs.h
===================================================================
--- haiku/trunk/src/apps/cortex/DiagramView/DiagramDefs.h	2007-04-28 10:56:19 UTC (rev 20879)
+++ haiku/trunk/src/apps/cortex/DiagramView/DiagramDefs.h	2007-04-28 12:05:46 UTC (rev 20880)
@@ -7,10 +7,9 @@
 // * HISTORY
 //   c.lenz		25sep99		Begun
 //
+#ifndef DIAGRAM_DEFS_H
+#define DIAGRAM_DEFS_H
 
-#ifndef __DiagramDefs_H__
-#define __DiagramDefs_H__
-
 #include &quot;cortex_defs.h&quot;
 __BEGIN_CORTEX_NAMESPACE
 
@@ -43,4 +42,4 @@
 };
 
 __END_CORTEX_NAMESPACE
-#endif /* __DiagramDefs_H__ */
+#endif	// DIAGRAM_DEFS_H

Modified: haiku/trunk/src/apps/cortex/ValControl/NumericValControl.cpp
===================================================================
--- haiku/trunk/src/apps/cortex/ValControl/NumericValControl.cpp	2007-04-28 10:56:19 UTC (rev 20879)
+++ haiku/trunk/src/apps/cortex/ValControl/NumericValControl.cpp	2007-04-28 12:05:46 UTC (rev 20880)
@@ -1,6 +1,7 @@
 // NumericValControl.cpp
 // e.moon 30jan99
 
+
 #include &quot;NumericValControl.h&quot;
 #include &quot;ValControlDigitSegment.h&quot;
 #include &quot;ValCtrlLayoutEntry.h&quot;
@@ -15,30 +16,18 @@
 
 __USE_CORTEX_NAMESPACE
 
-// ---------------------------------------------------------------- //
-// ctor/dtor/accessors
-// ---------------------------------------------------------------- //
 
-// parameter-linked ctor
-NumericValControl::NumericValControl(
-	BRect												frame,
-	const char*									name,
-	BContinuousParameter*				param,
-	uint16											wholeDigits,
-	uint16											fractionalDigits,
-	align_mode									alignMode,
-	align_flags									alignFlags) :
+NumericValControl::NumericValControl(BRect frame, const char* name, BContinuousParameter* param,
+	uint16 wholeDigits, uint16 fractionalDigits, align_mode alignMode, align_flags alignFlags)
+	: ValControl(frame, name, 0, 0, alignMode, alignFlags, UPDATE_ASYNC, false),
+	fParam(param),
+	fWholeDigits(wholeDigits),
+	fFractionalDigits(fractionalDigits)
+{
 	
-	ValControl(frame, name, 0, 0, alignMode, alignFlags, UPDATE_ASYNC, false),
-	m_param(param),
-	m_wholeDigits(wholeDigits),
-	m_fractionalDigits(fractionalDigits) {
-	
 	// ensure that the parameter represents a continuous value
-	ASSERT(
-		m_param-&gt;ValueType() == B_FLOAT_TYPE ||
-		m_param-&gt;ValueType() == B_DOUBLE_TYPE 
-		
+	ASSERT(fParam-&gt;ValueType() == B_FLOAT_TYPE ||
+		fParam-&gt;ValueType() == B_DOUBLE_TYPE 		
 		/*||  unimplemented so far
 		m_pParam-&gt;ValueType() == B_INT8_TYPE ||
 		m_pParam-&gt;ValueType() == B_UINT8_TYPE ||
@@ -54,82 +43,83 @@
 	mediaParameterChanged();
 }
 
-NumericValControl::NumericValControl(
-	BRect												frame,
-	const char*									name,
-	BMessage*										message,
-	uint16											wholeDigits,
-	uint16											fractionalDigits,
-	bool												negativeVisible,
-	align_mode									alignMode,
-	align_flags									alignFlags) :
 
-	ValControl(frame, name, 0, message, alignMode, alignFlags, UPDATE_ASYNC, false),
-	m_wholeDigits(wholeDigits),
-	m_fractionalDigits(fractionalDigits),
-	m_param(0) {
-
-	setDefaultConstraints(negativeVisible);
+NumericValControl::NumericValControl(BRect frame, const char* name, BMessage* message,
+	uint16 wholeDigits, uint16 fractionalDigits, bool negativeVisible,
+	align_mode alignMode, align_flags alignFlags)
+	: ValControl(frame, name, 0, message, alignMode, alignFlags, UPDATE_ASYNC, false),
+	fParam(0),
+	fWholeDigits(wholeDigits),
+	fFractionalDigits(fractionalDigits)
+{
+	_SetDefaultConstraints(negativeVisible);
 	initSegments();
 }
 
-NumericValControl::~NumericValControl() {}
 
-BContinuousParameter* NumericValControl::param() const {
-	return m_param;
+NumericValControl::~NumericValControl()
+{
 }
 
-void NumericValControl::initSegments() {
-	// sanity check
-	ASSERT(m_wholeDigits);
+
+BContinuousParameter*
+NumericValControl::param() const
+{
+	return fParam;
+}
+
+
+void
+NumericValControl::initSegments()
+{
+	ASSERT(fWholeDigits);
 	
-	bool negativeVisible = m_minFixed &lt; 0.0;
+	bool negativeVisible = fMinFixed &lt; 0.0;
 
 	// *** SEGMENT DIVISION NEEDS TO BE CONFIGURABLE +++++
-// GOOD 23aug99
+	// GOOD 23aug99
 	// init segments:
-	add(
-		new ValControlDigitSegment(m_wholeDigits, 0, negativeVisible),
-		RIGHT_MOST);
+	add(new ValControlDigitSegment(fWholeDigits, 0, negativeVisible), RIGHT_MOST);
 
-	if(m_fractionalDigits)
+	if(fFractionalDigits)
 		add(ValCtrlLayoutEntry::decimalPoint, RIGHT_MOST);
 
-	for(int n = 0; n &lt; m_fractionalDigits; ++n)
-		add(
-			new ValControlDigitSegment(1, (-1)-n, false, ValControlDigitSegment::ZERO_FILL),
+	for (int n = 0; n &lt; fFractionalDigits; ++n)
+		add(new ValControlDigitSegment(1, (-1)-n, false, ValControlDigitSegment::ZERO_FILL),
 			RIGHT_MOST);
-//		add(new ValControlDigitSegment(m_fractionalDigits, -m_fractionalDigits,
+//		add(new ValControlDigitSegment(fFractionalDigits, -fFractionalDigits,
 //			false, ValControlDigitSegment::ZERO_FILL),
 //			RIGHT_MOST);
 //	}
 
 //	// +++++ individual-segment test
 //	
-//	for(int n = 0; n &lt; m_wholeDigits; ++n)
+//	for(int n = 0; n &lt; fWholeDigits; ++n)
 //		add(
-//			new ValControlDigitSegment(1, m_wholeDigits-n, bNegativeCapable),
+//			new ValControlDigitSegment(1, fWholeDigits-n, bNegativeCapable),
 //			RIGHT_MOST);
 //
-//	if(m_fractionalDigits)
+//	if(fFractionalDigits)
 //		add(ValCtrlLayoutEntry::decimalPoint, RIGHT_MOST);
 //		
-//	for(int n = 0; n &lt; m_fractionalDigits; ++n)
+//	for(int n = 0; n &lt; fFractionalDigits; ++n)
 //		add(
 //			new ValControlDigitSegment(1, (-1)-n, false, ValControlDigitSegment::ZERO_FILL),
 //			RIGHT_MOST);
 }
 
-void NumericValControl::initConstraintsFromParam() {
-	// +++++
-	ASSERT(m_param);
+
+void
+NumericValControl::initConstraintsFromParam()
+{
+	ASSERT(fParam);
 	
 	printf(&quot;NumericValControl::initConstraintsFromParam():\n  &quot;);
 	int r;
 	float fFactor;
 	float fOffset;
-	m_param-&gt;GetResponse(&amp;r, &amp;fFactor, &amp;fOffset);
-	switch(r) {
+	fParam-&gt;GetResponse(&amp;r, &amp;fFactor, &amp;fOffset);
+	switch (r) {
 		case BContinuousParameter::B_LINEAR:
 			printf(&quot;Linear&quot;);
 			break;
@@ -149,57 +139,57 @@
 		default:
 			printf(&quot;unknown (?)&quot;);
 	}
-	printf(&quot; response; factor %.2f, offset %.2f\n&quot;,
-		fFactor, fOffset);
-	
-	setConstraints(
-		m_param-&gt;MinValue(),
-		m_param-&gt;MaxValue());
+	printf(&quot; response; factor %.2f, offset %.2f\n&quot;, fFactor, fOffset);
 
+	setConstraints(fParam-&gt;MinValue(), fParam-&gt;MaxValue());
+
 	// step not yet supported +++++ 19sep99
 	//		
-	float fStep = m_param-&gt;ValueStep();
+	float fStep = fParam-&gt;ValueStep();
 	
-	printf(&quot;  min value: %f\n&quot;, m_param-&gt;MinValue());
-	printf(&quot;  max value: %f\n&quot;, m_param-&gt;MaxValue());
+	printf(&quot;  min value: %f\n&quot;, fParam-&gt;MinValue());
+	printf(&quot;  max value: %f\n&quot;, fParam-&gt;MaxValue());
 	printf(&quot;  value step: %f\n\n&quot;, fStep);
 }
 
-// value constraints (by default, the min/max allowed by the
+
+//! Value constraints (by default, the min/max allowed by the
 // setting of nWholeDigits, nFractionalDigits, and bNegativeCapable)
-void NumericValControl::getConstraints(
-	double*											outMinValue,
-	double*											outMaxValue) {
+void
+NumericValControl::getConstraints(double* outMinValue, double* outMaxValue)
+{
+	double factor = pow(10, -fFractionalDigits);
 
-	double factor = pow(10, -m_fractionalDigits);
-
-	*outMinValue = (double)m_minFixed * factor;
-	*outMaxValue = (double)m_maxFixed * factor;
+	*outMinValue = (double)fMinFixed * factor;
+	*outMaxValue = (double)fMaxFixed * factor;
 }
+
 	
-status_t NumericValControl::setConstraints(
-	double											minValue,
-	double											maxValue) {
-	
-	if(maxValue &lt; minValue)
+status_t
+NumericValControl::setConstraints(double minValue, double maxValue)
+{	
+	if (maxValue &lt; minValue)
 		return B_BAD_VALUE;
-	
-	double factor = pow(10, m_fractionalDigits);
 
-	m_minFixed = (minValue &lt; 0.0) ?
+	double factor = pow(10, fFractionalDigits);
+
+	fMinFixed = (minValue &lt; 0.0) ?
 		(int64)floor(minValue * factor) :
 		(int64)ceil(minValue * factor);
 	
-	m_maxFixed = (maxValue &lt; 0.0) ?
+	fMaxFixed = (maxValue &lt; 0.0) ?
 		(int64)floor(maxValue * factor) :
 		(int64)ceil(maxValue * factor);
 
 	return B_OK;
 }
 
-// fetches the current value (calculated on the spot from each
+
+//! Fetches the current value (calculated on the spot from each
 // segment.) 
-double NumericValControl::value() const {
+double
+NumericValControl::value() const
+{
 //	double acc = 0.0;
 //
 //	// walk segments, adding the value of each
@@ -229,25 +219,26 @@
 //	
 //	return acc;
 
-	double ret = (double)_value_fixed() / pow(10, m_fractionalDigits);
+	double ret = (double)_ValueFixed() / pow(10, fFractionalDigits);
 
 //	PRINT((
 //		&quot;### NumericValControl::value(): %.12f\n&quot;, ret));
 
 	return ret;
 }
+
 	
-// set the displayed value (and, if setParam is true, the
+//! Set the displayed value (and, if setParam is true, the
 // linked parameter.)  The value will be constrained if necessary.
-void NumericValControl::setValue(
-	double											value,
-	bool												setParam) {
+void
+NumericValControl::setValue(double value, bool setParam)
+{
 
 //	PRINT((
 //		&quot;### NumericValControl::setValue(%.12f)\n&quot;, value));
 
 	// round to displayed precision
-	double scaleFactor = pow(10, m_fractionalDigits);
+	double scaleFactor = pow(10, fFractionalDigits);
 
 	int64 fixed = (int64)(value * scaleFactor);
 	double junk = (value * scaleFactor) - (double)fixed;
@@ -255,11 +246,11 @@
 //	PRINT((
 //		&quot; :  junk == %.12f\n&quot;, junk));
 	
-	if(value &lt; 0.0) {
-		if(junk * scaleFactor &lt; 0.5)
+	if (value &lt; 0.0) {
+		if (junk * scaleFactor &lt; 0.5)
 			fixed--;
 	} else {
-		if(junk * scaleFactor &gt;= 0.5)
+		if (junk * scaleFactor &gt;= 0.5)
 			fixed++;
 	}
 	
@@ -268,13 +259,13 @@
 //	PRINT((
 //		&quot; -&gt; %.12f, %Ld\n&quot;, value, fixed));
 
-	_set_value_fixed(fixed);
+	_SetValueFixed(fixed);
 		
 	// notify target 
 	Invoke();
 
 	// set parameter
-	if(setParam &amp;&amp; m_param)
+	if (setParam &amp;&amp; fParam)
 		updateParameter(value);
 	
 	// +++++ redraw?
@@ -315,7 +306,7 @@
 //	m_dfValue = dfValue;
 //
 //	// set parameter
-//	if(bSetParam &amp;&amp; m_param)
+//	if(bSetParam &amp;&amp; fParam)
 //		updateParameter();
 //	
 //	// notify target (ugh.  what if the target called this? +++++)
@@ -345,19 +336,18 @@
 // 18sep99: new segment interface.  'offset' is given
 // in the segment's units.
 
-void NumericValControl::offsetSegmentValue(
-	ValControlDigitSegment*			segment,
-	int64												offset) {
+void
+NumericValControl::offsetSegmentValue(ValControlDigitSegment* segment,
+	int64 offset)
+{
 
 //	PRINT((
 //		&quot;### offsetSegmentValue(): %Ld\n&quot;,
 //		offset));
 		
-	int64 segmentFactor = (int64)pow(
-		10,
-		m_fractionalDigits + segment-&gt;scaleFactor());
+	int64 segmentFactor = (int64)pow(10, fFractionalDigits + segment-&gt;scaleFactor());
 
-	int64 value = _value_fixed();
+	int64 value = _ValueFixed();
 	
 	// cut values below domain of the changed segment
 	value /= segmentFactor;
@@ -368,44 +358,43 @@
 	// restore
 	value *= segmentFactor;
 	
-	_set_value_fixed(value);
+	_SetValueFixed(value);
 
 	// notify target 
 	Invoke();
 
-	if(m_param)
-		updateParameter(
-			(double)value * (double)segmentFactor);
+	if (fParam)
+		updateParameter((double)value * (double)segmentFactor);
 }
 
-// ---------------------------------------------------------------- //
-// hook implementations
-// ---------------------------------------------------------------- //
 
-void NumericValControl::mediaParameterChanged() {
-	
+void
+NumericValControl::mediaParameterChanged()
+{	
 	// fetch value
 	size_t nSize;
 	bigtime_t tLastChanged;
 	status_t err;
-	switch(m_param-&gt;ValueType()) {
-		case B_FLOAT_TYPE: { // +++++ left-channel hack
+	switch (fParam-&gt;ValueType()) {
+		case B_FLOAT_TYPE:
+		{	// +++++ left-channel hack
 			float fParamValue[4];
-			nSize = sizeof(float)*4;
+			nSize = sizeof(float) * 4;
 			// +++++ broken
-			err = m_param-&gt;GetValue((void*)&amp;fParamValue, &amp;nSize, &amp;tLastChanged);

[... truncated: 760 lines follow ...]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001887.html">[Haiku-commits] r20879 - haiku/trunk/src/tools/fs_shell
</A></li>
	<LI>Next message: <A HREF="001890.html">[Haiku-commits] r20881 - in haiku/trunk/src/apps/cortex:	DiagramView support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1889">[ date ]</a>
              <a href="thread.html#1889">[ thread ]</a>
              <a href="subject.html#1889">[ subject ]</a>
              <a href="author.html#1889">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/haiku-commits">More information about the Haiku-commits
mailing list</a><br>
</body></html>
